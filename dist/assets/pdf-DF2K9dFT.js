import{r as requireReact,g as getDefaultExportFromCjs,a as getAugmentedNamespace}from"./react-UnWXGYuj.js";function _mergeNamespaces(A,e){for(var y=0;y<e.length;y++){const i=e[y];if(typeof i!="string"&&!Array.isArray(i)){for(const d in i)if(d!=="default"&&!(d in A)){const C=Object.getOwnPropertyDescriptor(i,d);C&&Object.defineProperty(A,d,C.get?C:{enumerable:!0,get:()=>i[d]})}}}return Object.freeze(Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}))}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);function commonjsRequire(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(e,y){module.exports=e.pdfjsLib=y()})(globalThis,()=>(()=>{var __webpack_modules__=[,((A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=f,e.bytesToString=I,e.createValidAbsoluteUrl=v,e.getModificationDate=gt,e.getUuid=Tt,e.getVerbosityLevel=rt,e.info=J,e.isArrayBuffer=ut,e.isArrayEqual=_t,e.isNodeJS=void 0,e.normalizeUnicode=kt,e.objectFromMap=z,e.objectSize=it,e.setVerbosityLevel=tt,e.shadow=D,e.string32=X,e.stringToBytes=H,e.stringToPDFString=ct,e.stringToUTF8String=ht,e.unreachable=_,e.utf8StringToString=dt,e.warn=O;const y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=y;const i=[1,0,0,1,0,0];e.IDENTITY_MATRIX=i;const d=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=d;const C=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=C;const P=1.35;e.LINE_FACTOR=P;const B=.35;e.LINE_DESCENT_FACTOR=B;const M=B/P;e.BASELINE_FACTOR=M;const a={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=a;const t={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=t;const s="pdfjs_internal_editor_";e.AnnotationEditorPrefix=s;const h={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=h;const c={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=c;const n={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=n;const u={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=u;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=m;const l={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=l;const T={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=T;const k={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=k;const w={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=w;const g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=g;const E={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=E;const U={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=U;const W={O:"PageOpen",C:"PageClose"};e.PageActionEventType=W;const N={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=N;const q={NONE:0,BINARY:1};e.CMapCompressionType=q;const G={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=G;const st={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=st;let Z=N.WARNINGS;function tt(nt){Number.isInteger(nt)&&(Z=nt)}function rt(){return Z}function J(nt){Z>=N.INFOS&&console.log(`Info: ${nt}`)}function O(nt){Z>=N.WARNINGS&&console.log(`Warning: ${nt}`)}function _(nt){throw new Error(nt)}function f(nt,V){nt||_(V)}function p(nt){switch(nt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function v(nt,V=null,$=null){if(!nt)return null;try{if($&&typeof nt=="string"&&($.addDefaultProtocol&&nt.startsWith("www.")&&nt.match(/\./g)?.length>=2&&(nt=`http://${nt}`),$.tryConvertEncoding))try{nt=ht(nt)}catch{}const ot=V?new URL(nt,V):new URL(nt);if(p(ot))return ot}catch{}return null}function D(nt,V,$,ot=!1){return Object.defineProperty(nt,V,{value:$,enumerable:!ot,configurable:!0,writable:!1}),$}const L=(function(){function V($,ot){this.constructor===V&&_("Cannot initialize BaseException."),this.message=$,this.name=ot}return V.prototype=new Error,V.constructor=V,V})();e.BaseException=L;class j extends L{constructor(V,$){super(V,"PasswordException"),this.code=$}}e.PasswordException=j;class x extends L{constructor(V,$){super(V,"UnknownErrorException"),this.details=$}}e.UnknownErrorException=x;class o extends L{constructor(V){super(V,"InvalidPDFException")}}e.InvalidPDFException=o;class b extends L{constructor(V){super(V,"MissingPDFException")}}e.MissingPDFException=b;class S extends L{constructor(V,$){super(V,"UnexpectedResponseException"),this.status=$}}e.UnexpectedResponseException=S;class R extends L{constructor(V){super(V,"FormatError")}}e.FormatError=R;class F extends L{constructor(V){super(V,"AbortException")}}e.AbortException=F;function I(nt){(typeof nt!="object"||nt?.length===void 0)&&_("Invalid argument for bytesToString");const V=nt.length,$=8192;if(V<$)return String.fromCharCode.apply(null,nt);const ot=[];for(let ft=0;ft<V;ft+=$){const bt=Math.min(ft+$,V),yt=nt.subarray(ft,bt);ot.push(String.fromCharCode.apply(null,yt))}return ot.join("")}function H(nt){typeof nt!="string"&&_("Invalid argument for stringToBytes");const V=nt.length,$=new Uint8Array(V);for(let ot=0;ot<V;++ot)$[ot]=nt.charCodeAt(ot)&255;return $}function X(nt){return String.fromCharCode(nt>>24&255,nt>>16&255,nt>>8&255,nt&255)}function it(nt){return Object.keys(nt).length}function z(nt){const V=Object.create(null);for(const[$,ot]of nt)V[$]=ot;return V}function Y(){const nt=new Uint8Array(4);return nt[0]=1,new Uint32Array(nt.buffer,0,1)[0]===1}function K(){try{return new Function(""),!0}catch{return!1}}class Q{static get isLittleEndian(){return D(this,"isLittleEndian",Y())}static get isEvalSupported(){return D(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return D(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?D(this,"platform",{isWin:!1,isMac:!1}):D(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return D(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=Q;const et=[...Array(256).keys()].map(nt=>nt.toString(16).padStart(2,"0"));class at{static makeHexColor(V,$,ot){return`#${et[V]}${et[$]}${et[ot]}`}static scaleMinMax(V,$){let ot;V[0]?(V[0]<0&&(ot=$[0],$[0]=$[1],$[1]=ot),$[0]*=V[0],$[1]*=V[0],V[3]<0&&(ot=$[2],$[2]=$[3],$[3]=ot),$[2]*=V[3],$[3]*=V[3]):(ot=$[0],$[0]=$[2],$[2]=ot,ot=$[1],$[1]=$[3],$[3]=ot,V[1]<0&&(ot=$[2],$[2]=$[3],$[3]=ot),$[2]*=V[1],$[3]*=V[1],V[2]<0&&(ot=$[0],$[0]=$[1],$[1]=ot),$[0]*=V[2],$[1]*=V[2]),$[0]+=V[4],$[1]+=V[4],$[2]+=V[5],$[3]+=V[5]}static transform(V,$){return[V[0]*$[0]+V[2]*$[1],V[1]*$[0]+V[3]*$[1],V[0]*$[2]+V[2]*$[3],V[1]*$[2]+V[3]*$[3],V[0]*$[4]+V[2]*$[5]+V[4],V[1]*$[4]+V[3]*$[5]+V[5]]}static applyTransform(V,$){const ot=V[0]*$[0]+V[1]*$[2]+$[4],ft=V[0]*$[1]+V[1]*$[3]+$[5];return[ot,ft]}static applyInverseTransform(V,$){const ot=$[0]*$[3]-$[1]*$[2],ft=(V[0]*$[3]-V[1]*$[2]+$[2]*$[5]-$[4]*$[3])/ot,bt=(-V[0]*$[1]+V[1]*$[0]+$[4]*$[1]-$[5]*$[0])/ot;return[ft,bt]}static getAxialAlignedBoundingBox(V,$){const ot=this.applyTransform(V,$),ft=this.applyTransform(V.slice(2,4),$),bt=this.applyTransform([V[0],V[3]],$),yt=this.applyTransform([V[2],V[1]],$);return[Math.min(ot[0],ft[0],bt[0],yt[0]),Math.min(ot[1],ft[1],bt[1],yt[1]),Math.max(ot[0],ft[0],bt[0],yt[0]),Math.max(ot[1],ft[1],bt[1],yt[1])]}static inverseTransform(V){const $=V[0]*V[3]-V[1]*V[2];return[V[3]/$,-V[1]/$,-V[2]/$,V[0]/$,(V[2]*V[5]-V[4]*V[3])/$,(V[4]*V[1]-V[5]*V[0])/$]}static singularValueDecompose2dScale(V){const $=[V[0],V[2],V[1],V[3]],ot=V[0]*$[0]+V[1]*$[2],ft=V[0]*$[1]+V[1]*$[3],bt=V[2]*$[0]+V[3]*$[2],yt=V[2]*$[1]+V[3]*$[3],Ct=(ot+yt)/2,xt=Math.sqrt((ot+yt)**2-4*(ot*yt-bt*ft))/2,wt=Ct+xt||1,At=Ct-xt||1;return[Math.sqrt(wt),Math.sqrt(At)]}static normalizeRect(V){const $=V.slice(0);return V[0]>V[2]&&($[0]=V[2],$[2]=V[0]),V[1]>V[3]&&($[1]=V[3],$[3]=V[1]),$}static intersect(V,$){const ot=Math.max(Math.min(V[0],V[2]),Math.min($[0],$[2])),ft=Math.min(Math.max(V[0],V[2]),Math.max($[0],$[2]));if(ot>ft)return null;const bt=Math.max(Math.min(V[1],V[3]),Math.min($[1],$[3])),yt=Math.min(Math.max(V[1],V[3]),Math.max($[1],$[3]));return bt>yt?null:[ot,bt,ft,yt]}static bezierBoundingBox(V,$,ot,ft,bt,yt,Ct,xt){const wt=[],At=[[],[]];let Rt,Pt,Lt,pt,Ot,It,Nt,Bt;for(let jt=0;jt<2;++jt){if(jt===0?(Pt=6*V-12*ot+6*bt,Rt=-3*V+9*ot-9*bt+3*Ct,Lt=3*ot-3*V):(Pt=6*$-12*ft+6*yt,Rt=-3*$+9*ft-9*yt+3*xt,Lt=3*ft-3*$),Math.abs(Rt)<1e-12){if(Math.abs(Pt)<1e-12)continue;pt=-Lt/Pt,0<pt&&pt<1&&wt.push(pt);continue}Nt=Pt*Pt-4*Lt*Rt,Bt=Math.sqrt(Nt),!(Nt<0)&&(Ot=(-Pt+Bt)/(2*Rt),0<Ot&&Ot<1&&wt.push(Ot),It=(-Pt-Bt)/(2*Rt),0<It&&It<1&&wt.push(It))}let Mt=wt.length,vt;const Dt=Mt;for(;Mt--;)pt=wt[Mt],vt=1-pt,At[0][Mt]=vt*vt*vt*V+3*vt*vt*pt*ot+3*vt*pt*pt*bt+pt*pt*pt*Ct,At[1][Mt]=vt*vt*vt*$+3*vt*vt*pt*ft+3*vt*pt*pt*yt+pt*pt*pt*xt;return At[0][Dt]=V,At[1][Dt]=$,At[0][Dt+1]=Ct,At[1][Dt+1]=xt,At[0].length=At[1].length=Dt+2,[Math.min(...At[0]),Math.min(...At[1]),Math.max(...At[0]),Math.max(...At[1])]}}e.Util=at;const lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ct(nt){if(nt[0]>="ï"){let $;if(nt[0]==="þ"&&nt[1]==="ÿ"?$="utf-16be":nt[0]==="ÿ"&&nt[1]==="þ"?$="utf-16le":nt[0]==="ï"&&nt[1]==="»"&&nt[2]==="¿"&&($="utf-8"),$)try{const ot=new TextDecoder($,{fatal:!0}),ft=H(nt);return ot.decode(ft)}catch(ot){O(`stringToPDFString: "${ot}".`)}}const V=[];for(let $=0,ot=nt.length;$<ot;$++){const ft=lt[nt.charCodeAt($)];V.push(ft?String.fromCharCode(ft):nt.charAt($))}return V.join("")}function ht(nt){return decodeURIComponent(escape(nt))}function dt(nt){return unescape(encodeURIComponent(nt))}function ut(nt){return typeof nt=="object"&&nt?.byteLength!==void 0}function _t(nt,V){if(nt.length!==V.length)return!1;for(let $=0,ot=nt.length;$<ot;$++)if(nt[$]!==V[$])return!1;return!0}function gt(nt=new Date){return[nt.getUTCFullYear().toString(),(nt.getUTCMonth()+1).toString().padStart(2,"0"),nt.getUTCDate().toString().padStart(2,"0"),nt.getUTCHours().toString().padStart(2,"0"),nt.getUTCMinutes().toString().padStart(2,"0"),nt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Et{#t=!1;constructor(){this.promise=new Promise((V,$)=>{this.resolve=ot=>{this.#t=!0,V(ot)},this.reject=ot=>{this.#t=!0,$(ot)}})}get settled(){return this.#t}}e.PromiseCapability=Et;let mt=null,St=null;function kt(nt){return mt||(mt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,St=new Map([["ﬅ","ſt"]])),nt.replaceAll(mt,(V,$,ot)=>$?$.normalize("NFKC"):St.get(ot))}function Tt(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const nt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(nt);else for(let V=0;V<32;V++)nt[V]=Math.floor(Math.random()*255);return I(nt)}const Ft="pdfjs_internal_id_";e.AnnotationPrefix=Ft}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(A){if(typeof A=="string"||A instanceof URL?A={url:A}:(0,_util.isArrayBuffer)(A)&&(A={data:A}),typeof A!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!A.url&&!A.data&&!A.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:y}=e,i=A.url?getUrlProp(A.url):null,d=A.data?getDataProp(A.data):null,C=A.httpHeaders||null,P=A.withCredentials===!0,B=A.password??null,M=A.range instanceof PDFDataRangeTransport?A.range:null,a=Number.isInteger(A.rangeChunkSize)&&A.rangeChunkSize>0?A.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let t=A.worker instanceof PDFWorker?A.worker:null;const s=A.verbosity,h=typeof A.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(A.docBaseUrl)?A.docBaseUrl:null,c=typeof A.cMapUrl=="string"?A.cMapUrl:null,n=A.cMapPacked!==!1,u=A.CMapReaderFactory||DefaultCMapReaderFactory,m=typeof A.standardFontDataUrl=="string"?A.standardFontDataUrl:null,l=A.StandardFontDataFactory||DefaultStandardFontDataFactory,T=A.stopAtErrors!==!0,k=Number.isInteger(A.maxImageSize)&&A.maxImageSize>-1?A.maxImageSize:-1,w=A.isEvalSupported!==!1,g=typeof A.isOffscreenCanvasSupported=="boolean"?A.isOffscreenCanvasSupported:!_util.isNodeJS,E=Number.isInteger(A.canvasMaxAreaInBytes)?A.canvasMaxAreaInBytes:-1,U=typeof A.disableFontFace=="boolean"?A.disableFontFace:_util.isNodeJS,W=A.fontExtraProperties===!0,N=A.enableXfa===!0,q=A.ownerDocument||globalThis.document,G=A.disableRange===!0,st=A.disableStream===!0,Z=A.disableAutoFetch===!0,tt=A.pdfBug===!0,rt=M?M.length:A.length??NaN,J=typeof A.useSystemFonts=="boolean"?A.useSystemFonts:!_util.isNodeJS&&!U,O=typeof A.useWorkerFetch=="boolean"?A.useWorkerFetch:u===_display_utils.DOMCMapReaderFactory&&l===_display_utils.DOMStandardFontDataFactory&&c&&m&&(0,_display_utils.isValidFetchUrl)(c,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI),_=A.canvasFactory||new DefaultCanvasFactory({ownerDocument:q}),f=A.filterFactory||new DefaultFilterFactory({docId:y,ownerDocument:q}),p=null;(0,_util.setVerbosityLevel)(s);const v={canvasFactory:_,filterFactory:f};if(O||(v.cMapReaderFactory=new u({baseUrl:c,isCompressed:n}),v.standardFontDataFactory=new l({baseUrl:m})),!t){const j={verbosity:s,port:_worker_options.GlobalWorkerOptions.workerPort};t=j.port?PDFWorker.fromPort(j):new PDFWorker(j),e._worker=t}const D={docId:y,apiVersion:"3.11.174",data:d,password:B,disableAutoFetch:Z,rangeChunkSize:a,length:rt,docBaseUrl:h,enableXfa:N,evaluatorOptions:{maxImageSize:k,disableFontFace:U,ignoreErrors:T,isEvalSupported:w,isOffscreenCanvasSupported:g,canvasMaxAreaInBytes:E,fontExtraProperties:W,useSystemFonts:J,cMapUrl:O?c:null,standardFontDataUrl:O?m:null}},L={ignoreErrors:T,isEvalSupported:w,disableFontFace:U,fontExtraProperties:W,enableXfa:N,ownerDocument:q,disableAutoFetch:Z,pdfBug:tt,styleElement:p};return t.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const j=_fetchDocument(t,D),x=new Promise(function(o){let b;M?b=new _transport_stream.PDFDataTransportStream({length:rt,initialData:M.initialData,progressiveDone:M.progressiveDone,contentDispositionFilename:M.contentDispositionFilename,disableRange:G,disableStream:st},M):d||(b=(R=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(R):(0,_display_utils.isValidFetchUrl)(R.url)?new _displayFetch_stream.PDFFetchStream(R):new _displayNetwork.PDFNetworkStream(R))({url:i,length:rt,httpHeaders:C,withCredentials:P,rangeChunkSize:a,disableRange:G,disableStream:st})),o(b)});return Promise.all([j,x]).then(function([o,b]){if(e.destroyed)throw new Error("Loading aborted");const S=new _message_handler.MessageHandler(y,o,t.port),R=new WorkerTransport(S,e,b,L,v);e._transport=R,S.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(A,e){if(A.destroyed)throw new Error("Worker was destroyed");const y=await A.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(A.destroyed)throw new Error("Worker was destroyed");return y}function getUrlProp(A){if(A instanceof URL)return A.href;try{return new URL(A,window.location).href}catch{if(_util.isNodeJS&&typeof A=="string")return A}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(A){if(_util.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)return A;if(typeof A=="string")return(0,_util.stringToBytes)(A);if(typeof A=="object"&&!isNaN(A?.length)||(0,_util.isArrayBuffer)(A))return new Uint8Array(A);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,y,i=!1,d=null){this.length=e,this.initialData=y,this.progressiveDone=i,this.contentDispositionFilename=d,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,y){for(const i of this._rangeListeners)i(e,y)}onDataProgress(e,y){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,y)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const y of this._progressiveReadListeners)y(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,y){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,y){this._pdfInfo=e,this._transport=y,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(i=>{if(!i)return i;const d=[];for(const C in i)d.push(...i[C]);return d}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(e,y,i,d=!1){this._pageIndex=e,this._pageInfo=y,this._transport=i,this._stats=d?new _display_utils.StatTimer:null,this._pdfBug=d,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:y=this.rotate,offsetX:i=0,offsetY:d=0,dontFlip:C=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:y,offsetX:i,offsetY:d,dontFlip:C})}getAnnotations({intent:e="display"}={}){const y=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,y.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:y,intent:i="display",annotationMode:d=_util.AnnotationMode.ENABLE,transform:C=null,background:P=null,optionalContentConfigPromise:B=null,annotationCanvasMap:M=null,pageColors:a=null,printAnnotationStorage:t=null}){this._stats?.time("Overall");const s=this._transport.getRenderingIntent(i,d,t);this.#e=!1,this.#s(),B||(B=this._transport.getOptionalContentConfig());let h=this._intentStates.get(s.cacheKey);h||(h=Object.create(null),this._intentStates.set(s.cacheKey,h)),h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null);const c=!!(s.renderingIntent&_util.RenderingIntentFlag.PRINT);h.displayReadyCapability||(h.displayReadyCapability=new _util.PromiseCapability,h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s));const n=l=>{h.renderTasks.delete(u),(this._maybeCleanupAfterRender||c)&&(this.#e=!0),this.#n(!c),l?(u.capability.reject(l),this._abortOperatorList({intentState:h,reason:l instanceof Error?l:new Error(l)})):u.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},u=new InternalRenderTask({callback:n,params:{canvasContext:e,viewport:y,transform:C,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:M,operatorList:h.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!c,pdfBug:this._pdfBug,pageColors:a});(h.renderTasks||=new Set).add(u);const m=u.task;return Promise.all([h.displayReadyCapability.promise,B]).then(([l,T])=>{if(this.destroyed){n();return}this._stats?.time("Rendering"),u.initializeGraphics({transparency:l,optionalContentConfig:T}),u.operatorListChanged()}).catch(n),m}getOperatorList({intent:e="display",annotationMode:y=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){function d(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(B))}const C=this._transport.getRenderingIntent(e,y,i,!0);let P=this._intentStates.get(C.cacheKey);P||(P=Object.create(null),this._intentStates.set(C.cacheKey,P));let B;return P.opListReadCapability||(B=Object.create(null),B.operatorListChanged=d,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||=new Set).add(B),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(C)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:y=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:y===!0},{highWaterMark:100,size(d){return d.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const y=this.streamTextContent(e);return new Promise(function(i,d){function C(){P.read().then(function({value:M,done:a}){if(a){i(B);return}Object.assign(B.styles,M.styles),B.items.push(...M.items),C()},d)}const P=y.getReader(),B={items:[],styles:Object.create(null)};C()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const y of this._intentStates.values())if(this._abortOperatorList({intentState:y,reason:new Error("Page was destroyed."),force:!0}),!y.opListReadCapability)for(const i of y.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#s(),Promise.all(e)}cleanup(e=!1){this.#e=!0;const y=this.#n(!1);return e&&y&&(this._stats&&=new _display_utils.StatTimer),y}#n(e=!1){if(this.#s(),!this.#e||this.destroyed)return!1;if(e)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:y,operatorList:i}of this._intentStates.values())if(y.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#s(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(e,y){const i=this._intentStates.get(y);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,y){for(let i=0,d=e.length;i<d;i++)y.operatorList.fnArray.push(e.fnArray[i]),y.operatorList.argsArray.push(e.argsArray[i]);y.operatorList.lastChunk=e.lastChunk,y.operatorList.separateAnnots=e.separateAnnots;for(const i of y.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:y,annotationStorageSerializable:i}){const{map:d,transfers:C}=i,B=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:y,annotationStorage:d},C).getReader(),M=this._intentStates.get(y);M.streamReader=B;const a=()=>{B.read().then(({value:t,done:s})=>{if(s){M.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,M),a())},t=>{if(M.streamReader=null,!this._transport.destroyed){if(M.operatorList){M.operatorList.lastChunk=!0;for(const s of M.renderTasks)s.operatorListChanged();this.#n(!0)}if(M.displayReadyCapability)M.displayReadyCapability.reject(t);else if(M.opListReadCapability)M.opListReadCapability.reject(t);else throw t}})};a()}_abortOperatorList({intentState:e,reason:y,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(y instanceof _display_utils.RenderingCancelledException){let d=RENDERING_CANCELLED_TIMEOUT;y.extraDelay>0&&y.extraDelay<1e3&&(d+=y.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:y,force:!0})},d);return}}if(e.streamReader.cancel(new _util.AbortException(y.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[d,C]of this._intentStates)if(C===e){this._intentStates.delete(d);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(e,y){const i={data:structuredClone(e,y?{transfer:y}:null)};this.#e.then(()=>{for(const d of this.#t)d.call(this,i)})}addEventListener(e,y){this.#t.add(y)}removeEventListener(e,y){this.#t.delete(y)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const A=document?.currentScript?.src;A&&(PDFWorkerUtil.fallbackWorkerSrc=A.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(A,e){let y;try{if(y=new URL(A),!y.origin||y.origin==="null")return!1}catch{return!1}const i=new URL(e,y);return y.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(A){const e=`importScripts("${A}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:A=null,port:e=null,verbosity:y=(0,_util.getVerbosityLevel)()}={}){if(this.name=A,this.destroyed=!1,this.verbosity=y,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(A){this._port=A,this._messageHandler=new _message_handler.MessageHandler("main","worker",A),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:A}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,A)||(A=PDFWorkerUtil.createCDNWrapper(new URL(A,window.location).href));const e=new Worker(A),y=new _message_handler.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",d),y.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},d=()=>{this._webWorker||i()};e.addEventListener("error",d),y.on("test",P=>{if(e.removeEventListener("error",d),this.destroyed){i();return}P?(this._messageHandler=y,this._port=e,this._webWorker=e,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),y.destroy(),e.terminate())}),y.on("ready",P=>{if(e.removeEventListener("error",d),this.destroyed){i();return}try{C()}catch{this._setupFakeWorker()}});const C=()=>{const P=new Uint8Array;y.send("test",P,[P.buffer])};C();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(A=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const y=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(y+"_worker",y,e);A.setup(i,e);const d=new _message_handler.MessageHandler(y,y+"_worker",e);this._messageHandler=d,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})}).catch(A=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${A.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(A){if(!A?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#workerPorts?.get(A.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(A)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#s=null;constructor(e,y,i,d,C){this.messageHandler=e,this.loadingTask=y,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:d.ownerDocument,styleElement:d.styleElement}),this._params=d,this.canvasFactory=C.canvasFactory,this.filterFactory=C.filterFactory,this.cMapReaderFactory=C.cMapReaderFactory,this.standardFontDataFactory=C.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(e,y=null){const i=this.#t.get(e);if(i)return i;const d=this.messageHandler.sendWithPromise(e,y);return this.#t.set(e,d),d}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,y=_util.AnnotationMode.ENABLE,i=null,d=!1){let C=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(e){case"any":C=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":C=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(y){case _util.AnnotationMode.DISABLE:C+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:C+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:C+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(C&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${y}`)}return d&&(C+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:C,cacheKey:`${C}_${P.hash}`,annotationStorageSerializable:P}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#e.values())e.push(i._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const y=this.messageHandler.sendWithPromise("Terminate",null);return e.push(y),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:y}=this;e.on("GetReader",(i,d)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=C=>{this._lastProgress={loaded:C.loaded,total:C.total}},d.onPull=()=>{this._fullReader.read().then(function({value:C,done:P}){if(P){d.close();return}(0,_util.assert)(C instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{d.error(C)})},d.onCancel=C=>{this._fullReader.cancel(C),d.ready.catch(P=>{if(!this.destroyed)throw P})}}),e.on("ReaderHeadersReady",i=>{const d=new _util.PromiseCapability,C=this._fullReader;return C.headersReady.then(()=>{(!C.isStreamingSupported||!C.isRangeSupported)&&(this._lastProgress&&y.onProgress?.(this._lastProgress),C.onProgress=P=>{y.onProgress?.({loaded:P.loaded,total:P.total})}),d.resolve({isStreamingSupported:C.isStreamingSupported,isRangeSupported:C.isRangeSupported,contentLength:C.contentLength})},d.reject),d.promise}),e.on("GetRangeReader",(i,d)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const C=this._networkStream.getRangeReader(i.begin,i.end);if(!C){d.close();return}d.onPull=()=>{C.read().then(function({value:P,done:B}){if(B){d.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{d.error(P)})},d.onCancel=P=>{C.cancel(P),d.ready.catch(B=>{if(!this.destroyed)throw B})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,y._capability.resolve(new PDFDocumentProxy(i,this))}),e.on("DocException",function(i){let d;switch(i.name){case"PasswordException":d=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":d=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":d=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":d=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":d=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}y._capability.reject(d)}),e.on("PasswordRequest",i=>{if(this.#s=new _util.PromiseCapability,y.onPassword){const d=C=>{C instanceof Error?this.#s.reject(C):this.#s.resolve({password:C})};try{y.onPassword(d,i.code)}catch(C){this.#s.reject(C)}}else this.#s.reject(new _util.PasswordException(i.message,i.code));return this.#s.promise}),e.on("DataLoaded",i=>{y.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,d,C])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(d){case"Font":const P=this._params;if("error"in C){const a=C.error;(0,_util.warn)(`Error during font loading: ${a}`),this.commonObjs.resolve(i,a);break}const B=P.pdfBug&&globalThis.FontInspector?.enabled?(a,t)=>globalThis.FontInspector.fontAdded(a,t):null,M=new _font_loader.FontFaceObject(C,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,inspectFont:B});this.fontLoader.bind(M).catch(a=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!P.fontExtraProperties&&M.data&&(M.data=null),this.commonObjs.resolve(i,M)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,C);break;default:throw new Error(`Got unknown common object type ${d}`)}}),e.on("obj",([i,d,C,P])=>{if(this.destroyed)return;const B=this.#e.get(d);if(!B.objs.has(i))switch(C){case"Image":if(B.objs.resolve(i,P),P){let M;if(P.bitmap){const{width:a,height:t}=P;M=a*t*4}else M=P.data?.length||0;M>_util.MAX_IMAGE_SIZE_TO_CACHE&&(B._maybeCleanupAfterRender=!0)}break;case"Pattern":B.objs.resolve(i,P);break;default:throw new Error(`Got unknown object type ${C}`)}}),e.on("DocProgress",i=>{this.destroyed||y.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:y}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},y).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const y=e-1,i=this.#n.get(y);if(i)return i;const d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:y}).then(C=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(y,C,this,this._params.pdfBug);return this.#e.set(y,P),P});return this.#n.set(y,d),d}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,y){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:y})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",y=this.#t.get(e);if(y)return y;const i=this.messageHandler.sendWithPromise(e,null).then(d=>({info:d[0],metadata:d[1]?new _metadata.Metadata(d[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const y of this.#e.values())if(!y.cleanup())throw new Error(`startCleanup: Page ${y.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:y}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:y})}}class PDFObjects{#t=Object.create(null);#e(e){return this.#t[e]||={capability:new _util.PromiseCapability,data:null}}get(e,y=null){if(y){const d=this.#e(e);return d.capability.promise.then(()=>y(d.data)),null}const i=this.#t[e];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){return this.#t[e]?.capability.settled||!1}resolve(e,y=null){const i=this.#e(e);i.data=y,i.capability.resolve()}clear(){for(const e in this.#t){const{data:y}=this.#t[e];y?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(e){this.#t=e,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(e=0){this.#t.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#t.operatorList;if(!e)return!1;const{annotationCanvasMap:y}=this.#t;return e.form||e.canvas&&y?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:e,params:y,objs:i,commonObjs:d,annotationCanvasMap:C,operatorList:P,pageIndex:B,canvasFactory:M,filterFactory:a,useRequestAnimationFrame:t=!1,pdfBug:s=!1,pageColors:h=null}){this.callback=e,this.params=y,this.objs=i,this.commonObjs=d,this.annotationCanvasMap=C,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=B,this.canvasFactory=M,this.filterFactory=a,this._pdfBug=s,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=t===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=y.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:y}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:d,transform:C,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:y},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:C,viewport:d,transparency:e,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,y=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,y))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=y(1),d=y(4),C=y(8);const P=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=P;class B{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,s){const h=this.#e.get(t);return h===void 0?s:Object.assign(s,h)}getRawValue(t){return this.#e.get(t)}remove(t){if(this.#e.delete(t),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of this.#e.values())if(s instanceof d.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,s){const h=this.#e.get(t);let c=!1;if(h!==void 0)for(const[n,u]of Object.entries(s))h[n]!==u&&(c=!0,h[n]=u);else c=!0,this.#e.set(t,s);c&&this.#n(),s instanceof d.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(t){return this.#e.has(t)}getAll(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}setAll(t){for(const[s,h]of Object.entries(t))this.setValue(s,h)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(this.#e.size===0)return P;const t=new Map,s=new C.MurmurHash3_64,h=[],c=Object.create(null);let n=!1;for(const[u,m]of this.#e){const l=m instanceof d.AnnotationEditor?m.serialize(!1,c):m;l&&(t.set(u,l),s.update(`${u}:${JSON.stringify(l)}`),n||=!!l.bitmap)}if(n)for(const u of t.values())u.bitmap&&h.push(u.bitmap);return t.size>0?{map:t,hash:s.hexdigest(),transfers:h}:P}}e.AnnotationStorage=B;class M extends B{#t;constructor(t){super();const{map:s,hash:h,transfers:c}=t.serializable,n=structuredClone(s,c?{transfer:c}:null);this.#t={map:n,hash:h,transfers:c}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}e.PrintAnnotationStorage=M}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=y(5),d=y(1),C=y(6);class P{#t="";#e=!1;#n=null;#s=null;#o=null;#a=!1;#r=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#u=!1;#p=P._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(a){this.constructor===P&&(0,d.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:h,pageX:c,pageY:n}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,h],this.pageTranslation=[c,n];const[u,m]=this.parentDimensions;this.x=a.x/u,this.y=a.y/m,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,d.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const t=new B({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});t.annotationElementId=a.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(a,t=null){if(P._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(h=>[h,a.get(h)])),t?.strings)for(const h of t.strings)P._l10nPromise.set(h,a.get(h));if(P._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);P._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,t){(0,d.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#u}set _isDraggable(a){this.#u=a,this.div?.classList.toggle("draggable",a)}center(){const[a,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(a*2),this.y+=this.width*a/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(a*2),this.y-=this.width*a/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(a){!this._focusEventsAllowed||!this.isAttachedToDOM||a.relatedTarget?.closest(`#${this.id}`)||(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,t,s,h){const[c,n]=this.parentDimensions;[s,h]=this.screenToPageTranslation(s,h),this.x=(a+s)/c,this.y=(t+h)/n,this.fixAndSetPosition()}#b([a,t],s,h){[s,h]=this.screenToPageTranslation(s,h),this.x+=s/a,this.y+=h/t,this.fixAndSetPosition()}translate(a,t){this.#b(this.parentDimensions,a,t)}translateInPage(a,t){this.#b(this.pageDimensions,a,t),this.div.scrollIntoView({block:"nearest"})}drag(a,t){const[s,h]=this.parentDimensions;if(this.x+=a/s,this.y+=t/h,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:l,y:T}=this.div.getBoundingClientRect();this.parent.findNewParent(this,l,T)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:n}=this;const[u,m]=this.#m();c+=u,n+=m,this.div.style.left=`${(100*c).toFixed(2)}%`,this.div.style.top=`${(100*n).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[a,t]=this.parentDimensions,{_borderLineWidth:s}=P,h=s/a,c=s/t;switch(this.rotation){case 90:return[-h,c];case 180:return[h,c];case 270:return[h,-c];default:return[-h,-c]}}fixAndSetPosition(){const[a,t]=this.pageDimensions;let{x:s,y:h,width:c,height:n}=this;switch(c*=a,n*=t,s*=a,h*=t,this.rotation){case 0:s=Math.max(0,Math.min(a-c,s)),h=Math.max(0,Math.min(t-n,h));break;case 90:s=Math.max(0,Math.min(a-n,s)),h=Math.min(t,Math.max(c,h));break;case 180:s=Math.min(a,Math.max(c,s)),h=Math.min(t,Math.max(n,h));break;case 270:s=Math.min(a,Math.max(n,s)),h=Math.max(0,Math.min(t-c,h));break}this.x=s/=a,this.y=h/=t;const[u,m]=this.#m();s+=u,h+=m;const{style:l}=this.div;l.left=`${(100*s).toFixed(2)}%`,l.top=`${(100*h).toFixed(2)}%`,this.moveInDOM()}static#g(a,t,s){switch(s){case 90:return[t,-a];case 180:return[-a,-t];case 270:return[-t,a];default:return[a,t]}}screenToPageTranslation(a,t){return P.#g(a,t,this.parentRotation)}pageTranslationToScreen(a,t){return P.#g(a,t,360-this.parentRotation)}#h(a){switch(a){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[t,s]}=this,h=t*a,c=s*a;return d.FeatureTest.isCSSRoundSupported?[Math.round(h),Math.round(c)]:[h,c]}setDims(a,t){const[s,h]=this.parentDimensions;this.div.style.width=`${(100*a/s).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/h).toFixed(2)}%`),this.#n?.classList.toggle("small",a<P.SMALL_EDITOR_SIZE||t<P.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:t,width:s}=a,h=s.endsWith("%"),c=!this.#a&&t.endsWith("%");if(h&&c)return;const[n,u]=this.parentDimensions;h||(a.width=`${(100*parseFloat(s)/n).toFixed(2)}%`),!this.#a&&!c&&(a.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of a){const s=document.createElement("div");this.#r.append(s),s.classList.add("resizer",t),s.addEventListener("pointerdown",this.#E.bind(this,t)),s.addEventListener("contextmenu",C.noContextMenu)}this.div.prepend(this.#r)}#E(a,t){t.preventDefault();const{isMac:s}=d.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&s)return;const h=this.#S.bind(this,a),c=this._isDraggable;this._isDraggable=!1;const n={passive:!0,capture:!0};window.addEventListener("pointermove",h,n);const u=this.x,m=this.y,l=this.width,T=this.height,k=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{this._isDraggable=c,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",h,n),this.parent.div.style.cursor=k,this.div.style.cursor=w;const E=this.x,U=this.y,W=this.width,N=this.height;E===u&&U===m&&W===l&&N===T||this.addCommands({cmd:()=>{this.width=W,this.height=N,this.x=E,this.y=U;const[q,G]=this.parentDimensions;this.setDims(q*W,G*N),this.fixAndSetPosition()},undo:()=>{this.width=l,this.height=T,this.x=u,this.y=m;const[q,G]=this.parentDimensions;this.setDims(q*l,G*T),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",g),window.addEventListener("blur",g)}#S(a,t){const[s,h]=this.parentDimensions,c=this.x,n=this.y,u=this.width,m=this.height,l=P.MIN_SIZE/s,T=P.MIN_SIZE/h,k=x=>Math.round(x*1e4)/1e4,w=this.#h(this.rotation),g=(x,o)=>[w[0]*x+w[2]*o,w[1]*x+w[3]*o],E=this.#h(360-this.rotation),U=(x,o)=>[E[0]*x+E[2]*o,E[1]*x+E[3]*o];let W,N,q=!1,G=!1;switch(a){case"topLeft":q=!0,W=(x,o)=>[0,0],N=(x,o)=>[x,o];break;case"topMiddle":W=(x,o)=>[x/2,0],N=(x,o)=>[x/2,o];break;case"topRight":q=!0,W=(x,o)=>[x,0],N=(x,o)=>[0,o];break;case"middleRight":G=!0,W=(x,o)=>[x,o/2],N=(x,o)=>[0,o/2];break;case"bottomRight":q=!0,W=(x,o)=>[x,o],N=(x,o)=>[0,0];break;case"bottomMiddle":W=(x,o)=>[x/2,o],N=(x,o)=>[x/2,0];break;case"bottomLeft":q=!0,W=(x,o)=>[0,o],N=(x,o)=>[x,0];break;case"middleLeft":G=!0,W=(x,o)=>[0,o/2],N=(x,o)=>[x,o/2];break}const st=W(u,m),Z=N(u,m);let tt=g(...Z);const rt=k(c+tt[0]),J=k(n+tt[1]);let O=1,_=1,[f,p]=this.screenToPageTranslation(t.movementX,t.movementY);if([f,p]=U(f/s,p/h),q){const x=Math.hypot(u,m);O=_=Math.max(Math.min(Math.hypot(Z[0]-st[0]-f,Z[1]-st[1]-p)/x,1/u,1/m),l/u,T/m)}else G?O=Math.max(l,Math.min(1,Math.abs(Z[0]-st[0]-f)))/u:_=Math.max(T,Math.min(1,Math.abs(Z[1]-st[1]-p)))/m;const v=k(u*O),D=k(m*_);tt=g(...N(v,D));const L=rt-tt[0],j=J-tt[1];this.width=v,this.height=D,this.x=L,this.y=j,this.setDims(s*v,h*D),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const a=this.#n=document.createElement("button");a.className="altText";const t=await P._l10nPromise.get("editor_alt_text_button_label");a.textContent=t,a.setAttribute("aria-label",t),a.tabIndex="0",a.addEventListener("contextmenu",C.noContextMenu),a.addEventListener("pointerdown",s=>s.stopPropagation()),a.addEventListener("click",s=>{s.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",s=>{s.target===a&&s.key==="Enter"&&(s.preventDefault(),this._uiManager.editAltText(this))}),this.#w(),this.div.append(a),P.SMALL_EDITOR_SIZE||(P.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))}async#w(){const a=this.#n;if(!a)return;if(!this.#t&&!this.#e){a.classList.remove("done"),this.#s?.remove();return}P._l10nPromise.get("editor_alt_text_edit_button_label").then(s=>{a.setAttribute("aria-label",s)});let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const s=t.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",s);const h=100;a.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#s.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},h)}),a.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#s?.classList.remove("show")})}a.classList.add("done"),t.innerText=this.#e?await P._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,t.parentNode||a.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:a,decorative:t}){this.#t===a&&this.#e===t||(this.#t=a,this.#e=t,this.#w())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[a,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/t).toFixed(2)}%`);const[s,h]=this.getInitialTranslation();return this.translate(s,h),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:t}=d.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&t){a.preventDefault();return}this.#i=!0,this.#x(a)}#x(a){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let s,h;t&&(s={passive:!0,capture:!0},h=n=>{const[u,m]=this.screenToPageTranslation(n.movementX,n.movementY);this._uiManager.dragSelectedEditors(u,m)},window.addEventListener("pointermove",h,s));const c=()=>{if(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),t&&window.removeEventListener("pointermove",h,s),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:n}=d.FeatureTest.platform;a.ctrlKey&&!n||a.shiftKey||a.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(a,t,s){a.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(a,t){const s=this.parentScale,[h,c]=this.pageDimensions,[n,u]=this.pageTranslation,m=a/s,l=t/s,T=this.x*h,k=this.y*c,w=this.width*h,g=this.height*c;switch(this.rotation){case 0:return[T+m+n,c-k-l-g+u,T+m+w+n,c-k-l+u];case 90:return[T+l+n,c-k+m+u,T+l+g+n,c-k+m+w+u];case 180:return[T-m-w+n,c-k+l+u,T-m+n,c-k+l+g+u];case 270:return[T-l-g+n,c-k-m-w+u,T-l+n,c-k-m+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,t){const[s,h,c,n]=a,u=c-s,m=n-h;switch(this.rotation){case 0:return[s,t-n,u,m];case 90:return[s,t-h,m,u];case 180:return[c,t-h,u,m];case 270:return[c,t-n,m,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(a=!1,t=null){(0,d.unreachable)("An editor must be serializable")}static deserialize(a,t,s){const h=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});h.rotation=a.rotation;const[c,n]=h.pageDimensions,[u,m,l,T]=h.getRectInCurrentCoords(a.rect,n);return h.x=u/c,h.y=m/n,h.width=l/c,h.height=T/n,h}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#s=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#r.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,t){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(a){this.#f=a,this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,t){this.#a=!0;const s=a/t,{style:h}=this.div;h.aspectRatio=s,h.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=P;class B extends P{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=C,e.opacityToHex=P;var i=y(1),d=y(6);function C(c,n,u){for(const m of u)n.addEventListener(m,c[m].bind(c))}function P(c){return Math.round(Math.min(255,Math.max(1,255*c))).toString(16).padStart(2,"0")}class B{#t=0;getId(){return`${i.AnnotationEditorPrefix}${this.#t++}`}}class M{#t=(0,i.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const n='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',m=new OffscreenCanvas(1,3).getContext("2d"),l=new Image;l.src=n;const T=l.decode().then(()=>(m.drawImage(l,0,0,1,1,0,0,1,3),new Uint32Array(m.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",T)}async#s(n,u){this.#n||=new Map;let m=this.#n.get(n);if(m===null)return null;if(m?.bitmap)return m.refCounter+=1,m;try{m||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let l;if(typeof u=="string"){m.url=u;const T=await fetch(u);if(!T.ok)throw new Error(T.statusText);l=await T.blob()}else l=m.file=u;if(l.type==="image/svg+xml"){const T=M._isSVGFittingCanvas,k=new FileReader,w=new Image,g=new Promise((E,U)=>{w.onload=()=>{m.bitmap=w,m.isSvg=!0,E()},k.onload=async()=>{const W=m.svgUrl=k.result;w.src=await T?`${W}#svgView(preserveAspectRatio(none))`:W},w.onerror=k.onerror=U});k.readAsDataURL(l),await g}else m.bitmap=await createImageBitmap(l);m.refCounter=1}catch(l){console.error(l),m=null}return this.#n.set(n,m),m&&this.#n.set(m.id,m),m}async getFromFile(n){const{lastModified:u,name:m,size:l,type:T}=n;return this.#s(`${u}_${m}_${l}_${T}`,n)}async getFromUrl(n){return this.#s(n,n)}async getFromId(n){this.#n||=new Map;const u=this.#n.get(n);return u?u.bitmap?(u.refCounter+=1,u):u.file?this.getFromFile(u.file):this.getFromUrl(u.url):null}getSvgUrl(n){const u=this.#n.get(n);return u?.isSvg?u.svgUrl:null}deleteId(n){this.#n||=new Map;const u=this.#n.get(n);u&&(u.refCounter-=1,u.refCounter===0&&(u.bitmap=null))}isValidId(n){return n.startsWith(`image_${this.#t}_`)}}class a{#t=[];#e=!1;#n;#s=-1;constructor(n=128){this.#n=n}add({cmd:n,undo:u,mustExec:m,type:l=NaN,overwriteIfSameType:T=!1,keepUndo:k=!1}){if(m&&n(),this.#e)return;const w={cmd:n,undo:u,type:l};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(w);return}if(T&&this.#t[this.#s].type===l){k&&(w.undo=this.#t[this.#s].undo),this.#t[this.#s]=w;return}const g=this.#s+1;g===this.#n?this.#t.splice(0,1):(this.#s=g,g<this.#t.length&&this.#t.splice(g)),this.#t.push(w)}undo(){this.#s!==-1&&(this.#e=!0,this.#t[this.#s].undo(),this.#e=!1,this.#s-=1)}redo(){this.#s<this.#t.length-1&&(this.#s+=1,this.#e=!0,this.#t[this.#s].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}destroy(){this.#t=null}}e.CommandManager=a;class t{constructor(n){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:u}=i.FeatureTest.platform;for(const[m,l,T={}]of n)for(const k of m){const w=k.startsWith("mac+");u&&w?(this.callbacks.set(k.slice(4),{callback:l,options:T}),this.allKeys.add(k.split("+").at(-1))):!u&&!w&&(this.callbacks.set(k,{callback:l,options:T}),this.allKeys.add(k.split("+").at(-1)))}}#t(n){n.altKey&&this.buffer.push("alt"),n.ctrlKey&&this.buffer.push("ctrl"),n.metaKey&&this.buffer.push("meta"),n.shiftKey&&this.buffer.push("shift"),this.buffer.push(n.key);const u=this.buffer.join("+");return this.buffer.length=0,u}exec(n,u){if(!this.allKeys.has(u.key))return;const m=this.callbacks.get(this.#t(u));if(!m)return;const{callback:l,options:{bubbles:T=!1,args:k=[],checker:w=null}}=m;w&&!w(n,u)||(l.bind(n,...k)(),T||(u.stopPropagation(),u.preventDefault()))}}e.KeyboardManager=t;class s{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const n=new Map([["CanvasText",null],["Canvas",null]]);return(0,d.getColorValues)(n),(0,i.shadow)(this,"_colors",n)}convert(n){const u=(0,d.getRGB)(n);if(!window.matchMedia("(forced-colors: active)").matches)return u;for(const[m,l]of this._colors)if(l.every((T,k)=>T===u[k]))return s._colorsMapping.get(m);return u}getHexCode(n){const u=this._colors.get(n);return u?i.Util.makeHexColor(...u):n}}e.ColorManager=s;class h{#t=null;#e=new Map;#n=new Map;#s=null;#o=null;#a=new a;#r=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#u=new B;#p=!1;#b=!1;#m=null;#g=i.AnnotationEditorType.NONE;#h=new Set;#y=null;#E=this.blur.bind(this);#S=this.focus.bind(this);#w=this.copy.bind(this);#x=this.cut.bind(this);#L=this.paste.bind(this);#O=this.keydown.bind(this);#I=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#R=this.onRotationChanging.bind(this);#k={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#A=[0,0];#C=null;#T=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const n=h.prototype,u=T=>{const{activeElement:k}=document;return k&&T.#T.contains(k)&&T.hasSomethingToControl()},m=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new t([[["ctrl+a","mac+meta+a"],n.selectAll],[["ctrl+z","mac+meta+z"],n.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],n.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],n.delete],[["Escape","mac+Escape"],n.unselectAll],[["ArrowLeft","mac+ArrowLeft"],n.translateSelectedEditors,{args:[-m,0],checker:u}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n.translateSelectedEditors,{args:[-l,0],checker:u}],[["ArrowRight","mac+ArrowRight"],n.translateSelectedEditors,{args:[m,0],checker:u}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n.translateSelectedEditors,{args:[l,0],checker:u}],[["ArrowUp","mac+ArrowUp"],n.translateSelectedEditors,{args:[0,-m],checker:u}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n.translateSelectedEditors,{args:[0,-l],checker:u}],[["ArrowDown","mac+ArrowDown"],n.translateSelectedEditors,{args:[0,m],checker:u}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n.translateSelectedEditors,{args:[0,l],checker:u}]]))}constructor(n,u,m,l,T,k){this.#T=n,this.#N=u,this.#s=m,this._eventBus=l,this._eventBus._on("editingaction",this.#I),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#R),this.#o=T.annotationStorage,this.#d=T.filterFactory,this.#y=k,this.viewParameters={realScale:d.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#F(),this.#j(),this._eventBus._off("editingaction",this.#I),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#R);for(const n of this.#n.values())n.destroy();this.#n.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#h.clear(),this.#a.destroy(),this.#s.destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#T).direction)}editAltText(n){this.#s?.editAltText(this,n)}onPageChanging({pageNumber:n}){this.#r=n-1}focusMainContainer(){this.#T.focus()}findParent(n,u){for(const m of this.#n.values()){const{x:l,y:T,width:k,height:w}=m.div.getBoundingClientRect();if(n>=l&&n<=l+k&&u>=T&&u<=T+w)return m}return null}disableUserSelect(n=!1){this.#N.classList.toggle("noUserSelect",n)}addShouldRescale(n){this.#f.add(n)}removeShouldRescale(n){this.#f.delete(n)}onScaleChanging({scale:n}){this.commitOrRemove(),this.viewParameters.realScale=n*d.PixelsPerInch.PDF_TO_CSS_UNITS;for(const u of this.#f)u.onScaleChanging()}onRotationChanging({pagesRotation:n}){this.commitOrRemove(),this.viewParameters.rotation=n}addToAnnotationStorage(n){!n.isEmpty()&&this.#o&&!this.#o.has(n.id)&&this.#o.setValue(n.id,n)}#B(){window.addEventListener("focus",this.#S),window.addEventListener("blur",this.#E)}#j(){window.removeEventListener("focus",this.#S),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:n}=document;for(const u of this.#h)if(u.div.contains(n)){this.#m=[u,n],u._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[n,u]=this.#m;this.#m=null,u.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0}),u.focus()}#U(){window.addEventListener("keydown",this.#O,{capture:!0})}#F(){window.removeEventListener("keydown",this.#O,{capture:!0})}#M(){document.addEventListener("copy",this.#w),document.addEventListener("cut",this.#x),document.addEventListener("paste",this.#L)}#P(){document.removeEventListener("copy",this.#w),document.removeEventListener("cut",this.#x),document.removeEventListener("paste",this.#L)}addEditListeners(){this.#U(),this.#M()}removeEditListeners(){this.#F(),this.#P()}copy(n){if(n.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const u=[];for(const m of this.#h){const l=m.serialize(!0);l&&u.push(l)}u.length!==0&&n.clipboardData.setData("application/pdfjs",JSON.stringify(u))}cut(n){this.copy(n),this.delete()}paste(n){n.preventDefault();const{clipboardData:u}=n;for(const T of u.items)for(const k of this.#i)if(k.isHandlingMimeForPasting(T.type)){k.paste(T,this.currentLayer);return}let m=u.getData("application/pdfjs");if(!m)return;try{m=JSON.parse(m)}catch(T){(0,i.warn)(`paste: "${T.message}".`);return}if(!Array.isArray(m))return;this.unselectAll();const l=this.currentLayer;try{const T=[];for(const g of m){const E=l.deserialize(g);if(!E)return;T.push(E)}const k=()=>{for(const g of T)this.#G(g);this.#q(T)},w=()=>{for(const g of T)g.remove()};this.addCommands({cmd:k,undo:w,mustExec:!0})}catch(T){(0,i.warn)(`paste: "${T.message}".`)}}keydown(n){this.getActive()?.shouldGetKeyboardEvents()||h._keyboardManager.exec(this,n)}onEditingAction(n){["undo","redo","delete","selectAll"].includes(n.name)&&this[n.name]()}#v(n){Object.entries(n).some(([m,l])=>this.#k[m]!==l)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#k,n)})}#W(n){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:n})}setEditingState(n){n?(this.#B(),this.#U(),this.#M(),this.#v({isEditing:this.#g!==i.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#j(),this.#F(),this.#P(),this.#v({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(n){if(!this.#i){this.#i=n;for(const u of this.#i)this.#W(u.defaultPropertiesToUpdate)}}getId(){return this.#u.getId()}get currentLayer(){return this.#n.get(this.#r)}getLayer(n){return this.#n.get(n)}get currentPageIndex(){return this.#r}addLayer(n){this.#n.set(n.pageIndex,n),this.#p?n.enable():n.disable()}removeLayer(n){this.#n.delete(n.pageIndex)}updateMode(n,u=null){if(this.#g!==n){if(this.#g=n,n===i.AnnotationEditorType.NONE){this.setEditingState(!1),this.#V();return}this.setEditingState(!0),this.#$(),this.unselectAll();for(const m of this.#n.values())m.updateMode(n);if(u){for(const m of this.#e.values())if(m.annotationElementId===u){this.setSelected(m),m.enterInEditMode();break}}}}updateToolbar(n){n!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:n})}updateParams(n,u){if(this.#i){if(n===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(n);return}for(const m of this.#h)m.updateParams(n,u);for(const m of this.#i)m.updateDefaultParams(n,u)}}enableWaiting(n=!1){if(this.#b!==n){this.#b=n;for(const u of this.#n.values())n?u.disableClick():u.enableClick(),u.div.classList.toggle("waiting",n)}}#$(){if(!this.#p){this.#p=!0;for(const n of this.#n.values())n.enable()}}#V(){if(this.unselectAll(),this.#p){this.#p=!1;for(const n of this.#n.values())n.disable()}}getEditors(n){const u=[];for(const m of this.#e.values())m.pageIndex===n&&u.push(m);return u}getEditor(n){return this.#e.get(n)}addEditor(n){this.#e.set(n.id,n)}removeEditor(n){this.#e.delete(n.id),this.unselect(n),(!n.annotationElementId||!this.#l.has(n.annotationElementId))&&this.#o?.remove(n.id)}addDeletedAnnotationElement(n){this.#l.add(n.annotationElementId),n.deleted=!0}isDeletedAnnotationElement(n){return this.#l.has(n)}removeDeletedAnnotationElement(n){this.#l.delete(n.annotationElementId),n.deleted=!1}#G(n){const u=this.#n.get(n.pageIndex);u?u.addOrRebuild(n):this.addEditor(n)}setActiveEditor(n){this.#t!==n&&(this.#t=n,n&&this.#W(n.propertiesToUpdate))}toggleSelected(n){if(this.#h.has(n)){this.#h.delete(n),n.unselect(),this.#v({hasSelectedEditor:this.hasSelection});return}this.#h.add(n),n.select(),this.#W(n.propertiesToUpdate),this.#v({hasSelectedEditor:!0})}setSelected(n){for(const u of this.#h)u!==n&&u.unselect();this.#h.clear(),this.#h.add(n),n.select(),this.#W(n.propertiesToUpdate),this.#v({hasSelectedEditor:!0})}isSelected(n){return this.#h.has(n)}unselect(n){n.unselect(),this.#h.delete(n),this.#v({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#h.size!==0}undo(){this.#a.undo(),this.#v({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#a.redo(),this.#v({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(n){this.#a.add(n),this.#v({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const n of this.#e.values())return n.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const n=[...this.#h],u=()=>{for(const l of n)l.remove()},m=()=>{for(const l of n)this.#G(l)};this.addCommands({cmd:u,undo:m,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#q(n){this.#h.clear();for(const u of n)u.isEmpty()||(this.#h.add(u),u.select());this.#v({hasSelectedEditor:!0})}selectAll(){for(const n of this.#h)n.commit();this.#q(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const n of this.#h)n.unselect();this.#h.clear(),this.#v({hasSelectedEditor:!1})}}translateSelectedEditors(n,u,m=!1){if(m||this.commitOrRemove(),!this.hasSelection)return;this.#A[0]+=n,this.#A[1]+=u;const[l,T]=this.#A,k=[...this.#h],w=1e3;this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.#C=null,this.#A[0]=this.#A[1]=0,this.addCommands({cmd:()=>{for(const g of k)this.#e.has(g.id)&&g.translateInPage(l,T)},undo:()=>{for(const g of k)this.#e.has(g.id)&&g.translateInPage(-l,-T)},mustExec:!1})},w);for(const g of k)g.translateInPage(n,u)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const n of this.#h)this.#c.set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const n=this.#c;this.#c=null;let u=!1;for(const[{x:l,y:T,pageIndex:k},w]of n)w.newX=l,w.newY=T,w.newPageIndex=k,u||=l!==w.savedX||T!==w.savedY||k!==w.savedPageIndex;if(!u)return!1;const m=(l,T,k,w)=>{if(this.#e.has(l.id)){const g=this.#n.get(w);g?l._setParentAndPosition(g,T,k):(l.pageIndex=w,l.x=T,l.y=k)}};return this.addCommands({cmd:()=>{for(const[l,{newX:T,newY:k,newPageIndex:w}]of n)m(l,T,k,w)},undo:()=>{for(const[l,{savedX:T,savedY:k,savedPageIndex:w}]of n)m(l,T,k,w)},mustExec:!0}),!0}dragSelectedEditors(n,u){if(this.#c)for(const m of this.#c.keys())m.drag(n,u)}rebuild(n){if(n.parent===null){const u=this.getLayer(n.pageIndex);u?(u.changeParent(n),u.addOrRebuild(n)):(this.addEditor(n),this.addToAnnotationStorage(n),n.rebuild())}else n.parent.addOrRebuild(n)}isActive(n){return this.#t===n}getActive(){return this.#t}getMode(){return this.#g}get imageManager(){return(0,i.shadow)(this,"imageManager",new M)}}e.AnnotationEditorUIManager=h}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=U,e.getColorValues=st,e.getCurrentTransform=Z,e.getCurrentTransformInverse=tt,e.getFilenameFromUrl=l,e.getPdfFilenameFromUrl=T,e.getRGB=G,e.getXfaPageViewport=q,e.isDataScheme=u,e.isPdfFile=m,e.isValidFetchUrl=w,e.loadScript=E,e.noContextMenu=g,e.setLayerDimensions=rt;var i=y(7),d=y(1);const C="http://www.w3.org/2000/svg";class P{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=P;class B extends i.BaseFilterFactory{#t;#e;#n;#s;#o;#a;#r;#l;#c;#i;#f=0;constructor({docId:O,ownerDocument:_=globalThis.document}={}){super(),this.#n=O,this.#s=_}get#d(){return this.#t||=new Map}get#u(){if(!this.#e){const O=this.#s.createElement("div"),{style:_}=O;_.visibility="hidden",_.contain="strict",_.width=_.height=0,_.position="absolute",_.top=_.left=0,_.zIndex=-1;const f=this.#s.createElementNS(C,"svg");f.setAttribute("width",0),f.setAttribute("height",0),this.#e=this.#s.createElementNS(C,"defs"),O.append(f),f.append(this.#e),this.#s.body.append(O)}return this.#e}addFilter(O){if(!O)return"none";let _=this.#d.get(O);if(_)return _;let f,p,v,D;if(O.length===1){const o=O[0],b=new Array(256);for(let S=0;S<256;S++)b[S]=o[S]/255;D=f=p=v=b.join(",")}else{const[o,b,S]=O,R=new Array(256),F=new Array(256),I=new Array(256);for(let H=0;H<256;H++)R[H]=o[H]/255,F[H]=b[H]/255,I[H]=S[H]/255;f=R.join(","),p=F.join(","),v=I.join(","),D=`${f}${p}${v}`}if(_=this.#d.get(D),_)return this.#d.set(O,_),_;const L=`g_${this.#n}_transfer_map_${this.#f++}`,j=`url(#${L})`;this.#d.set(O,j),this.#d.set(D,j);const x=this.#b(L);return this.#g(f,p,v,x),j}addHCMFilter(O,_){const f=`${O}-${_}`;if(this.#a===f)return this.#r;if(this.#a=f,this.#r="none",this.#o?.remove(),!O||!_)return this.#r;const p=this.#h(O);O=d.Util.makeHexColor(...p);const v=this.#h(_);if(_=d.Util.makeHexColor(...v),this.#u.style.color="",O==="#000000"&&_==="#ffffff"||O===_)return this.#r;const D=new Array(256);for(let b=0;b<=255;b++){const S=b/255;D[b]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const L=D.join(","),j=`g_${this.#n}_hcm_filter`,x=this.#l=this.#b(j);this.#g(L,L,L,x),this.#p(x);const o=(b,S)=>{const R=p[b]/255,F=v[b]/255,I=new Array(S+1);for(let H=0;H<=S;H++)I[H]=R+H/S*(F-R);return I.join(",")};return this.#g(o(0,5),o(1,5),o(2,5),x),this.#r=`url(#${j})`,this.#r}addHighlightHCMFilter(O,_,f,p){const v=`${O}-${_}-${f}-${p}`;if(this.#c===v)return this.#i;if(this.#c=v,this.#i="none",this.#l?.remove(),!O||!_)return this.#i;const[D,L]=[O,_].map(this.#h.bind(this));let j=Math.round(.2126*D[0]+.7152*D[1]+.0722*D[2]),x=Math.round(.2126*L[0]+.7152*L[1]+.0722*L[2]),[o,b]=[f,p].map(this.#h.bind(this));x<j&&([j,x,o,b]=[x,j,b,o]),this.#u.style.color="";const S=(I,H,X)=>{const it=new Array(256),z=(x-j)/X,Y=I/255,K=(H-I)/(255*X);let Q=0;for(let et=0;et<=X;et++){const at=Math.round(j+et*z),lt=Y+et*K;for(let ct=Q;ct<=at;ct++)it[ct]=lt;Q=at+1}for(let et=Q;et<256;et++)it[et]=it[Q-1];return it.join(",")},R=`g_${this.#n}_hcm_highlight_filter`,F=this.#l=this.#b(R);return this.#p(F),this.#g(S(o[0],b[0],5),S(o[1],b[1],5),S(o[2],b[2],5),F),this.#i=`url(#${R})`,this.#i}destroy(O=!1){O&&(this.#r||this.#i)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#p(O){const _=this.#s.createElementNS(C,"feColorMatrix");_.setAttribute("type","matrix"),_.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(_)}#b(O){const _=this.#s.createElementNS(C,"filter");return _.setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("id",O),this.#u.append(_),_}#m(O,_,f){const p=this.#s.createElementNS(C,_);p.setAttribute("type","discrete"),p.setAttribute("tableValues",f),O.append(p)}#g(O,_,f,p){const v=this.#s.createElementNS(C,"feComponentTransfer");p.append(v),this.#m(v,"feFuncR",O),this.#m(v,"feFuncG",_),this.#m(v,"feFuncB",f)}#h(O){return this.#u.style.color=O,G(getComputedStyle(this.#u).getPropertyValue("color"))}}e.DOMFilterFactory=B;class M extends i.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,_){const f=this._document.createElement("canvas");return f.width=O,f.height=_,f}}e.DOMCanvasFactory=M;async function a(J,O=!1){if(w(J,document.baseURI)){const _=await fetch(J);if(!_.ok)throw new Error(_.statusText);return O?new Uint8Array(await _.arrayBuffer()):(0,d.stringToBytes)(await _.text())}return new Promise((_,f)=>{const p=new XMLHttpRequest;p.open("GET",J,!0),O&&(p.responseType="arraybuffer"),p.onreadystatechange=()=>{if(p.readyState===XMLHttpRequest.DONE){if(p.status===200||p.status===0){let v;if(O&&p.response?v=new Uint8Array(p.response):!O&&p.responseText&&(v=(0,d.stringToBytes)(p.responseText)),v){_(v);return}}f(new Error(p.statusText))}},p.send(null)})}class t extends i.BaseCMapReaderFactory{_fetchData(O,_){return a(O,this.isCompressed).then(f=>({cMapData:f,compressionType:_}))}}e.DOMCMapReaderFactory=t;class s extends i.BaseStandardFontDataFactory{_fetchData(O){return a(O,!0)}}e.DOMStandardFontDataFactory=s;class h extends i.BaseSVGFactory{_createSVG(O){return document.createElementNS(C,O)}}e.DOMSVGFactory=h;class c{constructor({viewBox:O,scale:_,rotation:f,offsetX:p=0,offsetY:v=0,dontFlip:D=!1}){this.viewBox=O,this.scale=_,this.rotation=f,this.offsetX=p,this.offsetY=v;const L=(O[2]+O[0])/2,j=(O[3]+O[1])/2;let x,o,b,S;switch(f%=360,f<0&&(f+=360),f){case 180:x=-1,o=0,b=0,S=1;break;case 90:x=0,o=1,b=1,S=0;break;case 270:x=0,o=-1,b=-1,S=0;break;case 0:x=1,o=0,b=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}D&&(b=-b,S=-S);let R,F,I,H;x===0?(R=Math.abs(j-O[1])*_+p,F=Math.abs(L-O[0])*_+v,I=(O[3]-O[1])*_,H=(O[2]-O[0])*_):(R=Math.abs(L-O[0])*_+p,F=Math.abs(j-O[1])*_+v,I=(O[2]-O[0])*_,H=(O[3]-O[1])*_),this.transform=[x*_,o*_,b*_,S*_,R-x*_*L-b*_*j,F-o*_*L-S*_*j],this.width=I,this.height=H}get rawDims(){const{viewBox:O}=this;return(0,d.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:_=this.rotation,offsetX:f=this.offsetX,offsetY:p=this.offsetY,dontFlip:v=!1}={}){return new c({viewBox:this.viewBox.slice(),scale:O,rotation:_,offsetX:f,offsetY:p,dontFlip:v})}convertToViewportPoint(O,_){return d.Util.applyTransform([O,_],this.transform)}convertToViewportRectangle(O){const _=d.Util.applyTransform([O[0],O[1]],this.transform),f=d.Util.applyTransform([O[2],O[3]],this.transform);return[_[0],_[1],f[0],f[1]]}convertToPdfPoint(O,_){return d.Util.applyInverseTransform([O,_],this.transform)}}e.PageViewport=c;class n extends d.BaseException{constructor(O,_=0){super(O,"RenderingCancelledException"),this.extraDelay=_}}e.RenderingCancelledException=n;function u(J){const O=J.length;let _=0;for(;_<O&&J[_].trim()==="";)_++;return J.substring(_,_+5).toLowerCase()==="data:"}function m(J){return typeof J=="string"&&/\.pdf$/i.test(J)}function l(J,O=!1){return O||([J]=J.split(/[#?]/,1)),J.substring(J.lastIndexOf("/")+1)}function T(J,O="document.pdf"){if(typeof J!="string")return O;if(u(J))return(0,d.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;const _=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,p=_.exec(J);let v=f.exec(p[1])||f.exec(p[2])||f.exec(p[3]);if(v&&(v=v[0],v.includes("%")))try{v=f.exec(decodeURIComponent(v))[0]}catch{}return v||O}class k{started=Object.create(null);times=[];time(O){O in this.started&&(0,d.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,d.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){const O=[];let _=0;for(const{name:f}of this.times)_=Math.max(f.length,_);for(const{name:f,start:p,end:v}of this.times)O.push(`${f.padEnd(_)} ${v-p}ms
`);return O.join("")}}e.StatTimer=k;function w(J,O){try{const{protocol:_}=O?new URL(J,O):new URL(J);return _==="http:"||_==="https:"}catch{return!1}}function g(J){J.preventDefault()}function E(J,O=!1){return new Promise((_,f)=>{const p=document.createElement("script");p.src=J,p.onload=function(v){O&&p.remove(),_(v)},p.onerror=function(){f(new Error(`Cannot load script at: ${p.src}`))},(document.head||document.documentElement).append(p)})}function U(J){console.log("Deprecated API usage: "+J)}let W;class N{static toDateObject(O){if(!O||typeof O!="string")return null;W||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const _=W.exec(O);if(!_)return null;const f=parseInt(_[1],10);let p=parseInt(_[2],10);p=p>=1&&p<=12?p-1:0;let v=parseInt(_[3],10);v=v>=1&&v<=31?v:1;let D=parseInt(_[4],10);D=D>=0&&D<=23?D:0;let L=parseInt(_[5],10);L=L>=0&&L<=59?L:0;let j=parseInt(_[6],10);j=j>=0&&j<=59?j:0;const x=_[7]||"Z";let o=parseInt(_[8],10);o=o>=0&&o<=23?o:0;let b=parseInt(_[9],10)||0;return b=b>=0&&b<=59?b:0,x==="-"?(D+=o,L+=b):x==="+"&&(D-=o,L-=b),new Date(Date.UTC(f,p,v,D,L,j))}}e.PDFDateString=N;function q(J,{scale:O=1,rotation:_=0}){const{width:f,height:p}=J.attributes.style,v=[0,0,parseInt(f),parseInt(p)];return new c({viewBox:v,scale:O,rotation:_})}function G(J){if(J.startsWith("#")){const O=parseInt(J.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return J.startsWith("rgb(")?J.slice(4,-1).split(",").map(O=>parseInt(O)):J.startsWith("rgba(")?J.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,d.warn)(`Not a valid color format: "${J}"`),[0,0,0])}function st(J){const O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(const _ of J.keys()){O.style.color=_;const f=window.getComputedStyle(O).color;J.set(_,G(f))}O.remove()}function Z(J){const{a:O,b:_,c:f,d:p,e:v,f:D}=J.getTransform();return[O,_,f,p,v,D]}function tt(J){const{a:O,b:_,c:f,d:p,e:v,f:D}=J.getTransform().invertSelf();return[O,_,f,p,v,D]}function rt(J,O,_=!1,f=!0){if(O instanceof c){const{pageWidth:p,pageHeight:v}=O.rawDims,{style:D}=J,L=d.FeatureTest.isCSSRoundSupported,j=`var(--scale-factor) * ${p}px`,x=`var(--scale-factor) * ${v}px`,o=L?`round(${j}, 1px)`:`calc(${j})`,b=L?`round(${x}, 1px)`:`calc(${x})`;!_||O.rotation%180===0?(D.width=o,D.height=b):(D.width=b,D.height=o)}f&&J.setAttribute("data-main-rotation",O.rotation)}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=y(1);class d{constructor(){this.constructor===d&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,s){return"none"}addHighlightHCMFilter(t,s,h,c){return"none"}destroy(t=!1){}}e.BaseFilterFactory=d;class C{constructor(){this.constructor===C&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,s){if(t<=0||s<=0)throw new Error("Invalid canvas size");const h=this._createCanvas(t,s);return{canvas:h,context:h.getContext("2d")}}reset(t,s,h){if(!t.canvas)throw new Error("Canvas is not specified");if(s<=0||h<=0)throw new Error("Invalid canvas size");t.canvas.width=s,t.canvas.height=h}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,s){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=C;class P{constructor({baseUrl:t=null,isCompressed:s=!0}){this.constructor===P&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=s}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const s=this.baseUrl+t+(this.isCompressed?".bcmap":""),h=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(s,h).catch(c=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}_fetchData(t,s){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=P;class B{constructor({baseUrl:t=null}){this.constructor===B&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${t}`;return this._fetchData(s).catch(h=>{throw new Error(`Unable to load font data at: ${s}`)})}_fetchData(t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=B;class M{constructor(){this.constructor===M&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,s,h=!1){if(t<=0||s<=0)throw new Error("Invalid SVG dimensions");const c=this._createSVG("svg:svg");return c.setAttribute("version","1.1"),h||(c.setAttribute("width",`${t}px`),c.setAttribute("height",`${s}px`)),c.setAttribute("preserveAspectRatio","none"),c.setAttribute("viewBox",`0 0 ${t} ${s}`),c}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=M}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=y(1);const d=3285377520,C=4294901760,P=65535;class B{constructor(a){this.h1=a?a&4294967295:d,this.h2=a?a&4294967295:d}update(a){let t,s;if(typeof a=="string"){t=new Uint8Array(a.length*2),s=0;for(let U=0,W=a.length;U<W;U++){const N=a.charCodeAt(U);N<=255?t[s++]=N:(t[s++]=N>>>8,t[s++]=N&255)}}else if((0,i.isArrayBuffer)(a))t=a.slice(),s=t.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const h=s>>2,c=s-h*4,n=new Uint32Array(t.buffer,0,h);let u=0,m=0,l=this.h1,T=this.h2;const k=3432918353,w=461845907,g=k&P,E=w&P;for(let U=0;U<h;U++)U&1?(u=n[U],u=u*k&C|u*g&P,u=u<<15|u>>>17,u=u*w&C|u*E&P,l^=u,l=l<<13|l>>>19,l=l*5+3864292196):(m=n[U],m=m*k&C|m*g&P,m=m<<15|m>>>17,m=m*w&C|m*E&P,T^=m,T=T<<13|T>>>19,T=T*5+3864292196);switch(u=0,c){case 3:u^=t[h*4+2]<<16;case 2:u^=t[h*4+1]<<8;case 1:u^=t[h*4],u=u*k&C|u*g&P,u=u<<15|u>>>17,u=u*w&C|u*E&P,h&1?l^=u:T^=u}this.h1=l,this.h2=T}hexdigest(){let a=this.h1,t=this.h2;return a^=t>>>1,a=a*3981806797&C|a*36045&P,t=t*4283543511&C|((t<<16|a>>>16)*2950163797&C)>>>16,a^=t>>>1,a=a*444984403&C|a*60499&P,t=t*3301882366&C|((t<<16|a>>>16)*3120437893&C)>>>16,a^=t>>>1,(a>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=B}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=y(1);class d{#t=new Set;constructor({ownerDocument:B=globalThis.document,styleElement:M=null}){this._document=B,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(B){this.nativeFontFaces.add(B),this._document.fonts.add(B)}removeNativeFontFace(B){this.nativeFontFaces.delete(B),this._document.fonts.delete(B)}insertRule(B){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const M=this.styleElement.sheet;M.insertRule(B,M.cssRules.length)}clear(){for(const B of this.nativeFontFaces)this._document.fonts.delete(B);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(B){if(!(!B||this.#t.has(B.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:M,src:a,style:t}=B,s=new FontFace(M,a,t);this.addNativeFontFace(s);try{await s.load(),this.#t.add(M)}catch{(0,i.warn)(`Cannot load system font: ${B.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(s)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(B){if(B.attached||B.missingFile&&!B.systemFontInfo)return;if(B.attached=!0,B.systemFontInfo){await this.loadSystemFont(B.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=B.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(t){throw(0,i.warn)(`Failed to load font '${a.family}': '${t}'.`),B.disableFontFace=!0,t}}return}const M=B.createFontFaceRule();if(M){if(this.insertRule(M),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const t=this._queueLoadingCallback(a);this._prepareFontLoadEvent(B,t)})}}get isFontLoadingAPISupported(){const B=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",B)}get isSyncFontLoadingSupported(){let B=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(B=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",B)}_queueLoadingCallback(B){function M(){for((0,i.assert)(!t.done,"completeRequest() cannot be called twice."),t.done=!0;a.length>0&&a[0].done;){const s=a.shift();setTimeout(s.callback,0)}}const{loadingRequests:a}=this,t={done:!1,complete:M,callback:B};return a.push(t),t}get _loadTestFont(){const B=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",B)}_prepareFontLoadEvent(B,M){function a(q,G){return q.charCodeAt(G)<<24|q.charCodeAt(G+1)<<16|q.charCodeAt(G+2)<<8|q.charCodeAt(G+3)&255}function t(q,G,st,Z){const tt=q.substring(0,G),rt=q.substring(G+st);return tt+Z+rt}let s,h;const c=this._document.createElement("canvas");c.width=1,c.height=1;const n=c.getContext("2d");let u=0;function m(q,G){if(++u>30){(0,i.warn)("Load test font never loaded."),G();return}if(n.font="30px "+q,n.fillText(".",0,20),n.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(m.bind(null,q,G))}const l=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=t(T,976,l.length,l);const w=16,g=1482184792;let E=a(T,w);for(s=0,h=l.length-3;s<h;s+=4)E=E-g+a(l,s)|0;s<l.length&&(E=E-g+a(l+"XXX",s)|0),T=t(T,w,4,(0,i.string32)(E));const U=`url(data:font/opentype;base64,${btoa(T)});`,W=`@font-face {font-family:"${l}";src:${U}}`;this.insertRule(W);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const q of[B.loadedName,l]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=q,N.append(G)}this._document.body.append(N),m(l,()=>{N.remove(),M.complete()})}}e.FontLoader=d;class C{constructor(B,{isEvalSupported:M=!0,disableFontFace:a=!1,ignoreErrors:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const h in B)this[h]=B[h];this.isEvalSupported=M!==!1,this.disableFontFace=a===!0,this.ignoreErrors=t===!0,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let B;if(!this.cssFontInfo)B=new FontFace(this.loadedName,this.data,{});else{const M={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(M.style=`oblique ${this.cssFontInfo.italicAngle}deg`),B=new FontFace(this.cssFontInfo.fontFamily,this.data,M)}return this._inspectFont?.(this),B}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const B=(0,i.bytesToString)(this.data),M=`url(data:${this.mimetype};base64,${btoa(B)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${M}}`;else{let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${M}}`}return this._inspectFont?.(this,M),a}getPathGenerator(B,M){if(this.compiledGlyphs[M]!==void 0)return this.compiledGlyphs[M];let a;try{a=B.get(this.loadedName+"_path_"+M)}catch(t){if(!this.ignoreErrors)throw t;return(0,i.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[M]=function(s,h){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const t=[];for(const s of a){const h=s.args!==void 0?s.args.join(","):"";t.push("c.",s.cmd,"(",h,`);
`)}return this.compiledGlyphs[M]=new Function("c","size",t.join(""))}return this.compiledGlyphs[M]=function(t,s){for(const h of a)h.cmd==="scale"&&(h.args=[s,-s]),t[h.cmd].apply(t,h.args)}}}e.FontFaceObject=C}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=y(7);y(1);const d=function(a){return new Promise((t,s)=>{require$$5.readFile(a,(c,n)=>{if(c||!n){s(new Error(c));return}t(new Uint8Array(n))})})};class C extends i.BaseFilterFactory{}e.NodeFilterFactory=C;class P extends i.BaseCanvasFactory{_createCanvas(t,s){return require$$5.createCanvas(t,s)}}e.NodeCanvasFactory=P;class B extends i.BaseCMapReaderFactory{_fetchData(t,s){return d(t).then(h=>({cMapData:h,compressionType:s}))}}e.NodeCMapReaderFactory=B;class M extends i.BaseStandardFontDataFactory{_fetchData(t){return d(t)}}e.NodeStandardFontDataFactory=M}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=y(1),d=y(6),C=y(12),P=y(13);const B=16,M=100,a=4096,t=15,s=10,h=1e3,c=16;function n(_,f){if(_._removeMirroring)throw new Error("Context is already forwarding operations.");_.__originalSave=_.save,_.__originalRestore=_.restore,_.__originalRotate=_.rotate,_.__originalScale=_.scale,_.__originalTranslate=_.translate,_.__originalTransform=_.transform,_.__originalSetTransform=_.setTransform,_.__originalResetTransform=_.resetTransform,_.__originalClip=_.clip,_.__originalMoveTo=_.moveTo,_.__originalLineTo=_.lineTo,_.__originalBezierCurveTo=_.bezierCurveTo,_.__originalRect=_.rect,_.__originalClosePath=_.closePath,_.__originalBeginPath=_.beginPath,_._removeMirroring=()=>{_.save=_.__originalSave,_.restore=_.__originalRestore,_.rotate=_.__originalRotate,_.scale=_.__originalScale,_.translate=_.__originalTranslate,_.transform=_.__originalTransform,_.setTransform=_.__originalSetTransform,_.resetTransform=_.__originalResetTransform,_.clip=_.__originalClip,_.moveTo=_.__originalMoveTo,_.lineTo=_.__originalLineTo,_.bezierCurveTo=_.__originalBezierCurveTo,_.rect=_.__originalRect,_.closePath=_.__originalClosePath,_.beginPath=_.__originalBeginPath,delete _._removeMirroring},_.save=function(){f.save(),this.__originalSave()},_.restore=function(){f.restore(),this.__originalRestore()},_.translate=function(v,D){f.translate(v,D),this.__originalTranslate(v,D)},_.scale=function(v,D){f.scale(v,D),this.__originalScale(v,D)},_.transform=function(v,D,L,j,x,o){f.transform(v,D,L,j,x,o),this.__originalTransform(v,D,L,j,x,o)},_.setTransform=function(v,D,L,j,x,o){f.setTransform(v,D,L,j,x,o),this.__originalSetTransform(v,D,L,j,x,o)},_.resetTransform=function(){f.resetTransform(),this.__originalResetTransform()},_.rotate=function(v){f.rotate(v),this.__originalRotate(v)},_.clip=function(v){f.clip(v),this.__originalClip(v)},_.moveTo=function(p,v){f.moveTo(p,v),this.__originalMoveTo(p,v)},_.lineTo=function(p,v){f.lineTo(p,v),this.__originalLineTo(p,v)},_.bezierCurveTo=function(p,v,D,L,j,x){f.bezierCurveTo(p,v,D,L,j,x),this.__originalBezierCurveTo(p,v,D,L,j,x)},_.rect=function(p,v,D,L){f.rect(p,v,D,L),this.__originalRect(p,v,D,L)},_.closePath=function(){f.closePath(),this.__originalClosePath()},_.beginPath=function(){f.beginPath(),this.__originalBeginPath()}}class u{constructor(f){this.canvasFactory=f,this.cache=Object.create(null)}getCanvas(f,p,v){let D;return this.cache[f]!==void 0?(D=this.cache[f],this.canvasFactory.reset(D,p,v)):(D=this.canvasFactory.create(p,v),this.cache[f]=D),D}delete(f){delete this.cache[f]}clear(){for(const f in this.cache){const p=this.cache[f];this.canvasFactory.destroy(p),delete this.cache[f]}}}function m(_,f,p,v,D,L,j,x,o,b){const[S,R,F,I,H,X]=(0,d.getCurrentTransform)(_);if(R===0&&F===0){const Y=j*S+H,K=Math.round(Y),Q=x*I+X,et=Math.round(Q),at=(j+o)*S+H,lt=Math.abs(Math.round(at)-K)||1,ct=(x+b)*I+X,ht=Math.abs(Math.round(ct)-et)||1;return _.setTransform(Math.sign(S),0,0,Math.sign(I),K,et),_.drawImage(f,p,v,D,L,0,0,lt,ht),_.setTransform(S,R,F,I,H,X),[lt,ht]}if(S===0&&I===0){const Y=x*F+H,K=Math.round(Y),Q=j*R+X,et=Math.round(Q),at=(x+b)*F+H,lt=Math.abs(Math.round(at)-K)||1,ct=(j+o)*R+X,ht=Math.abs(Math.round(ct)-et)||1;return _.setTransform(0,Math.sign(R),Math.sign(F),0,K,et),_.drawImage(f,p,v,D,L,0,0,ht,lt),_.setTransform(S,R,F,I,H,X),[ht,lt]}_.drawImage(f,p,v,D,L,j,x,o,b);const it=Math.hypot(S,R),z=Math.hypot(F,I);return[it*o,z*b]}function l(_){const{width:f,height:p}=_;if(f>h||p>h)return null;const v=1e3,D=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=f+1;let j=new Uint8Array(L*(p+1)),x,o,b;const S=f+7&-8;let R=new Uint8Array(S*p),F=0;for(const z of _.data){let Y=128;for(;Y>0;)R[F++]=z&Y?0:255,Y>>=1}let I=0;for(F=0,R[F]!==0&&(j[0]=1,++I),o=1;o<f;o++)R[F]!==R[F+1]&&(j[o]=R[F]?2:1,++I),F++;for(R[F]!==0&&(j[o]=2,++I),x=1;x<p;x++){F=x*S,b=x*L,R[F-S]!==R[F]&&(j[b]=R[F]?1:8,++I);let z=(R[F]?4:0)+(R[F-S]?8:0);for(o=1;o<f;o++)z=(z>>2)+(R[F+1]?4:0)+(R[F-S+1]?8:0),D[z]&&(j[b+o]=D[z],++I),F++;if(R[F-S]!==R[F]&&(j[b+o]=R[F]?2:4,++I),I>v)return null}for(F=S*(p-1),b=x*L,R[F]!==0&&(j[b]=8,++I),o=1;o<f;o++)R[F]!==R[F+1]&&(j[b+o]=R[F]?4:8,++I),F++;if(R[F]!==0&&(j[b+o]=4,++I),I>v)return null;const H=new Int32Array([0,L,-1,0,-L,0,0,0,1]),X=new Path2D;for(x=0;I&&x<=p;x++){let z=x*L;const Y=z+f;for(;z<Y&&!j[z];)z++;if(z===Y)continue;X.moveTo(z%L,x);const K=z;let Q=j[z];do{const et=H[Q];do z+=et;while(!j[z]);const at=j[z];at!==5&&at!==10?(Q=at,j[z]=0):(Q=at&51*Q>>4,j[z]&=Q>>2|Q<<2),X.lineTo(z%L,z/L|0),j[z]||--I}while(K!==z);--x}return R=null,j=null,function(z){z.save(),z.scale(1/f,-1/p),z.translate(0,-p),z.fill(X),z.beginPath(),z.restore()}}class T{constructor(f,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,f,p])}clone(){const f=Object.create(this);return f.clipBox=this.clipBox.slice(),f}setCurrentPoint(f,p){this.x=f,this.y=p}updatePathMinMax(f,p,v){[p,v]=i.Util.applyTransform([p,v],f),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,v),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,v)}updateRectMinMax(f,p){const v=i.Util.applyTransform(p,f),D=i.Util.applyTransform(p.slice(2),f);this.minX=Math.min(this.minX,v[0],D[0]),this.minY=Math.min(this.minY,v[1],D[1]),this.maxX=Math.max(this.maxX,v[0],D[0]),this.maxY=Math.max(this.maxY,v[1],D[1])}updateScalingPathMinMax(f,p){i.Util.scaleMinMax(f,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(f,p,v,D,L,j,x,o,b,S){const R=i.Util.bezierBoundingBox(p,v,D,L,j,x,o,b);if(S){S[0]=Math.min(S[0],R[0],R[2]),S[1]=Math.max(S[1],R[0],R[2]),S[2]=Math.min(S[2],R[1],R[3]),S[3]=Math.max(S[3],R[1],R[3]);return}this.updateRectMinMax(f,R)}getPathBoundingBox(f=C.PathType.FILL,p=null){const v=[this.minX,this.minY,this.maxX,this.maxY];if(f===C.PathType.STROKE){p||(0,i.unreachable)("Stroke bounding box must include transform.");const D=i.Util.singularValueDecompose2dScale(p),L=D[0]*this.lineWidth/2,j=D[1]*this.lineWidth/2;v[0]-=L,v[1]-=j,v[2]+=L,v[3]+=j}return v}updateClipFromPath(){const f=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(f||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(f){this.clipBox=f,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(f=C.PathType.FILL,p=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(f,p))}}function k(_,f){if(typeof ImageData<"u"&&f instanceof ImageData){_.putImageData(f,0,0);return}const p=f.height,v=f.width,D=p%c,L=(p-D)/c,j=D===0?L:L+1,x=_.createImageData(v,c);let o=0,b;const S=f.data,R=x.data;let F,I,H,X;if(f.kind===i.ImageKind.GRAYSCALE_1BPP){const it=S.byteLength,z=new Uint32Array(R.buffer,0,R.byteLength>>2),Y=z.length,K=v+7>>3,Q=4294967295,et=i.FeatureTest.isLittleEndian?4278190080:255;for(F=0;F<j;F++){for(H=F<L?c:D,b=0,I=0;I<H;I++){const at=it-o;let lt=0;const ct=at>K?v:at*8-7,ht=ct&-8;let dt=0,ut=0;for(;lt<ht;lt+=8)ut=S[o++],z[b++]=ut&128?Q:et,z[b++]=ut&64?Q:et,z[b++]=ut&32?Q:et,z[b++]=ut&16?Q:et,z[b++]=ut&8?Q:et,z[b++]=ut&4?Q:et,z[b++]=ut&2?Q:et,z[b++]=ut&1?Q:et;for(;lt<ct;lt++)dt===0&&(ut=S[o++],dt=128),z[b++]=ut&dt?Q:et,dt>>=1}for(;b<Y;)z[b++]=0;_.putImageData(x,0,F*c)}}else if(f.kind===i.ImageKind.RGBA_32BPP){for(I=0,X=v*c*4,F=0;F<L;F++)R.set(S.subarray(o,o+X)),o+=X,_.putImageData(x,0,I),I+=c;F<j&&(X=v*D*4,R.set(S.subarray(o,o+X)),_.putImageData(x,0,I))}else if(f.kind===i.ImageKind.RGB_24BPP)for(H=c,X=v*H,F=0;F<j;F++){for(F>=L&&(H=D,X=v*H),b=0,I=X;I--;)R[b++]=S[o++],R[b++]=S[o++],R[b++]=S[o++],R[b++]=255;_.putImageData(x,0,F*c)}else throw new Error(`bad image kind: ${f.kind}`)}function w(_,f){if(f.bitmap){_.drawImage(f.bitmap,0,0);return}const p=f.height,v=f.width,D=p%c,L=(p-D)/c,j=D===0?L:L+1,x=_.createImageData(v,c);let o=0;const b=f.data,S=x.data;for(let R=0;R<j;R++){const F=R<L?c:D;({srcPos:o}=(0,P.convertBlackAndWhiteToRGBA)({src:b,srcPos:o,dest:S,width:v,height:F,nonBlackColor:0})),_.putImageData(x,0,R*c)}}function g(_,f){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const v of p)_[v]!==void 0&&(f[v]=_[v]);_.setLineDash!==void 0&&(f.setLineDash(_.getLineDash()),f.lineDashOffset=_.lineDashOffset)}function E(_){if(_.strokeStyle=_.fillStyle="#000000",_.fillRule="nonzero",_.globalAlpha=1,_.lineWidth=1,_.lineCap="butt",_.lineJoin="miter",_.miterLimit=10,_.globalCompositeOperation="source-over",_.font="10px sans-serif",_.setLineDash!==void 0&&(_.setLineDash([]),_.lineDashOffset=0),!i.isNodeJS){const{filter:f}=_;f!=="none"&&f!==""&&(_.filter="none")}}function U(_,f,p,v){const D=_.length;for(let L=3;L<D;L+=4){const j=_[L];if(j===0)_[L-3]=f,_[L-2]=p,_[L-1]=v;else if(j<255){const x=255-j;_[L-3]=_[L-3]*j+f*x>>8,_[L-2]=_[L-2]*j+p*x>>8,_[L-1]=_[L-1]*j+v*x>>8}}}function W(_,f,p){const v=_.length,D=1/255;for(let L=3;L<v;L+=4){const j=p?p[_[L]]:_[L];f[L]=f[L]*j*D|0}}function N(_,f,p){const v=_.length;for(let D=3;D<v;D+=4){const L=_[D-3]*77+_[D-2]*152+_[D-1]*28;f[D]=p?f[D]*p[L>>8]>>8:f[D]*L>>16}}function q(_,f,p,v,D,L,j,x,o,b,S){const R=!!L,F=R?L[0]:0,I=R?L[1]:0,H=R?L[2]:0,X=D==="Luminosity"?N:W,z=Math.min(v,Math.ceil(1048576/p));for(let Y=0;Y<v;Y+=z){const K=Math.min(z,v-Y),Q=_.getImageData(x-b,Y+(o-S),p,K),et=f.getImageData(x,Y+o,p,K);R&&U(Q.data,F,I,H),X(Q.data,et.data,j),f.putImageData(et,x,Y+o)}}function G(_,f,p,v){const D=v[0],L=v[1],j=v[2]-D,x=v[3]-L;j===0||x===0||(q(f.context,p,j,x,f.subtype,f.backdrop,f.transferMap,D,L,f.offsetX,f.offsetY),_.save(),_.globalAlpha=1,_.globalCompositeOperation="source-over",_.setTransform(1,0,0,1,0,0),_.drawImage(p.canvas,0,0),_.restore())}function st(_,f){const p=i.Util.singularValueDecompose2dScale(_);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const v=Math.fround((globalThis.devicePixelRatio||1)*d.PixelsPerInch.PDF_TO_CSS_UNITS);return f!==void 0?f:p[0]<=v||p[1]<=v}const Z=["butt","round","square"],tt=["miter","round","bevel"],rt={},J={};class O{constructor(f,p,v,D,L,{optionalContentConfig:j,markedContentStack:x=null},o,b){this.ctx=f,this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=v,this.canvasFactory=D,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=x||[],this.optionalContentConfig=j,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=b,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(f,p=null){return typeof f=="string"?f.startsWith("g_")?this.commonObjs.get(f):this.objs.get(f):p}beginDrawing({transform:f,viewport:p,transparency:v=!1,background:D=null}){const L=this.ctx.canvas.width,j=this.ctx.canvas.height,x=this.ctx.fillStyle;if(this.ctx.fillStyle=D||"#ffffff",this.ctx.fillRect(0,0,L,j),this.ctx.fillStyle=x,v){const o=this.cachedCanvases.getCanvas("transparent",L,j);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...(0,d.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),E(this.ctx),f&&(this.ctx.transform(...f),this.outputScaleX=f[0],this.outputScaleY=f[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,d.getCurrentTransform)(this.ctx)}executeOperatorList(f,p,v,D){const L=f.argsArray,j=f.fnArray;let x=p||0;const o=L.length;if(o===x)return x;const b=o-x>s&&typeof v=="function",S=b?Date.now()+t:0;let R=0;const F=this.commonObjs,I=this.objs;let H;for(;;){if(D!==void 0&&x===D.nextBreakPoint)return D.breakIt(x,v),x;if(H=j[x],H!==i.OPS.dependency)this[H].apply(this,L[x]);else for(const X of L[x]){const it=X.startsWith("g_")?F:I;if(!it.has(X))return it.get(X,v),x}if(x++,x===o)return x;if(b&&++R>s){if(Date.now()>S)return v(),x;R=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const f of this._cachedBitmapsMap.values()){for(const p of f.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);f.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const f=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(f!=="none"){const p=this.ctx.filter;this.ctx.filter=f,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=p}}}_scaleImage(f,p){const v=f.width,D=f.height;let L=Math.max(Math.hypot(p[0],p[1]),1),j=Math.max(Math.hypot(p[2],p[3]),1),x=v,o=D,b="prescale1",S,R;for(;L>2&&x>1||j>2&&o>1;){let F=x,I=o;L>2&&x>1&&(F=x>=16384?Math.floor(x/2)-1||1:Math.ceil(x/2),L/=x/F),j>2&&o>1&&(I=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o)/2,j/=o/I),S=this.cachedCanvases.getCanvas(b,F,I),R=S.context,R.clearRect(0,0,F,I),R.drawImage(f,0,0,x,o,0,0,F,I),f=S.canvas,x=F,o=I,b=b==="prescale1"?"prescale2":"prescale1"}return{img:f,paintWidth:x,paintHeight:o}}_createMaskCanvas(f){const p=this.ctx,{width:v,height:D}=f,L=this.current.fillColor,j=this.current.patternFill,x=(0,d.getCurrentTransform)(p);let o,b,S,R;if((f.bitmap||f.data)&&f.count>1){const lt=f.bitmap||f.data.buffer;b=JSON.stringify(j?x:[x.slice(0,4),L]),o=this._cachedBitmapsMap.get(lt),o||(o=new Map,this._cachedBitmapsMap.set(lt,o));const ct=o.get(b);if(ct&&!j){const ht=Math.round(Math.min(x[0],x[2])+x[4]),dt=Math.round(Math.min(x[1],x[3])+x[5]);return{canvas:ct,offsetX:ht,offsetY:dt}}S=ct}S||(R=this.cachedCanvases.getCanvas("maskCanvas",v,D),w(R.context,f));let F=i.Util.transform(x,[1/v,0,0,-1/D,0,0]);F=i.Util.transform(F,[1,0,0,1,0,-D]);const I=i.Util.applyTransform([0,0],F),H=i.Util.applyTransform([v,D],F),X=i.Util.normalizeRect([I[0],I[1],H[0],H[1]]),it=Math.round(X[2]-X[0])||1,z=Math.round(X[3]-X[1])||1,Y=this.cachedCanvases.getCanvas("fillCanvas",it,z),K=Y.context,Q=Math.min(I[0],H[0]),et=Math.min(I[1],H[1]);K.translate(-Q,-et),K.transform(...F),S||(S=this._scaleImage(R.canvas,(0,d.getCurrentTransformInverse)(K)),S=S.img,o&&j&&o.set(b,S)),K.imageSmoothingEnabled=st((0,d.getCurrentTransform)(K),f.interpolate),m(K,S,0,0,S.width,S.height,0,0,v,D),K.globalCompositeOperation="source-in";const at=i.Util.transform((0,d.getCurrentTransformInverse)(K),[1,0,0,1,-Q,-et]);return K.fillStyle=j?L.getPattern(p,this,at,C.PathType.FILL):L,K.fillRect(0,0,v,D),o&&!j&&(this.cachedCanvases.delete("fillCanvas"),o.set(b,Y.canvas)),{canvas:Y.canvas,offsetX:Math.round(Q),offsetY:Math.round(et)}}setLineWidth(f){f!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=f,this.ctx.lineWidth=f}setLineCap(f){this.ctx.lineCap=Z[f]}setLineJoin(f){this.ctx.lineJoin=tt[f]}setMiterLimit(f){this.ctx.miterLimit=f}setDash(f,p){const v=this.ctx;v.setLineDash!==void 0&&(v.setLineDash(f),v.lineDashOffset=p)}setRenderingIntent(f){}setFlatness(f){}setGState(f){for(const[p,v]of f)switch(p){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v[0],v[1]);break;case"CA":this.current.strokeAlpha=v;break;case"ca":this.current.fillAlpha=v,this.ctx.globalAlpha=v;break;case"BM":this.ctx.globalCompositeOperation=v;break;case"SMask":this.current.activeSMask=v?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(v);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const f=this.inSMaskMode;this.current.activeSMask&&!f?this.beginSMaskMode():!this.current.activeSMask&&f&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const f=this.ctx.canvas.width,p=this.ctx.canvas.height,v="smaskGroupAt"+this.groupLevel,D=this.cachedCanvases.getCanvas(v,f,p);this.suspendedCtx=this.ctx,this.ctx=D.context;const L=this.ctx;L.setTransform(...(0,d.getCurrentTransform)(this.suspendedCtx)),g(this.suspendedCtx,L),n(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(f){if(!this.current.activeSMask)return;f?(f[0]=Math.floor(f[0]),f[1]=Math.floor(f[1]),f[2]=Math.ceil(f[2]),f[3]=Math.ceil(f[3])):f=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,v=this.suspendedCtx;G(v,p,this.ctx,f),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(g(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const f=this.current;this.stateStack.push(f),this.current=f.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),g(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(f,p,v,D,L,j){this.ctx.transform(f,p,v,D,L,j),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(f,p,v){const D=this.ctx,L=this.current;let j=L.x,x=L.y,o,b;const S=(0,d.getCurrentTransform)(D),R=S[0]===0&&S[3]===0||S[1]===0&&S[2]===0,F=R?v.slice(0):null;for(let I=0,H=0,X=f.length;I<X;I++)switch(f[I]|0){case i.OPS.rectangle:j=p[H++],x=p[H++];const it=p[H++],z=p[H++],Y=j+it,K=x+z;D.moveTo(j,x),it===0||z===0?D.lineTo(Y,K):(D.lineTo(Y,x),D.lineTo(Y,K),D.lineTo(j,K)),R||L.updateRectMinMax(S,[j,x,Y,K]),D.closePath();break;case i.OPS.moveTo:j=p[H++],x=p[H++],D.moveTo(j,x),R||L.updatePathMinMax(S,j,x);break;case i.OPS.lineTo:j=p[H++],x=p[H++],D.lineTo(j,x),R||L.updatePathMinMax(S,j,x);break;case i.OPS.curveTo:o=j,b=x,j=p[H+4],x=p[H+5],D.bezierCurveTo(p[H],p[H+1],p[H+2],p[H+3],j,x),L.updateCurvePathMinMax(S,o,b,p[H],p[H+1],p[H+2],p[H+3],j,x,F),H+=6;break;case i.OPS.curveTo2:o=j,b=x,D.bezierCurveTo(j,x,p[H],p[H+1],p[H+2],p[H+3]),L.updateCurvePathMinMax(S,o,b,j,x,p[H],p[H+1],p[H+2],p[H+3],F),j=p[H+2],x=p[H+3],H+=4;break;case i.OPS.curveTo3:o=j,b=x,j=p[H+2],x=p[H+3],D.bezierCurveTo(p[H],p[H+1],j,x,j,x),L.updateCurvePathMinMax(S,o,b,p[H],p[H+1],j,x,j,x,F),H+=4;break;case i.OPS.closePath:D.closePath();break}R&&L.updateScalingPathMinMax(S,F),L.setCurrentPoint(j,x)}closePath(){this.ctx.closePath()}stroke(f=!0){const p=this.ctx,v=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof v=="object"&&v?.getPattern?(p.save(),p.strokeStyle=v.getPattern(p,this,(0,d.getCurrentTransformInverse)(p),C.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),f&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(f=!0){const p=this.ctx,v=this.current.fillColor,D=this.current.patternFill;let L=!1;D&&(p.save(),p.fillStyle=v.getPattern(p,this,(0,d.getCurrentTransformInverse)(p),C.PathType.FILL),L=!0);const j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),L&&p.restore(),f&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rt}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const f=this.pendingTextPaths,p=this.ctx;if(f===void 0){p.beginPath();return}p.save(),p.beginPath();for(const v of f)p.setTransform(...v.transform),p.translate(v.x,v.y),v.addToPath(p,v.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(f){this.current.charSpacing=f}setWordSpacing(f){this.current.wordSpacing=f}setHScale(f){this.current.textHScale=f/100}setLeading(f){this.current.leading=-f}setFont(f,p){const v=this.commonObjs.get(f),D=this.current;if(!v)throw new Error(`Can't find font for ${f}`);if(D.fontMatrix=v.fontMatrix||i.FONT_IDENTITY_MATRIX,(D.fontMatrix[0]===0||D.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+f),p<0?(p=-p,D.fontDirection=-1):D.fontDirection=1,this.current.font=v,this.current.fontSize=p,v.isType3Font)return;const L=v.loadedName||"sans-serif",j=v.systemFontInfo?.css||`"${L}", ${v.fallbackName}`;let x="normal";v.black?x="900":v.bold&&(x="bold");const o=v.italic?"italic":"normal";let b=p;p<B?b=B:p>M&&(b=M),this.current.fontSizeScale=p/b,this.ctx.font=`${o} ${x} ${b}px ${j}`}setTextRenderingMode(f){this.current.textRenderingMode=f}setTextRise(f){this.current.textRise=f}moveText(f,p){this.current.x=this.current.lineX+=f,this.current.y=this.current.lineY+=p}setLeadingMoveText(f,p){this.setLeading(-p),this.moveText(f,p)}setTextMatrix(f,p,v,D,L,j){this.current.textMatrix=[f,p,v,D,L,j],this.current.textMatrixScale=Math.hypot(f,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(f,p,v,D){const L=this.ctx,j=this.current,x=j.font,o=j.textRenderingMode,b=j.fontSize/j.fontSizeScale,S=o&i.TextRenderingMode.FILL_STROKE_MASK,R=!!(o&i.TextRenderingMode.ADD_TO_PATH_FLAG),F=j.patternFill&&!x.missingFile;let I;(x.disableFontFace||R||F)&&(I=x.getPathGenerator(this.commonObjs,f)),x.disableFontFace||F?(L.save(),L.translate(p,v),L.beginPath(),I(L,b),D&&L.setTransform(...D),(S===i.TextRenderingMode.FILL||S===i.TextRenderingMode.FILL_STROKE)&&L.fill(),(S===i.TextRenderingMode.STROKE||S===i.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((S===i.TextRenderingMode.FILL||S===i.TextRenderingMode.FILL_STROKE)&&L.fillText(f,p,v),(S===i.TextRenderingMode.STROKE||S===i.TextRenderingMode.FILL_STROKE)&&L.strokeText(f,p,v)),R&&(this.pendingTextPaths||=[]).push({transform:(0,d.getCurrentTransform)(L),x:p,y:v,fontSize:b,addToPath:I})}get isFontSubpixelAAEnabled(){const{context:f}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);f.scale(1.5,1),f.fillText("I",0,10);const p=f.getImageData(0,0,10,10).data;let v=!1;for(let D=3;D<p.length;D+=4)if(p[D]>0&&p[D]<255){v=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",v)}showText(f){const p=this.current,v=p.font;if(v.isType3Font)return this.showType3Text(f);const D=p.fontSize;if(D===0)return;const L=this.ctx,j=p.fontSizeScale,x=p.charSpacing,o=p.wordSpacing,b=p.fontDirection,S=p.textHScale*b,R=f.length,F=v.vertical,I=F?1:-1,H=v.defaultVMetrics,X=D*p.fontMatrix[0],it=p.textRenderingMode===i.TextRenderingMode.FILL&&!v.disableFontFace&&!p.patternFill;L.save(),L.transform(...p.textMatrix),L.translate(p.x,p.y+p.textRise),b>0?L.scale(S,-1):L.scale(S,1);let z;if(p.patternFill){L.save();const at=p.fillColor.getPattern(L,this,(0,d.getCurrentTransformInverse)(L),C.PathType.FILL);z=(0,d.getCurrentTransform)(L),L.restore(),L.fillStyle=at}let Y=p.lineWidth;const K=p.textMatrixScale;if(K===0||Y===0){const at=p.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(at===i.TextRenderingMode.STROKE||at===i.TextRenderingMode.FILL_STROKE)&&(Y=this.getSinglePixelWidth())}else Y/=K;if(j!==1&&(L.scale(j,j),Y/=j),L.lineWidth=Y,v.isInvalidPDFjsFont){const at=[];let lt=0;for(const ct of f)at.push(ct.unicode),lt+=ct.width;L.fillText(at.join(""),0,0),p.x+=lt*X*S,L.restore(),this.compose();return}let Q=0,et;for(et=0;et<R;++et){const at=f[et];if(typeof at=="number"){Q+=I*at*D/1e3;continue}let lt=!1;const ct=(at.isSpace?o:0)+x,ht=at.fontChar,dt=at.accent;let ut,_t,gt=at.width;if(F){const mt=at.vmetric||H,St=-(at.vmetric?mt[1]:gt*.5)*X,kt=mt[2]*X;gt=mt?-mt[0]:gt,ut=St/j,_t=(Q+kt)/j}else ut=Q/j,_t=0;if(v.remeasure&&gt>0){const mt=L.measureText(ht).width*1e3/D*j;if(gt<mt&&this.isFontSubpixelAAEnabled){const St=gt/mt;lt=!0,L.save(),L.scale(St,1),ut/=St}else gt!==mt&&(ut+=(gt-mt)/2e3*D/j)}if(this.contentVisible&&(at.isInFont||v.missingFile)){if(it&&!dt)L.fillText(ht,ut,_t);else if(this.paintChar(ht,ut,_t,z),dt){const mt=ut+D*dt.offset.x/j,St=_t-D*dt.offset.y/j;this.paintChar(dt.fontChar,mt,St,z)}}const Et=F?gt*X-ct*b:gt*X+ct*b;Q+=Et,lt&&L.restore()}F?p.y-=Q:p.x+=Q*S,L.restore(),this.compose()}showType3Text(f){const p=this.ctx,v=this.current,D=v.font,L=v.fontSize,j=v.fontDirection,x=D.vertical?1:-1,o=v.charSpacing,b=v.wordSpacing,S=v.textHScale*j,R=v.fontMatrix||i.FONT_IDENTITY_MATRIX,F=f.length,I=v.textRenderingMode===i.TextRenderingMode.INVISIBLE;let H,X,it,z;if(!(I||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...v.textMatrix),p.translate(v.x,v.y),p.scale(S,j),H=0;H<F;++H){if(X=f[H],typeof X=="number"){z=x*X*L/1e3,this.ctx.translate(z,0),v.x+=z*S;continue}const Y=(X.isSpace?b:0)+o,K=D.charProcOperatorList[X.operatorListId];if(!K){(0,i.warn)(`Type3 character "${X.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=X,this.save(),p.scale(L,L),p.transform(...R),this.executeOperatorList(K),this.restore()),it=i.Util.applyTransform([X.width,0],R)[0]*L+Y,p.translate(it,0),v.x+=it*S}p.restore(),this.processingType3=null}}setCharWidth(f,p){}setCharWidthAndBounds(f,p,v,D,L,j){this.ctx.rect(v,D,L-v,j-D),this.ctx.clip(),this.endPath()}getColorN_Pattern(f){let p;if(f[0]==="TilingPattern"){const v=f[1],D=this.baseTransform||(0,d.getCurrentTransform)(this.ctx),L={createCanvasGraphics:j=>new O(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new C.TilingPattern(f,v,this.ctx,L,D)}else p=this._getPattern(f[1],f[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(f,p,v){const D=i.Util.makeHexColor(f,p,v);this.ctx.strokeStyle=D,this.current.strokeColor=D}setFillRGBColor(f,p,v){const D=i.Util.makeHexColor(f,p,v);this.ctx.fillStyle=D,this.current.fillColor=D,this.current.patternFill=!1}_getPattern(f,p=null){let v;return this.cachedPatterns.has(f)?v=this.cachedPatterns.get(f):(v=(0,C.getShadingPattern)(this.getObject(f)),this.cachedPatterns.set(f,v)),p&&(v.matrix=p),v}shadingFill(f){if(!this.contentVisible)return;const p=this.ctx;this.save();const v=this._getPattern(f);p.fillStyle=v.getPattern(p,this,(0,d.getCurrentTransformInverse)(p),C.PathType.SHADING);const D=(0,d.getCurrentTransformInverse)(p);if(D){const{width:L,height:j}=p.canvas,[x,o,b,S]=i.Util.getAxialAlignedBoundingBox([0,0,L,j],D);this.ctx.fillRect(x,o,b-x,S-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(f,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(f)&&f.length===6&&this.transform(...f),this.baseTransform=(0,d.getCurrentTransform)(this.ctx),p)){const v=p[2]-p[0],D=p[3]-p[1];this.ctx.rect(p[0],p[1],v,D),this.current.updateRectMinMax((0,d.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(f){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;f.isolated||(0,i.info)("TODO: Support non-isolated groups."),f.knockout&&(0,i.warn)("Knockout groups not supported.");const v=(0,d.getCurrentTransform)(p);if(f.matrix&&p.transform(...f.matrix),!f.bbox)throw new Error("Bounding box is required.");let D=i.Util.getAxialAlignedBoundingBox(f.bbox,(0,d.getCurrentTransform)(p));const L=[0,0,p.canvas.width,p.canvas.height];D=i.Util.intersect(D,L)||[0,0,0,0];const j=Math.floor(D[0]),x=Math.floor(D[1]);let o=Math.max(Math.ceil(D[2])-j,1),b=Math.max(Math.ceil(D[3])-x,1),S=1,R=1;o>a&&(S=o/a,o=a),b>a&&(R=b/a,b=a),this.current.startNewPathAndClipBox([0,0,o,b]);let F="groupAt"+this.groupLevel;f.smask&&(F+="_smask_"+this.smaskCounter++%2);const I=this.cachedCanvases.getCanvas(F,o,b),H=I.context;H.scale(1/S,1/R),H.translate(-j,-x),H.transform(...v),f.smask?this.smaskStack.push({canvas:I.canvas,context:H,offsetX:j,offsetY:x,scaleX:S,scaleY:R,subtype:f.smask.subtype,backdrop:f.smask.backdrop,transferMap:f.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(j,x),p.scale(S,R),p.save()),g(p,H),this.ctx=H,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(f){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,v=this.groupStack.pop();if(this.ctx=v,this.ctx.imageSmoothingEnabled=!1,f.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const D=(0,d.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...D);const L=i.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],D);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(f,p,v,D,L){if(this.#t(),E(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const j=p[2]-p[0],x=p[3]-p[1];if(L&&this.annotationCanvasMap){v=v.slice(),v[4]-=p[0],v[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=j,p[3]=x;const[o,b]=i.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(this.ctx)),{viewportScale:S}=this,R=Math.ceil(j*this.outputScaleX*S),F=Math.ceil(x*this.outputScaleY*S);this.annotationCanvas=this.canvasFactory.create(R,F);const{canvas:I,context:H}=this.annotationCanvas;this.annotationCanvasMap.set(f,I),this.annotationCanvas.savedCtx=this.ctx,this.ctx=H,this.ctx.save(),this.ctx.setTransform(o,0,0,-b,0,x*b),E(this.ctx)}else E(this.ctx),this.ctx.rect(p[0],p[1],j,x),this.ctx.clip(),this.endPath()}this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...v),this.transform(...D)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(f){if(!this.contentVisible)return;const p=f.count;f=this.getObject(f.data,f),f.count=p;const v=this.ctx,D=this.processingType3;if(D&&(D.compiled===void 0&&(D.compiled=l(f)),D.compiled)){D.compiled(v);return}const L=this._createMaskCanvas(f),j=L.canvas;v.save(),v.setTransform(1,0,0,1,0,0),v.drawImage(j,L.offsetX,L.offsetY),v.restore(),this.compose()}paintImageMaskXObjectRepeat(f,p,v=0,D=0,L,j){if(!this.contentVisible)return;f=this.getObject(f.data,f);const x=this.ctx;x.save();const o=(0,d.getCurrentTransform)(x);x.transform(p,v,D,L,0,0);const b=this._createMaskCanvas(f);x.setTransform(1,0,0,1,b.offsetX-o[4],b.offsetY-o[5]);for(let S=0,R=j.length;S<R;S+=2){const F=i.Util.transform(o,[p,v,D,L,j[S],j[S+1]]),[I,H]=i.Util.applyTransform([0,0],F);x.drawImage(b.canvas,I,H)}x.restore(),this.compose()}paintImageMaskXObjectGroup(f){if(!this.contentVisible)return;const p=this.ctx,v=this.current.fillColor,D=this.current.patternFill;for(const L of f){const{data:j,width:x,height:o,transform:b}=L,S=this.cachedCanvases.getCanvas("maskCanvas",x,o),R=S.context;R.save();const F=this.getObject(j,L);w(R,F),R.globalCompositeOperation="source-in",R.fillStyle=D?v.getPattern(R,this,(0,d.getCurrentTransformInverse)(p),C.PathType.FILL):v,R.fillRect(0,0,x,o),R.restore(),p.save(),p.transform(...b),p.scale(1,-1),m(p,S.canvas,0,0,x,o,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(f){if(!this.contentVisible)return;const p=this.getObject(f);if(!p){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(f,p,v,D){if(!this.contentVisible)return;const L=this.getObject(f);if(!L){(0,i.warn)("Dependent image isn't ready yet");return}const j=L.width,x=L.height,o=[];for(let b=0,S=D.length;b<S;b+=2)o.push({transform:[p,0,0,v,D[b],D[b+1]],x:0,y:0,w:j,h:x});this.paintInlineImageXObjectGroup(L,o)}applyTransferMapsToCanvas(f){return this.current.transferMaps!=="none"&&(f.filter=this.current.transferMaps,f.drawImage(f.canvas,0,0),f.filter="none"),f.canvas}applyTransferMapsToBitmap(f){if(this.current.transferMaps==="none")return f.bitmap;const{bitmap:p,width:v,height:D}=f,L=this.cachedCanvases.getCanvas("inlineImage",v,D),j=L.context;return j.filter=this.current.transferMaps,j.drawImage(p,0,0),j.filter="none",L.canvas}paintInlineImageXObject(f){if(!this.contentVisible)return;const p=f.width,v=f.height,D=this.ctx;if(this.save(),!i.isNodeJS){const{filter:x}=D;x!=="none"&&x!==""&&(D.filter="none")}D.scale(1/p,-1/v);let L;if(f.bitmap)L=this.applyTransferMapsToBitmap(f);else if(typeof HTMLElement=="function"&&f instanceof HTMLElement||!f.data)L=f;else{const o=this.cachedCanvases.getCanvas("inlineImage",p,v).context;k(o,f),L=this.applyTransferMapsToCanvas(o)}const j=this._scaleImage(L,(0,d.getCurrentTransformInverse)(D));D.imageSmoothingEnabled=st((0,d.getCurrentTransform)(D),f.interpolate),m(D,j.img,0,0,j.paintWidth,j.paintHeight,0,-v,p,v),this.compose(),this.restore()}paintInlineImageXObjectGroup(f,p){if(!this.contentVisible)return;const v=this.ctx;let D;if(f.bitmap)D=f.bitmap;else{const L=f.width,j=f.height,o=this.cachedCanvases.getCanvas("inlineImage",L,j).context;k(o,f),D=this.applyTransferMapsToCanvas(o)}for(const L of p)v.save(),v.transform(...L.transform),v.scale(1,-1),m(v,D,L.x,L.y,L.w,L.h,0,-1,1,1),v.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(f){}markPointProps(f,p){}beginMarkedContent(f){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(f,p){f==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(f){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(f);const v=this.ctx;this.pendingClip&&(p||(this.pendingClip===J?v.clip("evenodd"):v.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),v.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const f=(0,d.getCurrentTransform)(this.ctx);if(f[1]===0&&f[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(f[0]),Math.abs(f[3]));else{const p=Math.abs(f[0]*f[3]-f[2]*f[1]),v=Math.hypot(f[0],f[2]),D=Math.hypot(f[1],f[3]);this._cachedGetSinglePixelWidth=Math.max(v,D)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:f}=this.current,{a:p,b:v,c:D,d:L}=this.ctx.getTransform();let j,x;if(v===0&&D===0){const o=Math.abs(p),b=Math.abs(L);if(o===b)if(f===0)j=x=1/o;else{const S=o*f;j=x=S<1?1/S:1}else if(f===0)j=1/o,x=1/b;else{const S=o*f,R=b*f;j=S<1?1/S:1,x=R<1?1/R:1}}else{const o=Math.abs(p*L-v*D),b=Math.hypot(p,v),S=Math.hypot(D,L);if(f===0)j=S/o,x=b/o;else{const R=f*o;j=S>R?S/R:1,x=b>R?b/R:1}}this._cachedScaleForStroking[0]=j,this._cachedScaleForStroking[1]=x}return this._cachedScaleForStroking}rescaleAndStroke(f){const{ctx:p}=this,{lineWidth:v}=this.current,[D,L]=this.getScaleForStroking();if(p.lineWidth=v||1,D===1&&L===1){p.stroke();return}const j=p.getLineDash();if(f&&p.save(),p.scale(D,L),j.length>0){const x=Math.max(D,L);p.setLineDash(j.map(o=>o/x)),p.lineDashOffset/=x}p.stroke(),f&&p.restore()}isContentVisible(){for(let f=this.markedContentStack.length-1;f>=0;f--)if(!this.markedContentStack[f].visible)return!1;return!0}}e.CanvasGraphics=O;for(const _ in i.OPS)O.prototype[_]!==void 0&&(O.prototype[i.OPS[_]]=O.prototype[_])}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=c;var i=y(1),d=y(6);const C={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=C;function P(m,l){if(!l)return;const T=l[2]-l[0],k=l[3]-l[1],w=new Path2D;w.rect(l[0],l[1],T,k),m.clip(w)}class B{constructor(){this.constructor===B&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class M extends B{constructor(l){super(),this._type=l[1],this._bbox=l[2],this._colorStops=l[3],this._p0=l[4],this._p1=l[5],this._r0=l[6],this._r1=l[7],this.matrix=null}_createGradient(l){let T;this._type==="axial"?T=l.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=l.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)T.addColorStop(k[0],k[1]);return T}getPattern(l,T,k,w){let g;if(w===C.STROKE||w===C.FILL){const E=T.current.getClippedPathBoundingBox(w,(0,d.getCurrentTransform)(l))||[0,0,0,0],U=Math.ceil(E[2]-E[0])||1,W=Math.ceil(E[3]-E[1])||1,N=T.cachedCanvases.getCanvas("pattern",U,W,!0),q=N.context;q.clearRect(0,0,q.canvas.width,q.canvas.height),q.beginPath(),q.rect(0,0,q.canvas.width,q.canvas.height),q.translate(-E[0],-E[1]),k=i.Util.transform(k,[1,0,0,1,E[0],E[1]]),q.transform(...T.baseTransform),this.matrix&&q.transform(...this.matrix),P(q,this._bbox),q.fillStyle=this._createGradient(q),q.fill(),g=l.createPattern(N.canvas,"no-repeat");const G=new DOMMatrix(k);g.setTransform(G)}else P(l,this._bbox),g=this._createGradient(l);return g}}function a(m,l,T,k,w,g,E,U){const W=l.coords,N=l.colors,q=m.data,G=m.width*4;let st;W[T+1]>W[k+1]&&(st=T,T=k,k=st,st=g,g=E,E=st),W[k+1]>W[w+1]&&(st=k,k=w,w=st,st=E,E=U,U=st),W[T+1]>W[k+1]&&(st=T,T=k,k=st,st=g,g=E,E=st);const Z=(W[T]+l.offsetX)*l.scaleX,tt=(W[T+1]+l.offsetY)*l.scaleY,rt=(W[k]+l.offsetX)*l.scaleX,J=(W[k+1]+l.offsetY)*l.scaleY,O=(W[w]+l.offsetX)*l.scaleX,_=(W[w+1]+l.offsetY)*l.scaleY;if(tt>=_)return;const f=N[g],p=N[g+1],v=N[g+2],D=N[E],L=N[E+1],j=N[E+2],x=N[U],o=N[U+1],b=N[U+2],S=Math.round(tt),R=Math.round(_);let F,I,H,X,it,z,Y,K;for(let Q=S;Q<=R;Q++){if(Q<J){const ht=Q<tt?0:(tt-Q)/(tt-J);F=Z-(Z-rt)*ht,I=f-(f-D)*ht,H=p-(p-L)*ht,X=v-(v-j)*ht}else{let ht;Q>_?ht=1:J===_?ht=0:ht=(J-Q)/(J-_),F=rt-(rt-O)*ht,I=D-(D-x)*ht,H=L-(L-o)*ht,X=j-(j-b)*ht}let et;Q<tt?et=0:Q>_?et=1:et=(tt-Q)/(tt-_),it=Z-(Z-O)*et,z=f-(f-x)*et,Y=p-(p-o)*et,K=v-(v-b)*et;const at=Math.round(Math.min(F,it)),lt=Math.round(Math.max(F,it));let ct=G*Q+at*4;for(let ht=at;ht<=lt;ht++)et=(F-ht)/(F-it),et<0?et=0:et>1&&(et=1),q[ct++]=I-(I-z)*et|0,q[ct++]=H-(H-Y)*et|0,q[ct++]=X-(X-K)*et|0,q[ct++]=255}}function t(m,l,T){const k=l.coords,w=l.colors;let g,E;switch(l.type){case"lattice":const U=l.verticesPerRow,W=Math.floor(k.length/U)-1,N=U-1;for(g=0;g<W;g++){let q=g*U;for(let G=0;G<N;G++,q++)a(m,T,k[q],k[q+1],k[q+U],w[q],w[q+1],w[q+U]),a(m,T,k[q+U+1],k[q+1],k[q+U],w[q+U+1],w[q+1],w[q+U])}break;case"triangles":for(g=0,E=k.length;g<E;g+=3)a(m,T,k[g],k[g+1],k[g+2],w[g],w[g+1],w[g+2]);break;default:throw new Error("illegal figure")}}class s extends B{constructor(l){super(),this._coords=l[2],this._colors=l[3],this._figures=l[4],this._bounds=l[5],this._bbox=l[7],this._background=l[8],this.matrix=null}_createMeshCanvas(l,T,k){const U=Math.floor(this._bounds[0]),W=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-U,q=Math.ceil(this._bounds[3])-W,G=Math.min(Math.ceil(Math.abs(N*l[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(q*l[1]*1.1)),3e3),Z=N/G,tt=q/st,rt={coords:this._coords,colors:this._colors,offsetX:-U,offsetY:-W,scaleX:1/Z,scaleY:1/tt},J=G+4,O=st+4,_=k.getCanvas("mesh",J,O,!1),f=_.context,p=f.createImageData(G,st);if(T){const D=p.data;for(let L=0,j=D.length;L<j;L+=4)D[L]=T[0],D[L+1]=T[1],D[L+2]=T[2],D[L+3]=255}for(const D of this._figures)t(p,D,rt);return f.putImageData(p,2,2),{canvas:_.canvas,offsetX:U-2*Z,offsetY:W-2*tt,scaleX:Z,scaleY:tt}}getPattern(l,T,k,w){P(l,this._bbox);let g;if(w===C.SHADING)g=i.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(l));else if(g=i.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){const U=i.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*U[0],g[1]*U[1]]}const E=this._createMeshCanvas(g,w===C.SHADING?null:this._background,T.cachedCanvases);return w!==C.SHADING&&(l.setTransform(...T.baseTransform),this.matrix&&l.transform(...this.matrix)),l.translate(E.offsetX,E.offsetY),l.scale(E.scaleX,E.scaleY),l.createPattern(E.canvas,"no-repeat")}}class h extends B{getPattern(){return"hotpink"}}function c(m){switch(m[0]){case"RadialAxial":return new M(m);case"Mesh":return new s(m);case"Dummy":return new h}throw new Error(`Unknown IR type: ${m[0]}`)}const n={COLORED:1,UNCOLORED:2};class u{static MAX_PATTERN_SIZE=3e3;constructor(l,T,k,w,g){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=T,this.ctx=k,this.canvasGraphicsFactory=w,this.baseTransform=g}createPatternCanvas(l){const T=this.operatorList,k=this.bbox,w=this.xstep,g=this.ystep,E=this.paintType,U=this.tilingType,W=this.color,N=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+U);const q=k[0],G=k[1],st=k[2],Z=k[3],tt=i.Util.singularValueDecompose2dScale(this.matrix),rt=i.Util.singularValueDecompose2dScale(this.baseTransform),J=[tt[0]*rt[0],tt[1]*rt[1]],O=this.getSizeAndScale(w,this.ctx.canvas.width,J[0]),_=this.getSizeAndScale(g,this.ctx.canvas.height,J[1]),f=l.cachedCanvases.getCanvas("pattern",O.size,_.size,!0),p=f.context,v=N.createCanvasGraphics(p);v.groupLevel=l.groupLevel,this.setFillAndStrokeStyleToContext(v,E,W);let D=q,L=G,j=st,x=Z;return q<0&&(D=0,j+=Math.abs(q)),G<0&&(L=0,x+=Math.abs(G)),p.translate(-(O.scale*D),-(_.scale*L)),v.transform(O.scale,0,0,_.scale,0,0),p.save(),this.clipBbox(v,D,L,j,x),v.baseTransform=(0,d.getCurrentTransform)(v.ctx),v.executeOperatorList(T),v.endDrawing(),{canvas:f.canvas,scaleX:O.scale,scaleY:_.scale,offsetX:D,offsetY:L}}getSizeAndScale(l,T,k){l=Math.abs(l);const w=Math.max(u.MAX_PATTERN_SIZE,T);let g=Math.ceil(l*k);return g>=w?g=w:k=g/l,{scale:k,size:g}}clipBbox(l,T,k,w,g){const E=w-T,U=g-k;l.ctx.rect(T,k,E,U),l.current.updateRectMinMax((0,d.getCurrentTransform)(l.ctx),[T,k,w,g]),l.clip(),l.endPath()}setFillAndStrokeStyleToContext(l,T,k){const w=l.ctx,g=l.current;switch(T){case n.COLORED:const E=this.ctx;w.fillStyle=E.fillStyle,w.strokeStyle=E.strokeStyle,g.fillColor=E.fillStyle,g.strokeColor=E.strokeStyle;break;case n.UNCOLORED:const U=i.Util.makeHexColor(k[0],k[1],k[2]);w.fillStyle=U,w.strokeStyle=U,g.fillColor=U,g.strokeColor=U;break;default:throw new i.FormatError(`Unsupported paint type: ${T}`)}}getPattern(l,T,k,w){let g=k;w!==C.SHADING&&(g=i.Util.transform(g,T.baseTransform),this.matrix&&(g=i.Util.transform(g,this.matrix)));const E=this.createPatternCanvas(T);let U=new DOMMatrix(g);U=U.translate(E.offsetX,E.offsetY),U=U.scale(1/E.scaleX,1/E.scaleY);const W=l.createPattern(E.canvas,"repeat");return W.setTransform(U),W}}e.TilingPattern=u}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=C,e.convertToRGBA=d,e.grayToRGBA=B;var i=y(1);function d(M){switch(M.kind){case i.ImageKind.GRAYSCALE_1BPP:return C(M);case i.ImageKind.RGB_24BPP:return P(M)}return null}function C({src:M,srcPos:a=0,dest:t,width:s,height:h,nonBlackColor:c=4294967295,inverseDecode:n=!1}){const u=i.FeatureTest.isLittleEndian?4278190080:255,[m,l]=n?[c,u]:[u,c],T=s>>3,k=s&7,w=M.length;t=new Uint32Array(t.buffer);let g=0;for(let E=0;E<h;E++){for(const W=a+T;a<W;a++){const N=a<w?M[a]:255;t[g++]=N&128?l:m,t[g++]=N&64?l:m,t[g++]=N&32?l:m,t[g++]=N&16?l:m,t[g++]=N&8?l:m,t[g++]=N&4?l:m,t[g++]=N&2?l:m,t[g++]=N&1?l:m}if(k===0)continue;const U=a<w?M[a++]:255;for(let W=0;W<k;W++)t[g++]=U&1<<7-W?l:m}return{srcPos:a,destPos:g}}function P({src:M,srcPos:a=0,dest:t,destPos:s=0,width:h,height:c}){let n=0;const u=M.length>>2,m=new Uint32Array(M.buffer,a,u);if(i.FeatureTest.isLittleEndian){for(;n<u-2;n+=3,s+=4){const l=m[n],T=m[n+1],k=m[n+2];t[s]=l|4278190080,t[s+1]=l>>>24|T<<8|4278190080,t[s+2]=T>>>16|k<<16|4278190080,t[s+3]=k>>>8|4278190080}for(let l=n*4,T=M.length;l<T;l+=3)t[s++]=M[l]|M[l+1]<<8|M[l+2]<<16|4278190080}else{for(;n<u-2;n+=3,s+=4){const l=m[n],T=m[n+1],k=m[n+2];t[s]=l|255,t[s+1]=l<<24|T>>>8|255,t[s+2]=T<<16|k>>>16|255,t[s+3]=k<<8|255}for(let l=n*4,T=M.length;l<T;l+=3)t[s++]=M[l]<<24|M[l+1]<<16|M[l+2]<<8|255}return{srcPos:a,destPos:s}}function B(M,a){if(i.FeatureTest.isLittleEndian)for(let t=0,s=M.length;t<s;t++)a[t]=M[t]*65793|4278190080;else for(let t=0,s=M.length;t<s;t++)a[t]=M[t]*16843008|255}}),((A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const y=Object.create(null);e.GlobalWorkerOptions=y,y.workerPort=null,y.workerSrc=""}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=y(1);const d={DATA:1,ERROR:2},C={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function P(M){switch(M instanceof Error||typeof M=="object"&&M!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),M.name){case"AbortException":return new i.AbortException(M.message);case"MissingPDFException":return new i.MissingPDFException(M.message);case"PasswordException":return new i.PasswordException(M.message,M.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(M.message,M.status);case"UnknownErrorException":return new i.UnknownErrorException(M.message,M.details);default:return new i.UnknownErrorException(M.message,M.toString())}}class B{constructor(a,t,s){this.sourceName=a,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=h=>{const c=h.data;if(c.targetName!==this.sourceName)return;if(c.stream){this.#e(c);return}if(c.callback){const u=c.callbackId,m=this.callbackCapabilities[u];if(!m)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],c.callback===d.DATA)m.resolve(c.data);else if(c.callback===d.ERROR)m.reject(P(c.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[c.action];if(!n)throw new Error(`Unknown action from worker: ${c.action}`);if(c.callbackId){const u=this.sourceName,m=c.sourceName;new Promise(function(l){l(n(c.data))}).then(function(l){s.postMessage({sourceName:u,targetName:m,callback:d.DATA,callbackId:c.callbackId,data:l})},function(l){s.postMessage({sourceName:u,targetName:m,callback:d.ERROR,callbackId:c.callbackId,reason:P(l)})});return}if(c.streamId){this.#t(c);return}n(c.data)},s.addEventListener("message",this._onComObjOnMessage)}on(a,t){const s=this.actionHandler;if(s[a])throw new Error(`There is already an actionName called "${a}"`);s[a]=t}send(a,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:t},s)}sendWithPromise(a,t,s){const h=this.callbackId++,c=new i.PromiseCapability;this.callbackCapabilities[h]=c;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:h,data:t},s)}catch(n){c.reject(n)}return c.promise}sendWithStream(a,t,s,h){const c=this.streamId++,n=this.sourceName,u=this.targetName,m=this.comObj;return new ReadableStream({start:l=>{const T=new i.PromiseCapability;return this.streamControllers[c]={controller:l,startCall:T,pullCall:null,cancelCall:null,isClosed:!1},m.postMessage({sourceName:n,targetName:u,action:a,streamId:c,data:t,desiredSize:l.desiredSize},h),T.promise},pull:l=>{const T=new i.PromiseCapability;return this.streamControllers[c].pullCall=T,m.postMessage({sourceName:n,targetName:u,stream:C.PULL,streamId:c,desiredSize:l.desiredSize}),T.promise},cancel:l=>{(0,i.assert)(l instanceof Error,"cancel must have a valid reason");const T=new i.PromiseCapability;return this.streamControllers[c].cancelCall=T,this.streamControllers[c].isClosed=!0,m.postMessage({sourceName:n,targetName:u,stream:C.CANCEL,streamId:c,reason:P(l)}),T.promise}},s)}#t(a){const t=a.streamId,s=this.sourceName,h=a.sourceName,c=this.comObj,n=this,u=this.actionHandler[a.action],m={enqueue(l,T=1,k){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=T,w>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),c.postMessage({sourceName:s,targetName:h,stream:C.ENQUEUE,streamId:t,chunk:l},k)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:s,targetName:h,stream:C.CLOSE,streamId:t}),delete n.streamSinks[t])},error(l){(0,i.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,c.postMessage({sourceName:s,targetName:h,stream:C.ERROR,streamId:t,reason:P(l)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};m.sinkCapability.resolve(),m.ready=m.sinkCapability.promise,this.streamSinks[t]=m,new Promise(function(l){l(u(a.data,m))}).then(function(){c.postMessage({sourceName:s,targetName:h,stream:C.START_COMPLETE,streamId:t,success:!0})},function(l){c.postMessage({sourceName:s,targetName:h,stream:C.START_COMPLETE,streamId:t,reason:P(l)})})}#e(a){const t=a.streamId,s=this.sourceName,h=a.sourceName,c=this.comObj,n=this.streamControllers[t],u=this.streamSinks[t];switch(a.stream){case C.START_COMPLETE:a.success?n.startCall.resolve():n.startCall.reject(P(a.reason));break;case C.PULL_COMPLETE:a.success?n.pullCall.resolve():n.pullCall.reject(P(a.reason));break;case C.PULL:if(!u){c.postMessage({sourceName:s,targetName:h,stream:C.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&a.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=a.desiredSize,new Promise(function(m){m(u.onPull?.())}).then(function(){c.postMessage({sourceName:s,targetName:h,stream:C.PULL_COMPLETE,streamId:t,success:!0})},function(m){c.postMessage({sourceName:s,targetName:h,stream:C.PULL_COMPLETE,streamId:t,reason:P(m)})});break;case C.ENQUEUE:if((0,i.assert)(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(a.chunk);break;case C.CLOSE:if((0,i.assert)(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),this.#n(n,t);break;case C.ERROR:(0,i.assert)(n,"error should have stream controller"),n.controller.error(P(a.reason)),this.#n(n,t);break;case C.CANCEL_COMPLETE:a.success?n.cancelCall.resolve():n.cancelCall.reject(P(a.reason)),this.#n(n,t);break;case C.CANCEL:if(!u)break;new Promise(function(m){m(u.onCancel?.(P(a.reason)))}).then(function(){c.postMessage({sourceName:s,targetName:h,stream:C.CANCEL_COMPLETE,streamId:t,success:!0})},function(m){c.postMessage({sourceName:s,targetName:h,stream:C.CANCEL_COMPLETE,streamId:t,reason:P(m)})}),u.sinkCapability.reject(P(a.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#n(a,t){await Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=B}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=y(1);class d{#t;#e;constructor({parsedData:P,rawData:B}){this.#t=P,this.#e=B}getRaw(){return this.#e}get(P){return this.#t.get(P)??null}getAll(){return(0,i.objectFromMap)(this.#t)}has(P){return this.#t.has(P)}}e.Metadata=d}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=y(1),d=y(8);const C=Symbol("INTERNAL");class P{#t=!0;constructor(a,t){this.name=a,this.intent=t}get visible(){return this.#t}_setVisible(a,t){a!==C&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#t=t}}class B{#t=null;#e=new Map;#n=null;#s=null;constructor(a){if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,this.#s=a.order;for(const t of a.groups)this.#e.set(t.id,new P(t.name,t.intent));if(a.baseState==="OFF")for(const t of this.#e.values())t._setVisible(C,!1);for(const t of a.on)this.#e.get(t)._setVisible(C,!0);for(const t of a.off)this.#e.get(t)._setVisible(C,!1);this.#n=this.getHash()}}#o(a){const t=a.length;if(t<2)return!0;const s=a[0];for(let h=1;h<t;h++){const c=a[h];let n;if(Array.isArray(c))n=this.#o(c);else if(this.#e.has(c))n=this.#e.get(c).visible;else return(0,i.warn)(`Optional content group not found: ${c}`),!0;switch(s){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return s==="And"}isVisible(a){if(this.#e.size===0)return!0;if(!a)return(0,i.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return this.#e.has(a.id)?this.#e.get(a.id).visible:((0,i.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return this.#o(a.expression);if(!a.policy||a.policy==="AnyOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const t of a.ids){if(!this.#e.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(!this.#e.get(t).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const t of a.ids){if(!this.#e.has(t))return(0,i.warn)(`Optional content group not found: ${t}`),!0;if(this.#e.get(t).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,i.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,t=!0){if(!this.#e.has(a)){(0,i.warn)(`Optional content group not found: ${a}`);return}this.#e.get(a)._setVisible(C,!!t),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,i.objectFromMap)(this.#e):null}getGroup(a){return this.#e.get(a)||null}getHash(){if(this.#t!==null)return this.#t;const a=new d.MurmurHash3_64;for(const[t,s]of this.#e)a.update(`${t}:${s.visible}`);return this.#t=a.hexdigest()}}e.OptionalContentConfig=B}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=y(1),d=y(6);class C{constructor({length:a,initialData:t,progressiveDone:s=!1,contentDispositionFilename:h=null,disableRange:c=!1,disableStream:n=!1},u){if((0,i.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=h,t?.length>0){const m=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!n,this._isRangeSupported=!c,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,l)=>{this._onReceiveData({begin:m,chunk:l})}),this._pdfDataRangeTransport.addProgressListener((m,l)=>{this._onProgress({loaded:m,total:l})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(a===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const h=this._rangeReaders.some(function(c){return c._begin!==a?!1:(c._enqueue(s),!0)});(0,i.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){a.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const t=this._rangeReaders.indexOf(a);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new P(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,t){if(t<=this._progressiveDataLength)return null;const s=new B(this,a,t);return this._pdfDataRangeTransport.requestDataRange(a,t),this._rangeReaders.push(s),s}cancelAllRequests(a){this._fullRequestReader?.cancel(a);for(const t of this._rangeReaders.slice(0))t.cancel(a);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=C;class P{constructor(a,t,s=!1,h=null){this._stream=a,this._done=s||!1,this._filename=(0,d.isPdfFile)(h)?h:null,this._queuedChunks=t||[],this._loaded=0;for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=new i.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class B{constructor(a,t,s){this._stream=a,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(this._requests.length===0)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const a=new i.PromiseCapability;return this._requests.push(a),a.promise}cancel(a){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=y(1),d=y(20);function C(s,h,c){return{method:"GET",headers:s,signal:c.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function P(s){const h=new Headers;for(const c in s){const n=s[c];n!==void 0&&h.append(c,n)}return h}function B(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:((0,i.warn)(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class M{constructor(h){this.source=h,this.isHttp=/^https?:/i.test(h.url),this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(h,c){if(c<=this._progressiveDataLength)return null;const n=new t(this,h,c);return this._rangeRequestReaders.push(n),n}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const c of this._rangeRequestReaders.slice(0))c.cancel(h)}}e.PDFFetchStream=M;class a{constructor(h){this._stream=h,this._reader=null,this._loaded=0,this._filename=null;const c=h.source;this._withCredentials=c.withCredentials||!1,this._contentLength=c.length,this._headersCapability=new i.PromiseCapability,this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange,this._headers=P(this._stream.httpHeaders);const n=c.url;fetch(n,C(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,d.validateResponseStatus)(u.status))throw(0,d.createResponseStatusError)(u.status,n);this._reader=u.body.getReader(),this._headersCapability.resolve();const m=k=>u.headers.get(k),{allowRangeRequests:l,suggestedLength:T}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=T||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:h,done:c}=await this._reader.read();return c?{value:h,done:c}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:B(h),done:!1})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}class t{constructor(h,c,n){this._stream=h,this._reader=null,this._loaded=0;const u=h.source;this._withCredentials=u.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=P(this._stream.httpHeaders),this._headers.append("Range",`bytes=${c}-${n-1}`);const m=u.url;fetch(m,C(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,d.validateResponseStatus)(l.status))throw(0,d.createResponseStatusError)(l.status,m);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:h,done:c}=await this._reader.read();return c?{value:h,done:c}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded}),{value:B(h),done:!1})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=M,e.extractFilenameFromHeader=B,e.validateRangeRequestCapabilities=P,e.validateResponseStatus=a;var i=y(1),d=y(21),C=y(6);function P({getResponseHeader:t,isHttp:s,rangeChunkSize:h,disableRange:c}){const n={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(t("Content-Length"),10);return!Number.isInteger(u)||(n.suggestedLength=u,u<=2*h)||c||!s||t("Accept-Ranges")!=="bytes"||(t("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function B(t){const s=t("Content-Disposition");if(s){let h=(0,d.getFilenameFromContentDispositionHeader)(s);if(h.includes("%"))try{h=decodeURIComponent(h)}catch{}if((0,C.isPdfFile)(h))return h}return null}function M(t,s){return t===404||t===0&&s.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+s+'".'):new i.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${s}".`,t)}function a(t){return t===200||t===206}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=d;var i=y(1);function d(C){let P=!0,B=M("filename\\*","i").exec(C);if(B){B=B[1];let u=h(B);return u=unescape(u),u=c(u),u=n(u),t(u)}if(B=s(C),B){const u=n(B);return t(u)}if(B=M("filename","i").exec(C),B){B=B[1];let u=h(B);return u=n(u),t(u)}function M(u,m){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(u,m){if(u){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const l=new TextDecoder(u,{fatal:!0}),T=(0,i.stringToBytes)(m);m=l.decode(T),P=!1}catch{}}return m}function t(u){return P&&/[\x80-\xff]/.test(u)&&(u=a("utf-8",u),P&&(u=a("iso-8859-1",u))),u}function s(u){const m=[];let l;const T=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=T.exec(u))!==null;){let[,w,g,E]=l;if(w=parseInt(w,10),w in m){if(w===0)break;continue}m[w]=[g,E]}const k=[];for(let w=0;w<m.length&&w in m;++w){let[g,E]=m[w];E=h(E),g&&(E=unescape(E),w===0&&(E=c(E))),k.push(E)}return k.join("")}function h(u){if(u.startsWith('"')){const m=u.slice(1).split('\\"');for(let l=0;l<m.length;++l){const T=m[l].indexOf('"');T!==-1&&(m[l]=m[l].slice(0,T),m.length=l+1),m[l]=m[l].replaceAll(/\\(.)/g,"$1")}u=m.join('"')}return u}function c(u){const m=u.indexOf("'");if(m===-1)return u;const l=u.slice(0,m),k=u.slice(m+1).replace(/^[^']*'/,"");return a(l,k)}function n(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,l,T,k){if(T==="q"||T==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,g){return String.fromCharCode(parseInt(g,16))}),a(l,k);try{k=atob(k)}catch{}return a(l,k)})}return""}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=y(1),d=y(20);const C=200,P=206;function B(h){const c=h.response;return typeof c!="string"?c:(0,i.stringToBytes)(c).buffer}class M{constructor(c,n={}){this.url=c,this.isHttp=/^https?:/i.test(c),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(c,n,u){const m={begin:c,end:n};for(const l in u)m[l]=u[l];return this.request(m)}requestFull(c){return this.request(c)}request(c){const n=new XMLHttpRequest,u=this.currXhrId++,m=this.pendingRequests[u]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const T=this.httpHeaders[l];T!==void 0&&n.setRequestHeader(l,T)}return this.isHttp&&"begin"in c&&"end"in c?(n.setRequestHeader("Range",`bytes=${c.begin}-${c.end-1}`),m.expectedStatus=P):m.expectedStatus=C,n.responseType="arraybuffer",c.onError&&(n.onerror=function(l){c.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,u),n.onprogress=this.onProgress.bind(this,u),m.onHeadersReceived=c.onHeadersReceived,m.onDone=c.onDone,m.onError=c.onError,m.onProgress=c.onProgress,n.send(null),u}onProgress(c,n){const u=this.pendingRequests[c];u&&u.onProgress?.(n)}onStateChange(c,n){const u=this.pendingRequests[c];if(!u)return;const m=u.xhr;if(m.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),m.readyState!==4||!(c in this.pendingRequests))return;if(delete this.pendingRequests[c],m.status===0&&this.isHttp){u.onError?.(m.status);return}const l=m.status||C;if(!(l===C&&u.expectedStatus===P)&&l!==u.expectedStatus){u.onError?.(m.status);return}const k=B(m);if(l===P){const w=m.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(w);u.onDone({begin:parseInt(g[1],10),chunk:k})}else k?u.onDone({begin:0,chunk:k}):u.onError?.(m.status)}getRequestXhr(c){return this.pendingRequests[c].xhr}isPendingRequest(c){return c in this.pendingRequests}abortRequest(c){const n=this.pendingRequests[c].xhr;delete this.pendingRequests[c],n.abort()}}class a{constructor(c){this._source=c,this._manager=new M(c.url,{httpHeaders:c.httpHeaders,withCredentials:c.withCredentials}),this._rangeChunkSize=c.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(c){const n=this._rangeRequestReaders.indexOf(c);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t(this._manager,this._source),this._fullRequestReader}getRangeReader(c,n){const u=new s(this._manager,c,n);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(c){this._fullRequestReader?.cancel(c);for(const n of this._rangeRequestReaders.slice(0))n.cancel(c)}}e.PDFNetworkStream=a;class t{constructor(c,n){this._manager=c;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=c.requestFull(u),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const c=this._fullRequestId,n=this._manager.getRequestXhr(c),u=T=>n.getResponseHeader(T),{allowRangeRequests:m,suggestedLength:l}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});m&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(c),this._headersReceivedCapability.resolve()}_onDone(c){if(c&&(this._requests.length>0?this._requests.shift().resolve({value:c.chunk,done:!1}):this._cachedChunks.push(c.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(c){this._storedError=(0,d.createResponseStatusError)(c,this._url),this._headersReceivedCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(c){this.onProgress?.({loaded:c.loaded,total:c.lengthComputable?c.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const c=new i.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0,this._headersReceivedCapability.reject(c);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class s{constructor(c,n,u){this._manager=c;const m={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._requestId=c.requestRange(n,u,m),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(c){const n=c.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(c){this._storedError=(0,d.createResponseStatusError)(c,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(c){this.isStreamingSupported||this.onProgress?.({loaded:c.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const c=new i.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=y(1),d=y(20);const C=/^file:\/\/\/[a-zA-Z]:\//;function P(u){const m=require$$5,l=m.parse(u);return l.protocol==="file:"||l.host?l:/^[a-z]:[/\\]/i.test(u)?m.parse(`file:///${u}`):(l.host||(l.protocol="file:"),l)}class B{constructor(m){this.source=m,this.url=P(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new c(this):new s(this),this._fullRequestReader}getRangeReader(m,l){if(l<=this._progressiveDataLength)return null;const T=this.isFsUrl?new n(this,m,l):new h(this,m,l);return this._rangeRequestReaders.push(T),T}cancelAllRequests(m){this._fullRequestReader?.cancel(m);for(const l of this._rangeRequestReaders.slice(0))l.cancel(m)}}e.PDFNodeStream=B;class M{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const l=m.source;this._contentLength=l.length,this._loaded=0,this._filename=null,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",l=>{this._error(l)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const l=m.source;this._isStreamingSupported=!l.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=m.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",l=>{this._error(l)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(u,m){return{protocol:u.protocol,auth:u.auth,host:u.hostname,port:u.port,path:u.path,method:"GET",headers:m}}class s extends M{constructor(m){super(m);const l=T=>{if(T.statusCode===404){const E=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E,this._headersCapability.reject(E);return}this._headersCapability.resolve(),this._setReadableStream(T);const k=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:w,suggestedLength:g}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=g||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(k)};if(this._request=null,this._url.protocol==="http:"){const T=require$$5;this._request=T.request(t(this._url,m.httpHeaders),l)}else{const T=require$$5;this._request=T.request(t(this._url,m.httpHeaders),l)}this._request.on("error",T=>{this._storedError=T,this._headersCapability.reject(T)}),this._request.end()}}class h extends a{constructor(m,l,T){super(m),this._httpHeaders={};for(const w in m.httpHeaders){const g=m.httpHeaders[w];g!==void 0&&(this._httpHeaders[w]=g)}this._httpHeaders.Range=`bytes=${l}-${T-1}`;const k=w=>{if(w.statusCode===404){const g=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g;return}this._setReadableStream(w)};if(this._request=null,this._url.protocol==="http:"){const w=require$$5;this._request=w.request(t(this._url,this._httpHeaders),k)}else{const w=require$$5;this._request=w.request(t(this._url,this._httpHeaders),k)}this._request.on("error",w=>{this._storedError=w}),this._request.end()}}class c extends M{constructor(m){super(m);let l=decodeURIComponent(this._url.path);C.test(this._url.href)&&(l=l.replace(/^\//,""));const T=require$$5;T.lstat(l,(k,w)=>{if(k){k.code==="ENOENT"&&(k=new i.MissingPDFException(`Missing PDF "${l}".`)),this._storedError=k,this._headersCapability.reject(k);return}this._contentLength=w.size,this._setReadableStream(T.createReadStream(l)),this._headersCapability.resolve()})}}class n extends a{constructor(m,l,T){super(m);let k=decodeURIComponent(this._url.path);C.test(this._url.href)&&(k=k.replace(/^\//,""));const w=require$$5;this._setReadableStream(w.createReadStream(k,{start:l,end:T-1}))}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=y(6),d=y(1);const C={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},P="http://www.w3.org/XML/1998/namespace",B="http://www.w3.org/1999/xlink",M=["butt","round","square"],a=["miter","round","bevel"],t=function(w,g="",E=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!E)return URL.createObjectURL(new Blob([w],{type:g}));const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let W=`data:${g};base64,`;for(let N=0,q=w.length;N<q;N+=3){const G=w[N]&255,st=w[N+1]&255,Z=w[N+2]&255,tt=G>>2,rt=(G&3)<<4|st>>4,J=N+1<q?(st&15)<<2|Z>>6:64,O=N+2<q?Z&63:64;W+=U[tt]+U[rt]+U[J]+U[O]}return W},s=(function(){const w=new Uint8Array([137,80,78,71,13,10,26,10]),g=12,E=new Int32Array(256);for(let Z=0;Z<256;Z++){let tt=Z;for(let rt=0;rt<8;rt++)tt=tt&1?3988292384^tt>>1&2147483647:tt>>1&2147483647;E[Z]=tt}function U(Z,tt,rt){let J=-1;for(let O=tt;O<rt;O++){const _=(J^Z[O])&255,f=E[_];J=J>>>8^f}return J^-1}function W(Z,tt,rt,J){let O=J;const _=tt.length;rt[O]=_>>24&255,rt[O+1]=_>>16&255,rt[O+2]=_>>8&255,rt[O+3]=_&255,O+=4,rt[O]=Z.charCodeAt(0)&255,rt[O+1]=Z.charCodeAt(1)&255,rt[O+2]=Z.charCodeAt(2)&255,rt[O+3]=Z.charCodeAt(3)&255,O+=4,rt.set(tt,O),O+=tt.length;const f=U(rt,J+4,O);rt[O]=f>>24&255,rt[O+1]=f>>16&255,rt[O+2]=f>>8&255,rt[O+3]=f&255}function N(Z,tt,rt){let J=1,O=0;for(let _=tt;_<rt;++_)J=(J+(Z[_]&255))%65521,O=(O+J)%65521;return O<<16|J}function q(Z){if(!d.isNodeJS)return G(Z);try{const tt=parseInt(process.versions.node)>=8?Z:Buffer.from(Z),rt=require$$5.deflateSync(tt,{level:9});return rt instanceof Uint8Array?rt:new Uint8Array(rt)}catch(tt){(0,d.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+tt)}return G(Z)}function G(Z){let tt=Z.length;const rt=65535,J=Math.ceil(tt/rt),O=new Uint8Array(2+tt+J*5+4);let _=0;O[_++]=120,O[_++]=156;let f=0;for(;tt>rt;)O[_++]=0,O[_++]=255,O[_++]=255,O[_++]=0,O[_++]=0,O.set(Z.subarray(f,f+rt),_),_+=rt,f+=rt,tt-=rt;O[_++]=1,O[_++]=tt&255,O[_++]=tt>>8&255,O[_++]=~tt&65535&255,O[_++]=(~tt&65535)>>8&255,O.set(Z.subarray(f),_),_+=Z.length-f;const p=N(Z,0,Z.length);return O[_++]=p>>24&255,O[_++]=p>>16&255,O[_++]=p>>8&255,O[_++]=p&255,O}function st(Z,tt,rt,J){const O=Z.width,_=Z.height;let f,p,v;const D=Z.data;switch(tt){case d.ImageKind.GRAYSCALE_1BPP:p=0,f=1,v=O+7>>3;break;case d.ImageKind.RGB_24BPP:p=2,f=8,v=O*3;break;case d.ImageKind.RGBA_32BPP:p=6,f=8,v=O*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+v)*_);let j=0,x=0;for(let I=0;I<_;++I)L[j++]=0,L.set(D.subarray(x,x+v),j),x+=v,j+=v;if(tt===d.ImageKind.GRAYSCALE_1BPP&&J){j=0;for(let I=0;I<_;I++){j++;for(let H=0;H<v;H++)L[j++]^=255}}const o=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,_>>24&255,_>>16&255,_>>8&255,_&255,f,p,0,0,0]),b=q(L),S=w.length+g*3+o.length+b.length,R=new Uint8Array(S);let F=0;return R.set(w,F),F+=w.length,W("IHDR",o,R,F),F+=g+o.length,W("IDATA",b,R,F),F+=g+b.length,W("IEND",new Uint8Array(0),R,F),t(R,"image/png",rt)}return function(tt,rt,J){const O=tt.kind===void 0?d.ImageKind.GRAYSCALE_1BPP:tt.kind;return st(tt,O,rt,J)}})();class h{constructor(){this.fontSizeScale=1,this.fontWeight=C.fontWeight,this.fontSize=0,this.textMatrix=d.IDENTITY_MATRIX,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=d.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=C.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,E){this.x=g,this.y=E}}function c(w){let g=[];const E=[];for(const U of w){if(U.fn==="save"){g.push({fnId:92,fn:"group",items:[]}),E.push(g),g=g.at(-1).items;continue}U.fn==="restore"?g=E.pop():g.push(U)}return g}function n(w){if(Number.isInteger(w))return w.toString();const g=w.toFixed(10);let E=g.length-1;if(g[E]!=="0")return g;do E--;while(g[E]==="0");return g.substring(0,g[E]==="."?E:E+1)}function u(w){if(w[4]===0&&w[5]===0){if(w[1]===0&&w[2]===0)return w[0]===1&&w[3]===1?"":`scale(${n(w[0])} ${n(w[3])})`;if(w[0]===w[3]&&w[1]===-w[2]){const g=Math.acos(w[0])*180/Math.PI;return`rotate(${n(g)})`}}else if(w[0]===1&&w[1]===0&&w[2]===0&&w[3]===1)return`translate(${n(w[4])} ${n(w[5])})`;return`matrix(${n(w[0])} ${n(w[1])} ${n(w[2])} ${n(w[3])} ${n(w[4])} ${n(w[5])})`}let m=0,l=0,T=0;class k{constructor(g,E,U=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new h,this.transformMatrix=d.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=g,this.objs=E,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!U,this._operatorIdMapping=[];for(const W in d.OPS)this._operatorIdMapping[d.OPS[W]]=W}getObject(g,E=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):E}save(){this.transformStack.push(this.transformMatrix);const g=this.current;this.extraStack.push(g),this.current=g.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(g){this.save(),this.executeOpTree(g),this.restore()}loadDependencies(g){const E=g.fnArray,U=g.argsArray;for(let W=0,N=E.length;W<N;W++)if(E[W]===d.OPS.dependency)for(const q of U[W]){const G=q.startsWith("g_")?this.commonObjs:this.objs,st=new Promise(Z=>{G.get(q,Z)});this.current.dependencies.push(st)}return Promise.all(this.current.dependencies)}transform(g,E,U,W,N,q){const G=[g,E,U,W,N,q];this.transformMatrix=d.Util.transform(this.transformMatrix,G),this.tgrp=null}getSVG(g,E){this.viewport=E;const U=this._initialize(E);return this.loadDependencies(g).then(()=>(this.transformMatrix=d.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(g)),U))}convertOpList(g){const E=this._operatorIdMapping,U=g.argsArray,W=g.fnArray,N=[];for(let q=0,G=W.length;q<G;q++){const st=W[q];N.push({fnId:st,fn:E[st],args:U[q]})}return c(N)}executeOpTree(g){for(const E of g){const U=E.fn,W=E.fnId,N=E.args;switch(W|0){case d.OPS.beginText:this.beginText();break;case d.OPS.dependency:break;case d.OPS.setLeading:this.setLeading(N);break;case d.OPS.setLeadingMoveText:this.setLeadingMoveText(N[0],N[1]);break;case d.OPS.setFont:this.setFont(N);break;case d.OPS.showText:this.showText(N[0]);break;case d.OPS.showSpacedText:this.showText(N[0]);break;case d.OPS.endText:this.endText();break;case d.OPS.moveText:this.moveText(N[0],N[1]);break;case d.OPS.setCharSpacing:this.setCharSpacing(N[0]);break;case d.OPS.setWordSpacing:this.setWordSpacing(N[0]);break;case d.OPS.setHScale:this.setHScale(N[0]);break;case d.OPS.setTextMatrix:this.setTextMatrix(N[0],N[1],N[2],N[3],N[4],N[5]);break;case d.OPS.setTextRise:this.setTextRise(N[0]);break;case d.OPS.setTextRenderingMode:this.setTextRenderingMode(N[0]);break;case d.OPS.setLineWidth:this.setLineWidth(N[0]);break;case d.OPS.setLineJoin:this.setLineJoin(N[0]);break;case d.OPS.setLineCap:this.setLineCap(N[0]);break;case d.OPS.setMiterLimit:this.setMiterLimit(N[0]);break;case d.OPS.setFillRGBColor:this.setFillRGBColor(N[0],N[1],N[2]);break;case d.OPS.setStrokeRGBColor:this.setStrokeRGBColor(N[0],N[1],N[2]);break;case d.OPS.setStrokeColorN:this.setStrokeColorN(N);break;case d.OPS.setFillColorN:this.setFillColorN(N);break;case d.OPS.shadingFill:this.shadingFill(N[0]);break;case d.OPS.setDash:this.setDash(N[0],N[1]);break;case d.OPS.setRenderingIntent:this.setRenderingIntent(N[0]);break;case d.OPS.setFlatness:this.setFlatness(N[0]);break;case d.OPS.setGState:this.setGState(N[0]);break;case d.OPS.fill:this.fill();break;case d.OPS.eoFill:this.eoFill();break;case d.OPS.stroke:this.stroke();break;case d.OPS.fillStroke:this.fillStroke();break;case d.OPS.eoFillStroke:this.eoFillStroke();break;case d.OPS.clip:this.clip("nonzero");break;case d.OPS.eoClip:this.clip("evenodd");break;case d.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case d.OPS.paintImageXObject:this.paintImageXObject(N[0]);break;case d.OPS.paintInlineImageXObject:this.paintInlineImageXObject(N[0]);break;case d.OPS.paintImageMaskXObject:this.paintImageMaskXObject(N[0]);break;case d.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(N[0],N[1]);break;case d.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case d.OPS.closePath:this.closePath();break;case d.OPS.closeStroke:this.closeStroke();break;case d.OPS.closeFillStroke:this.closeFillStroke();break;case d.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case d.OPS.nextLine:this.nextLine();break;case d.OPS.transform:this.transform(N[0],N[1],N[2],N[3],N[4],N[5]);break;case d.OPS.constructPath:this.constructPath(N[0],N[1]);break;case d.OPS.endPath:this.endPath();break;case 92:this.group(E.items);break;default:(0,d.warn)(`Unimplemented operator ${U}`);break}}}setWordSpacing(g){this.current.wordSpacing=g}setCharSpacing(g){this.current.charSpacing=g}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(g,E,U,W,N,q){const G=this.current;G.textMatrix=G.lineMatrix=[g,E,U,W,N,q],G.textMatrixScale=Math.hypot(g,E),G.x=G.lineX=0,G.y=G.lineY=0,G.xcoords=[],G.ycoords=[],G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${n(G.fontSize)}px`),G.tspan.setAttributeNS(null,"y",n(-G.y)),G.txtElement=this.svgFactory.createElement("svg:text"),G.txtElement.append(G.tspan)}beginText(){const g=this.current;g.x=g.lineX=0,g.y=g.lineY=0,g.textMatrix=d.IDENTITY_MATRIX,g.lineMatrix=d.IDENTITY_MATRIX,g.textMatrixScale=1,g.tspan=this.svgFactory.createElement("svg:tspan"),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtgrp=this.svgFactory.createElement("svg:g"),g.xcoords=[],g.ycoords=[]}moveText(g,E){const U=this.current;U.x=U.lineX+=g,U.y=U.lineY+=E,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${n(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",n(-U.y))}showText(g){const E=this.current,U=E.font,W=E.fontSize;if(W===0)return;const N=E.fontSizeScale,q=E.charSpacing,G=E.wordSpacing,st=E.fontDirection,Z=E.textHScale*st,tt=U.vertical,rt=tt?1:-1,J=U.defaultVMetrics,O=W*E.fontMatrix[0];let _=0;for(const v of g){if(v===null){_+=st*G;continue}else if(typeof v=="number"){_+=rt*v*W/1e3;continue}const D=(v.isSpace?G:0)+q,L=v.fontChar;let j,x,o=v.width;if(tt){let S;const R=v.vmetric||J;S=v.vmetric?R[1]:o*.5,S=-S*O;const F=R[2]*O;o=R?-R[0]:o,j=S/N,x=(_+F)/N}else j=_/N,x=0;(v.isInFont||U.missingFile)&&(E.xcoords.push(E.x+j),tt&&E.ycoords.push(-E.y+x),E.tspan.textContent+=L);const b=tt?o*O-D*st:o*O+D*st;_+=b}E.tspan.setAttributeNS(null,"x",E.xcoords.map(n).join(" ")),tt?E.tspan.setAttributeNS(null,"y",E.ycoords.map(n).join(" ")):E.tspan.setAttributeNS(null,"y",n(-E.y)),tt?E.y-=_:E.x+=_*Z,E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${n(E.fontSize)}px`),E.fontStyle!==C.fontStyle&&E.tspan.setAttributeNS(null,"font-style",E.fontStyle),E.fontWeight!==C.fontWeight&&E.tspan.setAttributeNS(null,"font-weight",E.fontWeight);const f=E.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;if(f===d.TextRenderingMode.FILL||f===d.TextRenderingMode.FILL_STROKE?(E.fillColor!==C.fillColor&&E.tspan.setAttributeNS(null,"fill",E.fillColor),E.fillAlpha<1&&E.tspan.setAttributeNS(null,"fill-opacity",E.fillAlpha)):E.textRenderingMode===d.TextRenderingMode.ADD_TO_PATH?E.tspan.setAttributeNS(null,"fill","transparent"):E.tspan.setAttributeNS(null,"fill","none"),f===d.TextRenderingMode.STROKE||f===d.TextRenderingMode.FILL_STROKE){const v=1/(E.textMatrixScale||1);this._setStrokeAttributes(E.tspan,v)}let p=E.textMatrix;E.textRise!==0&&(p=p.slice(),p[5]+=E.textRise),E.txtElement.setAttributeNS(null,"transform",`${u(p)} scale(${n(Z)}, -1)`),E.txtElement.setAttributeNS(P,"xml:space","preserve"),E.txtElement.append(E.tspan),E.txtgrp.append(E.txtElement),this._ensureTransformGroup().append(E.txtElement)}setLeadingMoveText(g,E){this.setLeading(-E),this.moveText(g,E)}addFontStyle(g){if(!g.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const E=t(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${g.loadedName}"; src: url(${E}); }
`}setFont(g){const E=this.current,U=this.commonObjs.get(g[0]);let W=g[1];E.font=U,this.embedFonts&&!U.missingFile&&!this.embeddedFonts[U.loadedName]&&(this.addFontStyle(U),this.embeddedFonts[U.loadedName]=U),E.fontMatrix=U.fontMatrix||d.FONT_IDENTITY_MATRIX;let N="normal";U.black?N="900":U.bold&&(N="bold");const q=U.italic?"italic":"normal";W<0?(W=-W,E.fontDirection=-1):E.fontDirection=1,E.fontSize=W,E.fontFamily=U.loadedName,E.fontWeight=N,E.fontStyle=q,E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"y",n(-E.y)),E.xcoords=[],E.ycoords=[]}endText(){const g=this.current;g.textRenderingMode&d.TextRenderingMode.ADD_TO_PATH_FLAG&&g.txtElement?.hasChildNodes()&&(g.element=g.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(g){g>0&&(this.current.lineWidth=g)}setLineCap(g){this.current.lineCap=M[g]}setLineJoin(g){this.current.lineJoin=a[g]}setMiterLimit(g){this.current.miterLimit=g}setStrokeAlpha(g){this.current.strokeAlpha=g}setStrokeRGBColor(g,E,U){this.current.strokeColor=d.Util.makeHexColor(g,E,U)}setFillAlpha(g){this.current.fillAlpha=g}setFillRGBColor(g,E,U){this.current.fillColor=d.Util.makeHexColor(g,E,U),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(g){this.current.strokeColor=this._makeColorN_Pattern(g)}setFillColorN(g){this.current.fillColor=this._makeColorN_Pattern(g)}shadingFill(g){const{width:E,height:U}=this.viewport,W=d.Util.inverseTransform(this.transformMatrix),[N,q,G,st]=d.Util.getAxialAlignedBoundingBox([0,0,E,U],W),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",N),Z.setAttributeNS(null,"y",q),Z.setAttributeNS(null,"width",G-N),Z.setAttributeNS(null,"height",st-q),Z.setAttributeNS(null,"fill",this._makeShadingPattern(g)),this.current.fillAlpha<1&&Z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Z)}_makeColorN_Pattern(g){return g[0]==="TilingPattern"?this._makeTilingPattern(g):this._makeShadingPattern(g)}_makeTilingPattern(g){const E=g[1],U=g[2],W=g[3]||d.IDENTITY_MATRIX,[N,q,G,st]=g[4],Z=g[5],tt=g[6],rt=g[7],J=`shading${T++}`,[O,_,f,p]=d.Util.normalizeRect([...d.Util.applyTransform([N,q],W),...d.Util.applyTransform([G,st],W)]),[v,D]=d.Util.singularValueDecompose2dScale(W),L=Z*v,j=tt*D,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",J),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",L),x.setAttributeNS(null,"height",j),x.setAttributeNS(null,"x",`${O}`),x.setAttributeNS(null,"y",`${_}`);const o=this.svg,b=this.transformMatrix,S=this.current.fillColor,R=this.current.strokeColor,F=this.svgFactory.create(f-O,p-_);if(this.svg=F,this.transformMatrix=W,rt===2){const I=d.Util.makeHexColor(...E);this.current.fillColor=I,this.current.strokeColor=I}return this.executeOpTree(this.convertOpList(U)),this.svg=o,this.transformMatrix=b,this.current.fillColor=S,this.current.strokeColor=R,x.append(F.childNodes[0]),this.defs.append(x),`url(#${J})`}_makeShadingPattern(g){switch(typeof g=="string"&&(g=this.objs.get(g)),g[0]){case"RadialAxial":const E=`shading${T++}`,U=g[3];let W;switch(g[1]){case"axial":const N=g[4],q=g[5];W=this.svgFactory.createElement("svg:linearGradient"),W.setAttributeNS(null,"id",E),W.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),W.setAttributeNS(null,"x1",N[0]),W.setAttributeNS(null,"y1",N[1]),W.setAttributeNS(null,"x2",q[0]),W.setAttributeNS(null,"y2",q[1]);break;case"radial":const G=g[4],st=g[5],Z=g[6],tt=g[7];W=this.svgFactory.createElement("svg:radialGradient"),W.setAttributeNS(null,"id",E),W.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),W.setAttributeNS(null,"cx",st[0]),W.setAttributeNS(null,"cy",st[1]),W.setAttributeNS(null,"r",tt),W.setAttributeNS(null,"fx",G[0]),W.setAttributeNS(null,"fy",G[1]),W.setAttributeNS(null,"fr",Z);break;default:throw new Error(`Unknown RadialAxial type: ${g[1]}`)}for(const N of U){const q=this.svgFactory.createElement("svg:stop");q.setAttributeNS(null,"offset",N[0]),q.setAttributeNS(null,"stop-color",N[1]),W.append(q)}return this.defs.append(W),`url(#${E})`;case"Mesh":return(0,d.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${g[0]}`)}}setDash(g,E){this.current.dashArray=g,this.current.dashPhase=E}constructPath(g,E){const U=this.current;let W=U.x,N=U.y,q=[],G=0;for(const st of g)switch(st|0){case d.OPS.rectangle:W=E[G++],N=E[G++];const Z=E[G++],tt=E[G++],rt=W+Z,J=N+tt;q.push("M",n(W),n(N),"L",n(rt),n(N),"L",n(rt),n(J),"L",n(W),n(J),"Z");break;case d.OPS.moveTo:W=E[G++],N=E[G++],q.push("M",n(W),n(N));break;case d.OPS.lineTo:W=E[G++],N=E[G++],q.push("L",n(W),n(N));break;case d.OPS.curveTo:W=E[G+4],N=E[G+5],q.push("C",n(E[G]),n(E[G+1]),n(E[G+2]),n(E[G+3]),n(W),n(N)),G+=6;break;case d.OPS.curveTo2:q.push("C",n(W),n(N),n(E[G]),n(E[G+1]),n(E[G+2]),n(E[G+3])),W=E[G+2],N=E[G+3],G+=4;break;case d.OPS.curveTo3:W=E[G+2],N=E[G+3],q.push("C",n(E[G]),n(E[G+1]),n(W),n(N),n(W),n(N)),G+=4;break;case d.OPS.closePath:q.push("Z");break}q=q.join(" "),U.path&&g.length>0&&g[0]!==d.OPS.rectangle&&g[0]!==d.OPS.moveTo?q=U.path.getAttributeNS(null,"d")+q:(U.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(U.path)),U.path.setAttributeNS(null,"d",q),U.path.setAttributeNS(null,"fill","none"),U.element=U.path,U.setCurrentPoint(W,N)}endPath(){const g=this.current;if(g.path=null,!this.pendingClip)return;if(!g.element){this.pendingClip=null;return}const E=`clippath${m++}`,U=this.svgFactory.createElement("svg:clipPath");U.setAttributeNS(null,"id",E),U.setAttributeNS(null,"transform",u(this.transformMatrix));const W=g.element.cloneNode(!0);if(this.pendingClip==="evenodd"?W.setAttributeNS(null,"clip-rule","evenodd"):W.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,U.append(W),this.defs.append(U),g.activeClipUrl){g.clipGroup=null;for(const N of this.extraStack)N.clipGroup=null;U.setAttributeNS(null,"clip-path",g.activeClipUrl)}g.activeClipUrl=`url(#${E})`,this.tgrp=null}clip(g){this.pendingClip=g}closePath(){const g=this.current;if(g.path){const E=`${g.path.getAttributeNS(null,"d")}Z`;g.path.setAttributeNS(null,"d",E)}}setLeading(g){this.current.leading=-g}setTextRise(g){this.current.textRise=g}setTextRenderingMode(g){this.current.textRenderingMode=g}setHScale(g){this.current.textHScale=g/100}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[E,U]of g)switch(E){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U);break;case"CA":this.setStrokeAlpha(U);break;case"ca":this.setFillAlpha(U);break;default:(0,d.warn)(`Unimplemented graphic state operator ${E}`);break}}fill(){const g=this.current;g.element&&(g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha),this.endPath())}stroke(){const g=this.current;g.element&&(this._setStrokeAttributes(g.element),g.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(g,E=1){const U=this.current;let W=U.dashArray;E!==1&&W.length>0&&(W=W.map(function(N){return E*N})),g.setAttributeNS(null,"stroke",U.strokeColor),g.setAttributeNS(null,"stroke-opacity",U.strokeAlpha),g.setAttributeNS(null,"stroke-miterlimit",n(U.miterLimit)),g.setAttributeNS(null,"stroke-linecap",U.lineCap),g.setAttributeNS(null,"stroke-linejoin",U.lineJoin),g.setAttributeNS(null,"stroke-width",n(E*U.lineWidth)+"px"),g.setAttributeNS(null,"stroke-dasharray",W.map(n).join(" ")),g.setAttributeNS(null,"stroke-dashoffset",n(E*U.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width","1px"),g.setAttributeNS(null,"height","1px"),g.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(g)}paintImageXObject(g){const E=this.getObject(g);if(!E){(0,d.warn)(`Dependent image with object ID ${g} is not ready yet`);return}this.paintInlineImageXObject(E)}paintInlineImageXObject(g,E){const U=g.width,W=g.height,N=s(g,this.forceDataSchema,!!E),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",n(U)),q.setAttributeNS(null,"height",n(W)),this.current.element=q,this.clip("nonzero");const G=this.svgFactory.createElement("svg:image");G.setAttributeNS(B,"xlink:href",N),G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y",n(-W)),G.setAttributeNS(null,"width",n(U)+"px"),G.setAttributeNS(null,"height",n(W)+"px"),G.setAttributeNS(null,"transform",`scale(${n(1/U)} ${n(-1/W)})`),E?E.append(G):this._ensureTransformGroup().append(G)}paintImageMaskXObject(g){const E=this.getObject(g.data,g);if(E.bitmap){(0,d.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const U=this.current,W=E.width,N=E.height,q=U.fillColor;U.maskId=`mask${l++}`;const G=this.svgFactory.createElement("svg:mask");G.setAttributeNS(null,"id",U.maskId);const st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x","0"),st.setAttributeNS(null,"y","0"),st.setAttributeNS(null,"width",n(W)),st.setAttributeNS(null,"height",n(N)),st.setAttributeNS(null,"fill",q),st.setAttributeNS(null,"mask",`url(#${U.maskId})`),this.defs.append(G),this._ensureTransformGroup().append(st),this.paintInlineImageXObject(E,G)}paintFormXObjectBegin(g,E){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),E){const U=E[2]-E[0],W=E[3]-E[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",E[0]),N.setAttributeNS(null,"y",E[1]),N.setAttributeNS(null,"width",n(U)),N.setAttributeNS(null,"height",n(W)),this.current.element=N,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(g){const E=this.svgFactory.create(g.width,g.height),U=this.svgFactory.createElement("svg:defs");E.append(U),this.defs=U;const W=this.svgFactory.createElement("svg:g");return W.setAttributeNS(null,"transform",u(g.transform)),E.append(W),this.svg=W,E}_ensureClipGroup(){if(!this.current.clipGroup){const g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(g),this.current.clipGroup=g}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=k}),((A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class y{static textContent(d){const C=[],P={items:C,styles:Object.create(null)};function B(M){if(!M)return;let a=null;const t=M.name;if(t==="#text")a=M.value;else if(y.shouldBuildText(t))M?.attributes?.textContent?a=M.attributes.textContent:M.value&&(a=M.value);else return;if(a!==null&&C.push({str:a}),!!M.children)for(const s of M.children)B(s)}return B(d),P}static shouldBuildText(d){return!(d==="textarea"||d==="input"||d==="option"||d==="select")}}e.XfaText=y}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=u,e.updateTextLayer=m;var i=y(1),d=y(6);const C=1e5,P=30,B=.8,M=new Map;function a(l,T){let k;if(T&&i.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(l,l).getContext("2d",{alpha:!1});else{const w=document.createElement("canvas");w.width=w.height=l,k=w.getContext("2d",{alpha:!1})}return k}function t(l,T){const k=M.get(l);if(k)return k;const w=a(P,T);w.font=`${P}px ${l}`;const g=w.measureText("");let E=g.fontBoundingBoxAscent,U=Math.abs(g.fontBoundingBoxDescent);if(E){const N=E/(E+U);return M.set(l,N),w.canvas.width=w.canvas.height=0,N}w.strokeStyle="red",w.clearRect(0,0,P,P),w.strokeText("g",0,0);let W=w.getImageData(0,0,P,P).data;U=0;for(let N=W.length-1-3;N>=0;N-=4)if(W[N]>0){U=Math.ceil(N/4/P);break}w.clearRect(0,0,P,P),w.strokeText("A",0,P),W=w.getImageData(0,0,P,P).data,E=0;for(let N=0,q=W.length;N<q;N+=4)if(W[N]>0){E=P-Math.floor(N/4/P);break}if(w.canvas.width=w.canvas.height=0,E){const N=E/(E+U);return M.set(l,N),N}return M.set(l,B),B}function s(l,T,k){const w=document.createElement("span"),g={angle:0,canvasWidth:0,hasText:T.str!=="",hasEOL:T.hasEOL,fontSize:0};l._textDivs.push(w);const E=i.Util.transform(l._transform,T.transform);let U=Math.atan2(E[1],E[0]);const W=k[T.fontName];W.vertical&&(U+=Math.PI/2);const N=Math.hypot(E[2],E[3]),q=N*t(W.fontFamily,l._isOffscreenCanvasSupported);let G,st;U===0?(G=E[4],st=E[5]-q):(G=E[4]+q*Math.sin(U),st=E[5]-q*Math.cos(U));const Z="calc(var(--scale-factor)*",tt=w.style;l._container===l._rootContainer?(tt.left=`${(100*G/l._pageWidth).toFixed(2)}%`,tt.top=`${(100*st/l._pageHeight).toFixed(2)}%`):(tt.left=`${Z}${G.toFixed(2)}px)`,tt.top=`${Z}${st.toFixed(2)}px)`),tt.fontSize=`${Z}${N.toFixed(2)}px)`,tt.fontFamily=W.fontFamily,g.fontSize=N,w.setAttribute("role","presentation"),w.textContent=T.str,w.dir=T.dir,l._fontInspectorEnabled&&(w.dataset.fontName=T.fontName),U!==0&&(g.angle=U*(180/Math.PI));let rt=!1;if(T.str.length>1)rt=!0;else if(T.str!==" "&&T.transform[0]!==T.transform[3]){const J=Math.abs(T.transform[0]),O=Math.abs(T.transform[3]);J!==O&&Math.max(J,O)/Math.min(J,O)>1.5&&(rt=!0)}rt&&(g.canvasWidth=W.vertical?T.height:T.width),l._textDivProperties.set(w,g),l._isReadableStream&&l._layoutText(w)}function h(l){const{div:T,scale:k,properties:w,ctx:g,prevFontSize:E,prevFontFamily:U}=l,{style:W}=T;let N="";if(w.canvasWidth!==0&&w.hasText){const{fontFamily:q}=W,{canvasWidth:G,fontSize:st}=w;(E!==st||U!==q)&&(g.font=`${st*k}px ${q}`,l.prevFontSize=st,l.prevFontFamily=q);const{width:Z}=g.measureText(T.textContent);Z>0&&(N=`scaleX(${G*k/Z})`)}w.angle!==0&&(N=`rotate(${w.angle}deg) ${N}`),N.length>0&&(W.transform=N)}function c(l){if(l._canceled)return;const T=l._textDivs,k=l._capability;if(T.length>C){k.resolve();return}if(!l._isReadableStream)for(const g of T)l._layoutText(g);k.resolve()}class n{constructor({textContentSource:T,container:k,viewport:w,textDivs:g,textDivProperties:E,textContentItemsStr:U,isOffscreenCanvasSupported:W}){this._textContentSource=T,this._isReadableStream=T instanceof ReadableStream,this._container=this._rootContainer=k,this._textDivs=g||[],this._textContentItemsStr=U||[],this._isOffscreenCanvasSupported=W,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=E||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,W)};const{pageWidth:N,pageHeight:q,pageX:G,pageY:st}=w.rawDims;this._transform=[1,0,0,-1,-G,st+q],this._pageWidth=N,this._pageHeight=q,(0,d.setLayerDimensions)(k,w),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(T,k){for(const w of T){if(w.str===void 0){if(w.type==="beginMarkedContentProps"||w.type==="beginMarkedContent"){const g=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),w.id!==null&&this._container.setAttribute("id",`${w.id}`),g.append(this._container)}else w.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(w.str),s(this,w,k)}}_layoutText(T){const k=this._layoutTextParams.properties=this._textDivProperties.get(T);if(this._layoutTextParams.div=T,h(this._layoutTextParams),k.hasText&&this._container.append(T),k.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this._container.append(w)}}_render(){const T=new i.PromiseCapability;let k=Object.create(null);if(this._isReadableStream){const w=()=>{this._reader.read().then(({value:g,done:E})=>{if(E){T.resolve();return}Object.assign(k,g.styles),this._processItems(g.items,k),w()},T.reject)};this._reader=this._textContentSource.getReader(),w()}else if(this._textContentSource){const{items:w,styles:g}=this._textContentSource;this._processItems(w,g),T.resolve()}else throw new Error('No "textContentSource" parameter specified.');T.promise.then(()=>{k=null,c(this)},this._capability.reject)}}e.TextLayerRenderTask=n;function u(l){!l.textContentSource&&(l.textContent||l.textContentStream)&&((0,d.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),l.textContentSource=l.textContent||l.textContentStream);const{container:T,viewport:k}=l,w=getComputedStyle(T),g=w.getPropertyValue("visibility"),E=parseFloat(w.getPropertyValue("--scale-factor"));g==="visible"&&(!E||Math.abs(E-k.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const U=new n(l);return U._render(),U}function m({container:l,viewport:T,textDivs:k,textDivProperties:w,isOffscreenCanvasSupported:g,mustRotate:E=!0,mustRescale:U=!0}){if(E&&(0,d.setLayerDimensions)(l,{rotation:T.rotation}),U){const W=a(0,g),q={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:W};for(const G of k)q.properties=w.get(G),q.div=G,h(q)}}}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=y(1),d=y(4),C=y(28),P=y(33),B=y(6),M=y(34);class a{#t;#e=!1;#n=null;#s=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#r=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:s,pageIndex:h,div:c,accessibilityManager:n,annotationLayer:u,viewport:m,l10n:l}){const T=[C.FreeTextEditor,P.InkEditor,M.StampEditor];if(!a._initialized){a._initialized=!0;for(const k of T)k.initialize(l)}s.registerEditorTypes(T),this.#i=s,this.pageIndex=h,this.div=c,this.#t=n,this.#n=u,this.viewport=m,this.#i.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(s){this.#i.updateToolbar(s)}updateMode(s=this.#i.getMode()){this.#p(),s===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),s!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",s===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",s===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",s===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(s){if(!s&&this.#i.getMode()!==i.AnnotationEditorType.INK)return;if(!s){for(const c of this.#a.values())if(c.isEmpty()){c.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(s){this.#i.setEditingState(s)}addCommands(s){this.#i.addCommands(s)}enable(){this.div.style.pointerEvents="auto";const s=new Set;for(const c of this.#a.values())c.enableEditing(),c.annotationElementId&&s.add(c.annotationElementId);if(!this.#n)return;const h=this.#n.getEditableAnnotations();for(const c of h){if(c.hide(),this.#i.isDeletedAnnotationElement(c.data.id)||s.has(c.data.id))continue;const n=this.deserialize(c);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const s=new Set;for(const h of this.#a.values()){if(h.disableEditing(),!h.annotationElementId||h.serialize()!==null){s.add(h.annotationElementId);continue}this.getEditableAnnotation(h.annotationElementId)?.show(),h.remove()}if(this.#n){const h=this.#n.getEditableAnnotations();for(const c of h){const{id:n}=c.data;s.has(n)||this.#i.isDeletedAnnotationElement(n)||c.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(s){return this.#n?.getEditableAnnotation(s)||null}setActiveEditor(s){this.#i.getActive()!==s&&this.#i.setActiveEditor(s)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#s)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#s)}attach(s){this.#a.set(s.id,s);const{annotationElementId:h}=s;h&&this.#i.isDeletedAnnotationElement(h)&&this.#i.removeDeletedAnnotationElement(s)}detach(s){this.#a.delete(s.id),this.#t?.removePointerInTextLayer(s.contentDiv),!this.#c&&s.annotationElementId&&this.#i.addDeletedAnnotationElement(s)}remove(s){this.detach(s),this.#i.removeEditor(s),s.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),s.div.remove(),s.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(s){s.parent!==this&&(s.annotationElementId&&(this.#i.addDeletedAnnotationElement(s.annotationElementId),d.AnnotationEditor.deleteAnnotationElement(s),s.annotationElementId=null),this.attach(s),s.parent?.detach(s),s.setParent(this),s.div&&s.isAttachedToDOM&&(s.div.remove(),this.div.append(s.div)))}add(s){if(this.changeParent(s),this.#i.addEditor(s),this.attach(s),!s.isAttachedToDOM){const h=s.render();this.div.append(h),s.isAttachedToDOM=!0}s.fixAndSetPosition(),s.onceAdded(),this.#i.addToAnnotationStorage(s)}moveEditorInDOM(s){if(!s.isAttachedToDOM)return;const{activeElement:h}=document;s.div.contains(h)&&(s._focusEventsAllowed=!1,setTimeout(()=>{s.div.contains(document.activeElement)?s._focusEventsAllowed=!0:(s.div.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),h.focus())},0)),s._structTreeParentId=this.#t?.moveElementInDOM(this.div,s.div,s.contentDiv,!0)}addOrRebuild(s){s.needsToBeRebuilt()?s.rebuild():this.add(s)}addUndoableEditor(s){const h=()=>s._uiManager.rebuild(s),c=()=>{s.remove()};this.addCommands({cmd:h,undo:c,mustExec:!1})}getNextId(){return this.#i.getId()}#f(s){switch(this.#i.getMode()){case i.AnnotationEditorType.FREETEXT:return new C.FreeTextEditor(s);case i.AnnotationEditorType.INK:return new P.InkEditor(s);case i.AnnotationEditorType.STAMP:return new M.StampEditor(s)}return null}pasteEditor(s,h){this.#i.updateToolbar(s),this.#i.updateMode(s);const{offsetX:c,offsetY:n}=this.#u(),u=this.getNextId(),m=this.#f({parent:this,id:u,x:c,y:n,uiManager:this.#i,isCentered:!0,...h});m&&this.add(m)}deserialize(s){switch(s.annotationType??s.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return C.FreeTextEditor.deserialize(s,this,this.#i);case i.AnnotationEditorType.INK:return P.InkEditor.deserialize(s,this,this.#i);case i.AnnotationEditorType.STAMP:return M.StampEditor.deserialize(s,this,this.#i)}return null}#d(s,h){const c=this.getNextId(),n=this.#f({parent:this,id:c,x:s.offsetX,y:s.offsetY,uiManager:this.#i,isCentered:h});return n&&this.add(n),n}#u(){const{x:s,y:h,width:c,height:n}=this.div.getBoundingClientRect(),u=Math.max(0,s),m=Math.max(0,h),l=Math.min(window.innerWidth,s+c),T=Math.min(window.innerHeight,h+n),k=(u+l)/2-s,w=(m+T)/2-h,[g,E]=this.viewport.rotation%180===0?[k,w]:[w,k];return{offsetX:g,offsetY:E}}addNewEditor(){this.#d(this.#u(),!0)}setSelected(s){this.#i.setSelected(s)}toggleSelected(s){this.#i.toggleSelected(s)}isSelected(s){return this.#i.isSelected(s)}unselect(s){this.#i.unselect(s)}pointerup(s){const{isMac:h}=i.FeatureTest.platform;if(!(s.button!==0||s.ctrlKey&&h)&&s.target===this.div&&this.#r){if(this.#r=!1,!this.#e){this.#e=!0;return}if(this.#i.getMode()===i.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(s,!1)}}pointerdown(s){if(this.#r){this.#r=!1;return}const{isMac:h}=i.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&h||s.target!==this.div)return;this.#r=!0;const c=this.#i.getActive();this.#e=!c||c.isEmpty()}findNewParent(s,h,c){const n=this.#i.findParent(h,c);return n===null||n===this?!1:(n.changeParent(s),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const s of this.#a.values())this.#t?.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,this.#a.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const s of this.#a.values())s.isEmpty()&&s.remove();this.#l=!1}render({viewport:s}){this.viewport=s,(0,B.setLayerDimensions)(this.div,s);for(const h of this.#i.getEditors(this.pageIndex))this.add(h);this.updateMode()}update({viewport:s}){this.#i.commitOrRemove(),this.viewport=s,(0,B.setLayerDimensions)(this.div,{rotation:s.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:s,pageHeight:h}=this.viewport.rawDims;return[s,h]}}e.AnnotationEditorLayer=a}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=y(1),d=y(5),C=y(4),P=y(29);class B extends C.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#s=this.editorDivKeydown.bind(this);#o;#a="";#r=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const a=B.prototype,t=c=>c.isEmpty(),s=d.AnnotationEditorUIManager.TRANSLATE_SMALL,h=d.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new d.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-h,0],checker:t}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[h,0],checker:t}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-h],checker:t}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,h],checker:t}]]))}static _type="freetext";constructor(a){super({...a,name:"freeTextEditor"}),this.#o=a.color||B._defaultColor||C.AnnotationEditor._defaultLineColor,this.#l=a.fontSize||B._defaultFontSize}static initialize(a){C.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,t){switch(a){case i.AnnotationEditorParamsType.FREETEXT_SIZE:B._defaultFontSize=t;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:B._defaultColor=t;break}}updateParams(a,t){switch(a){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(t);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(t);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,B._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,B._defaultColor||C.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(a){const t=h=>{this.editorDiv.style.fontSize=`calc(${h}px * var(--scale-factor))`,this.translate(0,-(h-this.#l)*this.parentScale),this.#l=h,this.#u()},s=this.#l;this.addCommands({cmd:()=>{t(a)},undo:()=>{t(s)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(a){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=a},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,t){this._uiManager.translateSelectedEditors(a,t,!0)}getInitialTranslation(){const a=this.parentScale;return[-B._internalPadding*a,-(B._internalPadding+this.#l)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#s),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#s),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;const t=[];for(const s of a)t.push(s.innerText.replace(/\r\n?|\n/,""));return t.join(`
`)}#u(){const[a,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:h,div:c}=this,n=c.style.display;c.style.display="hidden",h.div.append(this.div),s=c.getBoundingClientRect(),c.remove(),c.style.display=n}this.rotation%180===this.parentRotation%180?(this.width=s.width/a,this.height=s.height/t):(this.width=s.height/a,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const a=this.#a,t=this.#a=this.#d().trimEnd();if(a===t)return;const s=h=>{if(this.#a=h,!h){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(a)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){B._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,t;this.width&&(a=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.enableEditing(),C.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(h=>this.editorDiv?.setAttribute("aria-label",h)),C.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(h=>this.editorDiv?.setAttribute("default-content",h)),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#l}px * var(--scale-factor))`,s.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,d.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[h,c]=this.parentDimensions;if(this.annotationElementId){const{position:n}=this.#c;let[u,m]=this.getInitialTranslation();[u,m]=this.pageTranslationToScreen(u,m);const[l,T]=this.pageDimensions,[k,w]=this.pageTranslation;let g,E;switch(this.rotation){case 0:g=a+(n[0]-k)/l,E=t+this.height-(n[1]-w)/T;break;case 90:g=a+(n[0]-k)/l,E=t-(n[1]-w)/T,[u,m]=[m,-u];break;case 180:g=a-this.width+(n[0]-k)/l,E=t-(n[1]-w)/T,[u,m]=[-u,-m];break;case 270:g=a+(n[0]-k-this.height*T)/l,E=t+(n[1]-w-this.width*l)/T,[u,m]=[-m,u];break}this.setAt(g*h,E*c,u,m)}else this.setAt(a*h,t*c,this.width*h,this.height*c);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const a of this.#a.split(`
`)){const t=document.createElement("div");t.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(a,t,s){let h=null;if(a instanceof P.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:n,fontColor:u},rect:m,rotation:l,id:T},textContent:k,textPosition:w,parent:{page:{pageNumber:g}}}=a;if(!k||k.length===0)return null;h=a={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(u),fontSize:n,value:k.join(`
`),position:w,pageIndex:g-1,rect:m,rotation:l,id:T,deleted:!1}}const c=super.deserialize(a,t,s);return c.#l=a.fontSize,c.#o=i.Util.makeHexColor(...a.color),c.#a=a.value,c.annotationElementId=a.id||null,c.#c=h,c}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=B._internalPadding*this.parentScale,s=this.getRect(t,t),h=C.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),c={annotationType:i.AnnotationEditorType.FREETEXT,color:h,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?c:this.annotationElementId&&!this.#b(c)?null:(c.id=this.annotationElementId,c)}#b(a){const{value:t,fontSize:s,color:h,rect:c,pageIndex:n}=this.#c;return a.value!==t||a.fontSize!==s||a.rect.some((u,m)=>Math.abs(u-c[m])>=1)||a.color.some((u,m)=>u!==h[m])||a.pageIndex!==n}#m(a=!1){if(!this.annotationElementId)return;if(this.#u(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const t=B._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}e.FreeTextEditor=B}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=y(1),d=y(6),C=y(3),P=y(30),B=y(31),M=y(32);const a=1e3,t=9,s=new WeakSet;function h(x){return{width:x[2]-x[0],height:x[3]-x[1]}}class c{static create(o){switch(o.data.annotationType){case i.AnnotationType.LINK:return new u(o);case i.AnnotationType.TEXT:return new m(o);case i.AnnotationType.WIDGET:switch(o.data.fieldType){case"Tx":return new T(o);case"Btn":return o.data.radioButton?new g(o):o.data.checkBox?new w(o):new E(o);case"Ch":return new U(o);case"Sig":return new k(o)}return new l(o);case i.AnnotationType.POPUP:return new W(o);case i.AnnotationType.FREETEXT:return new q(o);case i.AnnotationType.LINE:return new G(o);case i.AnnotationType.SQUARE:return new st(o);case i.AnnotationType.CIRCLE:return new Z(o);case i.AnnotationType.POLYLINE:return new tt(o);case i.AnnotationType.CARET:return new J(o);case i.AnnotationType.INK:return new O(o);case i.AnnotationType.POLYGON:return new rt(o);case i.AnnotationType.HIGHLIGHT:return new _(o);case i.AnnotationType.UNDERLINE:return new f(o);case i.AnnotationType.SQUIGGLY:return new p(o);case i.AnnotationType.STRIKEOUT:return new v(o);case i.AnnotationType.STAMP:return new D(o);case i.AnnotationType.FILEATTACHMENT:return new L(o);default:return new n(o)}}}class n{#t=!1;constructor(o,{isRenderable:b=!1,ignoreBorder:S=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=b,this.data=o.data,this.layer=o.layer,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,this.parent=o.parent,b&&(this.container=this._createContainer(S)),R&&this._createQuadrilaterals()}static _hasPopupData({titleObj:o,contentsObj:b,richText:S}){return!!(o?.str||b?.str||S?.str)}get hasPopupData(){return n._hasPopupData(this.data)}_createContainer(o){const{data:b,parent:{page:S,viewport:R}}=this,F=document.createElement("section");F.setAttribute("data-annotation-id",b.id),this instanceof l||(F.tabIndex=a),F.style.zIndex=this.parent.zIndex++,this.data.popupRef&&F.setAttribute("aria-haspopup","dialog"),b.noRotate&&F.classList.add("norotate");const{pageWidth:I,pageHeight:H,pageX:X,pageY:it}=R.rawDims;if(!b.rect||this instanceof W){const{rotation:et}=b;return!b.hasOwnCanvas&&et!==0&&this.setRotation(et,F),F}const{width:z,height:Y}=h(b.rect),K=i.Util.normalizeRect([b.rect[0],S.view[3]-b.rect[1]+S.view[1],b.rect[2],S.view[3]-b.rect[3]+S.view[1]]);if(!o&&b.borderStyle.width>0){F.style.borderWidth=`${b.borderStyle.width}px`;const et=b.borderStyle.horizontalCornerRadius,at=b.borderStyle.verticalCornerRadius;if(et>0||at>0){const ct=`calc(${et}px * var(--scale-factor)) / calc(${at}px * var(--scale-factor))`;F.style.borderRadius=ct}else if(this instanceof g){const ct=`calc(${z}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;F.style.borderRadius=ct}switch(b.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const lt=b.borderColor||null;lt?(this.#t=!0,F.style.borderColor=i.Util.makeHexColor(lt[0]|0,lt[1]|0,lt[2]|0)):F.style.borderWidth=0}F.style.left=`${100*(K[0]-X)/I}%`,F.style.top=`${100*(K[1]-it)/H}%`;const{rotation:Q}=b;return b.hasOwnCanvas||Q===0?(F.style.width=`${100*z/I}%`,F.style.height=`${100*Y/H}%`):this.setRotation(Q,F),F}setRotation(o,b=this.container){if(!this.data.rect)return;const{pageWidth:S,pageHeight:R}=this.parent.viewport.rawDims,{width:F,height:I}=h(this.data.rect);let H,X;o%180===0?(H=100*F/S,X=100*I/R):(H=100*I/S,X=100*F/R),b.style.width=`${H}%`,b.style.height=`${X}%`,b.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){const o=(b,S,R)=>{const F=R.detail[b],I=F[0],H=F.slice(1);R.target.style[S]=P.ColorConverters[`${I}_HTML`](H),this.annotationStorage.setValue(this.data.id,{[S]:P.ColorConverters[`${I}_rgb`](H)})};return(0,i.shadow)(this,"_commonActions",{display:b=>{const{display:S}=b.detail,R=S%2===1;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:R,noPrint:S===1||S===2})},print:b=>{this.annotationStorage.setValue(this.data.id,{noPrint:!b.detail.print})},hidden:b=>{const{hidden:S}=b.detail;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:S,noView:S})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.target.disabled=b.detail.readonly},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{o("bgColor","backgroundColor",b)},fillColor:b=>{o("fillColor","backgroundColor",b)},fgColor:b=>{o("fgColor","color",b)},textColor:b=>{o("textColor","color",b)},borderColor:b=>{o("borderColor","borderColor",b)},strokeColor:b=>{o("strokeColor","borderColor",b)},rotation:b=>{const S=b.detail.rotation;this.setRotation(S),this.annotationStorage.setValue(this.data.id,{rotation:S})}})}_dispatchEventFromSandbox(o,b){const S=this._commonActions;for(const R of Object.keys(b.detail))(o[R]||S[R])?.(b)}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const S=this._commonActions;for(const[R,F]of Object.entries(b)){const I=S[R];if(I){const H={detail:{[R]:F},target:o};I(H),delete b[R]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:o}=this.data;if(!o)return;const[b,S,R,F]=this.data.rect;if(o.length===1){const[,{x:at,y:lt},{x:ct,y:ht}]=o[0];if(R===at&&F===lt&&b===ct&&S===ht)return}const{style:I}=this.container;let H;if(this.#t){const{borderColor:at,borderWidth:lt}=I;I.borderWidth=0,H=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${at}" stroke-width="${lt}">`],this.container.classList.add("hasBorder")}const X=R-b,it=F-S,{svgFactory:z}=this,Y=z.createElement("svg");Y.classList.add("quadrilateralsContainer"),Y.setAttribute("width",0),Y.setAttribute("height",0);const K=z.createElement("defs");Y.append(K);const Q=z.createElement("clipPath"),et=`clippath_${this.data.id}`;Q.setAttribute("id",et),Q.setAttribute("clipPathUnits","objectBoundingBox"),K.append(Q);for(const[,{x:at,y:lt},{x:ct,y:ht}]of o){const dt=z.createElement("rect"),ut=(ct-b)/X,_t=(F-lt)/it,gt=(at-ct)/X,Et=(lt-ht)/it;dt.setAttribute("x",ut),dt.setAttribute("y",_t),dt.setAttribute("width",gt),dt.setAttribute("height",Et),Q.append(dt),H?.push(`<rect vector-effect="non-scaling-stroke" x="${ut}" y="${_t}" width="${gt}" height="${Et}"/>`)}this.#t&&(H.push("</g></svg>')"),I.backgroundImage=H.join("")),this.container.append(Y),this.container.style.clipPath=`url(#${et})`}_createPopup(){const{container:o,data:b}=this;o.setAttribute("aria-haspopup","dialog");const S=new W({data:{color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,parentRect:b.rect,borderStyle:0,id:`popup_${b.id}`,rotation:b.rotation},parent:this.parent,elements:[this]});this.parent.div.append(S.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,b=null){const S=[];if(this._fieldObjects){const R=this._fieldObjects[o];if(R)for(const{page:F,id:I,exportValues:H}of R){if(F===-1||I===b)continue;const X=typeof H=="string"?H:null,it=document.querySelector(`[data-element-id="${I}"]`);if(it&&!s.has(it)){(0,i.warn)(`_getElementsByName - element not allowed: ${I}`);continue}S.push({id:I,exportValue:X,domElement:it})}return S}for(const R of document.getElementsByName(o)){const{exportValue:F}=R,I=R.getAttribute("data-element-id");I!==b&&s.has(R)&&S.push({id:I,exportValue:F,domElement:R})}return S}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const o=this.getElementsToTriggerPopup();if(Array.isArray(o))for(const b of o)b.classList.add("highlightArea");else o.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:o,data:{id:b}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:o,editId:b})})}}class u extends n{constructor(o,b=null){super(o,{isRenderable:!0,ignoreBorder:!!b?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:b}=this,S=document.createElement("a");S.setAttribute("data-element-id",o.id);let R=!1;return o.url?(b.addLinkAttributes(S,o.url,o.newWindow),R=!0):o.action?(this._bindNamedAction(S,o.action),R=!0):o.attachment?(this._bindAttachment(S,o.attachment),R=!0):o.setOCGState?(this.#e(S,o.setOCGState),R=!0):o.dest?(this._bindLink(S,o.dest),R=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(S,o),R=!0),o.resetForm?(this._bindResetFormAction(S,o.resetForm),R=!0):this.isTooltipOnly&&!R&&(this._bindLink(S,""),R=!0)),this.container.classList.add("linkAnnotation"),R&&this.container.append(S),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(o,b){o.href=this.linkService.getDestinationHash(b),o.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&this.#t()}_bindNamedAction(o,b){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(b),!1),this.#t()}_bindAttachment(o,b){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,b.content,b.filename),!1),this.#t()}#e(o,b){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(b),!1),this.#t()}_bindJSAction(o,b){o.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const R of Object.keys(b.actions)){const F=S.get(R);F&&(o[F]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:R}}),!1))}o.onclick||(o.onclick=()=>!1),this.#t()}_bindResetFormAction(o,b){const S=o.onclick;if(S||(o.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(o.onclick=()=>!1);return}o.onclick=()=>{S?.();const{fields:R,refs:F,include:I}=b,H=[];if(R.length!==0||F.length!==0){const z=new Set(F);for(const Y of R){const K=this._fieldObjects[Y]||[];for(const{id:Q}of K)z.add(Q)}for(const Y of Object.values(this._fieldObjects))for(const K of Y)z.has(K.id)===I&&H.push(K)}else for(const z of Object.values(this._fieldObjects))H.push(...z);const X=this.annotationStorage,it=[];for(const z of H){const{id:Y}=z;switch(it.push(Y),z.type){case"text":{const Q=z.defaultValue||"";X.setValue(Y,{value:Q});break}case"checkbox":case"radiobutton":{const Q=z.defaultValue===z.exportValues;X.setValue(Y,{value:Q});break}case"combobox":case"listbox":{const Q=z.defaultValue||"";X.setValue(Y,{value:Q});break}default:continue}const K=document.querySelector(`[data-element-id="${Y}"]`);if(K){if(!s.has(K)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Y}`);continue}}else continue;K.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:it,name:"ResetForm"}}),!1}}}class m extends n{constructor(o){super(o,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(o),this.container}}class l extends n{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(o){this.data.hasOwnCanvas&&(o.previousSibling?.nodeName==="CANVAS"&&(o.previousSibling.hidden=!0),o.hidden=!1)}_getKeyModifier(o){const{isWin:b,isMac:S}=i.FeatureTest.platform;return b&&o.ctrlKey||S&&o.metaKey}_setEventListener(o,b,S,R,F){S.includes("mouse")?o.addEventListener(S,I=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:F(I),shift:I.shiftKey,modifier:this._getKeyModifier(I)}})}):o.addEventListener(S,I=>{if(S==="blur"){if(!b.focused||!I.relatedTarget)return;b.focused=!1}else if(S==="focus"){if(b.focused)return;b.focused=!0}F&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:F(I)}})})}_setEventListeners(o,b,S,R){for(const[F,I]of S)(I==="Action"||this.data.actions?.[I])&&((I==="Focus"||I==="Blur")&&(b||={focused:!1}),this._setEventListener(o,b,F,I,R),I==="Focus"&&!this.data.actions?.Blur?this._setEventListener(o,b,"blur","Blur",null):I==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(o,b,"focus","Focus",null))}_setBackgroundColor(o){const b=this.data.backgroundColor||null;o.style.backgroundColor=b===null?"transparent":i.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(o){const b=["left","center","right"],{fontColor:S}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||t,F=o.style;let I;const H=2,X=it=>Math.round(10*it)/10;if(this.data.multiLine){const it=Math.abs(this.data.rect[3]-this.data.rect[1]-H),z=Math.round(it/(i.LINE_FACTOR*R))||1,Y=it/z;I=Math.min(R,X(Y/i.LINE_FACTOR))}else{const it=Math.abs(this.data.rect[3]-this.data.rect[1]-H);I=Math.min(R,X(it/i.LINE_FACTOR))}F.fontSize=`calc(${I}px * var(--scale-factor))`,F.color=i.Util.makeHexColor(S[0],S[1],S[2]),this.data.textAlignment!==null&&(F.textAlign=b[this.data.textAlignment])}_setRequired(o,b){b?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",b)}}class T extends l{constructor(o){const b=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:b})}setPropertyOnSiblings(o,b,S,R){const F=this.annotationStorage;for(const I of this._getElementsByName(o.name,o.id))I.domElement&&(I.domElement[b]=S),F.setValue(I.id,{[R]:S})}render(){const o=this.annotationStorage,b=this.data.id;this.container.classList.add("textWidgetAnnotation");let S=null;if(this.renderForms){const R=o.getValue(b,{value:this.data.fieldValue});let F=R.value||"";const I=o.getValue(b,{charLimit:this.data.maxLen}).charLimit;I&&F.length>I&&(F=F.slice(0,I));let H=R.formattedValue||this.data.textContent?.join(`
`)||null;H&&this.data.comb&&(H=H.replaceAll(/\s+/g,""));const X={userValue:F,formattedValue:H,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=H??F,this.data.doNotScroll&&(S.style.overflowY="hidden")):(S=document.createElement("input"),S.type="text",S.setAttribute("value",H??F),this.data.doNotScroll&&(S.style.overflowX="hidden")),this.data.hasOwnCanvas&&(S.hidden=!0),s.add(S),S.setAttribute("data-element-id",b),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=a,this._setRequired(S,this.data.required),I&&(S.maxLength=I),S.addEventListener("input",z=>{o.setValue(b,{value:z.target.value}),this.setPropertyOnSiblings(S,"value",z.target.value,"value"),X.formattedValue=null}),S.addEventListener("resetform",z=>{const Y=this.data.defaultFieldValue??"";S.value=X.userValue=Y,X.formattedValue=null});let it=z=>{const{formattedValue:Y}=X;Y!=null&&(z.target.value=Y),z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",Y=>{if(X.focused)return;const{target:K}=Y;X.userValue&&(K.value=X.userValue),X.lastCommittedValue=K.value,X.commitKey=1,X.focused=!0}),S.addEventListener("updatefromsandbox",Y=>{this.showElementAndHideCanvas(Y.target);const K={value(Q){X.userValue=Q.detail.value??"",o.setValue(b,{value:X.userValue.toString()}),Q.target.value=X.userValue},formattedValue(Q){const{formattedValue:et}=Q.detail;X.formattedValue=et,et!=null&&Q.target!==document.activeElement&&(Q.target.value=et),o.setValue(b,{formattedValue:et})},selRange(Q){Q.target.setSelectionRange(...Q.detail.selRange)},charLimit:Q=>{const{charLimit:et}=Q.detail,{target:at}=Q;if(et===0){at.removeAttribute("maxLength");return}at.setAttribute("maxLength",et);let lt=X.userValue;!lt||lt.length<=et||(lt=lt.slice(0,et),at.value=X.userValue=lt,o.setValue(b,{value:lt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:lt,willCommit:!0,commitKey:1,selStart:at.selectionStart,selEnd:at.selectionEnd}}))}};this._dispatchEventFromSandbox(K,Y)}),S.addEventListener("keydown",Y=>{X.commitKey=1;let K=-1;if(Y.key==="Escape"?K=0:Y.key==="Enter"&&!this.data.multiLine?K=2:Y.key==="Tab"&&(X.commitKey=3),K===-1)return;const{value:Q}=Y.target;X.lastCommittedValue!==Q&&(X.lastCommittedValue=Q,X.userValue=Q,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Q,willCommit:!0,commitKey:K,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}))});const z=it;it=null,S.addEventListener("blur",Y=>{if(!X.focused||!Y.relatedTarget)return;X.focused=!1;const{value:K}=Y.target;X.userValue=K,X.lastCommittedValue!==K&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:K,willCommit:!0,commitKey:X.commitKey,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}),z(Y)}),this.data.actions?.Keystroke&&S.addEventListener("beforeinput",Y=>{X.lastCommittedValue=null;const{data:K,target:Q}=Y,{value:et,selectionStart:at,selectionEnd:lt}=Q;let ct=at,ht=lt;switch(Y.inputType){case"deleteWordBackward":{const dt=et.substring(0,at).match(/\w*[^\w]*$/);dt&&(ct-=dt[0].length);break}case"deleteWordForward":{const dt=et.substring(at).match(/^[^\w]*\w*/);dt&&(ht+=dt[0].length);break}case"deleteContentBackward":at===lt&&(ct-=1);break;case"deleteContentForward":at===lt&&(ht+=1);break}Y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:et,change:K||"",willCommit:!1,selStart:ct,selEnd:ht}})}),this._setEventListeners(S,X,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.value)}if(it&&S.addEventListener("blur",it),this.data.comb){const Y=(this.data.rect[2]-this.data.rect[0])/I;S.classList.add("comb"),S.style.letterSpacing=`calc(${Y}px * var(--scale-factor) - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class k extends l{constructor(o){super(o,{isRenderable:!!o.data.hasOwnCanvas})}}class w extends l{constructor(o){super(o,{isRenderable:o.renderForms})}render(){const o=this.annotationStorage,b=this.data,S=b.id;let R=o.getValue(S,{value:b.exportValue===b.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",o.setValue(S,{value:R})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const F=document.createElement("input");return s.add(F),F.setAttribute("data-element-id",S),F.disabled=b.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=b.fieldName,R&&F.setAttribute("checked",!0),F.setAttribute("exportValue",b.exportValue),F.tabIndex=a,F.addEventListener("change",I=>{const{name:H,checked:X}=I.target;for(const it of this._getElementsByName(H,S)){const z=X&&it.exportValue===b.exportValue;it.domElement&&(it.domElement.checked=z),o.setValue(it.id,{value:z})}o.setValue(S,{value:X})}),F.addEventListener("resetform",I=>{const H=b.defaultFieldValue||"Off";I.target.checked=H===b.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",I=>{const H={value(X){X.target.checked=X.detail.value!=="Off",o.setValue(S,{value:X.target.checked})}};this._dispatchEventFromSandbox(H,I)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],I=>I.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class g extends l{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const o=this.annotationStorage,b=this.data,S=b.id;let R=o.getValue(S,{value:b.fieldValue===b.buttonValue}).value;typeof R=="string"&&(R=R!==b.buttonValue,o.setValue(S,{value:R}));const F=document.createElement("input");if(s.add(F),F.setAttribute("data-element-id",S),F.disabled=b.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=b.fieldName,R&&F.setAttribute("checked",!0),F.tabIndex=a,F.addEventListener("change",I=>{const{name:H,checked:X}=I.target;for(const it of this._getElementsByName(H,S))o.setValue(it.id,{value:!1});o.setValue(S,{value:X})}),F.addEventListener("resetform",I=>{const H=b.defaultFieldValue;I.target.checked=H!=null&&H===b.buttonValue}),this.enableScripting&&this.hasJSActions){const I=b.buttonValue;F.addEventListener("updatefromsandbox",H=>{const X={value:it=>{const z=I===it.detail.value;for(const Y of this._getElementsByName(it.target.name)){const K=z&&Y.id===S;Y.domElement&&(Y.domElement.checked=K),o.setValue(Y.id,{value:K})}}};this._dispatchEventFromSandbox(X,H)}),this._setEventListeners(F,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class E extends u{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){const o=super.render();o.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(o.title=this.data.alternativeText);const b=o.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",S=>{this._dispatchEventFromSandbox({},S)})),o}}class U extends l{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const o=this.annotationStorage,b=this.data.id,S=o.getValue(b,{value:this.data.fieldValue}),R=document.createElement("select");s.add(R),R.setAttribute("data-element-id",b),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=a;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",z=>{const Y=this.data.defaultFieldValue;for(const K of R.options)K.selected=K.value===Y});for(const z of this.data.options){const Y=document.createElement("option");Y.textContent=z.displayValue,Y.value=z.exportValue,S.value.includes(z.exportValue)&&(Y.setAttribute("selected",!0),F=!1),R.append(Y)}let I=null;if(F){const z=document.createElement("option");z.value=" ",z.setAttribute("hidden",!0),z.setAttribute("selected",!0),R.prepend(z),I=()=>{z.remove(),R.removeEventListener("input",I),I=null},R.addEventListener("input",I)}const H=z=>{const Y=z?"value":"textContent",{options:K,multiple:Q}=R;return Q?Array.prototype.filter.call(K,et=>et.selected).map(et=>et[Y]):K.selectedIndex===-1?null:K[K.selectedIndex][Y]};let X=H(!1);const it=z=>{const Y=z.target.options;return Array.prototype.map.call(Y,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",z=>{const Y={value(K){I?.();const Q=K.detail.value,et=new Set(Array.isArray(Q)?Q:[Q]);for(const at of R.options)at.selected=et.has(at.value);o.setValue(b,{value:H(!0)}),X=H(!1)},multipleSelection(K){R.multiple=!0},remove(K){const Q=R.options,et=K.detail.remove;Q[et].selected=!1,R.remove(et),Q.length>0&&Array.prototype.findIndex.call(Q,lt=>lt.selected)===-1&&(Q[0].selected=!0),o.setValue(b,{value:H(!0),items:it(K)}),X=H(!1)},clear(K){for(;R.length!==0;)R.remove(0);o.setValue(b,{value:null,items:[]}),X=H(!1)},insert(K){const{index:Q,displayValue:et,exportValue:at}=K.detail.insert,lt=R.children[Q],ct=document.createElement("option");ct.textContent=et,ct.value=at,lt?lt.before(ct):R.append(ct),o.setValue(b,{value:H(!0),items:it(K)}),X=H(!1)},items(K){const{items:Q}=K.detail;for(;R.length!==0;)R.remove(0);for(const et of Q){const{displayValue:at,exportValue:lt}=et,ct=document.createElement("option");ct.textContent=at,ct.value=lt,R.append(ct)}R.options.length>0&&(R.options[0].selected=!0),o.setValue(b,{value:H(!0),items:it(K)}),X=H(!1)},indices(K){const Q=new Set(K.detail.indices);for(const et of K.target.options)et.selected=Q.has(et.index);o.setValue(b,{value:H(!0)}),X=H(!1)},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(Y,z)}),R.addEventListener("input",z=>{const Y=H(!0);o.setValue(b,{value:Y}),z.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:X,changeEx:Y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],z=>z.target.value)):R.addEventListener("input",function(z){o.setValue(b,{value:H(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class W extends n{constructor(o){const{data:b,elements:S}=o;super(o,{isRenderable:n._hasPopupData(b)}),this.elements=S}render(){this.container.classList.add("popupAnnotation");const o=new N({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),b=[];for(const S of this.elements)S.popup=o,b.push(S.data.id),S.addHighlightArea();return this.container.setAttribute("aria-controls",b.map(S=>`${i.AnnotationPrefix}${S}`).join(",")),this.container}}class N{#t=null;#e=this.#h.bind(this);#n=this.#S.bind(this);#s=this.#E.bind(this);#o=this.#y.bind(this);#a=null;#r=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#u=null;#p=null;#b=null;#m=null;#g=!1;constructor({container:o,color:b,elements:S,titleObj:R,modificationDate:F,contentsObj:I,richText:H,parent:X,rect:it,parentRect:z,open:Y}){this.#r=o,this.#m=R,this.#l=I,this.#b=H,this.#i=X,this.#a=b,this.#p=it,this.#f=z,this.#c=S;const K=d.PDFDateString.toDateObject(F);K&&(this.#t=X.l10n.get("annotation_date_string",{date:K.toLocaleDateString(),time:K.toLocaleTimeString()})),this.trigger=S.flatMap(Q=>Q.getElementsToTriggerPopup());for(const Q of this.trigger)Q.addEventListener("click",this.#o),Q.addEventListener("mouseenter",this.#s),Q.addEventListener("mouseleave",this.#n),Q.classList.add("popupTriggerArea");for(const Q of S)Q.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,Y&&this.#y()}render(){if(this.#u)return;const{page:{view:o},viewport:{rawDims:{pageWidth:b,pageHeight:S,pageX:R,pageY:F}}}=this.#i,I=this.#u=document.createElement("div");if(I.className="popup",this.#a){const dt=I.style.outlineColor=i.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?I.style.backgroundColor=`color-mix(in srgb, ${dt} 30%, white)`:I.style.backgroundColor=i.Util.makeHexColor(...this.#a.map(_t=>Math.floor(.7*(255-_t)+_t)))}const H=document.createElement("span");H.className="header";const X=document.createElement("h1");if(H.append(X),{dir:X.dir,str:X.textContent}=this.#m,I.append(H),this.#t){const dt=document.createElement("span");dt.classList.add("popupDate"),this.#t.then(ut=>{dt.textContent=ut}),H.append(dt)}const it=this.#l,z=this.#b;if(z?.str&&(!it?.str||it.str===z.str))M.XfaLayer.render({xfaHtml:z.html,intent:"richText",div:I}),I.lastChild.classList.add("richText","popupContent");else{const dt=this._formatContents(it);I.append(dt)}let Y=!!this.#f,K=Y?this.#f:this.#p;for(const dt of this.#c)if(!K||i.Util.intersect(dt.data.rect,K)!==null){K=dt.data.rect,Y=!0;break}const Q=i.Util.normalizeRect([K[0],o[3]-K[1]+o[1],K[2],o[3]-K[3]+o[1]]),at=Y?K[2]-K[0]+5:0,lt=Q[0]+at,ct=Q[1],{style:ht}=this.#r;ht.left=`${100*(lt-R)/b}%`,ht.top=`${100*(ct-F)/S}%`,this.#r.append(I)}_formatContents({str:o,dir:b}){const S=document.createElement("p");S.classList.add("popupContent"),S.dir=b;const R=o.split(/(?:\r\n?|\n)/);for(let F=0,I=R.length;F<I;++F){const H=R[F];S.append(document.createTextNode(H)),F<I-1&&S.append(document.createElement("br"))}return S}#h(o){o.altKey||o.shiftKey||o.ctrlKey||o.metaKey||(o.key==="Enter"||o.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#E(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#e)):(this.#S(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#e))}#E(){this.#u||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#S(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#r.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class q extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0}),this.textContent=o.data.textContent,this.textPosition=o.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const o=document.createElement("div");o.classList.add("annotationTextContent"),o.setAttribute("role","comment");for(const b of this.textContent){const S=document.createElement("span");S.textContent=b,o.append(S)}this.container.append(o)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=q;class G extends n{#t=null;constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const o=this.data,{width:b,height:S}=h(o.rect),R=this.svgFactory.create(b,S,!0),F=this.#t=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),F.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),F.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),F.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),F.setAttribute("stroke-width",o.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),R.append(F),this.container.append(R),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class st extends n{#t=null;constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const o=this.data,{width:b,height:S}=h(o.rect),R=this.svgFactory.create(b,S,!0),F=o.borderStyle.width,I=this.#t=this.svgFactory.createElement("svg:rect");return I.setAttribute("x",F/2),I.setAttribute("y",F/2),I.setAttribute("width",b-F),I.setAttribute("height",S-F),I.setAttribute("stroke-width",F||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),R.append(I),this.container.append(R),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Z extends n{#t=null;constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const o=this.data,{width:b,height:S}=h(o.rect),R=this.svgFactory.create(b,S,!0),F=o.borderStyle.width,I=this.#t=this.svgFactory.createElement("svg:ellipse");return I.setAttribute("cx",b/2),I.setAttribute("cy",S/2),I.setAttribute("rx",b/2-F/2),I.setAttribute("ry",S/2-F/2),I.setAttribute("stroke-width",F||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),R.append(I),this.container.append(R),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class tt extends n{#t=null;constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:b,height:S}=h(o.rect),R=this.svgFactory.create(b,S,!0);let F=[];for(const H of o.vertices){const X=H.x-o.rect[0],it=o.rect[3]-H.y;F.push(X+","+it)}F=F.join(" ");const I=this.#t=this.svgFactory.createElement(this.svgElementName);return I.setAttribute("points",F),I.setAttribute("stroke-width",o.borderStyle.width||1),I.setAttribute("stroke","transparent"),I.setAttribute("fill","transparent"),R.append(I),this.container.append(R),!o.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rt extends tt{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends n{#t=[];constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:b,height:S}=h(o.rect),R=this.svgFactory.create(b,S,!0);for(const F of o.inkLists){let I=[];for(const X of F){const it=X.x-o.rect[0],z=o.rect[3]-X.y;I.push(`${it},${z}`)}I=I.join(" ");const H=this.svgFactory.createElement(this.svgElementName);this.#t.push(H),H.setAttribute("points",I),H.setAttribute("stroke-width",o.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),!o.popupRef&&this.hasPopupData&&this._createPopup(),R.append(H)}return this.container.append(R),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=O;class _ extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class f extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class p extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class v extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class D extends n{constructor(o){super(o,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=D;class L extends n{#t=null;constructor(o){super(o,{isRenderable:!0});const{filename:b,content:S}=this.data.file;this.filename=(0,d.getFilenameFromUrl)(b,!0),this.content=S,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:b,content:S})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:o,data:b}=this;let S;b.hasAppearance||b.fillAlpha===0?S=document.createElement("div"):(S=document.createElement("img"),S.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(b.name)?"paperclip":"pushpin"}.svg`,b.fillAlpha&&b.fillAlpha<1&&(S.style=`filter: opacity(${Math.round(b.fillAlpha*100)}%);`)),S.addEventListener("dblclick",this.#e.bind(this)),this.#t=S;const{isMac:R}=i.FeatureTest.platform;return o.addEventListener("keydown",F=>{F.key==="Enter"&&(R?F.metaKey:F.ctrlKey)&&this.#e()}),!b.popupRef&&this.hasPopupData?this._createPopup():S.classList.add("popupTriggerArea"),o.append(S),o}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class j{#t=null;#e=null;#n=new Map;constructor({div:o,accessibilityManager:b,annotationCanvasMap:S,l10n:R,page:F,viewport:I}){this.div=o,this.#t=b,this.#e=S,this.l10n=R,this.page=F,this.viewport=I,this.zIndex=0,this.l10n||=B.NullL10n}#s(o,b){const S=o.firstChild||o;S.id=`${i.AnnotationPrefix}${b}`,this.div.append(o),this.#t?.moveElementInDOM(this.div,o,S,!1)}async render(o){const{annotations:b}=o,S=this.div;(0,d.setLayerDimensions)(S,this.viewport);const R=new Map,F={data:null,layer:S,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new d.DOMSVGFactory,annotationStorage:o.annotationStorage||new C.AnnotationStorage,enableScripting:o.enableScripting===!0,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects,parent:this,elements:null};for(const I of b){if(I.noHTML)continue;const H=I.annotationType===i.AnnotationType.POPUP;if(H){const z=R.get(I.id);if(!z)continue;F.elements=z}else{const{width:z,height:Y}=h(I.rect);if(z<=0||Y<=0)continue}F.data=I;const X=c.create(F);if(!X.isRenderable)continue;if(!H&&I.popupRef){const z=R.get(I.popupRef);z?z.push(X):R.set(I.popupRef,[X])}X.annotationEditorType>0&&this.#n.set(X.data.id,X);const it=X.render();I.hidden&&(it.style.visibility="hidden"),this.#s(it,I.id)}this.#o(),await this.l10n.translate(S)}update({viewport:o}){const b=this.div;this.viewport=o,(0,d.setLayerDimensions)(b,{rotation:o.rotation}),this.#o(),b.hidden=!1}#o(){if(!this.#e)return;const o=this.div;for(const[b,S]of this.#e){const R=o.querySelector(`[data-annotation-id="${b}"]`);if(!R)continue;const{firstChild:F}=R;F?F.nodeName==="CANVAS"?F.replaceWith(S):F.before(S):R.append(S)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(o){return this.#n.get(o)}}e.AnnotationLayer=j}),((A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function y(C){return Math.floor(Math.max(0,Math.min(1,C))*255).toString(16).padStart(2,"0")}function i(C){return Math.max(0,Math.min(255,255*C))}class d{static CMYK_G([P,B,M,a]){return["G",1-Math.min(1,.3*P+.59*M+.11*B+a)]}static G_CMYK([P]){return["CMYK",0,0,0,1-P]}static G_RGB([P]){return["RGB",P,P,P]}static G_rgb([P]){return P=i(P),[P,P,P]}static G_HTML([P]){const B=y(P);return`#${B}${B}${B}`}static RGB_G([P,B,M]){return["G",.3*P+.59*B+.11*M]}static RGB_rgb(P){return P.map(i)}static RGB_HTML(P){return`#${P.map(y).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([P,B,M,a]){return["RGB",1-Math.min(1,P+a),1-Math.min(1,M+a),1-Math.min(1,B+a)]}static CMYK_rgb([P,B,M,a]){return[i(1-Math.min(1,P+a)),i(1-Math.min(1,M+a)),i(1-Math.min(1,B+a))]}static CMYK_HTML(P){const B=this.CMYK_RGB(P).slice(1);return this.RGB_HTML(B)}static RGB_CMYK([P,B,M]){const a=1-P,t=1-B,s=1-M,h=Math.min(a,t,s);return["CMYK",a,t,s,h]}}e.ColorConverters=d}),((A,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const y={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};y.print_progress_percent="{{progress}}%";function i(P,B){switch(P){case"find_match_count":P=`find_match_count[${B.total===1?"one":"other"}]`;break;case"find_match_count_limit":P=`find_match_count_limit[${B.limit===1?"one":"other"}]`;break}return y[P]||""}function d(P,B){return B?P.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(M,a)=>a in B?B[a]:"{{"+a+"}}"):P}const C={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(P,B=null,M=i(P,B)){return d(M,B)},async translate(P){}};e.NullL10n=C}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=y(25);class d{static setupStorage(P,B,M,a,t){const s=a.getValue(B,{value:null});switch(M.name){case"textarea":if(s.value!==null&&(P.textContent=s.value),t==="print")break;P.addEventListener("input",h=>{a.setValue(B,{value:h.target.value})});break;case"input":if(M.attributes.type==="radio"||M.attributes.type==="checkbox"){if(s.value===M.attributes.xfaOn?P.setAttribute("checked",!0):s.value===M.attributes.xfaOff&&P.removeAttribute("checked"),t==="print")break;P.addEventListener("change",h=>{a.setValue(B,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&P.setAttribute("value",s.value),t==="print")break;P.addEventListener("input",h=>{a.setValue(B,{value:h.target.value})})}break;case"select":if(s.value!==null){P.setAttribute("value",s.value);for(const h of M.children)h.attributes.value===s.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}P.addEventListener("input",h=>{const c=h.target.options,n=c.selectedIndex===-1?"":c[c.selectedIndex].value;a.setValue(B,{value:n})});break}}static setAttributes({html:P,element:B,storage:M=null,intent:a,linkService:t}){const{attributes:s}=B,h=P instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${a}`);for(const[c,n]of Object.entries(s))if(n!=null)switch(c){case"class":n.length&&P.setAttribute(c,n.join(" "));break;case"dataId":break;case"id":P.setAttribute("data-element-id",n);break;case"style":Object.assign(P.style,n);break;case"textContent":P.textContent=n;break;default:(!h||c!=="href"&&c!=="newWindow")&&P.setAttribute(c,n)}h&&t.addLinkAttributes(P,s.href,s.newWindow),M&&s.dataId&&this.setupStorage(P,s.dataId,B,M)}static render(P){const B=P.annotationStorage,M=P.linkService,a=P.xfaHtml,t=P.intent||"display",s=document.createElement(a.name);a.attributes&&this.setAttributes({html:s,element:a,intent:t,linkService:M});const h=[[a,-1,s]],c=P.div;if(c.append(s),P.viewport){const u=`matrix(${P.viewport.transform.join(",")})`;c.style.transform=u}t!=="richText"&&c.setAttribute("class","xfaLayer xfaFont");const n=[];for(;h.length>0;){const[u,m,l]=h.at(-1);if(m+1===u.children.length){h.pop();continue}const T=u.children[++h.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const g=document.createTextNode(T.value);n.push(g),l.append(g);continue}const w=T?.attributes?.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(l.append(w),T.attributes&&this.setAttributes({html:w,element:T,storage:B,intent:t,linkService:M}),T.children&&T.children.length>0)h.push([T,-1,w]);else if(T.value){const g=document.createTextNode(T.value);i.XfaText.shouldBuildText(k)&&n.push(g),w.append(g)}}for(const u of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:n}}static update(P){const B=`matrix(${P.viewport.transform.join(",")})`;P.div.style.transform=B,P.div.hidden=!1}}e.XfaLayer=d}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=y(1),d=y(4),C=y(29),P=y(6),B=y(5);class M extends d.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#s=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#r=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#u=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){d.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,s){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:M._defaultThickness=s;break;case i.AnnotationEditorParamsType.INK_COLOR:M._defaultColor=s;break;case i.AnnotationEditorParamsType.INK_OPACITY:M._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#b(s);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#m(s);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#g(s);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,M._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,M._defaultColor||d.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(M._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||M._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||M._defaultColor||d.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??M._defaultOpacity))]]}#b(t){const s=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#P()},undo:()=>{this.thickness=s,this.#P()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const s=this.color;this.addCommands({cmd:()=>{this.color=t,this.#_()},undo:()=>{this.color=s,this.#_()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){t/=100;const s=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#_()},undo:()=>{this.opacity=s,this.#_()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#A()),this.#P()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,h=this.width*t,c=this.height*s;this.setDimensions(h,c)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#h(){const{parentRotation:t,parentDimensions:[s,h]}=this;switch(t){case 90:return[0,h,h,s];case 180:return[s,h,s,h];case 270:return[s,0,h,s];default:return[0,0,s,h]}}#y(){const{ctx:t,color:s,opacity:h,thickness:c,parentScale:n,scaleFactor:u}=this;t.lineWidth=c*n/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${(0,B.opacityToHex)(h)}`}#E(t,s){this.canvas.addEventListener("contextmenu",P.noContextMenu),this.canvas.addEventListener("pointerleave",this.#s),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#i||(this.#i=!0,this.#A(),this.thickness||=M._defaultThickness,this.color||=M._defaultColor||d.AnnotationEditor._defaultLineColor,this.opacity??=M._defaultOpacity),this.currentPath.push([t,s]),this.#c=!1,this.#y(),this.#p=()=>{this.#L(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#S(t,s){const[h,c]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===h&&s===c)return;const n=this.currentPath;let u=this.#r;if(n.push([t,s]),this.#c=!0,n.length<=2){u.moveTo(...n[0]),u.lineTo(t,s);return}n.length===3&&(this.#r=u=new Path2D,u.moveTo(...n[0])),this.#O(u,...n.at(-3),...n.at(-2),t,s)}#w(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#r.lineTo(...t)}#x(t,s){this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),this.#S(t,s),this.#w();let h;if(this.currentPath.length!==1)h=this.#I();else{const l=[t,s];h=[[l,l.slice(),l.slice(),l]]}const c=this.#r,n=this.currentPath;this.currentPath=[],this.#r=new Path2D;const u=()=>{this.allRawPaths.push(n),this.paths.push(h),this.bezierPath2D.push(c),this.rebuild()},m=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#k()),this.#P())};this.addCommands({cmd:u,undo:m,mustExec:!0})}#L(){if(!this.#c)return;this.#c=!1;const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),h=s.map(u=>u[0]),c=s.map(u=>u[1]);Math.min(...h)-t,Math.max(...h)+t,Math.min(...c)-t,Math.max(...c)+t;const{ctx:n}=this;n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)n.stroke(u);n.stroke(this.#r),n.restore()}#O(t,s,h,c,n,u,m){const l=(s+c)/2,T=(h+n)/2,k=(c+u)/2,w=(n+m)/2;t.bezierCurveTo(l+2*(c-l)/3,T+2*(n-T)/3,k+2*(c-k)/3,w+2*(n-w)/3,k,w)}#I(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let h,[c,n]=t[0];for(h=1;h<t.length-2;h++){const[g,E]=t[h],[U,W]=t[h+1],N=(g+U)/2,q=(E+W)/2,G=[c+2*(g-c)/3,n+2*(E-n)/3],st=[N+2*(g-N)/3,q+2*(E-q)/3];s.push([[c,n],G,st,[N,q]]),[c,n]=[N,q]}const[u,m]=t[h],[l,T]=t[h+1],k=[c+2*(u-c)/3,n+2*(m-n)/3],w=[l+2*(u-l)/3,T+2*(m-T)/3];return s.push([[c,n],k,w,[l,T]]),s}#_(){if(this.isEmpty()){this.#T();return}this.#y();const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),this.#T();for(const h of this.bezierPath2D)s.stroke(h)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#P(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#E(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#S(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#D(t)}canvasPointerleave(t){this.#D(t)}#D(t){this.canvas.removeEventListener("pointerleave",this.#s),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",P.noContextMenu)},10),this.#x(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",d.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#k(){this.#f=new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),d.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(m=>this.div?.setAttribute("aria-label",m));const[h,c,n,u]=this.#h();if(this.setAt(h,c,0,0),this.setDims(n,u),this.#R(),this.width){const[m,l]=this.parentDimensions;this.setAspectRatio(this.width*m,this.height*l),this.setAt(t*m,s*l,this.width*m,this.height*l),this.#i=!0,this.#A(),this.setDims(this.width*m,this.height*l),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#k(),this.div}#A(){if(!this.#i)return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),this.#T()}setDimensions(t,s){const h=Math.round(t),c=Math.round(s);if(this.#d===h&&this.#u===c)return;this.#d=h,this.#u=c,this.canvas.style.visibility="hidden";const[n,u]=this.parentDimensions;this.width=t/n,this.height=s/u,this.fixAndSetPosition(),this.#l&&this.#C(t,s),this.#A(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#C(t,s){const h=this.#M(),c=(t-h)/this.#e,n=(s-h)/this.#t;this.scaleFactor=Math.min(c,n)}#T(){const t=this.#M()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const s=new Path2D;for(let h=0,c=t.length;h<c;h++){const[n,u,m,l]=t[h];h===0&&s.moveTo(...n),s.bezierCurveTo(u[0],u[1],m[0],m[1],l[0],l[1])}return s}static#B(t,s,h){const[c,n,u,m]=s;switch(h){case 0:for(let l=0,T=t.length;l<T;l+=2)t[l]+=c,t[l+1]=m-t[l+1];break;case 90:for(let l=0,T=t.length;l<T;l+=2){const k=t[l];t[l]=t[l+1]+c,t[l+1]=k+n}break;case 180:for(let l=0,T=t.length;l<T;l+=2)t[l]=u-t[l],t[l+1]+=n;break;case 270:for(let l=0,T=t.length;l<T;l+=2){const k=t[l];t[l]=u-t[l+1],t[l+1]=m-k}break;default:throw new Error("Invalid rotation")}return t}static#j(t,s,h){const[c,n,u,m]=s;switch(h){case 0:for(let l=0,T=t.length;l<T;l+=2)t[l]-=c,t[l+1]=m-t[l+1];break;case 90:for(let l=0,T=t.length;l<T;l+=2){const k=t[l];t[l]=t[l+1]-n,t[l+1]=k-c}break;case 180:for(let l=0,T=t.length;l<T;l+=2)t[l]=u-t[l],t[l+1]-=n;break;case 270:for(let l=0,T=t.length;l<T;l+=2){const k=t[l];t[l]=m-t[l+1],t[l+1]=u-k}break;default:throw new Error("Invalid rotation")}return t}#U(t,s,h,c){const n=[],u=this.thickness/2,m=t*s+u,l=t*h+u;for(const T of this.paths){const k=[],w=[];for(let g=0,E=T.length;g<E;g++){const[U,W,N,q]=T[g],G=t*U[0]+m,st=t*U[1]+l,Z=t*W[0]+m,tt=t*W[1]+l,rt=t*N[0]+m,J=t*N[1]+l,O=t*q[0]+m,_=t*q[1]+l;g===0&&(k.push(G,st),w.push(G,st)),k.push(Z,tt,rt,J,O,_),w.push(Z,tt),g===E-1&&w.push(O,_)}n.push({bezier:M.#B(k,c,this.rotation),points:M.#B(w,c,this.rotation)})}return n}#F(){let t=1/0,s=-1/0,h=1/0,c=-1/0;for(const n of this.paths)for(const[u,m,l,T]of n){const k=i.Util.bezierBoundingBox(...u,...m,...l,...T);t=Math.min(t,k[0]),h=Math.min(h,k[1]),s=Math.max(s,k[2]),c=Math.max(c,k[3])}return[t,h,s,c]}#M(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#P(t=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const s=this.#F(),h=this.#M();this.#e=Math.max(d.AnnotationEditor.MIN_SIZE,s[2]-s[0]),this.#t=Math.max(d.AnnotationEditor.MIN_SIZE,s[3]-s[1]);const c=Math.ceil(h+this.#e*this.scaleFactor),n=Math.ceil(h+this.#t*this.scaleFactor),[u,m]=this.parentDimensions;this.width=c/u,this.height=n/m,this.setAspectRatio(c,n);const l=this.translationX,T=this.translationY;this.translationX=-s[0],this.translationY=-s[1],this.#A(),this.#_(),this.#d=c,this.#u=n,this.setDims(c,n);const k=t?h/this.scaleFactor/2:0;this.translate(l-this.translationX-k,T-this.translationY-k)}static deserialize(t,s,h){if(t instanceof C.InkAnnotationElement)return null;const c=super.deserialize(t,s,h);c.thickness=t.thickness,c.color=i.Util.makeHexColor(...t.color),c.opacity=t.opacity;const[n,u]=c.pageDimensions,m=c.width*n,l=c.height*u,T=c.parentScale,k=t.thickness/2;c.#l=!0,c.#d=Math.round(m),c.#u=Math.round(l);const{paths:w,rect:g,rotation:E}=t;for(let{bezier:W}of w){W=M.#j(W,g,E);const N=[];c.paths.push(N);let q=T*(W[0]-k),G=T*(W[1]-k);for(let Z=2,tt=W.length;Z<tt;Z+=6){const rt=T*(W[Z]-k),J=T*(W[Z+1]-k),O=T*(W[Z+2]-k),_=T*(W[Z+3]-k),f=T*(W[Z+4]-k),p=T*(W[Z+5]-k);N.push([[q,G],[rt,J],[O,_],[f,p]]),q=f,G=p}const st=this.#N(N);c.bezierPath2D.push(st)}const U=c.#F();return c.#e=Math.max(d.AnnotationEditor.MIN_SIZE,U[2]-U[0]),c.#t=Math.max(d.AnnotationEditor.MIN_SIZE,U[3]-U[1]),c.#C(m,l),c}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=d.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=M}),((A,e,y)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=y(1),d=y(4),C=y(6),P=y(29);class B extends d.AnnotationEditor{#t=null;#e=null;#n=null;#s=null;#o=null;#a=null;#r=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(a){super({...a,name:"stampEditor"}),this.#s=a.bitmapUrl,this.#o=a.bitmapFile}static initialize(a){d.AnnotationEditor.initialize(a)}static get supportedTypes(){const a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",a.map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,t){t.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#f(a,t=!1){if(!a){this.remove();return}this.#t=a.bitmap,t||(this.#e=a.id,this.#c=a.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#u(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(t=>this.#f(t,!0)).finally(()=>this.#d());return}if(this.#s){const t=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(t).then(s=>this.#f(s)).finally(()=>this.#d());return}if(this.#o){const t=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(t).then(s=>this.#f(s)).finally(()=>this.#d());return}const a=document.createElement("input");a.type="file",a.accept=B.supportedTypesStr,this.#n=new Promise(t=>{a.addEventListener("change",async()=>{if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(a.files[0]);this.#f(s)}t()}),a.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#d()),a.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#r?.disconnect(),this.#r=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#u();return}super.rebuild(),this.div!==null&&(this.#e&&this.#u(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#s||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,t;if(this.width&&(a=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#u(),this.width){const[s,h]=this.parentDimensions;this.setAt(a*s,t*h,this.width*s,this.height*h)}return this.div}#p(){const{div:a}=this;let{width:t,height:s}=this.#t;const[h,c]=this.pageDimensions,n=.75;if(this.width)t=this.width*h,s=this.height*c;else if(t>n*h||s>n*c){const T=Math.min(n*h/t,n*c/s);t*=T,s*=T}const[u,m]=this.parentDimensions;this.setDims(t*u/h,s*m/c),this._uiManager.enableWaiting(!1);const l=this.#a=document.createElement("canvas");a.append(l),a.hidden=!1,this.#g(t,s),this.#y(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#b(a,t){const[s,h]=this.parentDimensions;this.width=a/s,this.height=t/h,this.setDims(a,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const c=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(a,t)},c)}#m(a,t){const{width:s,height:h}=this.#t;let c=s,n=h,u=this.#t;for(;c>2*a||n>2*t;){const m=c,l=n;c>2*a&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2));const T=new OffscreenCanvas(c,n);T.getContext("2d").drawImage(u,0,0,m,l,0,0,c,n),u=T.transferToImageBitmap()}return u}#g(a,t){a=Math.ceil(a),t=Math.ceil(t);const s=this.#a;if(!s||s.width===a&&s.height===t)return;s.width=a,s.height=t;const h=this.#c?this.#t:this.#m(a,t),c=s.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(h,0,0,h.width,h.height,0,0,a,t)}#h(a){if(a){if(this.#c){const h=this._uiManager.imageManager.getSvgUrl(this.#e);if(h)return h}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#t,t.getContext("2d").drawImage(this.#t,0,0),t.toDataURL()}if(this.#c){const[t,s]=this.pageDimensions,h=Math.round(this.width*t*C.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*s*C.PixelsPerInch.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(h,c);return n.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,h,c),n.transferToImageBitmap()}return structuredClone(this.#t)}#y(){this.#r=new ResizeObserver(a=>{const t=a[0].contentRect;t.width&&t.height&&this.#b(t.width,t.height)}),this.#r.observe(this.div)}static deserialize(a,t,s){if(a instanceof P.StampAnnotationElement)return null;const h=super.deserialize(a,t,s),{rect:c,bitmapUrl:n,bitmapId:u,isSvg:m,accessibilityData:l}=a;u&&s.imageManager.isValidId(u)?h.#e=u:h.#s=n,h.#c=m;const[T,k]=h.pageDimensions;return h.width=(c[2]-c[0])/T,h.height=(c[3]-c[1])/k,l&&(h.altTextData=l),h}serialize(a=!1,t=null){if(this.isEmpty())return null;const s={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(a)return s.bitmapUrl=this.#h(!0),s.accessibilityData=this.altTextData,s;const{decorative:h,altText:c}=this.altTextData;if(!h&&c&&(s.accessibilityData={type:"Figure",alt:c}),t===null)return s;t.stamps||=new Map;const n=this.#c?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#e))t.stamps.set(this.#e,{area:n,serialized:s}),s.bitmap=this.#h(!1);else if(this.#c){const u=t.stamps.get(this.#e);n>u.area&&(u.area=n,u.serialized.bitmap.close(),u.serialized.bitmap=this.#h(!1))}return s}}e.StampEditor=B})],__webpack_module_cache__={};function __w_pdfjs_require__(A){var e=__webpack_module_cache__[A];if(e!==void 0)return e.exports;var y=__webpack_module_cache__[A]={exports:{}};return __webpack_modules__[A](y,y.exports,__w_pdfjs_require__),y.exports}var __webpack_exports__={};return(()=>{var A=__webpack_exports__;Object.defineProperty(A,"__esModule",{value:!0}),Object.defineProperty(A,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(A,"AnnotationEditorLayer",{enumerable:!0,get:function(){return C.AnnotationEditorLayer}}),Object.defineProperty(A,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(A,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(A,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return P.AnnotationEditorUIManager}}),Object.defineProperty(A,"AnnotationLayer",{enumerable:!0,get:function(){return B.AnnotationLayer}}),Object.defineProperty(A,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(A,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(A,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(A,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(A,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(A,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(A,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(A,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(A,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(A,"PDFDataRangeTransport",{enumerable:!0,get:function(){return y.PDFDataRangeTransport}}),Object.defineProperty(A,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(A,"PDFWorker",{enumerable:!0,get:function(){return y.PDFWorker}}),Object.defineProperty(A,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(A,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(A,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(A,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(A,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(A,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(A,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(A,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(A,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(A,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(A,"build",{enumerable:!0,get:function(){return y.build}}),Object.defineProperty(A,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(A,"getDocument",{enumerable:!0,get:function(){return y.getDocument}}),Object.defineProperty(A,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(A,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(A,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(A,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(A,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(A,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(A,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(A,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(A,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(A,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(A,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(A,"updateTextLayer",{enumerable:!0,get:function(){return d.updateTextLayer}}),Object.defineProperty(A,"version",{enumerable:!0,get:function(){return y.version}});var e=__w_pdfjs_require__(1),y=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),d=__w_pdfjs_require__(26),C=__w_pdfjs_require__(27),P=__w_pdfjs_require__(5),B=__w_pdfjs_require__(29),M=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1)),pdf$1.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=pdf;var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=A,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var A=requireReactPropTypesSecret();function e(){}function y(){}return y.resetWarningCache=e,factoryWithThrowingShims=function(){function i(P,B,M,a,t,s){if(s!==A){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function d(){return i}var C={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:d,element:i,elementType:i,instanceOf:d,node:i,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:y,resetWarningCache:e};return C.PropTypes=C,C},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(A,e,y){if(y||arguments.length===2)for(var i=0,d=e.length,C;i<d;i++)(C||!(i in e))&&(C||(C=Array.prototype.slice.call(e,0,i)),C[i]=e[i]);return A.concat(C||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(A,e){var y={};return allEvents.forEach(function(i){var d=A[i];d&&(e?y[i]=(function(C){return d(C,e(i))}):y[i]=d)}),y}function makeCancellablePromise(A){var e=!1,y=new Promise(function(i,d){A.then(function(C){return!e&&i(C)}).catch(function(C){return!e&&d(C)})});return{promise:y,cancel:function(){e=!0}}}function r(A){var e,y,i="";if(typeof A=="string"||typeof A=="number")i+=A;else if(typeof A=="object")if(Array.isArray(A)){var d=A.length;for(e=0;e<d;e++)A[e]&&(y=r(A[e]))&&(i&&(i+=" "),i+=y)}else for(y in A)A[y]&&(i&&(i+=" "),i+=y);return i}function clsx(){for(var A,e,y=0,i="",d=arguments.length;y<d;y++)(A=arguments[y])&&(e=r(A))&&(i&&(i+=" "),i+=e);return i}var prefix="Invariant failed";function invariant(A,e){if(!A)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var A=function(){};return warning_1=A,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports);var has=Object.prototype.hasOwnProperty;function find(A,e,y){for(y of A.keys())if(dequal(y,e))return y}function dequal(A,e){var y,i,d;if(A===e)return!0;if(A&&e&&(y=A.constructor)===e.constructor){if(y===Date)return A.getTime()===e.getTime();if(y===RegExp)return A.toString()===e.toString();if(y===Array){if((i=A.length)===e.length)for(;i--&&dequal(A[i],e[i]););return i===-1}if(y===Set){if(A.size!==e.size)return!1;for(i of A)if(d=i,d&&typeof d=="object"&&(d=find(e,d),!d)||!e.has(d))return!1;return!0}if(y===Map){if(A.size!==e.size)return!1;for(i of A)if(d=i[0],d&&typeof d=="object"&&(d=find(e,d),!d)||!dequal(i[1],e.get(d)))return!1;return!0}if(y===ArrayBuffer)A=new Uint8Array(A),e=new Uint8Array(e);else if(y===DataView){if((i=A.byteLength)===e.byteLength)for(;i--&&A.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(A)){if((i=A.byteLength)===e.byteLength)for(;i--&&A[i]===e[i];);return i===-1}if(!y||typeof A=="object"){i=0;for(y in A)if(has.call(A,y)&&++i&&!has.call(e,y)||!(y in e)||!dequal(A[y],e[y]))return!1;return Object.keys(e).length===i}}return A!==A&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:A,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},A)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(y=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(y):Array.isArray(e)?y(e):e.then(y)}).then(y=>{invariant(Array.isArray(y));const i=y[0];new Promise(d=>{invariant(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(C=>{d(C)}).catch(()=>{invariant(!1)}):typeof i=="number"?d(i):invariant(!1)}).then(d=>{const C=d+1;invariant(this.pdfViewer),invariant(C>=1&&C<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:y,pageIndex:d,pageNumber:C})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const y=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:y,pageNumber:e})}addLinkAttributes(e,y,i){e.href=y,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(A){return typeof A<"u"}function isProvided(A){return isDefined(A)&&A!==null}function isString(A){return typeof A=="string"}function isArrayBuffer(A){return A instanceof ArrayBuffer}function isBlob(A){return invariant(isBrowser),A instanceof Blob}function isDataURI(A){return isString(A)&&/^data:/.test(A)}function dataURItoByteString(A){invariant(isDataURI(A));const[e="",y=""]=A.split(",");return e.split(";").indexOf("base64")!==-1?atob(y):unescape(y)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(A){A&&A.cancel&&A.cancel()}function makePageCallback(A,e){return Object.defineProperty(A,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(A,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(A,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(A,"originalHeight",{get(){return this.view[3]},configurable:!0}),A}function isCancelException(A){return A.name==="RenderingCancelledException"}function loadFromFile(A){return new Promise((e,y)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return y(new Error("Error while reading a file."));e(i.result)},i.onerror=d=>{if(!d.target)return y(new Error("Error while reading a file."));const{error:C}=d.target;if(!C)return y(new Error("Error while reading a file."));switch(C.code){case C.NOT_FOUND_ERR:return y(new Error("Error while reading a file: File not found."));case C.SECURITY_ERR:return y(new Error("Error while reading a file: Security error."));case C.ABORT_ERR:return y(new Error("Error while reading a file: Aborted."));default:return y(new Error("Error while reading a file."))}},i.readAsArrayBuffer(A)})}function reducer(A,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return A}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const A={};return allEvents.forEach(e=>{A[e]=PropTypes.func}),A})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function A(e,y,i){const{[y]:d,pageNumber:C,pdf:P}=e;if(!isDefined(P))return null;if(isDefined(d)){if(typeof d!="number")return new Error(`\`${y}\` of type \`${typeof d}\` supplied to \`${i}\`, expected \`number\`.`);if(d<0)return new Error(`Expected \`${y}\` to be greater or equal to 0.`);const{numPages:B}=P;if(d+1>B)return new Error(`Expected \`${y}\` to be less or equal to ${B-1}.`)}else if(!isDefined(C))return new Error(`\`${y}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${i}\`.`);return null},isPageNumber=function A(e,y,i){const{[y]:d,pageIndex:C,pdf:P}=e;if(!isDefined(P))return null;if(isDefined(d)){if(typeof d!="number")return new Error(`\`${y}\` of type \`${typeof d}\` supplied to \`${i}\`, expected \`number\`.`);if(d<1)return new Error(`Expected \`${y}\` to be greater or equal to 1.`);const{numPages:B}=P;if(d>B)return new Error(`Expected \`${y}\` to be less or equal to ${B}.`)}else if(!isDefined(C))return new Error(`\`${y}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${i}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(A,e,y,i){function d(C){return C instanceof y?C:new y(function(P){P(C)})}return new(y||(y=Promise))(function(C,P){function B(t){try{a(i.next(t))}catch(s){P(s)}}function M(t){try{a(i.throw(t))}catch(s){P(s)}}function a(t){t.done?C(t.value):d(t.value).then(B,M)}a((i=i.apply(A,e||[])).next())})},__rest$1=function(A,e){var y={};for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&e.indexOf(i)<0&&(y[i]=A[i]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,i=Object.getOwnPropertySymbols(A);d<i.length;d++)e.indexOf(i[d])<0&&Object.prototype.propertyIsEnumerable.call(A,i[d])&&(y[i[d]]=A[i[d]]);return y};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(A,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const y=prompt("Enter the password to open this PDF file.");A(y);break}case PasswordResponses.INCORRECT_PASSWORD:{const y=prompt("Invalid password. Please try again.");A(y);break}}};function isParameterObject(A){return typeof A=="object"&&A!==null&&("data"in A||"range"in A||"url"in A)}const Document=reactExports.forwardRef(function A(e,y){var{children:i,className:d,error:C="Failed to load PDF file.",externalLinkRel:P,externalLinkTarget:B,file:M,inputRef:a,imageResourcesPath:t,loading:s="Loading PDF…",noData:h="No PDF file specified.",onItemClick:c,onLoadError:n,onLoadProgress:u,onLoadSuccess:m,onPassword:l=defaultOnPassword,onSourceError:T,onSourceSuccess:k,options:w,renderMode:g,rotate:E}=e,U=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[W,N]=useResolver(),{value:q,error:G}=W,[st,Z]=useResolver(),{value:tt,error:rt}=st,J=reactExports.useRef(new LinkService),O=reactExports.useRef([]),_=reactExports.useRef(),f=reactExports.useRef();reactExports.useEffect(()=>{M&&M!==_.current&&isParameterObject(M)&&(warning(!dequal(M,_.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),_.current=M)},[M]),reactExports.useEffect(()=>{w&&w!==f.current&&(warning(!dequal(w,f.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),f.current=w)},[w]);const p=reactExports.useRef({scrollPageIntoView:Y=>{const{dest:K,pageNumber:Q,pageIndex:et=Q-1}=Y;if(c){c({dest:K,pageIndex:et,pageNumber:Q});return}const at=O.current[et];if(at){at.scrollIntoView();return}warning(!1,`An internal link leading to page ${Q} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(y,()=>({linkService:J,pages:O,viewer:p}),[]);function v(){k&&k()}function D(){G&&(warning(!1,G.toString()),T&&T(G))}function L(){N({type:"RESET"})}reactExports.useEffect(L,[M,N]);const j=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!M)return null;if(typeof M=="string")return isDataURI(M)?{data:dataURItoByteString(M)}:(displayCORSWarning(),{url:M});if(M instanceof PDFDataRangeTransport)return{range:M};if(isArrayBuffer(M))return{data:M};if(isBrowser&&isBlob(M))return{data:yield loadFromFile(M)};if(invariant(typeof M=="object"),invariant(isParameterObject(M)),"url"in M&&typeof M.url=="string"){if(isDataURI(M.url)){const{url:Y}=M,K=__rest$1(M,["url"]),Q=dataURItoByteString(Y);return Object.assign({data:Q},K)}displayCORSWarning()}return M}),[M]);reactExports.useEffect(()=>{const Y=makeCancellablePromise(j());return Y.promise.then(K=>{N({type:"RESOLVE",value:K})}).catch(K=>{N({type:"REJECT",error:K})}),()=>{cancelRunningTask(Y)}},[j,N]),reactExports.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){D();return}v()}},[q]);function x(){tt&&(m&&m(tt),O.current=new Array(tt.numPages),J.current.setDocument(tt))}function o(){rt&&(warning(!1,rt.toString()),n&&n(rt))}function b(){Z({type:"RESET"})}reactExports.useEffect(b,[Z,q]);function S(){if(!q)return;const Y=Object.assign(Object.assign({},w),{isEvalSupported:!1}),K=Object.assign(Object.assign({},q),Y),Q=pdfjs.getDocument(K);u&&(Q.onProgress=u),l&&(Q.onPassword=l);const et=Q;return et.promise.then(at=>{Z({type:"RESOLVE",value:at})}).catch(at=>{et.destroyed||Z({type:"REJECT",error:at})}),()=>{et.destroy()}}reactExports.useEffect(S,[w,Z,q]),reactExports.useEffect(()=>{if(!(typeof tt>"u")){if(tt===!1){o();return}x()}},[tt]);function R(){J.current.setViewer(p.current),J.current.setExternalLinkRel(P),J.current.setExternalLinkTarget(B)}reactExports.useEffect(R,[P,B]);function F(Y,K){O.current[Y]=K}function I(Y){delete O.current[Y]}const H=reactExports.useMemo(()=>({imageResourcesPath:t,linkService:J.current,onItemClick:c,pdf:tt,registerPage:F,renderMode:g,rotate:E,unregisterPage:I}),[t,c,tt,g,E]),X=reactExports.useMemo(()=>makeEventProps(U,()=>tt),[U,tt]);function it(){return React.createElement(DocumentContext.Provider,{value:H},i)}function z(){return M?tt==null?React.createElement(Message,{type:"loading"},typeof s=="function"?s():s):tt===!1?React.createElement(Message,{type:"error"},typeof C=="function"?C():C):it():React.createElement(Message,{type:"no-data"},typeof h=="function"?h():h)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",d),ref:a,style:{"--scale-factor":"1"}},X),z())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];var y=A.filter(Boolean);if(y.length<=1){var i=y[0];return i||null}return function(C){y.forEach(function(P){typeof P=="function"?P(C):P&&(P.current=C)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(A){return A in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(A){return"children"in A}function isStructTreeNodeWithOnlyContentChild(A){return isStructTreeNode(A)?A.children.length===1&&0 in A.children&&"id"in A.children[0]:!1}function getRoleAttributes(A){const e={};if(isStructTreeNode(A)){const{role:y}=A,i=y.match(HEADING_PATTERN);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(isPdfRole(y)){const d=PDF_ROLE_TO_HTML_ROLE[y];d&&(e.role=d)}}return e}function getBaseAttributes(A){const e={};if(isStructTreeNode(A)){if(A.alt!==void 0&&(e["aria-label"]=A.alt),A.lang!==void 0&&(e.lang=A.lang),isStructTreeNodeWithOnlyContentChild(A)){const[y]=A.children;if(y){const i=getBaseAttributes(y);return Object.assign(Object.assign({},e),i)}}}else"id"in A&&(e["aria-owns"]=A.id);return e}function getAttributes(A){return A?Object.assign(Object.assign({},getRoleAttributes(A)),getBaseAttributes(A)):null}function StructTreeItem({className:A,node:e}){const y=reactExports.useMemo(()=>getAttributes(e),[e]),i=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((d,C)=>React.createElement(StructTreeItem,{key:C,node:d})),[e]);return React.createElement("span",Object.assign({className:A},y),i)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const A=usePageContext();invariant(A);const{onGetStructTreeError:e,onGetStructTreeSuccess:y}=A,[i,d]=useResolver(),{value:C,error:P}=i,{customTextRenderer:B,page:M}=A;function a(){C&&y&&y(C)}function t(){P&&(warning(!1,P.toString()),e&&e(P))}function s(){d({type:"RESET"})}reactExports.useEffect(s,[d,M]);function h(){if(B||!M)return;const c=makeCancellablePromise(M.getStructTree()),n=c;return c.promise.then(u=>{d({type:"RESOLVE",value:u})}).catch(u=>{d({type:"REJECT",error:u})}),()=>cancelRunningTask(n)}return reactExports.useEffect(h,[B,M,d]),reactExports.useEffect(()=>{if(C!==void 0){if(C===!1){t();return}a()}},[C]),C?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:C}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(A){const e=usePageContext();invariant(e);const y=Object.assign(Object.assign({},e),A),{_className:i,canvasBackground:d,devicePixelRatio:C=getDevicePixelRatio(),onRenderError:P,onRenderSuccess:B,page:M,renderForms:a,renderTextLayer:t,rotate:s,scale:h}=y,{canvasRef:c}=A;invariant(M);const n=reactExports.useRef(null);function u(){M&&B&&B(makePageCallback(M,h))}function m(g){isCancelException(g)||(warning(!1,g.toString()),P&&P(g))}const l=reactExports.useMemo(()=>M.getViewport({scale:h*C,rotation:s}),[C,M,s,h]),T=reactExports.useMemo(()=>M.getViewport({scale:h,rotation:s}),[M,s,h]);function k(){if(!M)return;M.cleanup();const{current:g}=n;if(!g)return;g.width=l.width,g.height=l.height,g.style.width=`${Math.floor(T.width)}px`,g.style.height=`${Math.floor(T.height)}px`,g.style.visibility="hidden";const E={annotationMode:a?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:g.getContext("2d",{alpha:!1}),viewport:l};d&&(E.background=d);const U=M.render(E),W=U;return U.promise.then(()=>{g.style.visibility="",u()}).catch(m),()=>cancelRunningTask(W)}reactExports.useEffect(k,[d,n,C,M,a,l,T]);const w=reactExports.useCallback(()=>{const{current:g}=n;g&&(g.width=0,g.height=0)},[n]);return reactExports.useEffect(()=>w,[w]),React.createElement("canvas",{className:`${i}__canvas`,dir:"ltr",ref:mergeRefs(c,n),style:{display:"block",userSelect:"none"}},t?React.createElement(StructTree,null):null)}function PageSVG(){const A=usePageContext();invariant(A);const{_className:e,onRenderSuccess:y,onRenderError:i,page:d,rotate:C,scale:P}=A;invariant(d);const[B,M]=useResolver(),{value:a,error:t}=B;function s(){d&&y&&y(makePageCallback(d,P))}function h(){t&&(isCancelException(t)||(warning(!1,t.toString()),i&&i(t)))}const c=reactExports.useMemo(()=>d.getViewport({scale:P,rotation:C}),[d,C,P]);function n(){M({type:"RESET"})}reactExports.useEffect(n,[d,M,c]);function u(){if(!d)return;const k=makeCancellablePromise(d.getOperatorList());return k.promise.then(w=>{new pdfjs.SVGGraphics(d.commonObjs,d.objs).getSVG(w,c).then(E=>{if(!(E instanceof SVGElement))throw new Error("getSVG returned unexpected result.");M({type:"RESOLVE",value:E})}).catch(E=>{M({type:"REJECT",error:E})})}).catch(w=>{M({type:"REJECT",error:w})}),()=>cancelRunningTask(k)}reactExports.useEffect(u,[d,M,c]),reactExports.useEffect(()=>{if(a!==void 0){if(a===!1){h();return}s()}},[a]);function m(k){if(!k||!a)return;k.firstElementChild||k.appendChild(a);const{width:w,height:g}=c;a.setAttribute("width",`${w}`),a.setAttribute("height",`${g}`)}const{width:l,height:T}=c;return React.createElement("div",{className:`${e}__svg`,ref:k=>m(k),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:l,height:T,userSelect:"none"}})}function isTextItem(A){return"str"in A}function TextLayer(){const A=usePageContext();invariant(A);const{customTextRenderer:e,onGetTextError:y,onGetTextSuccess:i,onRenderTextLayerError:d,onRenderTextLayerSuccess:C,page:P,pageIndex:B,pageNumber:M,rotate:a,scale:t}=A;invariant(P);const[s,h]=useResolver(),{value:c,error:n}=s,u=reactExports.useRef(null),m=reactExports.useRef();warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function l(){c&&i&&i(c)}function T(){n&&(warning(!1,n.toString()),y&&y(n))}function k(){h({type:"RESET"})}reactExports.useEffect(k,[P,h]);function w(){if(!P)return;const G=makeCancellablePromise(P.getTextContent()),st=G;return G.promise.then(Z=>{h({type:"RESOLVE",value:Z})}).catch(Z=>{h({type:"REJECT",error:Z})}),()=>cancelRunningTask(st)}reactExports.useEffect(w,[P,h]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){T();return}l()}},[c]);const g=reactExports.useCallback(()=>{C&&C()},[C]),E=reactExports.useCallback(G=>{warning(!1,G.toString()),d&&d(G)},[d]);function U(){const G=m.current;G&&G.classList.add("active")}function W(){const G=m.current;G&&G.classList.remove("active")}const N=reactExports.useMemo(()=>P.getViewport({scale:t,rotation:a}),[P,a,t]);function q(){if(!P||!c)return;const{current:G}=u;if(!G)return;G.innerHTML="";const st=P.streamTextContent({includeMarkedContent:!0}),Z={container:G,textContentSource:st,viewport:N},tt=pdfjs.renderTextLayer(Z),rt=tt;return tt.promise.then(()=>{const J=document.createElement("div");J.className="endOfContent",G.append(J),m.current=J;const O=G.querySelectorAll('[role="presentation"]');if(e){let _=0;c.items.forEach((f,p)=>{if(!isTextItem(f))return;const v=O[_];if(!v)return;const D=e(Object.assign({pageIndex:B,pageNumber:M,itemIndex:p},f));v.innerHTML=D,_+=f.str&&f.hasEOL?2:1})}g()}).catch(E),()=>cancelRunningTask(rt)}return reactExports.useLayoutEffect(q,[e,E,g,P,B,M,c,N]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:W,onMouseDown:U,ref:u})}function AnnotationLayer(){const A=useDocumentContext(),e=usePageContext();invariant(e);const y=Object.assign(Object.assign({},A),e),{imageResourcesPath:i,linkService:d,onGetAnnotationsError:C,onGetAnnotationsSuccess:P,onRenderAnnotationLayerError:B,onRenderAnnotationLayerSuccess:M,page:a,pdf:t,renderForms:s,rotate:h,scale:c=1}=y;invariant(t),invariant(a),invariant(d);const[n,u]=useResolver(),{value:m,error:l}=n,T=reactExports.useRef(null);warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function k(){m&&P&&P(m)}function w(){l&&(warning(!1,l.toString()),C&&C(l))}function g(){u({type:"RESET"})}reactExports.useEffect(g,[u,a]);function E(){if(!a)return;const G=makeCancellablePromise(a.getAnnotations()),st=G;return G.promise.then(Z=>{u({type:"RESOLVE",value:Z})}).catch(Z=>{u({type:"REJECT",error:Z})}),()=>{cancelRunningTask(st)}}reactExports.useEffect(E,[u,a,s]),reactExports.useEffect(()=>{if(m!==void 0){if(m===!1){w();return}k()}},[m]);function U(){M&&M()}function W(G){warning(!1,`${G}`),B&&B(G)}const N=reactExports.useMemo(()=>a.getViewport({scale:c,rotation:h}),[a,h,c]);function q(){if(!t||!a||!d||!m)return;const{current:G}=T;if(!G)return;const st=N.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,div:G,l10n:null,page:a,viewport:st},tt={annotations:m,annotationStorage:t.annotationStorage,div:G,downloadManager:null,imageResourcesPath:i,linkService:d,page:a,renderForms:s,viewport:st};G.innerHTML="";try{new pdfjs.AnnotationLayer(Z).render(tt),U()}catch(rt){W(rt)}return()=>{}}return reactExports.useEffect(q,[m,i,d,a,s,N]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:T})}var __rest=function(A,e){var y={};for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&e.indexOf(i)<0&&(y[i]=A[i]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,i=Object.getOwnPropertySymbols(A);d<i.length;d++)e.indexOf(i[d])<0&&Object.prototype.propertyIsEnumerable.call(A,i[d])&&(y[i[d]]=A[i[d]]);return y};const defaultScale=1,Page=function A(e){const y=useDocumentContext(),i=Object.assign(Object.assign({},y),e),{_className:d="react-pdf__Page",_enableRegisterUnregisterPage:C=!0,canvasBackground:P,canvasRef:B,children:M,className:a,customRenderer:t,customTextRenderer:s,devicePixelRatio:h,error:c="Failed to load the page.",height:n,inputRef:u,loading:m="Loading page…",noData:l="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:k,onGetStructTreeError:w,onGetStructTreeSuccess:g,onGetTextError:E,onGetTextSuccess:U,onLoadError:W,onLoadSuccess:N,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:G,onRenderError:st,onRenderSuccess:Z,onRenderTextLayerError:tt,onRenderTextLayerSuccess:rt,pageIndex:J,pageNumber:O,pdf:_,registerPage:f,renderAnnotationLayer:p=!0,renderForms:v=!1,renderMode:D="canvas",renderTextLayer:L=!0,rotate:j,scale:x=defaultScale,unregisterPage:o,width:b}=i,S=__rest(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[R,F]=useResolver(),{value:I,error:H}=R,X=reactExports.useRef(null);invariant(_);const it=isProvided(O)?O-1:J??null,z=O??(isProvided(J)?J+1:null),Y=j??(I?I.rotate:null),K=reactExports.useMemo(()=>{if(!I)return null;let Tt=1;const Ft=x??defaultScale;if(b||n){const nt=I.getViewport({scale:1,rotation:Y});b?Tt=b/nt.width:n&&(Tt=n/nt.height)}return Ft*Tt},[n,I,Y,x,b]);function Q(){return()=>{isProvided(it)&&C&&o&&o(it)}}reactExports.useEffect(Q,[C,_,it,o]);function et(){if(N){if(!I||!K)return;N(makePageCallback(I,K))}if(C&&f){if(!isProvided(it)||!X.current)return;f(it,X.current)}}function at(){H&&(warning(!1,H.toString()),W&&W(H))}function lt(){F({type:"RESET"})}reactExports.useEffect(lt,[F,_,it]);function ct(){if(!_||!z)return;const Tt=makeCancellablePromise(_.getPage(z)),Ft=Tt;return Tt.promise.then(nt=>{F({type:"RESOLVE",value:nt})}).catch(nt=>{F({type:"REJECT",error:nt})}),()=>cancelRunningTask(Ft)}reactExports.useEffect(ct,[F,_,it,z,f]),reactExports.useEffect(()=>{if(I!==void 0){if(I===!1){at();return}et()}},[I,K]);const ht=reactExports.useMemo(()=>I&&isProvided(it)&&z&&isProvided(Y)&&isProvided(K)?{_className:d,canvasBackground:P,customTextRenderer:s,devicePixelRatio:h,onGetAnnotationsError:T,onGetAnnotationsSuccess:k,onGetStructTreeError:w,onGetStructTreeSuccess:g,onGetTextError:E,onGetTextSuccess:U,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:G,onRenderError:st,onRenderSuccess:Z,onRenderTextLayerError:tt,onRenderTextLayerSuccess:rt,page:I,pageIndex:it,pageNumber:z,renderForms:v,renderTextLayer:L,rotate:Y,scale:K}:null,[d,P,s,h,T,k,w,g,E,U,q,G,st,Z,tt,rt,I,it,z,v,L,Y,K]),dt=reactExports.useMemo(()=>makeEventProps(S,()=>I&&(K?makePageCallback(I,K):void 0)),[S,I,K]),ut=`${it}@${K}/${Y}`,_t=`${it}/${Y}`;function gt(){switch(D){case"custom":return invariant(t),React.createElement(t,{key:`${ut}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${_t}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${ut}_canvas`,canvasRef:B})}}function Et(){return L?React.createElement(TextLayer,{key:`${ut}_text`}):null}function mt(){return p?React.createElement(AnnotationLayer,{key:`${ut}_annotations`}):null}function St(){return React.createElement(PageContext.Provider,{value:ht},gt(),Et(),mt(),M)}function kt(){return z?_===null||I===void 0||I===null?React.createElement(Message,{type:"loading"},typeof m=="function"?m():m):_===!1||I===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):St():React.createElement(Message,{type:"no-data"},typeof l=="function"?l():l)}return React.createElement("div",Object.assign({className:clsx(d,a),"data-page-number":z,ref:mergeRefs(u,X),style:{"--scale-factor":`${K}`,backgroundColor:P||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},dt),kt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";export{Document as D,Page as P,React$1 as R,React as a,pdfjs as p,reactExports as r};
