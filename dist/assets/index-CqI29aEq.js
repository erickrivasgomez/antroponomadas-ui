(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))d(S);new MutationObserver(S=>{for(const B of S)if(B.type==="childList")for(const O of B.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&d(O)}).observe(document,{childList:!0,subtree:!0});function x(S){const B={};return S.integrity&&(B.integrity=S.integrity),S.referrerPolicy&&(B.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?B.credentials="include":S.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function d(S){if(S.ep)return;S.ep=!0;const B=x(S);fetch(S.href,B)}})();function getDefaultExportFromCjs(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function getAugmentedNamespace(C){if(Object.prototype.hasOwnProperty.call(C,"__esModule"))return C;var l=C.default;if(typeof l=="function"){var x=function d(){var S=!1;try{S=this instanceof d}catch{}return S?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};x.prototype=l.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(C).forEach(function(d){var S=Object.getOwnPropertyDescriptor(C,d);Object.defineProperty(x,d,S.get?S:{enumerable:!0,get:function(){return C[d]}})}),x}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var C=Symbol.for("react.element"),l=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),O=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),u=Symbol.iterator;function E(y){return y===null||typeof y!="object"?null:(y=u&&y[u]||y["@@iterator"],typeof y=="function"?y:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,P={};function b(y,F,H){this.props=y,this.context=F,this.refs=P,this.updater=H||A}b.prototype.isReactComponent={},b.prototype.setState=function(y,F){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,F,"setState")},b.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function v(){}v.prototype=b.prototype;function I(y,F,H){this.props=y,this.context=F,this.refs=P,this.updater=H||A}var L=I.prototype=new v;L.constructor=I,h(L,b.prototype),L.isPureReactComponent=!0;var a=Array.isArray,o=Object.prototype.hasOwnProperty,m={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function j(y,F,H){var q,U={},g=null,k=null;if(F!=null)for(q in F.ref!==void 0&&(k=F.ref),F.key!==void 0&&(g=""+F.key),F)o.call(F,q)&&!D.hasOwnProperty(q)&&(U[q]=F[q]);var R=arguments.length-2;if(R===1)U.children=H;else if(1<R){for(var z=Array(R),$=0;$<R;$++)z[$]=arguments[$+2];U.children=z}if(y&&y.defaultProps)for(q in R=y.defaultProps,R)U[q]===void 0&&(U[q]=R[q]);return{$$typeof:C,type:y,key:g,ref:k,props:U,_owner:m.current}}function N(y,F){return{$$typeof:C,type:y.type,key:F,ref:y.ref,props:y.props,_owner:y._owner}}function Q(y){return typeof y=="object"&&y!==null&&y.$$typeof===C}function K(y){var F={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(H){return F[H]})}var fe=/\/+/g;function se(y,F){return typeof y=="object"&&y!==null&&y.key!=null?K(""+y.key):F.toString(36)}function de(y,F,H,q,U){var g=typeof y;(g==="undefined"||g==="boolean")&&(y=null);var k=!1;if(y===null)k=!0;else switch(g){case"string":case"number":k=!0;break;case"object":switch(y.$$typeof){case C:case l:k=!0}}if(k)return k=y,U=U(k),y=q===""?"."+se(k,0):q,a(U)?(H="",y!=null&&(H=y.replace(fe,"$&/")+"/"),de(U,F,H,"",function($){return $})):U!=null&&(Q(U)&&(U=N(U,H+(!U.key||k&&k.key===U.key?"":(""+U.key).replace(fe,"$&/")+"/")+y)),F.push(U)),1;if(k=0,q=q===""?".":q+":",a(y))for(var R=0;R<y.length;R++){g=y[R];var z=q+se(g,R);k+=de(g,F,H,z,U)}else if(z=E(y),typeof z=="function")for(y=z.call(y),R=0;!(g=y.next()).done;)g=g.value,z=q+se(g,R++),k+=de(g,F,H,z,U);else if(g==="object")throw F=String(y),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return k}function ye(y,F,H){if(y==null)return y;var q=[],U=0;return de(y,q,"","",function(g){return F.call(H,g,U++)}),q}function ce(y){if(y._status===-1){var F=y._result;F=F(),F.then(function(H){(y._status===0||y._status===-1)&&(y._status=1,y._result=H)},function(H){(y._status===0||y._status===-1)&&(y._status=2,y._result=H)}),y._status===-1&&(y._status=0,y._result=F)}if(y._status===1)return y._result.default;throw y._result}var V={current:null},T={transition:null},w={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:T,ReactCurrentOwner:m};function _(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:ye,forEach:function(y,F,H){ye(y,function(){F.apply(this,arguments)},H)},count:function(y){var F=0;return ye(y,function(){F++}),F},toArray:function(y){return ye(y,function(F){return F})||[]},only:function(y){if(!Q(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},react_production_min.Component=b,react_production_min.Fragment=x,react_production_min.Profiler=S,react_production_min.PureComponent=I,react_production_min.StrictMode=d,react_production_min.Suspense=W,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w,react_production_min.act=_,react_production_min.cloneElement=function(y,F,H){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var q=h({},y.props),U=y.key,g=y.ref,k=y._owner;if(F!=null){if(F.ref!==void 0&&(g=F.ref,k=m.current),F.key!==void 0&&(U=""+F.key),y.type&&y.type.defaultProps)var R=y.type.defaultProps;for(z in F)o.call(F,z)&&!D.hasOwnProperty(z)&&(q[z]=F[z]===void 0&&R!==void 0?R[z]:F[z])}var z=arguments.length-2;if(z===1)q.children=H;else if(1<z){R=Array(z);for(var $=0;$<z;$++)R[$]=arguments[$+2];q.children=R}return{$$typeof:C,type:y.type,key:U,ref:g,props:q,_owner:k}},react_production_min.createContext=function(y){return y={$$typeof:O,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:B,_context:y},y.Consumer=y},react_production_min.createElement=j,react_production_min.createFactory=function(y){var F=j.bind(null,y);return F.type=y,F},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(y){return{$$typeof:G,render:y}},react_production_min.isValidElement=Q,react_production_min.lazy=function(y){return{$$typeof:s,_payload:{_status:-1,_result:y},_init:ce}},react_production_min.memo=function(y,F){return{$$typeof:f,type:y,compare:F===void 0?null:F}},react_production_min.startTransition=function(y){var F=T.transition;T.transition={};try{y()}finally{T.transition=F}},react_production_min.unstable_act=_,react_production_min.useCallback=function(y,F){return V.current.useCallback(y,F)},react_production_min.useContext=function(y){return V.current.useContext(y)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(y){return V.current.useDeferredValue(y)},react_production_min.useEffect=function(y,F){return V.current.useEffect(y,F)},react_production_min.useId=function(){return V.current.useId()},react_production_min.useImperativeHandle=function(y,F,H){return V.current.useImperativeHandle(y,F,H)},react_production_min.useInsertionEffect=function(y,F){return V.current.useInsertionEffect(y,F)},react_production_min.useLayoutEffect=function(y,F){return V.current.useLayoutEffect(y,F)},react_production_min.useMemo=function(y,F){return V.current.useMemo(y,F)},react_production_min.useReducer=function(y,F,H){return V.current.useReducer(y,F,H)},react_production_min.useRef=function(y){return V.current.useRef(y)},react_production_min.useState=function(y){return V.current.useState(y)},react_production_min.useSyncExternalStore=function(y,F,H){return V.current.useSyncExternalStore(y,F,H)},react_production_min.useTransition=function(){return V.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var C=requireReact(),l=Symbol.for("react.element"),x=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,S=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function O(G,W,f){var s,u={},E=null,A=null;f!==void 0&&(E=""+f),W.key!==void 0&&(E=""+W.key),W.ref!==void 0&&(A=W.ref);for(s in W)d.call(W,s)&&!B.hasOwnProperty(s)&&(u[s]=W[s]);if(G&&G.defaultProps)for(s in W=G.defaultProps,W)u[s]===void 0&&(u[s]=W[s]);return{$$typeof:l,type:G,key:E,ref:A,props:u,_owner:S.current}}return reactJsxRuntime_production_min.Fragment=x,reactJsxRuntime_production_min.jsx=O,reactJsxRuntime_production_min.jsxs=O,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(C){function l(T,w){var _=T.length;T.push(w);e:for(;0<_;){var y=_-1>>>1,F=T[y];if(0<S(F,w))T[y]=w,T[_]=F,_=y;else break e}}function x(T){return T.length===0?null:T[0]}function d(T){if(T.length===0)return null;var w=T[0],_=T.pop();if(_!==w){T[0]=_;e:for(var y=0,F=T.length,H=F>>>1;y<H;){var q=2*(y+1)-1,U=T[q],g=q+1,k=T[g];if(0>S(U,_))g<F&&0>S(k,U)?(T[y]=k,T[g]=_,y=g):(T[y]=U,T[q]=_,y=q);else if(g<F&&0>S(k,_))T[y]=k,T[g]=_,y=g;else break e}}return w}function S(T,w){var _=T.sortIndex-w.sortIndex;return _!==0?_:T.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var B=performance;C.unstable_now=function(){return B.now()}}else{var O=Date,G=O.now();C.unstable_now=function(){return O.now()-G}}var W=[],f=[],s=1,u=null,E=3,A=!1,h=!1,P=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(T){for(var w=x(f);w!==null;){if(w.callback===null)d(f);else if(w.startTime<=T)d(f),w.sortIndex=w.expirationTime,l(W,w);else break;w=x(f)}}function a(T){if(P=!1,L(T),!h)if(x(W)!==null)h=!0,ce(o);else{var w=x(f);w!==null&&V(a,w.startTime-T)}}function o(T,w){h=!1,P&&(P=!1,v(j),j=-1),A=!0;var _=E;try{for(L(w),u=x(W);u!==null&&(!(u.expirationTime>w)||T&&!K());){var y=u.callback;if(typeof y=="function"){u.callback=null,E=u.priorityLevel;var F=y(u.expirationTime<=w);w=C.unstable_now(),typeof F=="function"?u.callback=F:u===x(W)&&d(W),L(w)}else d(W);u=x(W)}if(u!==null)var H=!0;else{var q=x(f);q!==null&&V(a,q.startTime-w),H=!1}return H}finally{u=null,E=_,A=!1}}var m=!1,D=null,j=-1,N=5,Q=-1;function K(){return!(C.unstable_now()-Q<N)}function fe(){if(D!==null){var T=C.unstable_now();Q=T;var w=!0;try{w=D(!0,T)}finally{w?se():(m=!1,D=null)}}else m=!1}var se;if(typeof I=="function")se=function(){I(fe)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ye=de.port2;de.port1.onmessage=fe,se=function(){ye.postMessage(null)}}else se=function(){b(fe,0)};function ce(T){D=T,m||(m=!0,se())}function V(T,w){j=b(function(){T(C.unstable_now())},w)}C.unstable_IdlePriority=5,C.unstable_ImmediatePriority=1,C.unstable_LowPriority=4,C.unstable_NormalPriority=3,C.unstable_Profiling=null,C.unstable_UserBlockingPriority=2,C.unstable_cancelCallback=function(T){T.callback=null},C.unstable_continueExecution=function(){h||A||(h=!0,ce(o))},C.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},C.unstable_getCurrentPriorityLevel=function(){return E},C.unstable_getFirstCallbackNode=function(){return x(W)},C.unstable_next=function(T){switch(E){case 1:case 2:case 3:var w=3;break;default:w=E}var _=E;E=w;try{return T()}finally{E=_}},C.unstable_pauseExecution=function(){},C.unstable_requestPaint=function(){},C.unstable_runWithPriority=function(T,w){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var _=E;E=T;try{return w()}finally{E=_}},C.unstable_scheduleCallback=function(T,w,_){var y=C.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?y+_:y):_=y,T){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=_+F,T={id:s++,callback:w,priorityLevel:T,startTime:_,expirationTime:F,sortIndex:-1},_>y?(T.sortIndex=_,l(f,T),x(W)===null&&T===x(f)&&(P?(v(j),j=-1):P=!0,V(a,_-y))):(T.sortIndex=F,l(W,T),h||A||(h=!0,ce(o))),T},C.unstable_shouldYield=K,C.unstable_wrapCallback=function(T){var w=E;return function(){var _=E;E=w;try{return T.apply(this,arguments)}finally{E=_}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var C=requireReact(),l=requireScheduler();function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,S={};function B(e,t){O(e,t),O(e+"Capture",t)}function O(e,t){for(S[e]=t,e=0;e<t.length;e++)d.add(t[e])}var G=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),W=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},u={};function E(e){return W.call(u,e)?!0:W.call(s,e)?!1:f.test(e)?u[e]=!0:(s[e]=!0,!1)}function A(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function h(e,t,n,i){if(t===null||typeof t>"u"||A(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,n,i,c,p,M){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=M}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){b[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];b[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){b[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){b[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){b[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){b[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){b[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){b[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){b[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,I);b[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,I);b[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,I);b[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){b[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),b.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){b[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,n,i){var c=b.hasOwnProperty(t)?b[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(h(t,n,c,i)&&(n=null),i||c===null?E(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var a=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=Symbol.for("react.element"),m=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),K=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),T=Symbol.iterator;function w(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var _=Object.assign,y;function F(e){if(y===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);y=t&&t[1]||""}return`
`+y+e}var H=!1;function q(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(he){var i=he}Reflect.construct(e,[],t)}else{try{t.call()}catch(he){i=he}e.call(t.prototype)}else{try{throw Error()}catch(he){i=he}e()}}catch(he){if(he&&i&&typeof he.stack=="string"){for(var c=he.stack.split(`
`),p=i.stack.split(`
`),M=c.length-1,Y=p.length-1;1<=M&&0<=Y&&c[M]!==p[Y];)Y--;for(;1<=M&&0<=Y;M--,Y--)if(c[M]!==p[Y]){if(M!==1||Y!==1)do if(M--,Y--,0>Y||c[M]!==p[Y]){var Z=`
`+c[M].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=M&&0<=Y);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function g(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case m:return"Portal";case N:return"Profiler";case j:return"StrictMode";case se:return"Suspense";case de:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case Q:return(e._context.displayName||"Context")+".Provider";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ye:return t=e.displayName||null,t!==null?t:g(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return g(e(t))}catch{}}return null}function k(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function R(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,p=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(M){i=""+M,p.call(this,M)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(M){i=""+M},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X(e){e._valueTracker||(e._valueTracker=$(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=z(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ae(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _e(e,t){var n=t.checked;return _({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ie(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=R(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function le(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function ue(e,t){le(e,t);var n=R(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ge(e,t.type,n):t.hasOwnProperty("defaultValue")&&ge(e,t.type,R(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ge(e,t,n){(t!=="number"||ae(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ee=Array.isArray;function be(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+R(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Me(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return _({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Le(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(x(92));if(Ee(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:R(n)}}function Oe(e,t){var n=R(t.value),i=R(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ke(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ot(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pt,tt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pt=Pt||document.createElement("div"),Pt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ut(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qt=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(e){qt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bt[t]=Bt[e]})});function fn(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Bt.hasOwnProperty(e)&&Bt[e]?(""+t).trim():t+"px"}function me(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=fn(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var re=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function te(e,t){if(t){if(re[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function xe(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Be=null;function Qe(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Je=null,bt=null,Tt=null;function Xt(e){if(e=Nr(e)){if(typeof Je!="function")throw Error(x(280));var t=e.stateNode;t&&(t=vi(t),Je(e.stateNode,e.type,t))}}function ht(e){bt?Tt?Tt.push(e):Tt=[e]:bt=e}function nn(){if(bt){var e=bt,t=Tt;if(Tt=bt=null,Xt(e),t)for(e=0;e<t.length;e++)Xt(t[e])}}function jt(e,t){return e(t)}function Ln(){}var Xe=!1;function In(e,t,n){if(Xe)return e(t,n);Xe=!0;try{return jt(e,t,n)}finally{Xe=!1,(bt!==null||Tt!==null)&&(Ln(),nn())}}function Yt(e,t){var n=e.stateNode;if(n===null)return null;var i=vi(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var On=!1;if(G)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){On=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{On=!1}function Nn(e,t,n,i,c,p,M,Y,Z){var he=Array.prototype.slice.call(arguments,3);try{t.apply(n,he)}catch(Se){this.onError(Se)}}var rt=!1,Kt=null,pn=!1,rs=null,mc={onError:function(e){rt=!0,Kt=e}};function yc(e,t,n,i,c,p,M,Y,Z){rt=!1,Kt=null,Nn.apply(mc,arguments)}function vc(e,t,n,i,c,p,M,Y,Z){if(yc.apply(this,arguments),rt){if(rt){var he=Kt;rt=!1,Kt=null}else throw Error(x(198));pn||(pn=!0,rs=he)}}function Bn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uo(e){if(Bn(e)!==e)throw Error(x(188))}function _c(e){var t=e.alternate;if(!t){if(t=Bn(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var p=c.alternate;if(p===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===n)return Uo(c),e;if(p===i)return Uo(c),t;p=p.sibling}throw Error(x(188))}if(n.return!==i.return)n=c,i=p;else{for(var M=!1,Y=c.child;Y;){if(Y===n){M=!0,n=c,i=p;break}if(Y===i){M=!0,i=c,n=p;break}Y=Y.sibling}if(!M){for(Y=p.child;Y;){if(Y===n){M=!0,n=p,i=c;break}if(Y===i){M=!0,i=p,n=c;break}Y=Y.sibling}if(!M)throw Error(x(189))}}if(n.alternate!==i)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function zo(e){return e=_c(e),e!==null?Wo(e):null}function Wo(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wo(e);if(t!==null)return t;e=e.sibling}return null}var Ho=l.unstable_scheduleCallback,$o=l.unstable_cancelCallback,Sc=l.unstable_shouldYield,wc=l.unstable_requestPaint,Ze=l.unstable_now,Ac=l.unstable_getCurrentPriorityLevel,is=l.unstable_ImmediatePriority,Go=l.unstable_UserBlockingPriority,Jr=l.unstable_NormalPriority,Ec=l.unstable_LowPriority,Vo=l.unstable_IdlePriority,Zr=null,Qt=null;function xc(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Zr,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Tc,Pc=Math.log,bc=Math.LN2;function Tc(e){return e>>>=0,e===0?32:31-(Pc(e)/bc|0)|0}var ei=64,ti=4194304;function _r(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ni(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,p=e.pingedLanes,M=n&268435455;if(M!==0){var Y=M&~c;Y!==0?i=_r(Y):(p&=M,p!==0&&(i=_r(p)))}else M=n&~c,M!==0?i=_r(M):p!==0&&(i=_r(p));if(i===0)return 0;if(t!==0&&t!==i&&(t&c)===0&&(c=i&-i,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if((i&4)!==0&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Ut(t),c=1<<n,i|=e[n],t&=~c;return i}function Cc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var M=31-Ut(p),Y=1<<M,Z=c[M];Z===-1?((Y&n)===0||(Y&i)!==0)&&(c[M]=Cc(Y,t)):Z<=t&&(e.expiredLanes|=Y),p&=~Y}}function ss(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qo(){var e=ei;return ei<<=1,(ei&4194240)===0&&(ei=64),e}function os(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function Rc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-Ut(n),p=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~p}}function as(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ut(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var ze=0;function Xo(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Yo,ls,Ko,Qo,Jo,cs=!1,ri=[],gn=null,mn=null,yn=null,wr=new Map,Ar=new Map,vn=[],Mc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zo(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function Er(e,t,n,i,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:p,targetContainers:[c]},t!==null&&(t=Nr(t),t!==null&&ls(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fc(e,t,n,i,c){switch(t){case"focusin":return gn=Er(gn,e,t,n,i,c),!0;case"dragenter":return mn=Er(mn,e,t,n,i,c),!0;case"mouseover":return yn=Er(yn,e,t,n,i,c),!0;case"pointerover":var p=c.pointerId;return wr.set(p,Er(wr.get(p)||null,e,t,n,i,c)),!0;case"gotpointercapture":return p=c.pointerId,Ar.set(p,Er(Ar.get(p)||null,e,t,n,i,c)),!0}return!1}function ea(e){var t=jn(e.target);if(t!==null){var n=Bn(t);if(n!==null){if(t=n.tag,t===13){if(t=jo(n),t!==null){e.blockedOn=t,Jo(e.priority,function(){Ko(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Be=i,n.target.dispatchEvent(i),Be=null}else return t=Nr(n),t!==null&&ls(t),e.blockedOn=n,!1;t.shift()}return!0}function ta(e,t,n){ii(e)&&n.delete(t)}function Dc(){cs=!1,gn!==null&&ii(gn)&&(gn=null),mn!==null&&ii(mn)&&(mn=null),yn!==null&&ii(yn)&&(yn=null),wr.forEach(ta),Ar.forEach(ta)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,cs||(cs=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Dc)))}function Pr(e){function t(c){return xr(c,e)}if(0<ri.length){xr(ri[0],e);for(var n=1;n<ri.length;n++){var i=ri[n];i.blockedOn===e&&(i.blockedOn=null)}}for(gn!==null&&xr(gn,e),mn!==null&&xr(mn,e),yn!==null&&xr(yn,e),wr.forEach(t),Ar.forEach(t),n=0;n<vn.length;n++)i=vn[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)ea(n),n.blockedOn===null&&vn.shift()}var Qn=a.ReactCurrentBatchConfig,si=!0;function Lc(e,t,n,i){var c=ze,p=Qn.transition;Qn.transition=null;try{ze=1,us(e,t,n,i)}finally{ze=c,Qn.transition=p}}function Ic(e,t,n,i){var c=ze,p=Qn.transition;Qn.transition=null;try{ze=4,us(e,t,n,i)}finally{ze=c,Qn.transition=p}}function us(e,t,n,i){if(si){var c=hs(e,t,n,i);if(c===null)Cs(e,t,i,oi,n),Zo(e,i);else if(Fc(c,e,t,n,i))i.stopPropagation();else if(Zo(e,i),t&4&&-1<Mc.indexOf(e)){for(;c!==null;){var p=Nr(c);if(p!==null&&Yo(p),p=hs(e,t,n,i),p===null&&Cs(e,t,i,oi,n),p===c)break;c=p}c!==null&&i.stopPropagation()}else Cs(e,t,i,null,n)}}var oi=null;function hs(e,t,n,i){if(oi=null,e=Qe(i),e=jn(e),e!==null)if(t=Bn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jo(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oi=e,null}function na(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ac()){case is:return 1;case Go:return 4;case Jr:case Ec:return 16;case Vo:return 536870912;default:return 16}default:return 16}}var _n=null,ds=null,ai=null;function ra(){if(ai)return ai;var e,t=ds,n=t.length,i,c="value"in _n?_n.value:_n.textContent,p=c.length;for(e=0;e<n&&t[e]===c[e];e++);var M=n-e;for(i=1;i<=M&&t[n-i]===c[p-i];i++);return ai=c.slice(e,1<i?1-i:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function ia(){return!1}function Ct(e){function t(n,i,c,p,M){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=p,this.target=M,this.currentTarget=null;for(var Y in e)e.hasOwnProperty(Y)&&(n=e[Y],this[Y]=n?n(p):p[Y]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ci:ia,this.isPropagationStopped=ia,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),t}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Ct(Jn),br=_({},Jn,{view:0,detail:0}),Oc=Ct(br),ps,gs,Tr,ui=_({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tr&&(Tr&&e.type==="mousemove"?(ps=e.screenX-Tr.screenX,gs=e.screenY-Tr.screenY):gs=ps=0,Tr=e),ps)},movementY:function(e){return"movementY"in e?e.movementY:gs}}),sa=Ct(ui),Nc=_({},ui,{dataTransfer:0}),Bc=Ct(Nc),jc=_({},br,{relatedTarget:0}),ms=Ct(jc),Uc=_({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=Ct(Uc),Wc=_({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hc=Ct(Wc),$c=_({},Jn,{data:0}),oa=Ct($c),Gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qc[e])?!!t[e]:!1}function ys(){return Xc}var Yc=_({},br,{key:function(e){if(e.key){var t=Gc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kc=Ct(Yc),Qc=_({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=Ct(Qc),Jc=_({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),Zc=Ct(Jc),eu=_({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=Ct(eu),nu=_({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ru=Ct(nu),iu=[9,13,27,32],vs=G&&"CompositionEvent"in window,Cr=null;G&&"documentMode"in document&&(Cr=document.documentMode);var su=G&&"TextEvent"in window&&!Cr,la=G&&(!vs||Cr&&8<Cr&&11>=Cr),ca=" ",ua=!1;function ha(e,t){switch(e){case"keyup":return iu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function da(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zn=!1;function ou(e,t){switch(e){case"compositionend":return da(t);case"keypress":return t.which!==32?null:(ua=!0,ca);case"textInput":return e=t.data,e===ca&&ua?null:e;default:return null}}function au(e,t){if(Zn)return e==="compositionend"||!vs&&ha(e,t)?(e=ra(),ai=ds=_n=null,Zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return la&&t.locale!=="ko"?null:t.data;default:return null}}var lu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lu[e.type]:t==="textarea"}function pa(e,t,n,i){ht(i),t=gi(t,"onChange"),0<t.length&&(n=new fs("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var kr=null,Rr=null;function cu(e){Fa(e,0)}function hi(e){var t=ir(e);if(J(t))return e}function uu(e,t){if(e==="change")return t}var ga=!1;if(G){var _s;if(G){var Ss="oninput"in document;if(!Ss){var ma=document.createElement("div");ma.setAttribute("oninput","return;"),Ss=typeof ma.oninput=="function"}_s=Ss}else _s=!1;ga=_s&&(!document.documentMode||9<document.documentMode)}function ya(){kr&&(kr.detachEvent("onpropertychange",va),Rr=kr=null)}function va(e){if(e.propertyName==="value"&&hi(Rr)){var t=[];pa(t,Rr,e,Qe(e)),In(cu,t)}}function hu(e,t,n){e==="focusin"?(ya(),kr=t,Rr=n,kr.attachEvent("onpropertychange",va)):e==="focusout"&&ya()}function du(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hi(Rr)}function fu(e,t){if(e==="click")return hi(t)}function pu(e,t){if(e==="input"||e==="change")return hi(t)}function gu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zt=typeof Object.is=="function"?Object.is:gu;function Mr(e,t){if(zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!W.call(t,c)||!zt(e[c],t[c]))return!1}return!0}function _a(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sa(e,t){var n=_a(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_a(n)}}function wa(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wa(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Aa(){for(var e=window,t=ae();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ae(e.document)}return t}function ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mu(e){var t=Aa(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wa(n.ownerDocument.documentElement,n)){if(i!==null&&ws(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,p=Math.min(i.start,c);i=i.end===void 0?p:Math.min(i.end,c),!e.extend&&p>i&&(c=i,i=p,p=c),c=Sa(n,p);var M=Sa(n,i);c&&M&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>i?(e.addRange(t),e.extend(M.node,M.offset)):(t.setEnd(M.node,M.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yu=G&&"documentMode"in document&&11>=document.documentMode,er=null,As=null,Fr=null,Es=!1;function Ea(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Es||er==null||er!==ae(i)||(i=er,"selectionStart"in i&&ws(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fr&&Mr(Fr,i)||(Fr=i,i=gi(As,"onSelect"),0<i.length&&(t=new fs("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=er)))}function di(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tr={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionend:di("Transition","TransitionEnd")},xs={},xa={};G&&(xa=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function fi(e){if(xs[e])return xs[e];if(!tr[e])return e;var t=tr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xa)return xs[e]=t[n];return e}var Pa=fi("animationend"),ba=fi("animationiteration"),Ta=fi("animationstart"),Ca=fi("transitionend"),ka=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){ka.set(e,t),B(t,[e])}for(var Ps=0;Ps<Ra.length;Ps++){var bs=Ra[Ps],vu=bs.toLowerCase(),_u=bs[0].toUpperCase()+bs.slice(1);Sn(vu,"on"+_u)}Sn(Pa,"onAnimationEnd"),Sn(ba,"onAnimationIteration"),Sn(Ta,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(Ca,"onTransitionEnd"),O("onMouseEnter",["mouseout","mouseover"]),O("onMouseLeave",["mouseout","mouseover"]),O("onPointerEnter",["pointerout","pointerover"]),O("onPointerLeave",["pointerout","pointerover"]),B("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),B("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),B("onBeforeInput",["compositionend","keypress","textInput","paste"]),B("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),B("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),B("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Su=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ma(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,vc(i,t,void 0,e),e.currentTarget=null}function Fa(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var p=void 0;if(t)for(var M=i.length-1;0<=M;M--){var Y=i[M],Z=Y.instance,he=Y.currentTarget;if(Y=Y.listener,Z!==p&&c.isPropagationStopped())break e;Ma(c,Y,he),p=Z}else for(M=0;M<i.length;M++){if(Y=i[M],Z=Y.instance,he=Y.currentTarget,Y=Y.listener,Z!==p&&c.isPropagationStopped())break e;Ma(c,Y,he),p=Z}}}if(pn)throw e=rs,pn=!1,rs=null,e}function He(e,t){var n=t[Ls];n===void 0&&(n=t[Ls]=new Set);var i=e+"__bubble";n.has(i)||(Da(t,e,2,!1),n.add(i))}function Ts(e,t,n){var i=0;t&&(i|=4),Da(n,e,i,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){if(!e[pi]){e[pi]=!0,d.forEach(function(n){n!=="selectionchange"&&(Su.has(n)||Ts(n,!1,e),Ts(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,Ts("selectionchange",!1,t))}}function Da(e,t,n,i){switch(na(t)){case 1:var c=Lc;break;case 4:c=Ic;break;default:c=us}n=c.bind(null,t,n,e),c=void 0,!On||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Cs(e,t,n,i,c){var p=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var M=i.tag;if(M===3||M===4){var Y=i.stateNode.containerInfo;if(Y===c||Y.nodeType===8&&Y.parentNode===c)break;if(M===4)for(M=i.return;M!==null;){var Z=M.tag;if((Z===3||Z===4)&&(Z=M.stateNode.containerInfo,Z===c||Z.nodeType===8&&Z.parentNode===c))return;M=M.return}for(;Y!==null;){if(M=jn(Y),M===null)return;if(Z=M.tag,Z===5||Z===6){i=p=M;continue e}Y=Y.parentNode}}i=i.return}In(function(){var he=p,Se=Qe(n),we=[];e:{var ve=ka.get(e);if(ve!==void 0){var Pe=fs,Ce=e;switch(e){case"keypress":if(li(n)===0)break e;case"keydown":case"keyup":Pe=Kc;break;case"focusin":Ce="focus",Pe=ms;break;case"focusout":Ce="blur",Pe=ms;break;case"beforeblur":case"afterblur":Pe=ms;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Bc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Zc;break;case Pa:case ba:case Ta:Pe=zc;break;case Ca:Pe=tu;break;case"scroll":Pe=Oc;break;case"wheel":Pe=ru;break;case"copy":case"cut":case"paste":Pe=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=aa}var ke=(t&4)!==0,et=!ke&&e==="scroll",ne=ke?ve!==null?ve+"Capture":null:ve;ke=[];for(var ee=he,oe;ee!==null;){oe=ee;var Ae=oe.stateNode;if(oe.tag===5&&Ae!==null&&(oe=Ae,ne!==null&&(Ae=Yt(ee,ne),Ae!=null&&ke.push(Ir(ee,Ae,oe)))),et)break;ee=ee.return}0<ke.length&&(ve=new Pe(ve,Ce,null,n,Se),we.push({event:ve,listeners:ke}))}}if((t&7)===0){e:{if(ve=e==="mouseover"||e==="pointerover",Pe=e==="mouseout"||e==="pointerout",ve&&n!==Be&&(Ce=n.relatedTarget||n.fromElement)&&(jn(Ce)||Ce[sn]))break e;if((Pe||ve)&&(ve=Se.window===Se?Se:(ve=Se.ownerDocument)?ve.defaultView||ve.parentWindow:window,Pe?(Ce=n.relatedTarget||n.toElement,Pe=he,Ce=Ce?jn(Ce):null,Ce!==null&&(et=Bn(Ce),Ce!==et||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Pe=null,Ce=he),Pe!==Ce)){if(ke=sa,Ae="onMouseLeave",ne="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(ke=aa,Ae="onPointerLeave",ne="onPointerEnter",ee="pointer"),et=Pe==null?ve:ir(Pe),oe=Ce==null?ve:ir(Ce),ve=new ke(Ae,ee+"leave",Pe,n,Se),ve.target=et,ve.relatedTarget=oe,Ae=null,jn(Se)===he&&(ke=new ke(ne,ee+"enter",Ce,n,Se),ke.target=oe,ke.relatedTarget=et,Ae=ke),et=Ae,Pe&&Ce)t:{for(ke=Pe,ne=Ce,ee=0,oe=ke;oe;oe=nr(oe))ee++;for(oe=0,Ae=ne;Ae;Ae=nr(Ae))oe++;for(;0<ee-oe;)ke=nr(ke),ee--;for(;0<oe-ee;)ne=nr(ne),oe--;for(;ee--;){if(ke===ne||ne!==null&&ke===ne.alternate)break t;ke=nr(ke),ne=nr(ne)}ke=null}else ke=null;Pe!==null&&La(we,ve,Pe,ke,!1),Ce!==null&&et!==null&&La(we,et,Ce,ke,!0)}}e:{if(ve=he?ir(he):window,Pe=ve.nodeName&&ve.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&ve.type==="file")var Re=uu;else if(fa(ve))if(ga)Re=pu;else{Re=du;var Fe=hu}else(Pe=ve.nodeName)&&Pe.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(Re=fu);if(Re&&(Re=Re(e,he))){pa(we,Re,n,Se);break e}Fe&&Fe(e,ve,he),e==="focusout"&&(Fe=ve._wrapperState)&&Fe.controlled&&ve.type==="number"&&ge(ve,"number",ve.value)}switch(Fe=he?ir(he):window,e){case"focusin":(fa(Fe)||Fe.contentEditable==="true")&&(er=Fe,As=he,Fr=null);break;case"focusout":Fr=As=er=null;break;case"mousedown":Es=!0;break;case"contextmenu":case"mouseup":case"dragend":Es=!1,Ea(we,n,Se);break;case"selectionchange":if(yu)break;case"keydown":case"keyup":Ea(we,n,Se)}var De;if(vs)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Zn?ha(e,n)&&(Ie="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ie="onCompositionStart");Ie&&(la&&n.locale!=="ko"&&(Zn||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Zn&&(De=ra()):(_n=Se,ds="value"in _n?_n.value:_n.textContent,Zn=!0)),Fe=gi(he,Ie),0<Fe.length&&(Ie=new oa(Ie,e,null,n,Se),we.push({event:Ie,listeners:Fe}),De?Ie.data=De:(De=da(n),De!==null&&(Ie.data=De)))),(De=su?ou(e,n):au(e,n))&&(he=gi(he,"onBeforeInput"),0<he.length&&(Se=new oa("onBeforeInput","beforeinput",null,n,Se),we.push({event:Se,listeners:he}),Se.data=De))}Fa(we,t)})}function Ir(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gi(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=Yt(e,n),p!=null&&i.unshift(Ir(e,p,c)),p=Yt(e,t),p!=null&&i.push(Ir(e,p,c))),e=e.return}return i}function nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function La(e,t,n,i,c){for(var p=t._reactName,M=[];n!==null&&n!==i;){var Y=n,Z=Y.alternate,he=Y.stateNode;if(Z!==null&&Z===i)break;Y.tag===5&&he!==null&&(Y=he,c?(Z=Yt(n,p),Z!=null&&M.unshift(Ir(n,Z,Y))):c||(Z=Yt(n,p),Z!=null&&M.push(Ir(n,Z,Y)))),n=n.return}M.length!==0&&e.push({event:t,listeners:M})}var wu=/\r\n?/g,Au=/\u0000|\uFFFD/g;function Ia(e){return(typeof e=="string"?e:""+e).replace(wu,`
`).replace(Au,"")}function mi(e,t,n){if(t=Ia(t),Ia(e)!==t&&n)throw Error(x(425))}function yi(){}var ks=null,Rs=null;function Ms(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fs=typeof setTimeout=="function"?setTimeout:void 0,Eu=typeof clearTimeout=="function"?clearTimeout:void 0,Oa=typeof Promise=="function"?Promise:void 0,xu=typeof queueMicrotask=="function"?queueMicrotask:typeof Oa<"u"?function(e){return Oa.resolve(null).then(e).catch(Pu)}:Fs;function Pu(e){setTimeout(function(){throw e})}function Ds(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),Pr(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);Pr(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Na(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rr=Math.random().toString(36).slice(2),Jt="__reactFiber$"+rr,Or="__reactProps$"+rr,sn="__reactContainer$"+rr,Ls="__reactEvents$"+rr,bu="__reactListeners$"+rr,Tu="__reactHandles$"+rr;function jn(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Na(e);e!==null;){if(n=e[Jt])return n;e=Na(e)}return t}e=n,n=e.parentNode}return null}function Nr(e){return e=e[Jt]||e[sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function vi(e){return e[Or]||null}var Is=[],sr=-1;function An(e){return{current:e}}function $e(e){0>sr||(e.current=Is[sr],Is[sr]=null,sr--)}function We(e,t){sr++,Is[sr]=e.current,e.current=t}var En={},pt=An(En),St=An(!1),Un=En;function or(e,t){var n=e.type.contextTypes;if(!n)return En;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in n)c[p]=t[p];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function wt(e){return e=e.childContextTypes,e!=null}function _i(){$e(St),$e(pt)}function Ba(e,t,n){if(pt.current!==En)throw Error(x(168));We(pt,t),We(St,n)}function ja(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(x(108,k(e)||"Unknown",c));return _({},n,i)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Un=pt.current,We(pt,e),We(St,St.current),!0}function Ua(e,t,n){var i=e.stateNode;if(!i)throw Error(x(169));n?(e=ja(e,t,Un),i.__reactInternalMemoizedMergedChildContext=e,$e(St),$e(pt),We(pt,e)):$e(St),We(St,n)}var on=null,wi=!1,Os=!1;function za(e){on===null?on=[e]:on.push(e)}function Cu(e){wi=!0,za(e)}function xn(){if(!Os&&on!==null){Os=!0;var e=0,t=ze;try{var n=on;for(ze=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}on=null,wi=!1}catch(c){throw on!==null&&(on=on.slice(e+1)),Ho(is,xn),c}finally{ze=t,Os=!1}}return null}var ar=[],lr=0,Ai=null,Ei=0,Ft=[],Dt=0,zn=null,an=1,ln="";function Wn(e,t){ar[lr++]=Ei,ar[lr++]=Ai,Ai=e,Ei=t}function Wa(e,t,n){Ft[Dt++]=an,Ft[Dt++]=ln,Ft[Dt++]=zn,zn=e;var i=an;e=ln;var c=32-Ut(i)-1;i&=~(1<<c),n+=1;var p=32-Ut(t)+c;if(30<p){var M=c-c%5;p=(i&(1<<M)-1).toString(32),i>>=M,c-=M,an=1<<32-Ut(t)+c|n<<c|i,ln=p+e}else an=1<<p|n<<c|i,ln=e}function Ns(e){e.return!==null&&(Wn(e,1),Wa(e,1,0))}function Bs(e){for(;e===Ai;)Ai=ar[--lr],ar[lr]=null,Ei=ar[--lr],ar[lr]=null;for(;e===zn;)zn=Ft[--Dt],Ft[Dt]=null,ln=Ft[--Dt],Ft[Dt]=null,an=Ft[--Dt],Ft[Dt]=null}var kt=null,Rt=null,Ge=!1,Wt=null;function Ha(e,t){var n=Nt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $a(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,Rt=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zn!==null?{id:an,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,Rt=null,!0):!1;default:return!1}}function js(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Us(e){if(Ge){var t=Rt;if(t){var n=t;if(!$a(e,t)){if(js(e))throw Error(x(418));t=wn(n.nextSibling);var i=kt;t&&$a(e,t)?Ha(i,n):(e.flags=e.flags&-4097|2,Ge=!1,kt=e)}}else{if(js(e))throw Error(x(418));e.flags=e.flags&-4097|2,Ge=!1,kt=e}}}function Ga(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function xi(e){if(e!==kt)return!1;if(!Ge)return Ga(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ms(e.type,e.memoizedProps)),t&&(t=Rt)){if(js(e))throw Va(),Error(x(418));for(;t;)Ha(e,t),t=wn(t.nextSibling)}if(Ga(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rt=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=kt?wn(e.stateNode.nextSibling):null;return!0}function Va(){for(var e=Rt;e;)e=wn(e.nextSibling)}function cr(){Rt=kt=null,Ge=!1}function zs(e){Wt===null?Wt=[e]:Wt.push(e)}var ku=a.ReactCurrentBatchConfig;function Br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var i=n.stateNode}if(!i)throw Error(x(147,e));var c=i,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(M){var Y=c.refs;M===null?delete Y[p]:Y[p]=M},t._stringRef=p,t)}if(typeof e!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function Pi(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){var t=e._init;return t(e._payload)}function Xa(e){function t(ne,ee){if(e){var oe=ne.deletions;oe===null?(ne.deletions=[ee],ne.flags|=16):oe.push(ee)}}function n(ne,ee){if(!e)return null;for(;ee!==null;)t(ne,ee),ee=ee.sibling;return null}function i(ne,ee){for(ne=new Map;ee!==null;)ee.key!==null?ne.set(ee.key,ee):ne.set(ee.index,ee),ee=ee.sibling;return ne}function c(ne,ee){return ne=Fn(ne,ee),ne.index=0,ne.sibling=null,ne}function p(ne,ee,oe){return ne.index=oe,e?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<ee?(ne.flags|=2,ee):oe):(ne.flags|=2,ee)):(ne.flags|=1048576,ee)}function M(ne){return e&&ne.alternate===null&&(ne.flags|=2),ne}function Y(ne,ee,oe,Ae){return ee===null||ee.tag!==6?(ee=Do(oe,ne.mode,Ae),ee.return=ne,ee):(ee=c(ee,oe),ee.return=ne,ee)}function Z(ne,ee,oe,Ae){var Re=oe.type;return Re===D?Se(ne,ee,oe.props.children,Ae,oe.key):ee!==null&&(ee.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ce&&qa(Re)===ee.type)?(Ae=c(ee,oe.props),Ae.ref=Br(ne,ee,oe),Ae.return=ne,Ae):(Ae=Yi(oe.type,oe.key,oe.props,null,ne.mode,Ae),Ae.ref=Br(ne,ee,oe),Ae.return=ne,Ae)}function he(ne,ee,oe,Ae){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=Lo(oe,ne.mode,Ae),ee.return=ne,ee):(ee=c(ee,oe.children||[]),ee.return=ne,ee)}function Se(ne,ee,oe,Ae,Re){return ee===null||ee.tag!==7?(ee=Kn(oe,ne.mode,Ae,Re),ee.return=ne,ee):(ee=c(ee,oe),ee.return=ne,ee)}function we(ne,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Do(""+ee,ne.mode,oe),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case o:return oe=Yi(ee.type,ee.key,ee.props,null,ne.mode,oe),oe.ref=Br(ne,null,ee),oe.return=ne,oe;case m:return ee=Lo(ee,ne.mode,oe),ee.return=ne,ee;case ce:var Ae=ee._init;return we(ne,Ae(ee._payload),oe)}if(Ee(ee)||w(ee))return ee=Kn(ee,ne.mode,oe,null),ee.return=ne,ee;Pi(ne,ee)}return null}function ve(ne,ee,oe,Ae){var Re=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Re!==null?null:Y(ne,ee,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case o:return oe.key===Re?Z(ne,ee,oe,Ae):null;case m:return oe.key===Re?he(ne,ee,oe,Ae):null;case ce:return Re=oe._init,ve(ne,ee,Re(oe._payload),Ae)}if(Ee(oe)||w(oe))return Re!==null?null:Se(ne,ee,oe,Ae,null);Pi(ne,oe)}return null}function Pe(ne,ee,oe,Ae,Re){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return ne=ne.get(oe)||null,Y(ee,ne,""+Ae,Re);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case o:return ne=ne.get(Ae.key===null?oe:Ae.key)||null,Z(ee,ne,Ae,Re);case m:return ne=ne.get(Ae.key===null?oe:Ae.key)||null,he(ee,ne,Ae,Re);case ce:var Fe=Ae._init;return Pe(ne,ee,oe,Fe(Ae._payload),Re)}if(Ee(Ae)||w(Ae))return ne=ne.get(oe)||null,Se(ee,ne,Ae,Re,null);Pi(ee,Ae)}return null}function Ce(ne,ee,oe,Ae){for(var Re=null,Fe=null,De=ee,Ie=ee=0,ct=null;De!==null&&Ie<oe.length;Ie++){De.index>Ie?(ct=De,De=null):ct=De.sibling;var Ue=ve(ne,De,oe[Ie],Ae);if(Ue===null){De===null&&(De=ct);break}e&&De&&Ue.alternate===null&&t(ne,De),ee=p(Ue,ee,Ie),Fe===null?Re=Ue:Fe.sibling=Ue,Fe=Ue,De=ct}if(Ie===oe.length)return n(ne,De),Ge&&Wn(ne,Ie),Re;if(De===null){for(;Ie<oe.length;Ie++)De=we(ne,oe[Ie],Ae),De!==null&&(ee=p(De,ee,Ie),Fe===null?Re=De:Fe.sibling=De,Fe=De);return Ge&&Wn(ne,Ie),Re}for(De=i(ne,De);Ie<oe.length;Ie++)ct=Pe(De,ne,Ie,oe[Ie],Ae),ct!==null&&(e&&ct.alternate!==null&&De.delete(ct.key===null?Ie:ct.key),ee=p(ct,ee,Ie),Fe===null?Re=ct:Fe.sibling=ct,Fe=ct);return e&&De.forEach(function(Dn){return t(ne,Dn)}),Ge&&Wn(ne,Ie),Re}function ke(ne,ee,oe,Ae){var Re=w(oe);if(typeof Re!="function")throw Error(x(150));if(oe=Re.call(oe),oe==null)throw Error(x(151));for(var Fe=Re=null,De=ee,Ie=ee=0,ct=null,Ue=oe.next();De!==null&&!Ue.done;Ie++,Ue=oe.next()){De.index>Ie?(ct=De,De=null):ct=De.sibling;var Dn=ve(ne,De,Ue.value,Ae);if(Dn===null){De===null&&(De=ct);break}e&&De&&Dn.alternate===null&&t(ne,De),ee=p(Dn,ee,Ie),Fe===null?Re=Dn:Fe.sibling=Dn,Fe=Dn,De=ct}if(Ue.done)return n(ne,De),Ge&&Wn(ne,Ie),Re;if(De===null){for(;!Ue.done;Ie++,Ue=oe.next())Ue=we(ne,Ue.value,Ae),Ue!==null&&(ee=p(Ue,ee,Ie),Fe===null?Re=Ue:Fe.sibling=Ue,Fe=Ue);return Ge&&Wn(ne,Ie),Re}for(De=i(ne,De);!Ue.done;Ie++,Ue=oe.next())Ue=Pe(De,ne,Ie,Ue.value,Ae),Ue!==null&&(e&&Ue.alternate!==null&&De.delete(Ue.key===null?Ie:Ue.key),ee=p(Ue,ee,Ie),Fe===null?Re=Ue:Fe.sibling=Ue,Fe=Ue);return e&&De.forEach(function(lh){return t(ne,lh)}),Ge&&Wn(ne,Ie),Re}function et(ne,ee,oe,Ae){if(typeof oe=="object"&&oe!==null&&oe.type===D&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case o:e:{for(var Re=oe.key,Fe=ee;Fe!==null;){if(Fe.key===Re){if(Re=oe.type,Re===D){if(Fe.tag===7){n(ne,Fe.sibling),ee=c(Fe,oe.props.children),ee.return=ne,ne=ee;break e}}else if(Fe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===ce&&qa(Re)===Fe.type){n(ne,Fe.sibling),ee=c(Fe,oe.props),ee.ref=Br(ne,Fe,oe),ee.return=ne,ne=ee;break e}n(ne,Fe);break}else t(ne,Fe);Fe=Fe.sibling}oe.type===D?(ee=Kn(oe.props.children,ne.mode,Ae,oe.key),ee.return=ne,ne=ee):(Ae=Yi(oe.type,oe.key,oe.props,null,ne.mode,Ae),Ae.ref=Br(ne,ee,oe),Ae.return=ne,ne=Ae)}return M(ne);case m:e:{for(Fe=oe.key;ee!==null;){if(ee.key===Fe)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){n(ne,ee.sibling),ee=c(ee,oe.children||[]),ee.return=ne,ne=ee;break e}else{n(ne,ee);break}else t(ne,ee);ee=ee.sibling}ee=Lo(oe,ne.mode,Ae),ee.return=ne,ne=ee}return M(ne);case ce:return Fe=oe._init,et(ne,ee,Fe(oe._payload),Ae)}if(Ee(oe))return Ce(ne,ee,oe,Ae);if(w(oe))return ke(ne,ee,oe,Ae);Pi(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(n(ne,ee.sibling),ee=c(ee,oe),ee.return=ne,ne=ee):(n(ne,ee),ee=Do(oe,ne.mode,Ae),ee.return=ne,ne=ee),M(ne)):n(ne,ee)}return et}var ur=Xa(!0),Ya=Xa(!1),bi=An(null),Ti=null,hr=null,Ws=null;function Hs(){Ws=hr=Ti=null}function $s(e){var t=bi.current;$e(bi),e._currentValue=t}function Gs(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function dr(e,t){Ti=e,Ws=hr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(At=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(Ws!==e)if(e={context:e,memoizedValue:t,next:null},hr===null){if(Ti===null)throw Error(x(308));hr=e,Ti.dependencies={lanes:0,firstContext:e}}else hr=hr.next=e;return t}var Hn=null;function Vs(e){Hn===null?Hn=[e]:Hn.push(e)}function Ka(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,Vs(t)):(n.next=c.next,c.next=n),t.interleaved=n,cn(e,i)}function cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function qs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bn(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(je&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,cn(e,n)}return c=i.interleaved,c===null?(t.next=t,Vs(i)):(t.next=c.next,c.next=t),i.interleaved=t,cn(e,n)}function Ci(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,as(e,n)}}function Ja(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,p=null;if(n=n.firstBaseUpdate,n!==null){do{var M={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};p===null?c=p=M:p=p.next=M,n=n.next}while(n!==null);p===null?c=p=t:p=p.next=t}else c=p=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ki(e,t,n,i){var c=e.updateQueue;Pn=!1;var p=c.firstBaseUpdate,M=c.lastBaseUpdate,Y=c.shared.pending;if(Y!==null){c.shared.pending=null;var Z=Y,he=Z.next;Z.next=null,M===null?p=he:M.next=he,M=Z;var Se=e.alternate;Se!==null&&(Se=Se.updateQueue,Y=Se.lastBaseUpdate,Y!==M&&(Y===null?Se.firstBaseUpdate=he:Y.next=he,Se.lastBaseUpdate=Z))}if(p!==null){var we=c.baseState;M=0,Se=he=Z=null,Y=p;do{var ve=Y.lane,Pe=Y.eventTime;if((i&ve)===ve){Se!==null&&(Se=Se.next={eventTime:Pe,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Ce=e,ke=Y;switch(ve=t,Pe=n,ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){we=Ce.call(Pe,we,ve);break e}we=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,ve=typeof Ce=="function"?Ce.call(Pe,we,ve):Ce,ve==null)break e;we=_({},we,ve);break e;case 2:Pn=!0}}Y.callback!==null&&Y.lane!==0&&(e.flags|=64,ve=c.effects,ve===null?c.effects=[Y]:ve.push(Y))}else Pe={eventTime:Pe,lane:ve,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Se===null?(he=Se=Pe,Z=we):Se=Se.next=Pe,M|=ve;if(Y=Y.next,Y===null){if(Y=c.shared.pending,Y===null)break;ve=Y,Y=ve.next,ve.next=null,c.lastBaseUpdate=ve,c.shared.pending=null}}while(!0);if(Se===null&&(Z=we),c.baseState=Z,c.firstBaseUpdate=he,c.lastBaseUpdate=Se,t=c.shared.interleaved,t!==null){c=t;do M|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);Vn|=M,e.lanes=M,e.memoizedState=we}}function Za(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(x(191,c));c.call(i)}}}var jr={},Zt=An(jr),Ur=An(jr),zr=An(jr);function $n(e){if(e===jr)throw Error(x(174));return e}function Xs(e,t){switch(We(zr,t),We(Ur,e),We(Zt,jr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ke(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ke(t,e)}$e(Zt),We(Zt,t)}function fr(){$e(Zt),$e(Ur),$e(zr)}function el(e){$n(zr.current);var t=$n(Zt.current),n=Ke(t,e.type);t!==n&&(We(Ur,e),We(Zt,n))}function Ys(e){Ur.current===e&&($e(Zt),$e(Ur))}var Ve=An(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ks=[];function Qs(){for(var e=0;e<Ks.length;e++)Ks[e]._workInProgressVersionPrimary=null;Ks.length=0}var Mi=a.ReactCurrentDispatcher,Js=a.ReactCurrentBatchConfig,Gn=0,qe=null,it=null,at=null,Fi=!1,Wr=!1,Hr=0,Ru=0;function gt(){throw Error(x(321))}function Zs(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zt(e[n],t[n]))return!1;return!0}function eo(e,t,n,i,c,p){if(Gn=p,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mi.current=e===null||e.memoizedState===null?Lu:Iu,e=n(i,c),Wr){p=0;do{if(Wr=!1,Hr=0,25<=p)throw Error(x(301));p+=1,at=it=null,t.updateQueue=null,Mi.current=Ou,e=n(i,c)}while(Wr)}if(Mi.current=Ii,t=it!==null&&it.next!==null,Gn=0,at=it=qe=null,Fi=!1,t)throw Error(x(300));return e}function to(){var e=Hr!==0;return Hr=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?qe.memoizedState=at=e:at=at.next=e,at}function It(){if(it===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=at===null?qe.memoizedState:at.next;if(t!==null)at=t,it=e;else{if(e===null)throw Error(x(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},at===null?qe.memoizedState=at=e:at=at.next=e}return at}function $r(e,t){return typeof t=="function"?t(e):t}function no(e){var t=It(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var i=it,c=i.baseQueue,p=n.pending;if(p!==null){if(c!==null){var M=c.next;c.next=p.next,p.next=M}i.baseQueue=c=p,n.pending=null}if(c!==null){p=c.next,i=i.baseState;var Y=M=null,Z=null,he=p;do{var Se=he.lane;if((Gn&Se)===Se)Z!==null&&(Z=Z.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),i=he.hasEagerState?he.eagerState:e(i,he.action);else{var we={lane:Se,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Z===null?(Y=Z=we,M=i):Z=Z.next=we,qe.lanes|=Se,Vn|=Se}he=he.next}while(he!==null&&he!==p);Z===null?M=i:Z.next=Y,zt(i,t.memoizedState)||(At=!0),t.memoizedState=i,t.baseState=M,t.baseQueue=Z,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do p=c.lane,qe.lanes|=p,Vn|=p,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ro(e){var t=It(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,p=t.memoizedState;if(c!==null){n.pending=null;var M=c=c.next;do p=e(p,M.action),M=M.next;while(M!==c);zt(p,t.memoizedState)||(At=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),n.lastRenderedState=p}return[p,i]}function tl(){}function nl(e,t){var n=qe,i=It(),c=t(),p=!zt(i.memoizedState,c);if(p&&(i.memoizedState=c,At=!0),i=i.queue,io(sl.bind(null,n,i,e),[e]),i.getSnapshot!==t||p||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,Gr(9,il.bind(null,n,i,c,t),void 0,null),lt===null)throw Error(x(349));(Gn&30)!==0||rl(n,t,c)}return c}function rl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function il(e,t,n,i){t.value=n,t.getSnapshot=i,ol(t)&&al(e)}function sl(e,t,n){return n(function(){ol(t)&&al(e)})}function ol(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zt(e,n)}catch{return!0}}function al(e){var t=cn(e,1);t!==null&&Vt(t,e,1,-1)}function ll(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:e},t.queue=e,e=e.dispatch=Du.bind(null,qe,e),[t.memoizedState,e]}function Gr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function cl(){return It().memoizedState}function Di(e,t,n,i){var c=en();qe.flags|=e,c.memoizedState=Gr(1|t,n,void 0,i===void 0?null:i)}function Li(e,t,n,i){var c=It();i=i===void 0?null:i;var p=void 0;if(it!==null){var M=it.memoizedState;if(p=M.destroy,i!==null&&Zs(i,M.deps)){c.memoizedState=Gr(t,n,p,i);return}}qe.flags|=e,c.memoizedState=Gr(1|t,n,p,i)}function ul(e,t){return Di(8390656,8,e,t)}function io(e,t){return Li(2048,8,e,t)}function hl(e,t){return Li(4,2,e,t)}function dl(e,t){return Li(4,4,e,t)}function fl(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pl(e,t,n){return n=n!=null?n.concat([e]):null,Li(4,4,fl.bind(null,t,e),n)}function so(){}function gl(e,t){var n=It();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Zs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ml(e,t){var n=It();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Zs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function yl(e,t,n){return(Gn&21)===0?(e.baseState&&(e.baseState=!1,At=!0),e.memoizedState=n):(zt(n,t)||(n=qo(),qe.lanes|=n,Vn|=n,e.baseState=!0),t)}function Mu(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var i=Js.transition;Js.transition={};try{e(!1),t()}finally{ze=n,Js.transition=i}}function vl(){return It().memoizedState}function Fu(e,t,n){var i=Rn(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_l(e))Sl(t,n);else if(n=Ka(e,t,n,i),n!==null){var c=_t();Vt(n,e,i,c),wl(n,t,i)}}function Du(e,t,n){var i=Rn(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_l(e))Sl(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var M=t.lastRenderedState,Y=p(M,n);if(c.hasEagerState=!0,c.eagerState=Y,zt(Y,M)){var Z=t.interleaved;Z===null?(c.next=c,Vs(t)):(c.next=Z.next,Z.next=c),t.interleaved=c;return}}catch{}finally{}n=Ka(e,t,c,i),n!==null&&(c=_t(),Vt(n,e,i,c),wl(n,t,i))}}function _l(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function Sl(e,t){Wr=Fi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wl(e,t,n){if((n&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,as(e,n)}}var Ii={readContext:Lt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Lu={readContext:Lt,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:ul,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Di(4194308,4,fl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=en();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=en();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Fu.bind(null,qe,e),[i.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:ll,useDebugValue:so,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=ll(!1),t=e[0];return e=Mu.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=qe,c=en();if(Ge){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),lt===null)throw Error(x(349));(Gn&30)!==0||rl(i,t,n)}c.memoizedState=n;var p={value:n,getSnapshot:t};return c.queue=p,ul(sl.bind(null,i,p,e),[e]),i.flags|=2048,Gr(9,il.bind(null,i,p,n,t),void 0,null),n},useId:function(){var e=en(),t=lt.identifierPrefix;if(Ge){var n=ln,i=an;n=(i&~(1<<32-Ut(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ru++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Iu={readContext:Lt,useCallback:gl,useContext:Lt,useEffect:io,useImperativeHandle:pl,useInsertionEffect:hl,useLayoutEffect:dl,useMemo:ml,useReducer:no,useRef:cl,useState:function(){return no($r)},useDebugValue:so,useDeferredValue:function(e){var t=It();return yl(t,it.memoizedState,e)},useTransition:function(){var e=no($r)[0],t=It().memoizedState;return[e,t]},useMutableSource:tl,useSyncExternalStore:nl,useId:vl,unstable_isNewReconciler:!1},Ou={readContext:Lt,useCallback:gl,useContext:Lt,useEffect:io,useImperativeHandle:pl,useInsertionEffect:hl,useLayoutEffect:dl,useMemo:ml,useReducer:ro,useRef:cl,useState:function(){return ro($r)},useDebugValue:so,useDeferredValue:function(e){var t=It();return it===null?t.memoizedState=e:yl(t,it.memoizedState,e)},useTransition:function(){var e=ro($r)[0],t=It().memoizedState;return[e,t]},useMutableSource:tl,useSyncExternalStore:nl,useId:vl,unstable_isNewReconciler:!1};function Ht(e,t){if(e&&e.defaultProps){t=_({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function oo(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:_({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Oi={isMounted:function(e){return(e=e._reactInternals)?Bn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=_t(),c=Rn(e),p=un(i,c);p.payload=t,n!=null&&(p.callback=n),t=bn(e,p,c),t!==null&&(Vt(t,e,c,i),Ci(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=_t(),c=Rn(e),p=un(i,c);p.tag=1,p.payload=t,n!=null&&(p.callback=n),t=bn(e,p,c),t!==null&&(Vt(t,e,c,i),Ci(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_t(),i=Rn(e),c=un(n,i);c.tag=2,t!=null&&(c.callback=t),t=bn(e,c,i),t!==null&&(Vt(t,e,i,n),Ci(t,e,i))}};function Al(e,t,n,i,c,p,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,p,M):t.prototype&&t.prototype.isPureReactComponent?!Mr(n,i)||!Mr(c,p):!0}function El(e,t,n){var i=!1,c=En,p=t.contextType;return typeof p=="object"&&p!==null?p=Lt(p):(c=wt(t)?Un:pt.current,i=t.contextTypes,p=(i=i!=null)?or(e,c):En),t=new t(n,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oi,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function xl(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Oi.enqueueReplaceState(t,t.state,null)}function ao(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs={},qs(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=Lt(p):(p=wt(t)?Un:pt.current,c.context=or(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(oo(e,t,p,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Oi.enqueueReplaceState(c,c.state,null),ki(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function pr(e,t){try{var n="",i=t;do n+=U(i),i=i.return;while(i);var c=n}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Nu=typeof WeakMap=="function"?WeakMap:Map;function Pl(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hi||(Hi=!0,Po=i),co(e,t)},n}function bl(e,t,n){n=un(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){co(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(n.callback=function(){co(e,t),typeof i!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var M=t.stack;this.componentDidCatch(t.value,{componentStack:M!==null?M:""})}),n}function Tl(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Nu;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=Qu.bind(null,e,t,n),t.then(e,e))}function Cl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kl(e,t,n,i,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,bn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Bu=a.ReactCurrentOwner,At=!1;function vt(e,t,n,i){t.child=e===null?Ya(t,null,n,i):ur(t,e.child,n,i)}function Rl(e,t,n,i,c){n=n.render;var p=t.ref;return dr(t,c),i=eo(e,t,n,i,p,c),n=to(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,hn(e,t,c)):(Ge&&n&&Ns(t),t.flags|=1,vt(e,t,i,c),t.child)}function Ml(e,t,n,i,c){if(e===null){var p=n.type;return typeof p=="function"&&!Fo(p)&&p.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=p,Fl(e,t,p,i,c)):(e=Yi(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,(e.lanes&c)===0){var M=p.memoizedProps;if(n=n.compare,n=n!==null?n:Mr,n(M,i)&&e.ref===t.ref)return hn(e,t,c)}return t.flags|=1,e=Fn(p,i),e.ref=t.ref,e.return=t,t.child=e}function Fl(e,t,n,i,c){if(e!==null){var p=e.memoizedProps;if(Mr(p,i)&&e.ref===t.ref)if(At=!1,t.pendingProps=i=p,(e.lanes&c)!==0)(e.flags&131072)!==0&&(At=!0);else return t.lanes=e.lanes,hn(e,t,c)}return uo(e,t,n,i,c)}function Dl(e,t,n){var i=t.pendingProps,c=i.children,p=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(mr,Mt),Mt|=n;else{if((n&1073741824)===0)return e=p!==null?p.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(mr,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=p!==null?p.baseLanes:n,We(mr,Mt),Mt|=i}else p!==null?(i=p.baseLanes|n,t.memoizedState=null):i=n,We(mr,Mt),Mt|=i;return vt(e,t,c,n),t.child}function Ll(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function uo(e,t,n,i,c){var p=wt(n)?Un:pt.current;return p=or(t,p),dr(t,c),n=eo(e,t,n,i,p,c),i=to(),e!==null&&!At?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,hn(e,t,c)):(Ge&&i&&Ns(t),t.flags|=1,vt(e,t,n,c),t.child)}function Il(e,t,n,i,c){if(wt(n)){var p=!0;Si(t)}else p=!1;if(dr(t,c),t.stateNode===null)Bi(e,t),El(t,n,i),ao(t,n,i,c),i=!0;else if(e===null){var M=t.stateNode,Y=t.memoizedProps;M.props=Y;var Z=M.context,he=n.contextType;typeof he=="object"&&he!==null?he=Lt(he):(he=wt(n)?Un:pt.current,he=or(t,he));var Se=n.getDerivedStateFromProps,we=typeof Se=="function"||typeof M.getSnapshotBeforeUpdate=="function";we||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y!==i||Z!==he)&&xl(t,M,i,he),Pn=!1;var ve=t.memoizedState;M.state=ve,ki(t,i,M,c),Z=t.memoizedState,Y!==i||ve!==Z||St.current||Pn?(typeof Se=="function"&&(oo(t,n,Se,i),Z=t.memoizedState),(Y=Pn||Al(t,n,Y,i,ve,Z,he))?(we||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(t.flags|=4194308)):(typeof M.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=Z),M.props=i,M.state=Z,M.context=he,i=Y):(typeof M.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{M=t.stateNode,Qa(e,t),Y=t.memoizedProps,he=t.type===t.elementType?Y:Ht(t.type,Y),M.props=he,we=t.pendingProps,ve=M.context,Z=n.contextType,typeof Z=="object"&&Z!==null?Z=Lt(Z):(Z=wt(n)?Un:pt.current,Z=or(t,Z));var Pe=n.getDerivedStateFromProps;(Se=typeof Pe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Y!==we||ve!==Z)&&xl(t,M,i,Z),Pn=!1,ve=t.memoizedState,M.state=ve,ki(t,i,M,c);var Ce=t.memoizedState;Y!==we||ve!==Ce||St.current||Pn?(typeof Pe=="function"&&(oo(t,n,Pe,i),Ce=t.memoizedState),(he=Pn||Al(t,n,he,i,ve,Ce,Z)||!1)?(Se||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(i,Ce,Z),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(i,Ce,Z)),typeof M.componentDidUpdate=="function"&&(t.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof M.componentDidUpdate!="function"||Y===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Ce),M.props=i,M.state=Ce,M.context=Z,i=he):(typeof M.componentDidUpdate!="function"||Y===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),i=!1)}return ho(e,t,n,i,p,c)}function ho(e,t,n,i,c,p){Ll(e,t);var M=(t.flags&128)!==0;if(!i&&!M)return c&&Ua(t,n,!1),hn(e,t,p);i=t.stateNode,Bu.current=t;var Y=M&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&M?(t.child=ur(t,e.child,null,p),t.child=ur(t,null,Y,p)):vt(e,t,Y,p),t.memoizedState=i.state,c&&Ua(t,n,!0),t.child}function Ol(e){var t=e.stateNode;t.pendingContext?Ba(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ba(e,t.context,!1),Xs(e,t.containerInfo)}function Nl(e,t,n,i,c){return cr(),zs(c),t.flags|=256,vt(e,t,n,i),t.child}var fo={dehydrated:null,treeContext:null,retryLane:0};function po(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bl(e,t,n){var i=t.pendingProps,c=Ve.current,p=!1,M=(t.flags&128)!==0,Y;if((Y=M)||(Y=e!==null&&e.memoizedState===null?!1:(c&2)!==0),Y?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),We(Ve,c&1),e===null)return Us(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(M=i.children,e=i.fallback,p?(i=t.mode,p=t.child,M={mode:"hidden",children:M},(i&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=M):p=Ki(M,i,0,null),e=Kn(e,i,n,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=po(n),t.memoizedState=fo,e):go(t,M));if(c=e.memoizedState,c!==null&&(Y=c.dehydrated,Y!==null))return ju(e,t,M,i,Y,c,n);if(p){p=i.fallback,M=t.mode,c=e.child,Y=c.sibling;var Z={mode:"hidden",children:i.children};return(M&1)===0&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=Z,t.deletions=null):(i=Fn(c,Z),i.subtreeFlags=c.subtreeFlags&14680064),Y!==null?p=Fn(Y,p):(p=Kn(p,M,n,null),p.flags|=2),p.return=t,i.return=t,i.sibling=p,t.child=i,i=p,p=t.child,M=e.child.memoizedState,M=M===null?po(n):{baseLanes:M.baseLanes|n,cachePool:null,transitions:M.transitions},p.memoizedState=M,p.childLanes=e.childLanes&~n,t.memoizedState=fo,i}return p=e.child,e=p.sibling,i=Fn(p,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function go(e,t){return t=Ki({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ni(e,t,n,i){return i!==null&&zs(i),ur(t,e.child,null,n),e=go(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ju(e,t,n,i,c,p,M){if(n)return t.flags&256?(t.flags&=-257,i=lo(Error(x(422))),Ni(e,t,M,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=i.fallback,c=t.mode,i=Ki({mode:"visible",children:i.children},c,0,null),p=Kn(p,c,M,null),p.flags|=2,i.return=t,p.return=t,i.sibling=p,t.child=i,(t.mode&1)!==0&&ur(t,e.child,null,M),t.child.memoizedState=po(M),t.memoizedState=fo,p);if((t.mode&1)===0)return Ni(e,t,M,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var Y=i.dgst;return i=Y,p=Error(x(419)),i=lo(p,i,void 0),Ni(e,t,M,i)}if(Y=(M&e.childLanes)!==0,At||Y){if(i=lt,i!==null){switch(M&-M){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(i.suspendedLanes|M))!==0?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,cn(e,c),Vt(i,e,c,-1))}return Mo(),i=lo(Error(x(421))),Ni(e,t,M,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Ju.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,Rt=wn(c.nextSibling),kt=t,Ge=!0,Wt=null,e!==null&&(Ft[Dt++]=an,Ft[Dt++]=ln,Ft[Dt++]=zn,an=e.id,ln=e.overflow,zn=t),t=go(t,i.children),t.flags|=4096,t)}function jl(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Gs(e.return,t,n)}function mo(e,t,n,i,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=n,p.tailMode=c)}function Ul(e,t,n){var i=t.pendingProps,c=i.revealOrder,p=i.tail;if(vt(e,t,i.children,n),i=Ve.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jl(e,n,t);else if(e.tag===19)jl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(We(Ve,i),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Ri(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),mo(t,!1,c,n,p);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ri(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}mo(t,!0,n,null,p);break;case"together":mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=Fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Uu(e,t,n){switch(t.tag){case 3:Ol(t),cr();break;case 5:el(t);break;case 1:wt(t.type)&&Si(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;We(bi,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(We(Ve,Ve.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Bl(e,t,n):(We(Ve,Ve.current&1),e=hn(e,t,n),e!==null?e.sibling:null);We(Ve,Ve.current&1);break;case 19:if(i=(n&t.childLanes)!==0,(e.flags&128)!==0){if(i)return Ul(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),We(Ve,Ve.current),i)break;return null;case 22:case 23:return t.lanes=0,Dl(e,t,n)}return hn(e,t,n)}var zl,yo,Wl,Hl;zl=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},yo=function(){},Wl=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,$n(Zt.current);var p=null;switch(n){case"input":c=_e(e,c),i=_e(e,i),p=[];break;case"select":c=_({},c,{value:void 0}),i=_({},i,{value:void 0}),p=[];break;case"textarea":c=Me(e,c),i=Me(e,i),p=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=yi)}te(n,i);var M;n=null;for(he in c)if(!i.hasOwnProperty(he)&&c.hasOwnProperty(he)&&c[he]!=null)if(he==="style"){var Y=c[he];for(M in Y)Y.hasOwnProperty(M)&&(n||(n={}),n[M]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(S.hasOwnProperty(he)?p||(p=[]):(p=p||[]).push(he,null));for(he in i){var Z=i[he];if(Y=c?.[he],i.hasOwnProperty(he)&&Z!==Y&&(Z!=null||Y!=null))if(he==="style")if(Y){for(M in Y)!Y.hasOwnProperty(M)||Z&&Z.hasOwnProperty(M)||(n||(n={}),n[M]="");for(M in Z)Z.hasOwnProperty(M)&&Y[M]!==Z[M]&&(n||(n={}),n[M]=Z[M])}else n||(p||(p=[]),p.push(he,n)),n=Z;else he==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Y=Y?Y.__html:void 0,Z!=null&&Y!==Z&&(p=p||[]).push(he,Z)):he==="children"?typeof Z!="string"&&typeof Z!="number"||(p=p||[]).push(he,""+Z):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(S.hasOwnProperty(he)?(Z!=null&&he==="onScroll"&&He("scroll",e),p||Y===Z||(p=[])):(p=p||[]).push(he,Z))}n&&(p=p||[]).push("style",n);var he=p;(t.updateQueue=he)&&(t.flags|=4)}},Hl=function(e,t,n,i){n!==i&&(t.flags|=4)};function Vr(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function zu(e,t,n){var i=t.pendingProps;switch(Bs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return wt(t.type)&&_i(),mt(t),null;case 3:return i=t.stateNode,fr(),$e(St),$e(pt),Qs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(xi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wt!==null&&(Co(Wt),Wt=null))),yo(e,t),mt(t),null;case 5:Ys(t);var c=$n(zr.current);if(n=t.type,e!==null&&t.stateNode!=null)Wl(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(x(166));return mt(t),null}if(e=$n(Zt.current),xi(t)){i=t.stateNode,n=t.type;var p=t.memoizedProps;switch(i[Jt]=t,i[Or]=p,e=(t.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(c=0;c<Dr.length;c++)He(Dr[c],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":ie(i,p),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!p.multiple},He("invalid",i);break;case"textarea":Le(i,p),He("invalid",i)}te(n,p),c=null;for(var M in p)if(p.hasOwnProperty(M)){var Y=p[M];M==="children"?typeof Y=="string"?i.textContent!==Y&&(p.suppressHydrationWarning!==!0&&mi(i.textContent,Y,e),c=["children",Y]):typeof Y=="number"&&i.textContent!==""+Y&&(p.suppressHydrationWarning!==!0&&mi(i.textContent,Y,e),c=["children",""+Y]):S.hasOwnProperty(M)&&Y!=null&&M==="onScroll"&&He("scroll",i)}switch(n){case"input":X(i),pe(i,p,!0);break;case"textarea":X(i),Ne(i);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(i.onclick=yi)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{M=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ot(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=M.createElement(n,{is:i.is}):(e=M.createElement(n),n==="select"&&(M=e,i.multiple?M.multiple=!0:i.size&&(M.size=i.size))):e=M.createElementNS(e,n),e[Jt]=t,e[Or]=i,zl(e,t,!1,!1),t.stateNode=e;e:{switch(M=xe(n,i),n){case"dialog":He("cancel",e),He("close",e),c=i;break;case"iframe":case"object":case"embed":He("load",e),c=i;break;case"video":case"audio":for(c=0;c<Dr.length;c++)He(Dr[c],e);c=i;break;case"source":He("error",e),c=i;break;case"img":case"image":case"link":He("error",e),He("load",e),c=i;break;case"details":He("toggle",e),c=i;break;case"input":ie(e,i),c=_e(e,i),He("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=_({},i,{value:void 0}),He("invalid",e);break;case"textarea":Le(e,i),c=Me(e,i),He("invalid",e);break;default:c=i}te(n,c),Y=c;for(p in Y)if(Y.hasOwnProperty(p)){var Z=Y[p];p==="style"?me(e,Z):p==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&tt(e,Z)):p==="children"?typeof Z=="string"?(n!=="textarea"||Z!=="")&&ut(e,Z):typeof Z=="number"&&ut(e,""+Z):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(S.hasOwnProperty(p)?Z!=null&&p==="onScroll"&&He("scroll",e):Z!=null&&L(e,p,Z,M))}switch(n){case"input":X(e),pe(e,i,!1);break;case"textarea":X(e),Ne(e);break;case"option":i.value!=null&&e.setAttribute("value",""+R(i.value));break;case"select":e.multiple=!!i.multiple,p=i.value,p!=null?be(e,!!i.multiple,p,!1):i.defaultValue!=null&&be(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=yi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)Hl(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(x(166));if(n=$n(zr.current),$n(Zt.current),xi(t)){if(i=t.stateNode,n=t.memoizedProps,i[Jt]=t,(p=i.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:mi(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mi(i.nodeValue,n,(e.mode&1)!==0)}p&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Jt]=t,t.stateNode=i}return mt(t),null;case 13:if($e(Ve),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Rt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Va(),cr(),t.flags|=98560,p=!1;else if(p=xi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!p)throw Error(x(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(x(317));p[Jt]=t}else cr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),p=!1}else Wt!==null&&(Co(Wt),Wt=null),p=!0;if(!p)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ve.current&1)!==0?st===0&&(st=3):Mo())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return fr(),yo(e,t),e===null&&Lr(t.stateNode.containerInfo),mt(t),null;case 10:return $s(t.type._context),mt(t),null;case 17:return wt(t.type)&&_i(),mt(t),null;case 19:if($e(Ve),p=t.memoizedState,p===null)return mt(t),null;if(i=(t.flags&128)!==0,M=p.rendering,M===null)if(i)Vr(p,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(M=Ri(e),M!==null){for(t.flags|=128,Vr(p,!1),i=M.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)p=n,e=i,p.flags&=14680066,M=p.alternate,M===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=M.childLanes,p.lanes=M.lanes,p.child=M.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=M.memoizedProps,p.memoizedState=M.memoizedState,p.updateQueue=M.updateQueue,p.type=M.type,e=M.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Ve,Ve.current&1|2),t.child}e=e.sibling}p.tail!==null&&Ze()>yr&&(t.flags|=128,i=!0,Vr(p,!1),t.lanes=4194304)}else{if(!i)if(e=Ri(M),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Vr(p,!0),p.tail===null&&p.tailMode==="hidden"&&!M.alternate&&!Ge)return mt(t),null}else 2*Ze()-p.renderingStartTime>yr&&n!==1073741824&&(t.flags|=128,i=!0,Vr(p,!1),t.lanes=4194304);p.isBackwards?(M.sibling=t.child,t.child=M):(n=p.last,n!==null?n.sibling=M:t.child=M,p.last=M)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Ze(),t.sibling=null,n=Ve.current,We(Ve,i?n&1|2:n&1),t):(mt(t),null);case 22:case 23:return Ro(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Mt&1073741824)!==0&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function Wu(e,t){switch(Bs(t),t.tag){case 1:return wt(t.type)&&_i(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fr(),$e(St),$e(pt),Qs(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ys(t),null;case 13:if($e(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Ve),null;case 4:return fr(),null;case 10:return $s(t.type._context),null;case 22:case 23:return Ro(),null;case 24:return null;default:return null}}var ji=!1,yt=!1,Hu=typeof WeakSet=="function"?WeakSet:Set,Te=null;function gr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ye(e,t,i)}else n.current=null}function vo(e,t,n){try{n()}catch(i){Ye(e,t,i)}}var $l=!1;function $u(e,t){if(ks=si,e=Aa(),ws(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,p=i.focusNode;i=i.focusOffset;try{n.nodeType,p.nodeType}catch{n=null;break e}var M=0,Y=-1,Z=-1,he=0,Se=0,we=e,ve=null;t:for(;;){for(var Pe;we!==n||c!==0&&we.nodeType!==3||(Y=M+c),we!==p||i!==0&&we.nodeType!==3||(Z=M+i),we.nodeType===3&&(M+=we.nodeValue.length),(Pe=we.firstChild)!==null;)ve=we,we=Pe;for(;;){if(we===e)break t;if(ve===n&&++he===c&&(Y=M),ve===p&&++Se===i&&(Z=M),(Pe=we.nextSibling)!==null)break;we=ve,ve=we.parentNode}we=Pe}n=Y===-1||Z===-1?null:{start:Y,end:Z}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rs={focusedElem:e,selectionRange:n},si=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var Ce=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var ke=Ce.memoizedProps,et=Ce.memoizedState,ne=t.stateNode,ee=ne.getSnapshotBeforeUpdate(t.elementType===t.type?ke:Ht(t.type,ke),et);ne.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var oe=t.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(Ae){Ye(t,t.return,Ae)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return Ce=$l,$l=!1,Ce}function qr(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&vo(t,n,p)}c=c.next}while(c!==i)}}function Ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function _o(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gl(e){var t=e.alternate;t!==null&&(e.alternate=null,Gl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[Or],delete t[Ls],delete t[bu],delete t[Tu])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vl(e){return e.tag===5||e.tag===3||e.tag===4}function ql(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function So(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yi));else if(i!==4&&(e=e.child,e!==null))for(So(e,t,n),e=e.sibling;e!==null;)So(e,t,n),e=e.sibling}function wo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(wo(e,t,n),e=e.sibling;e!==null;)wo(e,t,n),e=e.sibling}var dt=null,$t=!1;function Tn(e,t,n){for(n=n.child;n!==null;)Xl(e,t,n),n=n.sibling}function Xl(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 5:yt||gr(n,t);case 6:var i=dt,c=$t;dt=null,Tn(e,t,n),dt=i,$t=c,dt!==null&&($t?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&($t?(e=dt,n=n.stateNode,e.nodeType===8?Ds(e.parentNode,n):e.nodeType===1&&Ds(e,n),Pr(e)):Ds(dt,n.stateNode));break;case 4:i=dt,c=$t,dt=n.stateNode.containerInfo,$t=!0,Tn(e,t,n),dt=i,$t=c;break;case 0:case 11:case 14:case 15:if(!yt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var p=c,M=p.destroy;p=p.tag,M!==void 0&&((p&2)!==0||(p&4)!==0)&&vo(n,t,M),c=c.next}while(c!==i)}Tn(e,t,n);break;case 1:if(!yt&&(gr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(Y){Ye(n,t,Y)}Tn(e,t,n);break;case 21:Tn(e,t,n);break;case 22:n.mode&1?(yt=(i=yt)||n.memoizedState!==null,Tn(e,t,n),yt=i):Tn(e,t,n);break;default:Tn(e,t,n)}}function Yl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Hu),t.forEach(function(i){var c=Zu.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var p=e,M=t,Y=M;e:for(;Y!==null;){switch(Y.tag){case 5:dt=Y.stateNode,$t=!1;break e;case 3:dt=Y.stateNode.containerInfo,$t=!0;break e;case 4:dt=Y.stateNode.containerInfo,$t=!0;break e}Y=Y.return}if(dt===null)throw Error(x(160));Xl(p,M,c),dt=null,$t=!1;var Z=c.alternate;Z!==null&&(Z.return=null),c.return=null}catch(he){Ye(c,t,he)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kl(t,e),t=t.sibling}function Kl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),tn(e),i&4){try{qr(3,e,e.return),Ui(3,e)}catch(ke){Ye(e,e.return,ke)}try{qr(5,e,e.return)}catch(ke){Ye(e,e.return,ke)}}break;case 1:Gt(t,e),tn(e),i&512&&n!==null&&gr(n,n.return);break;case 5:if(Gt(t,e),tn(e),i&512&&n!==null&&gr(n,n.return),e.flags&32){var c=e.stateNode;try{ut(c,"")}catch(ke){Ye(e,e.return,ke)}}if(i&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,M=n!==null?n.memoizedProps:p,Y=e.type,Z=e.updateQueue;if(e.updateQueue=null,Z!==null)try{Y==="input"&&p.type==="radio"&&p.name!=null&&le(c,p),xe(Y,M);var he=xe(Y,p);for(M=0;M<Z.length;M+=2){var Se=Z[M],we=Z[M+1];Se==="style"?me(c,we):Se==="dangerouslySetInnerHTML"?tt(c,we):Se==="children"?ut(c,we):L(c,Se,we,he)}switch(Y){case"input":ue(c,p);break;case"textarea":Oe(c,p);break;case"select":var ve=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var Pe=p.value;Pe!=null?be(c,!!p.multiple,Pe,!1):ve!==!!p.multiple&&(p.defaultValue!=null?be(c,!!p.multiple,p.defaultValue,!0):be(c,!!p.multiple,p.multiple?[]:"",!1))}c[Or]=p}catch(ke){Ye(e,e.return,ke)}}break;case 6:if(Gt(t,e),tn(e),i&4){if(e.stateNode===null)throw Error(x(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(ke){Ye(e,e.return,ke)}}break;case 3:if(Gt(t,e),tn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Pr(t.containerInfo)}catch(ke){Ye(e,e.return,ke)}break;case 4:Gt(t,e),tn(e);break;case 13:Gt(t,e),tn(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(xo=Ze())),i&4&&Yl(e);break;case 22:if(Se=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(he=yt)||Se,Gt(t,e),yt=he):Gt(t,e),tn(e),i&8192){if(he=e.memoizedState!==null,(e.stateNode.isHidden=he)&&!Se&&(e.mode&1)!==0)for(Te=e,Se=e.child;Se!==null;){for(we=Te=Se;Te!==null;){switch(ve=Te,Pe=ve.child,ve.tag){case 0:case 11:case 14:case 15:qr(4,ve,ve.return);break;case 1:gr(ve,ve.return);var Ce=ve.stateNode;if(typeof Ce.componentWillUnmount=="function"){i=ve,n=ve.return;try{t=i,Ce.props=t.memoizedProps,Ce.state=t.memoizedState,Ce.componentWillUnmount()}catch(ke){Ye(i,n,ke)}}break;case 5:gr(ve,ve.return);break;case 22:if(ve.memoizedState!==null){Zl(we);continue}}Pe!==null?(Pe.return=ve,Te=Pe):Zl(we)}Se=Se.sibling}e:for(Se=null,we=e;;){if(we.tag===5){if(Se===null){Se=we;try{c=we.stateNode,he?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(Y=we.stateNode,Z=we.memoizedProps.style,M=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Y.style.display=fn("display",M))}catch(ke){Ye(e,e.return,ke)}}}else if(we.tag===6){if(Se===null)try{we.stateNode.nodeValue=he?"":we.memoizedProps}catch(ke){Ye(e,e.return,ke)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===e)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===e)break e;for(;we.sibling===null;){if(we.return===null||we.return===e)break e;Se===we&&(Se=null),we=we.return}Se===we&&(Se=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:Gt(t,e),tn(e),i&4&&Yl(e);break;case 21:break;default:Gt(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vl(n)){var i=n;break e}n=n.return}throw Error(x(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(ut(c,""),i.flags&=-33);var p=ql(e);wo(e,p,c);break;case 3:case 4:var M=i.stateNode.containerInfo,Y=ql(e);So(e,Y,M);break;default:throw Error(x(161))}}catch(Z){Ye(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gu(e,t,n){Te=e,Ql(e)}function Ql(e,t,n){for(var i=(e.mode&1)!==0;Te!==null;){var c=Te,p=c.child;if(c.tag===22&&i){var M=c.memoizedState!==null||ji;if(!M){var Y=c.alternate,Z=Y!==null&&Y.memoizedState!==null||yt;Y=ji;var he=yt;if(ji=M,(yt=Z)&&!he)for(Te=c;Te!==null;)M=Te,Z=M.child,M.tag===22&&M.memoizedState!==null?ec(c):Z!==null?(Z.return=M,Te=Z):ec(c);for(;p!==null;)Te=p,Ql(p),p=p.sibling;Te=c,ji=Y,yt=he}Jl(e)}else(c.subtreeFlags&8772)!==0&&p!==null?(p.return=c,Te=p):Jl(e)}}function Jl(e){for(;Te!==null;){var t=Te;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:yt||Ui(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!yt)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:Ht(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Za(t,p,i);break;case 3:var M=t.updateQueue;if(M!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Za(t,M,n)}break;case 5:var Y=t.stateNode;if(n===null&&t.flags&4){n=Y;var Z=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&n.focus();break;case"img":Z.src&&(n.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var he=t.alternate;if(he!==null){var Se=he.memoizedState;if(Se!==null){var we=Se.dehydrated;we!==null&&Pr(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}yt||t.flags&512&&_o(t)}catch(ve){Ye(t,t.return,ve)}}if(t===e){Te=null;break}if(n=t.sibling,n!==null){n.return=t.return,Te=n;break}Te=t.return}}function Zl(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Te=n;break}Te=t.return}}function ec(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ui(4,t)}catch(Z){Ye(t,n,Z)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(Z){Ye(t,c,Z)}}var p=t.return;try{_o(t)}catch(Z){Ye(t,p,Z)}break;case 5:var M=t.return;try{_o(t)}catch(Z){Ye(t,M,Z)}}}catch(Z){Ye(t,t.return,Z)}if(t===e){Te=null;break}var Y=t.sibling;if(Y!==null){Y.return=t.return,Te=Y;break}Te=t.return}}var Vu=Math.ceil,zi=a.ReactCurrentDispatcher,Ao=a.ReactCurrentOwner,Ot=a.ReactCurrentBatchConfig,je=0,lt=null,nt=null,ft=0,Mt=0,mr=An(0),st=0,Xr=null,Vn=0,Wi=0,Eo=0,Yr=null,Et=null,xo=0,yr=1/0,dn=null,Hi=!1,Po=null,Cn=null,$i=!1,kn=null,Gi=0,Kr=0,bo=null,Vi=-1,qi=0;function _t(){return(je&6)!==0?Ze():Vi!==-1?Vi:Vi=Ze()}function Rn(e){return(e.mode&1)===0?1:(je&2)!==0&&ft!==0?ft&-ft:ku.transition!==null?(qi===0&&(qi=qo()),qi):(e=ze,e!==0||(e=window.event,e=e===void 0?16:na(e.type)),e)}function Vt(e,t,n,i){if(50<Kr)throw Kr=0,bo=null,Error(x(185));Sr(e,n,i),((je&2)===0||e!==lt)&&(e===lt&&((je&2)===0&&(Wi|=n),st===4&&Mn(e,ft)),xt(e,i),n===1&&je===0&&(t.mode&1)===0&&(yr=Ze()+500,wi&&xn()))}function xt(e,t){var n=e.callbackNode;kc(e,t);var i=ni(e,e===lt?ft:0);if(i===0)n!==null&&$o(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&$o(n),t===1)e.tag===0?Cu(nc.bind(null,e)):za(nc.bind(null,e)),xu(function(){(je&6)===0&&xn()}),n=null;else{switch(Xo(i)){case 1:n=is;break;case 4:n=Go;break;case 16:n=Jr;break;case 536870912:n=Vo;break;default:n=Jr}n=uc(n,tc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tc(e,t){if(Vi=-1,qi=0,(je&6)!==0)throw Error(x(327));var n=e.callbackNode;if(vr()&&e.callbackNode!==n)return null;var i=ni(e,e===lt?ft:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Xi(e,i);else{t=i;var c=je;je|=2;var p=ic();(lt!==e||ft!==t)&&(dn=null,yr=Ze()+500,Xn(e,t));do try{Yu();break}catch(Y){rc(e,Y)}while(!0);Hs(),zi.current=p,je=c,nt!==null?t=0:(lt=null,ft=0,t=st)}if(t!==0){if(t===2&&(c=ss(e),c!==0&&(i=c,t=To(e,c))),t===1)throw n=Xr,Xn(e,0),Mn(e,i),xt(e,Ze()),n;if(t===6)Mn(e,i);else{if(c=e.current.alternate,(i&30)===0&&!qu(c)&&(t=Xi(e,i),t===2&&(p=ss(e),p!==0&&(i=p,t=To(e,p))),t===1))throw n=Xr,Xn(e,0),Mn(e,i),xt(e,Ze()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(x(345));case 2:Yn(e,Et,dn);break;case 3:if(Mn(e,i),(i&130023424)===i&&(t=xo+500-Ze(),10<t)){if(ni(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){_t(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Fs(Yn.bind(null,e,Et,dn),t);break}Yn(e,Et,dn);break;case 4:if(Mn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var M=31-Ut(i);p=1<<M,M=t[M],M>c&&(c=M),i&=~p}if(i=c,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Vu(i/1960))-i,10<i){e.timeoutHandle=Fs(Yn.bind(null,e,Et,dn),i);break}Yn(e,Et,dn);break;case 5:Yn(e,Et,dn);break;default:throw Error(x(329))}}}return xt(e,Ze()),e.callbackNode===n?tc.bind(null,e):null}function To(e,t){var n=Yr;return e.current.memoizedState.isDehydrated&&(Xn(e,t).flags|=256),e=Xi(e,t),e!==2&&(t=Et,Et=n,t!==null&&Co(t)),e}function Co(e){Et===null?Et=e:Et.push.apply(Et,e)}function qu(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],p=c.getSnapshot;c=c.value;try{if(!zt(p(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~Eo,t&=~Wi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),i=1<<n;e[n]=-1,t&=~i}}function nc(e){if((je&6)!==0)throw Error(x(327));vr();var t=ni(e,0);if((t&1)===0)return xt(e,Ze()),null;var n=Xi(e,t);if(e.tag!==0&&n===2){var i=ss(e);i!==0&&(t=i,n=To(e,i))}if(n===1)throw n=Xr,Xn(e,0),Mn(e,t),xt(e,Ze()),n;if(n===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yn(e,Et,dn),xt(e,Ze()),null}function ko(e,t){var n=je;je|=1;try{return e(t)}finally{je=n,je===0&&(yr=Ze()+500,wi&&xn())}}function qn(e){kn!==null&&kn.tag===0&&(je&6)===0&&vr();var t=je;je|=1;var n=Ot.transition,i=ze;try{if(Ot.transition=null,ze=1,e)return e()}finally{ze=i,Ot.transition=n,je=t,(je&6)===0&&xn()}}function Ro(){Mt=mr.current,$e(mr)}function Xn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Eu(n)),nt!==null)for(n=nt.return;n!==null;){var i=n;switch(Bs(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_i();break;case 3:fr(),$e(St),$e(pt),Qs();break;case 5:Ys(i);break;case 4:fr();break;case 13:$e(Ve);break;case 19:$e(Ve);break;case 10:$s(i.type._context);break;case 22:case 23:Ro()}n=n.return}if(lt=e,nt=e=Fn(e.current,null),ft=Mt=t,st=0,Xr=null,Eo=Wi=Vn=0,Et=Yr=null,Hn!==null){for(t=0;t<Hn.length;t++)if(n=Hn[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,p=n.pending;if(p!==null){var M=p.next;p.next=c,i.next=M}n.pending=i}Hn=null}return e}function rc(e,t){do{var n=nt;try{if(Hs(),Mi.current=Ii,Fi){for(var i=qe.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}Fi=!1}if(Gn=0,at=it=qe=null,Wr=!1,Hr=0,Ao.current=null,n===null||n.return===null){st=1,Xr=t,nt=null;break}e:{var p=e,M=n.return,Y=n,Z=t;if(t=ft,Y.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var he=Z,Se=Y,we=Se.tag;if((Se.mode&1)===0&&(we===0||we===11||we===15)){var ve=Se.alternate;ve?(Se.updateQueue=ve.updateQueue,Se.memoizedState=ve.memoizedState,Se.lanes=ve.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Pe=Cl(M);if(Pe!==null){Pe.flags&=-257,kl(Pe,M,Y,p,t),Pe.mode&1&&Tl(p,he,t),t=Pe,Z=he;var Ce=t.updateQueue;if(Ce===null){var ke=new Set;ke.add(Z),t.updateQueue=ke}else Ce.add(Z);break e}else{if((t&1)===0){Tl(p,he,t),Mo();break e}Z=Error(x(426))}}else if(Ge&&Y.mode&1){var et=Cl(M);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),kl(et,M,Y,p,t),zs(pr(Z,Y));break e}}p=Z=pr(Z,Y),st!==4&&(st=2),Yr===null?Yr=[p]:Yr.push(p),p=M;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var ne=Pl(p,Z,t);Ja(p,ne);break e;case 1:Y=Z;var ee=p.type,oe=p.stateNode;if((p.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Cn===null||!Cn.has(oe)))){p.flags|=65536,t&=-t,p.lanes|=t;var Ae=bl(p,Y,t);Ja(p,Ae);break e}}p=p.return}while(p!==null)}oc(n)}catch(Re){t=Re,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function ic(){var e=zi.current;return zi.current=Ii,e===null?Ii:e}function Mo(){(st===0||st===3||st===2)&&(st=4),lt===null||(Vn&268435455)===0&&(Wi&268435455)===0||Mn(lt,ft)}function Xi(e,t){var n=je;je|=2;var i=ic();(lt!==e||ft!==t)&&(dn=null,Xn(e,t));do try{Xu();break}catch(c){rc(e,c)}while(!0);if(Hs(),je=n,zi.current=i,nt!==null)throw Error(x(261));return lt=null,ft=0,st}function Xu(){for(;nt!==null;)sc(nt)}function Yu(){for(;nt!==null&&!Sc();)sc(nt)}function sc(e){var t=cc(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?oc(e):nt=t,Ao.current=null}function oc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=zu(n,t,Mt),n!==null){nt=n;return}}else{if(n=Wu(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,nt=null;return}}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);st===0&&(st=5)}function Yn(e,t,n){var i=ze,c=Ot.transition;try{Ot.transition=null,ze=1,Ku(e,t,n,i)}finally{Ot.transition=c,ze=i}return null}function Ku(e,t,n,i){do vr();while(kn!==null);if((je&6)!==0)throw Error(x(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var p=n.lanes|n.childLanes;if(Rc(e,p),e===lt&&(nt=lt=null,ft=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||$i||($i=!0,uc(Jr,function(){return vr(),null})),p=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||p){p=Ot.transition,Ot.transition=null;var M=ze;ze=1;var Y=je;je|=4,Ao.current=null,$u(e,n),Kl(n,e),mu(Rs),si=!!ks,Rs=ks=null,e.current=n,Gu(n),wc(),je=Y,ze=M,Ot.transition=p}else e.current=n;if($i&&($i=!1,kn=e,Gi=c),p=e.pendingLanes,p===0&&(Cn=null),xc(n.stateNode),xt(e,Ze()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(Hi)throw Hi=!1,e=Po,Po=null,e;return(Gi&1)!==0&&e.tag!==0&&vr(),p=e.pendingLanes,(p&1)!==0?e===bo?Kr++:(Kr=0,bo=e):Kr=0,xn(),null}function vr(){if(kn!==null){var e=Xo(Gi),t=Ot.transition,n=ze;try{if(Ot.transition=null,ze=16>e?16:e,kn===null)var i=!1;else{if(e=kn,kn=null,Gi=0,(je&6)!==0)throw Error(x(331));var c=je;for(je|=4,Te=e.current;Te!==null;){var p=Te,M=p.child;if((Te.flags&16)!==0){var Y=p.deletions;if(Y!==null){for(var Z=0;Z<Y.length;Z++){var he=Y[Z];for(Te=he;Te!==null;){var Se=Te;switch(Se.tag){case 0:case 11:case 15:qr(8,Se,p)}var we=Se.child;if(we!==null)we.return=Se,Te=we;else for(;Te!==null;){Se=Te;var ve=Se.sibling,Pe=Se.return;if(Gl(Se),Se===he){Te=null;break}if(ve!==null){ve.return=Pe,Te=ve;break}Te=Pe}}}var Ce=p.alternate;if(Ce!==null){var ke=Ce.child;if(ke!==null){Ce.child=null;do{var et=ke.sibling;ke.sibling=null,ke=et}while(ke!==null)}}Te=p}}if((p.subtreeFlags&2064)!==0&&M!==null)M.return=p,Te=M;else e:for(;Te!==null;){if(p=Te,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:qr(9,p,p.return)}var ne=p.sibling;if(ne!==null){ne.return=p.return,Te=ne;break e}Te=p.return}}var ee=e.current;for(Te=ee;Te!==null;){M=Te;var oe=M.child;if((M.subtreeFlags&2064)!==0&&oe!==null)oe.return=M,Te=oe;else e:for(M=ee;Te!==null;){if(Y=Te,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Ui(9,Y)}}catch(Re){Ye(Y,Y.return,Re)}if(Y===M){Te=null;break e}var Ae=Y.sibling;if(Ae!==null){Ae.return=Y.return,Te=Ae;break e}Te=Y.return}}if(je=c,xn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Zr,e)}catch{}i=!0}return i}finally{ze=n,Ot.transition=t}}return!1}function ac(e,t,n){t=pr(n,t),t=Pl(e,t,1),e=bn(e,t,1),t=_t(),e!==null&&(Sr(e,1,t),xt(e,t))}function Ye(e,t,n){if(e.tag===3)ac(e,e,n);else for(;t!==null;){if(t.tag===3){ac(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cn===null||!Cn.has(i))){e=pr(n,e),e=bl(t,e,1),t=bn(t,e,1),e=_t(),t!==null&&(Sr(t,1,e),xt(t,e));break}}t=t.return}}function Qu(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ft&n)===n&&(st===4||st===3&&(ft&130023424)===ft&&500>Ze()-xo?Xn(e,0):Eo|=n),xt(e,t)}function lc(e,t){t===0&&((e.mode&1)===0?t=1:(t=ti,ti<<=1,(ti&130023424)===0&&(ti=4194304)));var n=_t();e=cn(e,t),e!==null&&(Sr(e,t,n),xt(e,n))}function Ju(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lc(e,n)}function Zu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(x(314))}i!==null&&i.delete(t),lc(e,n)}var cc;cc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)At=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return At=!1,Uu(e,t,n);At=(e.flags&131072)!==0}else At=!1,Ge&&(t.flags&1048576)!==0&&Wa(t,Ei,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Bi(e,t),e=t.pendingProps;var c=or(t,pt.current);dr(t,n),c=eo(null,t,i,e,c,n);var p=to();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(i)?(p=!0,Si(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,qs(t),c.updater=Oi,t.stateNode=c,c._reactInternals=t,ao(t,i,e,n),t=ho(null,t,i,!0,p,n)):(t.tag=0,Ge&&p&&Ns(t),vt(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=th(i),e=Ht(i,e),c){case 0:t=uo(null,t,i,e,n);break e;case 1:t=Il(null,t,i,e,n);break e;case 11:t=Rl(null,t,i,e,n);break e;case 14:t=Ml(null,t,i,Ht(i.type,e),n);break e}throw Error(x(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ht(i,c),uo(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ht(i,c),Il(e,t,i,c,n);case 3:e:{if(Ol(t),e===null)throw Error(x(387));i=t.pendingProps,p=t.memoizedState,c=p.element,Qa(e,t),ki(t,i,null,n);var M=t.memoizedState;if(i=M.element,p.isDehydrated)if(p={element:i,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=pr(Error(x(423)),t),t=Nl(e,t,i,n,c);break e}else if(i!==c){c=pr(Error(x(424)),t),t=Nl(e,t,i,n,c);break e}else for(Rt=wn(t.stateNode.containerInfo.firstChild),kt=t,Ge=!0,Wt=null,n=Ya(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cr(),i===c){t=hn(e,t,n);break e}vt(e,t,i,n)}t=t.child}return t;case 5:return el(t),e===null&&Us(t),i=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,M=c.children,Ms(i,c)?M=null:p!==null&&Ms(i,p)&&(t.flags|=32),Ll(e,t),vt(e,t,M,n),t.child;case 6:return e===null&&Us(t),null;case 13:return Bl(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ur(t,null,i,n):vt(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ht(i,c),Rl(e,t,i,c,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,p=t.memoizedProps,M=c.value,We(bi,i._currentValue),i._currentValue=M,p!==null)if(zt(p.value,M)){if(p.children===c.children&&!St.current){t=hn(e,t,n);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var Y=p.dependencies;if(Y!==null){M=p.child;for(var Z=Y.firstContext;Z!==null;){if(Z.context===i){if(p.tag===1){Z=un(-1,n&-n),Z.tag=2;var he=p.updateQueue;if(he!==null){he=he.shared;var Se=he.pending;Se===null?Z.next=Z:(Z.next=Se.next,Se.next=Z),he.pending=Z}}p.lanes|=n,Z=p.alternate,Z!==null&&(Z.lanes|=n),Gs(p.return,n,t),Y.lanes|=n;break}Z=Z.next}}else if(p.tag===10)M=p.type===t.type?null:p.child;else if(p.tag===18){if(M=p.return,M===null)throw Error(x(341));M.lanes|=n,Y=M.alternate,Y!==null&&(Y.lanes|=n),Gs(M,n,t),M=p.sibling}else M=p.child;if(M!==null)M.return=p;else for(M=p;M!==null;){if(M===t){M=null;break}if(p=M.sibling,p!==null){p.return=M.return,M=p;break}M=M.return}p=M}vt(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,dr(t,n),c=Lt(c),i=i(c),t.flags|=1,vt(e,t,i,n),t.child;case 14:return i=t.type,c=Ht(i,t.pendingProps),c=Ht(i.type,c),Ml(e,t,i,c,n);case 15:return Fl(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ht(i,c),Bi(e,t),t.tag=1,wt(i)?(e=!0,Si(t)):e=!1,dr(t,n),El(t,i,c),ao(t,i,c,n),ho(null,t,i,!0,e,n);case 19:return Ul(e,t,n);case 22:return Dl(e,t,n)}throw Error(x(156,t.tag))};function uc(e,t){return Ho(e,t)}function eh(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,n,i){return new eh(e,t,n,i)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function th(e){if(typeof e=="function")return Fo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===ye)return 14}return 2}function Fn(e,t){var n=e.alternate;return n===null?(n=Nt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yi(e,t,n,i,c,p){var M=2;if(i=e,typeof e=="function")Fo(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case D:return Kn(n.children,c,p,t);case j:M=8,c|=8;break;case N:return e=Nt(12,n,t,c|2),e.elementType=N,e.lanes=p,e;case se:return e=Nt(13,n,t,c),e.elementType=se,e.lanes=p,e;case de:return e=Nt(19,n,t,c),e.elementType=de,e.lanes=p,e;case V:return Ki(n,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:M=10;break e;case K:M=9;break e;case fe:M=11;break e;case ye:M=14;break e;case ce:M=16,i=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=Nt(M,n,t,c),t.elementType=e,t.type=i,t.lanes=p,t}function Kn(e,t,n,i){return e=Nt(7,e,i,t),e.lanes=n,e}function Ki(e,t,n,i){return e=Nt(22,e,i,t),e.elementType=V,e.lanes=n,e.stateNode={isHidden:!1},e}function Do(e,t,n){return e=Nt(6,e,null,t),e.lanes=n,e}function Lo(e,t,n){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nh(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=os(0),this.expirationTimes=os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Io(e,t,n,i,c,p,M,Y,Z){return e=new nh(e,t,n,Y,Z),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Nt(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qs(p),e}function rh(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function hc(e){if(!e)return En;e=e._reactInternals;e:{if(Bn(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var n=e.type;if(wt(n))return ja(e,n,t)}return t}function dc(e,t,n,i,c,p,M,Y,Z){return e=Io(n,i,!0,e,c,p,M,Y,Z),e.context=hc(null),n=e.current,i=_t(),c=Rn(n),p=un(i,c),p.callback=t??null,bn(n,p,c),e.current.lanes=c,Sr(e,c,i),xt(e,i),e}function Qi(e,t,n,i){var c=t.current,p=_t(),M=Rn(c);return n=hc(n),t.context===null?t.context=n:t.pendingContext=n,t=un(p,M),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=bn(c,t,M),e!==null&&(Vt(e,c,M,p),Ci(e,c,M)),M}function Ji(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oo(e,t){fc(e,t),(e=e.alternate)&&fc(e,t)}function ih(){return null}var pc=typeof reportError=="function"?reportError:function(e){console.error(e)};function No(e){this._internalRoot=e}Zi.prototype.render=No.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));Qi(e,t,null,null)},Zi.prototype.unmount=No.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){Qi(null,e,null,null)}),t[sn]=null}};function Zi(e){this._internalRoot=e}Zi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qo();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vn.length&&t!==0&&t<vn[n].priority;n++);vn.splice(n,0,e),n===0&&ea(e)}};function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function es(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gc(){}function sh(e,t,n,i,c){if(c){if(typeof i=="function"){var p=i;i=function(){var he=Ji(M);p.call(he)}}var M=dc(t,i,e,0,null,!1,!1,"",gc);return e._reactRootContainer=M,e[sn]=M.current,Lr(e.nodeType===8?e.parentNode:e),qn(),M}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var Y=i;i=function(){var he=Ji(Z);Y.call(he)}}var Z=Io(e,0,!1,null,null,!1,!1,"",gc);return e._reactRootContainer=Z,e[sn]=Z.current,Lr(e.nodeType===8?e.parentNode:e),qn(function(){Qi(t,Z,n,i)}),Z}function ts(e,t,n,i,c){var p=n._reactRootContainer;if(p){var M=p;if(typeof c=="function"){var Y=c;c=function(){var Z=Ji(M);Y.call(Z)}}Qi(t,M,e,c)}else M=sh(n,t,e,c,i);return Ji(M)}Yo=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_r(t.pendingLanes);n!==0&&(as(t,n|1),xt(t,Ze()),(je&6)===0&&(yr=Ze()+500,xn()))}break;case 13:qn(function(){var i=cn(e,1);if(i!==null){var c=_t();Vt(i,e,1,c)}}),Oo(e,1)}},ls=function(e){if(e.tag===13){var t=cn(e,134217728);if(t!==null){var n=_t();Vt(t,e,134217728,n)}Oo(e,134217728)}},Ko=function(e){if(e.tag===13){var t=Rn(e),n=cn(e,t);if(n!==null){var i=_t();Vt(n,e,t,i)}Oo(e,t)}},Qo=function(){return ze},Jo=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}},Je=function(e,t,n){switch(t){case"input":if(ue(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=vi(i);if(!c)throw Error(x(90));J(i),ue(i,c)}}}break;case"textarea":Oe(e,n);break;case"select":t=n.value,t!=null&&be(e,!!n.multiple,t,!1)}},jt=ko,Ln=qn;var oh={usingClientEntryPoint:!1,Events:[Nr,ir,vi,ht,nn,ko]},Qr={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ah={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zo(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||ih,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ns.isDisabled&&ns.supportsFiber)try{Zr=ns.inject(ah),Qt=ns}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oh,reactDom_production_min.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bo(t))throw Error(x(200));return rh(e,t,null,n)},reactDom_production_min.createRoot=function(e,t){if(!Bo(e))throw Error(x(299));var n=!1,i="",c=pc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Io(e,1,!1,null,null,n,!1,i,c),e[sn]=t.current,Lr(e.nodeType===8?e.parentNode:e),new No(t)},reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=zo(t),e=e===null?null:e.stateNode,e},reactDom_production_min.flushSync=function(e){return qn(e)},reactDom_production_min.hydrate=function(e,t,n){if(!es(t))throw Error(x(200));return ts(null,e,t,!0,n)},reactDom_production_min.hydrateRoot=function(e,t,n){if(!Bo(e))throw Error(x(405));var i=n!=null&&n.hydratedSources||null,c=!1,p="",M=pc;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(M=n.onRecoverableError)),t=dc(t,null,e,1,n??null,c,!1,p,M),e[sn]=t.current,Lr(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new Zi(t)},reactDom_production_min.render=function(e,t,n){if(!es(t))throw Error(x(200));return ts(null,e,t,!1,n)},reactDom_production_min.unmountComponentAtNode=function(e){if(!es(e))throw Error(x(40));return e._reactRootContainer?(qn(function(){ts(null,null,e,!1,function(){e._reactRootContainer=null,e[sn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=ko,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!es(n))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return ts(e,t,n,!1,i)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function C(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C)}catch(l){console.error(l)}}return C(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var C=requireReactDom();return client.createRoot=C.createRoot,client.hydrateRoot=C.hydrateRoot,client}var clientExports=requireClient(),pageFlip_browser$1={exports:{}},pageFlip_browser=pageFlip_browser$1.exports,hasRequiredPageFlip_browser;function requirePageFlip_browser(){return hasRequiredPageFlip_browser||(hasRequiredPageFlip_browser=1,(function(C,l){(function(x,d){d(l)})(pageFlip_browser,(function(x){class d{constructor(a,o){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=o,this.nowDrawingDensity=this.createdDensity,this.render=a}setDensity(a){this.createdDensity=a,this.nowDrawingDensity=a}setDrawingDensity(a){this.nowDrawingDensity=a}setPosition(a){this.state.position=a}setAngle(a){this.state.angle=a}setArea(a){this.state.area=a}setHardDrawingAngle(a){this.state.hardDrawingAngle=a}setHardAngle(a){this.state.hardAngle=a,this.state.hardDrawingAngle=a}setOrientation(a){this.orientation=a}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class S extends d{constructor(a,o,m){super(a,m),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=o}draw(a){const o=this.render.getContext(),m=this.render.convertToGlobal(this.state.position),D=this.render.getRect().pageWidth,j=this.render.getRect().height;o.save(),o.translate(m.x,m.y),o.beginPath();for(let N of this.state.area)N!==null&&(N=this.render.convertToGlobal(N),o.lineTo(N.x-m.x,N.y-m.y));o.rotate(this.state.angle),o.clip(),this.isLoad?o.drawImage(this.image,0,0,D,j):this.drawLoader(o,{x:0,y:0},D,j),o.restore()}simpleDraw(a){const o=this.render.getRect(),m=this.render.getContext(),D=o.pageWidth,j=o.height,N=a===1?o.left+o.pageWidth:o.left,Q=o.top;this.isLoad?m.drawImage(this.image,N,Q,D,j):this.drawLoader(m,{x:N,y:Q},D,j)}drawLoader(a,o,m,D){a.beginPath(),a.strokeStyle="rgb(200, 200, 200)",a.fillStyle="rgb(255, 255, 255)",a.lineWidth=1,a.rect(o.x+1,o.y+1,m-1,D-1),a.stroke(),a.fill();const j={x:o.x+m/2,y:o.y+D/2};a.beginPath(),a.lineWidth=10,a.arc(j.x,j.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),a.stroke(),a.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class B{constructor(a,o){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=o,this.app=a,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let o=0;o<this.pages.length;o++)this.portraitSpread.push([o]);let a=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([a]),a++);for(let o=a;o<this.pages.length;o+=2)o<this.pages.length-1?this.landscapeSpread.push([o,o+1]):(this.landscapeSpread.push([o]),this.pages[o].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(a){const o=this.getSpread();for(let m=0;m<o.length;m++)if(a===o[m][0]||a===o[m][1])return m;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(a){if(a>=0&&a<this.pages.length)return this.pages[a];throw new Error("Invalid page number")}nextBy(a){const o=this.pages.indexOf(a);return o<this.pages.length-1?this.pages[o+1]:null}prevBy(a){const o=this.pages.indexOf(a);return o>0?this.pages[o-1]:null}getFlippingPage(a){const o=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return a===0?this.pages[o].newTemporaryCopy():this.pages[o-1];{const m=a===0?this.getSpread()[o+1]:this.getSpread()[o-1];return m.length===1||a===0?this.pages[m[0]]:this.pages[m[1]]}}getBottomPage(a){const o=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return a===0?this.pages[o+1]:this.pages[o-1];{const m=a===0?this.getSpread()[o+1]:this.getSpread()[o-1];return m.length===1?this.pages[m[0]]:a===0?this.pages[m[1]]:this.pages[m[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(a=null){if(a===null&&(a=this.currentPageIndex),a<0||a>=this.pages.length)return;const o=this.getSpreadIndexByPage(a);o!==null&&(this.currentSpreadIndex=o,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(a){if(!(a>=0&&a<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=a}showSpread(){const a=this.getSpread()[this.currentSpreadIndex];a.length===2?(this.render.setLeftPage(this.pages[a[0]]),this.render.setRightPage(this.pages[a[1]])):this.render.getOrientation()==="landscape"&&a[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[a[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[a[0]])),this.currentPageIndex=a[0],this.app.updatePageIndex(this.currentPageIndex)}}class O extends B{constructor(a,o,m){super(a,o),this.imagesHref=m}load(){for(const a of this.imagesHref){const o=new S(this.render,a,"soft");o.load(),this.pages.push(o)}this.createSpread()}}class G{static GetDistanceBetweenTwoPoint(a,o){return a===null||o===null?1/0:Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))}static GetSegmentLength(a){return G.GetDistanceBetweenTwoPoint(a[0],a[1])}static GetAngleBetweenTwoLine(a,o){const m=a[0].y-a[1].y,D=o[0].y-o[1].y,j=a[1].x-a[0].x,N=o[1].x-o[0].x;return Math.acos((m*D+j*N)/(Math.sqrt(m*m+j*j)*Math.sqrt(D*D+N*N)))}static PointInRect(a,o){return o===null?null:o.x>=a.left&&o.x<=a.width+a.left&&o.y>=a.top&&o.y<=a.top+a.height?o:null}static GetRotatedPoint(a,o,m){return{x:a.x*Math.cos(m)+a.y*Math.sin(m)+o.x,y:a.y*Math.cos(m)-a.x*Math.sin(m)+o.y}}static LimitPointToCircle(a,o,m){if(G.GetDistanceBetweenTwoPoint(a,m)<=o)return m;const D=a.x,j=a.y,N=m.x,Q=m.y;let K=Math.sqrt(Math.pow(o,2)*Math.pow(D-N,2)/(Math.pow(D-N,2)+Math.pow(j-Q,2)))+D;m.x<0&&(K*=-1);let fe=(K-D)*(j-Q)/(D-N)+j;return D-N+j===0&&(fe=o),{x:K,y:fe}}static GetIntersectBetweenTwoSegment(a,o,m){return G.PointInRect(a,G.GetIntersectBeetwenTwoLine(o,m))}static GetIntersectBeetwenTwoLine(a,o){const m=a[0].y-a[1].y,D=o[0].y-o[1].y,j=a[1].x-a[0].x,N=o[1].x-o[0].x,Q=a[0].x*a[1].y-a[1].x*a[0].y,K=o[0].x*o[1].y-o[1].x*o[0].y,fe=m*K-D*Q,se=j*K-N*Q,de=-(Q*N-K*j)/(m*N-D*j),ye=-(m*K-D*Q)/(m*N-D*j);if(isFinite(de)&&isFinite(ye))return{x:de,y:ye};if(Math.abs(fe-se)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(a,o){const m=Math.abs(a.x-o.x),D=Math.abs(a.y-o.y),j=Math.max(m,D),N=[a];function Q(K,fe,se,de,ye){return fe>K?K+ye*(se/de):fe<K?K-ye*(se/de):K}for(let K=1;K<=j;K+=1)N.push({x:Q(a.x,o.x,m,j,K),y:Q(a.y,o.y,D,j,K)});return N}}class W extends d{constructor(a,o,m){super(a,m),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=o,this.element.classList.add("stf__item"),this.element.classList.add("--"+m)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new W(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(a){const o=a||this.nowDrawingDensity,m=this.render.convertToGlobal(this.state.position),D=this.render.getRect().pageWidth,j=this.render.getRect().height;this.element.classList.remove("--simple");const N=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${D}px;
            height: ${j}px;
        `;o==="hard"?this.drawHard(N):this.drawSoft(m,N)}drawHard(a=""){const o=this.render.getRect().left+this.render.getRect().width/2,m=this.state.hardDrawingAngle,D=a+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${m}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${o}px, 0, 0) rotateY(${m}deg);`);this.element.style.cssText=D}drawSoft(a,o=""){let m="polygon( ";for(const j of this.state.area)if(j!==null){let N=this.render.getDirection()===1?{x:-j.x+this.state.position.x,y:j.y-this.state.position.y}:{x:j.x-this.state.position.x,y:j.y-this.state.position.y};N=G.GetRotatedPoint(N,{x:0,y:0},this.state.angle),m+=N.x+"px "+N.y+"px, "}m=m.slice(0,-2),m+=")";const D=o+`transform-origin: 0 0; clip-path: ${m}; -webkit-clip-path: ${m};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${a.x}px, ${a.y}px);`:`transform: translate3d(${a.x}px, ${a.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=D}simpleDraw(a){const o=this.render.getRect(),m=o.pageWidth,D=o.height,j=a===1?o.left+o.pageWidth:o.left,N=o.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${D}px; 
            left: ${j}px; 
            top: ${N}px; 
            width: ${m}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(a){super.setOrientation(a),this.element.classList.remove("--left","--right"),this.element.classList.add(a===1?"--right":"--left")}setDrawingDensity(a){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+a),super.setDrawingDensity(a)}}class f extends B{constructor(a,o,m,D){super(a,o),this.element=m,this.pagesElement=D}load(){for(const a of this.pagesElement){const o=new W(this.render,a,a.dataset.density==="hard"?"hard":"soft");o.load(),this.pages.push(o)}this.createSpread()}}class s{constructor(a,o,m,D){this.direction=a,this.corner=o,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(m,10),this.pageHeight=parseInt(D,10)}calc(a){try{return this.position=this.calcAngleAndPosition(a),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const a=[];let o=!1;return a.push(this.rect.topLeft),a.push(this.topIntersectPoint),this.sideIntersectPoint===null?o=!0:(a.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(o=!1)),a.push(this.bottomIntersectPoint),(o||this.corner==="bottom")&&a.push(this.rect.bottomLeft),a}getBottomClipArea(){const a=[];return a.push(this.topIntersectPoint),this.corner==="top"?a.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&a.push({x:this.pageWidth,y:0}),a.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?G.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&a.push(this.sideIntersectPoint):this.corner==="top"&&a.push({x:this.pageWidth,y:this.pageHeight}),a.push(this.bottomIntersectPoint),a.push(this.topIntersectPoint),a}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const a=G.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?a:Math.PI-a}calcAngleAndPosition(a){let o=a;if(this.updateAngleAndGeometry(o),o=this.corner==="top"?this.checkPositionAtCenterLine(o,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(o,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(o.x-this.pageWidth)<1&&Math.abs(o.y)<1)throw new Error("Point is too small");return o}updateAngleAndGeometry(a){this.angle=this.calculateAngle(a),this.rect=this.getPageRect(a)}calculateAngle(a){const o=this.pageWidth-a.x+1,m=this.corner==="bottom"?this.pageHeight-a.y:a.y;let D=2*Math.acos(o/Math.sqrt(m*m+o*o));m<0&&(D=-D);const j=Math.PI-D;if(!isFinite(D)||j>=0&&j<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(D=-D),D}getPageRect(a){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],a):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],a)}getRectFromBasePoint(a,o){return{topLeft:this.getRotatedPoint(a[0],o),topRight:this.getRotatedPoint(a[1],o),bottomLeft:this.getRotatedPoint(a[2],o),bottomRight:this.getRotatedPoint(a[3],o)}}getRotatedPoint(a,o){return{x:a.x*Math.cos(this.angle)+a.y*Math.sin(this.angle)+o.x,y:a.y*Math.cos(this.angle)-a.x*Math.sin(this.angle)+o.y}}calculateIntersectPoint(a){const o={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[a,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[a,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[a,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=G.GetIntersectBetweenTwoSegment(o,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(a,o,m){let D=a;const j=G.LimitPointToCircle(o,this.pageWidth,D);D!==j&&(D=j,this.updateAngleAndGeometry(D));const N=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let Q=this.rect.bottomRight,K=this.rect.topLeft;if(this.corner==="bottom"&&(Q=this.rect.topRight,K=this.rect.bottomLeft),Q.x<=0){const fe=G.LimitPointToCircle(m,N,K);fe!==D&&(D=fe,this.updateAngleAndGeometry(D))}return D}getSegmentToShadowLine(){const a=this.getShadowStartPoint();return[a,a!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class u{constructor(a,o){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=a,this.app=o}fold(a){this.setState("user_fold"),this.calc===null&&this.start(a),this.do(this.render.convertToPage(a))}flip(a){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(a)||(this.calc!==null&&this.render.finishAnimation(),!this.start(a)))return;const o=this.getBoundsRect();this.setState("flipping");const m=o.height/10,D=this.calc.getCorner()==="bottom"?o.height-m:m,j=this.calc.getCorner()==="bottom"?o.height:0;this.calc.calc({x:o.pageWidth-m,y:D}),this.animateFlippingTo({x:o.pageWidth-m,y:D},{x:-o.pageWidth,y:j},!0)}start(a){this.reset();const o=this.render.convertToBook(a),m=this.getBoundsRect(),D=this.getDirectionByPoint(o),j=o.y>=m.height/2?"bottom":"top";if(!this.checkDirection(D))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(D),this.bottomPage=this.app.getPageCollection().getBottomPage(D),this.render.getOrientation()==="landscape")if(D===1){const N=this.app.getPageCollection().nextBy(this.flippingPage);N!==null&&this.flippingPage.getDensity()!==N.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),N.setDrawingDensity("hard"))}else{const N=this.app.getPageCollection().prevBy(this.flippingPage);N!==null&&this.flippingPage.getDensity()!==N.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),N.setDrawingDensity("hard"))}return this.render.setDirection(D),this.calc=new s(D,j,m.pageWidth.toString(10),m.height.toString(10)),!0}catch{return!1}}do(a){if(this.calc!==null&&this.calc.calc(a)){const o=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*o)/100):this.flippingPage.setHardAngle(-90*(200-2*o)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),o,this.calc.getDirection())}}flipToPage(a,o){const m=this.app.getPageCollection().getCurrentSpreadIndex(),D=this.app.getPageCollection().getSpreadIndexByPage(a);try{D>m&&(this.app.getPageCollection().setCurrentSpreadIndex(D-1),this.flipNext(o)),D<m&&(this.app.getPageCollection().setCurrentSpreadIndex(D+1),this.flipPrev(o))}catch{}}flipNext(a){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:a==="top"?1:this.render.getRect().height-2})}flipPrev(a){this.flip({x:10,y:a==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const a=this.calc.getPosition(),o=this.getBoundsRect(),m=this.calc.getCorner()==="bottom"?o.height:0;a.x<=0?this.animateFlippingTo(a,{x:-o.pageWidth,y:m},!0):this.animateFlippingTo(a,{x:o.pageWidth,y:m},!1)}showCorner(a){if(!this.checkState("read","fold_corner"))return;const o=this.getBoundsRect(),m=o.pageWidth;if(this.isPointOnCorners(a))if(this.calc===null){if(!this.start(a))return;this.setState("fold_corner"),this.calc.calc({x:m-1,y:1});const D=50,j=this.calc.getCorner()==="bottom"?o.height-1:1,N=this.calc.getCorner()==="bottom"?o.height-D:D;this.animateFlippingTo({x:m-1,y:j},{x:m-D,y:N},!1,!1)}else this.do(this.render.convertToPage(a));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(a,o,m,D=!0){const j=G.GetCordsFromTwoPoint(a,o),N=[];for(const K of j)N.push(()=>this.do(K));const Q=this.getAnimationDuration(j.length);this.render.startAnimation(N,Q,()=>{this.calc&&(m&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),D&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(a){this.state!==a&&(this.app.updateState(a),this.state=a)}getDirectionByPoint(a){const o=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(a.x-o.pageWidth<=o.width/5)return 1}else if(a.x<o.width/2)return 1;return 0}getAnimationDuration(a){const o=this.app.getSettings().flippingTime;return a>=1e3?o:a/1e3*o}checkDirection(a){return a===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...a){for(const o of a)if(this.state===o)return!0;return!1}isPointOnCorners(a){const o=this.getBoundsRect(),m=o.pageWidth,D=Math.sqrt(Math.pow(m,2)+Math.pow(o.height,2))/5,j=this.render.convertToBook(a);return j.x>0&&j.y>0&&j.x<o.width&&j.y<o.height&&(j.x<D||j.x>o.width-D)&&(j.y<D||j.y>o.height-D)}}class E{constructor(a,o){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=o,this.app=a;const m=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=m.exec(window.navigator.userAgent)!==null}render(a){if(this.animation!==null){const o=Math.round((a-this.animation.startedAt)/this.animation.durationFrame);o<this.animation.frames.length?this.animation.frames[o]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=a,this.drawFrame()}start(){this.update();const a=o=>{this.render(o),requestAnimationFrame(a)};requestAnimationFrame(a)}startAnimation(a,o,m){this.finishAnimation(),this.animation={frames:a,duration:o,durationFrame:o/a.length,onAnimateEnd:m,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const a=this.calculateBoundsRect();this.orientation!==a&&(this.orientation=a,this.app.updateOrientation(a))}calculateBoundsRect(){let a="landscape";const o=this.getBlockWidth(),m=o/2,D=this.getBlockHeight()/2,j=this.setting.width/this.setting.height;let N=this.setting.width,Q=this.setting.height,K=m-N;return this.setting.size==="stretch"?(o<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(a="portrait"),N=a==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,N>this.setting.maxWidth&&(N=this.setting.maxWidth),Q=N/j,Q>this.getBlockHeight()&&(Q=this.getBlockHeight(),N=Q*j),K=a==="portrait"?m-N/2-N:m-N):o<2*N&&this.app.getSettings().usePortrait&&(a="portrait",K=m-N/2-N),this.boundsRect={left:K,top:D-Q/2,width:2*N,height:Q,pageWidth:N},a}setShadowData(a,o,m,D){if(!this.app.getSettings().drawShadow)return;const j=100*this.getSettings().maxShadowOpacity;this.shadow={pos:a,angle:o,width:3*this.getRect().pageWidth/4*m/100,opacity:(100-m)*j/100/100,direction:D,progress:2*m}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(a){this.pageRect=a}setDirection(a){this.direction=a}setRightPage(a){a!==null&&a.setOrientation(1),this.rightPage=a}setLeftPage(a){a!==null&&a.setOrientation(0),this.leftPage=a}setBottomPage(a){a!==null&&a.setOrientation(this.direction===1?0:1),this.bottomPage=a}setFlippingPage(a){a!==null&&a.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=a}convertToBook(a){const o=this.getRect();return{x:a.x-o.left,y:a.y-o.top}}isSafari(){return this.safari}convertToPage(a,o){o||(o=this.direction);const m=this.getRect();return{x:o===0?a.x-m.left-m.width/2:m.width/2-a.x+m.left,y:a.y-m.top}}convertToGlobal(a,o){if(o||(o=this.direction),a==null)return null;const m=this.getRect();return{x:o===0?a.x+m.left+m.width/2:m.width/2-a.x+m.left,y:a.y+m.top}}convertRectToGlobal(a,o){return o||(o=this.direction),{topLeft:this.convertToGlobal(a.topLeft,o),topRight:this.convertToGlobal(a.topRight,o),bottomLeft:this.convertToGlobal(a.bottomLeft,o),bottomRight:this.convertToGlobal(a.bottomRight,o)}}}class A extends E{constructor(a,o,m){super(a,o),this.canvas=m,this.ctx=m.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const a=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(a.left+a.pageWidth,a.top,a.width,a.height),this.ctx.clip())}drawBookShadow(){const a=this.getRect();this.ctx.save(),this.ctx.beginPath();const o=a.width/20;this.ctx.rect(a.left,a.top,a.width,a.height);const m={x:a.left+a.width/2-o/2,y:0};this.ctx.translate(m.x,m.y);const D=this.ctx.createLinearGradient(0,0,o,0);D.addColorStop(0,"rgba(0, 0, 0, 0)"),D.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),D.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),D.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),D.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),D.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=D,this.ctx.fillRect(0,0,o,2*a.height),this.ctx.restore()}drawOuterShadow(){const a=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(a.left,a.top,a.width,a.height);const o=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(o.x,o.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const m=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),m.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),m.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),m.addColorStop(0,"rgba(0, 0, 0, 0)"),m.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=m,this.ctx.fillRect(0,0,this.shadow.width,2*a.height),this.ctx.restore()}drawInnerShadow(){const a=this.getRect();this.ctx.save(),this.ctx.beginPath();const o=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),m=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(m.topLeft.x,m.topLeft.y),this.ctx.lineTo(m.topRight.x,m.topRight.y),this.ctx.lineTo(m.bottomRight.x,m.bottomRight.y),this.ctx.lineTo(m.bottomLeft.x,m.bottomLeft.y),this.ctx.translate(o.x,o.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const D=3*this.shadow.width/4,j=this.ctx.createLinearGradient(0,0,D,0);this.shadow.direction===0?(this.ctx.translate(-D,-100),j.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),j.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),j.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),j.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),j.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),j.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),j.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),j.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=j,this.ctx.fillRect(0,0,D,2*a.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class h{constructor(a,o,m){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=j=>{if(this.checkTarget(j.target)){const N=this.getMousePos(j.clientX,j.clientY);this.app.startUserTouch(N),j.preventDefault()}},this.onTouchStart=j=>{if(this.checkTarget(j.target)&&j.changedTouches.length>0){const N=j.changedTouches[0],Q=this.getMousePos(N.clientX,N.clientY);this.touchPoint={point:Q,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(Q)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||j.preventDefault()}},this.onMouseUp=j=>{const N=this.getMousePos(j.clientX,j.clientY);this.app.userStop(N)},this.onMouseMove=j=>{const N=this.getMousePos(j.clientX,j.clientY);this.app.userMove(N,!1)},this.onTouchMove=j=>{if(j.changedTouches.length>0){const N=j.changedTouches[0],Q=this.getMousePos(N.clientX,N.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-Q.x)>10||this.app.getState()!=="read")&&j.cancelable&&this.app.userMove(Q,!0),this.app.getState()!=="read"&&j.preventDefault()):this.app.userMove(Q,!0)}},this.onTouchEnd=j=>{if(j.changedTouches.length>0){const N=j.changedTouches[0],Q=this.getMousePos(N.clientX,N.clientY);let K=!1;if(this.touchPoint!==null){const fe=Q.x-this.touchPoint.point.x,se=Math.abs(Q.y-this.touchPoint.point.y);Math.abs(fe)>this.swipeDistance&&se<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(fe>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),K=!0),this.touchPoint=null}this.app.userStop(Q,K)}},this.parentElement=a,a.classList.add("stf__parent"),a.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=a.querySelector(".stf__wrapper"),this.app=o;const D=this.app.getSettings().usePortrait?1:2;a.style.minWidth=m.minWidth*D+"px",a.style.minHeight=m.minHeight+"px",m.size==="fixed"&&(a.style.minWidth=m.width*D+"px",a.style.minHeight=m.height+"px"),m.autoSize&&(a.style.width="100%",a.style.maxWidth=2*m.maxWidth+"px"),a.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=m.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(a){this.wrapper.classList.remove("--portrait","--landscape"),a==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(a,o){const m=this.distElement.getBoundingClientRect();return{x:a-m.left,y:o-m.top}}checkTarget(a){return!this.app.getSettings().clickEventForward||!["a","button"].includes(a.tagName.toLowerCase())}}class P extends h{constructor(a,o,m,D){super(a,o,m),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=a.querySelector(".stf__block"),this.items=D;for(const j of D)this.distElement.appendChild(j);this.setHandlers()}clear(){for(const a of this.items)this.parentElement.appendChild(a)}updateItems(a){this.removeHandlers(),this.distElement.innerHTML="";for(const o of a)this.distElement.appendChild(o);this.items=a,this.setHandlers()}update(){this.app.getRender().update()}}class b extends h{constructor(a,o,m){super(a,o,m),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=a.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const a=getComputedStyle(this.canvas),o=parseInt(a.getPropertyValue("width"),10),m=parseInt(a.getPropertyValue("height"),10);this.canvas.width=o,this.canvas.height=m}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class v extends E{constructor(a,o,m){super(a,o),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=m,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const a=this.getRect(),o=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let m=(100-o)*(2.5*a.pageWidth)/100+20;m>a.pageWidth&&(m=a.pageWidth);let D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${m}px;
            height: ${a.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*o/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${a.left+a.width/2}px;
            transform-origin: 0 0;
        `;D+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=D}drawHardOuterShadow(){const a=this.getRect();let o=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*a.pageWidth)/100+20;o>a.pageWidth&&(o=a.pageWidth);let m=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${o}px;
            height: ${a.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${a.left+a.width/2}px;
            transform-origin: 0 0;
        `;m+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=m}drawInnerShadow(){const a=this.getRect(),o=3*this.shadow.width/4,m=this.getDirection()===0?o:0,D=this.getDirection()===0?"to left":"to right",j=this.convertToGlobal(this.shadow.pos),N=this.shadow.angle+3*Math.PI/2,Q=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let K="polygon( ";for(const se of Q){let de=this.getDirection()===1?{x:-se.x+this.shadow.pos.x,y:se.y-this.shadow.pos.y}:{x:se.x-this.shadow.pos.x,y:se.y-this.shadow.pos.y};de=G.GetRotatedPoint(de,{x:m,y:100},N),K+=de.x+"px "+de.y+"px, "}K=K.slice(0,-2),K+=")";const fe=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${o}px;
            height: ${2*a.height}px;
            background: linear-gradient(${D},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${m}px 100px;
            transform: translate3d(${j.x-m}px, ${j.y-100}px, 0) rotate(${N}rad);
            clip-path: ${K};
            -webkit-clip-path: ${K};
        `;this.innerShadow.style.cssText=fe}drawOuterShadow(){const a=this.getRect(),o=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),m=this.shadow.angle+3*Math.PI/2,D=this.getDirection()===1?this.shadow.width:0,j=this.getDirection()===0?"to right":"to left",N=[{x:0,y:0},{x:a.pageWidth,y:0},{x:a.pageWidth,y:a.height},{x:0,y:a.height}];let Q="polygon( ";for(const fe of N)if(fe!==null){let se=this.getDirection()===1?{x:-fe.x+this.shadow.pos.x,y:fe.y-this.shadow.pos.y}:{x:fe.x-this.shadow.pos.x,y:fe.y-this.shadow.pos.y};se=G.GetRotatedPoint(se,{x:D,y:100},m),Q+=se.x+"px "+se.y+"px, "}Q=Q.slice(0,-2),Q+=")";const K=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*a.height}px;
            background: linear-gradient(${j}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${D}px 100px;
            transform: translate3d(${o.x-D}px, ${o.y-100}px, 0) rotate(${m}rad);
            clip-path: ${Q};
            -webkit-clip-path: ${Q};
        `;this.outerShadow.style.cssText=K}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const a=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(a))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const a of this.app.getPageCollection().getPages())a!==this.leftPage&&a!==this.rightPage&&a!==this.flippingPage&&a!==this.bottomPage&&(a.getElement().style.cssText="display: none"),a.getTemporaryCopy()!==this.flippingPage&&a.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class I{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(a){const o=this._default;if(Object.assign(o,a),o.size!=="stretch"&&o.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(o.width<=0||o.height<=0)throw new Error("Invalid width or height");if(o.flippingTime<=0)throw new Error("Invalid flipping time");return o.size==="stretch"?(o.minWidth<=0&&(o.minWidth=100),o.maxWidth<o.minWidth&&(o.maxWidth=2e3),o.minHeight<=0&&(o.minHeight=100),o.maxHeight<o.minHeight&&(o.maxHeight=2e3)):(o.minWidth=o.width,o.maxWidth=o.width,o.minHeight=o.height,o.maxHeight=o.height),o}}(function(L,a){a===void 0&&(a={});var o=a.insertAt;if(typeof document<"u"){var m=document.head||document.getElementsByTagName("head")[0],D=document.createElement("style");D.type="text/css",o==="top"&&m.firstChild?m.insertBefore(D,m.firstChild):m.appendChild(D),D.styleSheet?D.styleSheet.cssText=L:D.appendChild(document.createTextNode(L))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),x.PageFlip=class extends class{constructor(){this.events=new Map}on(L,a){return this.events.has(L)?this.events.get(L).push(a):this.events.set(L,[a]),this}off(L){this.events.delete(L)}trigger(L,a,o=null){if(this.events.has(L))for(const m of this.events.get(L))m({data:o,object:a})}}{constructor(L,a){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new I().getSettings(a),this.block=L}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(L){this.ui=new b(this.block,this,this.setting);const a=this.ui.getCanvas();this.render=new A(this,this.setting,a),this.flipController=new u(this.render,this),this.pages=new O(this,this.render,L),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(L){this.ui=new P(this.block,this,this.setting,L),this.render=new v(this,this.setting,this.ui.getDistElement()),this.flipController=new u(this.render,this),this.pages=new f(this,this.render,this.ui.getDistElement(),L),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(L){const a=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new O(this,this.render,L),this.pages.load(),this.pages.show(a),this.trigger("update",this,{page:a,mode:this.render.getOrientation()})}updateFromHtml(L){const a=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new f(this,this.render,this.ui.getDistElement(),L),this.pages.load(),this.ui.updateItems(L),this.render.reload(),this.pages.show(a),this.trigger("update",this,{page:a,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(L){this.pages.show(L)}flipNext(L="top"){this.flipController.flipNext(L)}flipPrev(L="top"){this.flipController.flipPrev(L)}flip(L,a="top"){this.flipController.flipToPage(L,a)}updateState(L){this.trigger("changeState",this,L)}updatePageIndex(L){this.trigger("flip",this,L)}updateOrientation(L){this.ui.setOrientationStyle(L),this.update(),this.trigger("changeOrientation",this,L)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(L){return this.pages.getPage(L)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(L){this.mousePosition=L,this.isUserTouch=!0,this.isUserMove=!1}userMove(L,a){this.isUserTouch||a||!this.setting.showPageCorners?this.isUserTouch&&G.GetDistanceBetweenTwoPoint(this.mousePosition,L)>5&&(this.isUserMove=!0,this.flipController.fold(L)):this.flipController.showCorner(L)}userStop(L,a=!1){this.isUserTouch&&(this.isUserTouch=!1,a||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(L)))}},Object.defineProperty(x,"__esModule",{value:!0})}))})(pageFlip_browser$1,pageFlip_browser$1.exports)),pageFlip_browser$1.exports}var pageFlip_browserExports=requirePageFlip_browser();const HTMLFlipBookForward=React.forwardRef((C,l)=>{const x=reactExports.useRef(null),d=reactExports.useRef([]),S=reactExports.useRef(),[B,O]=reactExports.useState([]);reactExports.useImperativeHandle(l,()=>({pageFlip:()=>S.current}));const G=reactExports.useCallback(()=>{S.current&&S.current.clear()},[]),W=reactExports.useCallback(()=>{const f=S.current;f&&(f.off("flip"),f.off("changeOrientation"),f.off("changeState"),f.off("init"),f.off("update"))},[]);return reactExports.useEffect(()=>{if(d.current=[],C.children){const f=React.Children.map(C.children,s=>React.cloneElement(s,{ref:u=>{u&&d.current.push(u)}}));(!C.renderOnlyPageLengthChange||B.length!==f.length)&&(f.length<B.length&&G(),O(f))}},[C.children]),reactExports.useEffect(()=>{const f=()=>{const s=S.current;s&&(C.onFlip&&s.on("flip",u=>C.onFlip(u)),C.onChangeOrientation&&s.on("changeOrientation",u=>C.onChangeOrientation(u)),C.onChangeState&&s.on("changeState",u=>C.onChangeState(u)),C.onInit&&s.on("init",u=>C.onInit(u)),C.onUpdate&&s.on("update",u=>C.onUpdate(u)))};B.length>0&&d.current.length>0&&(W(),x.current&&!S.current&&(S.current=new pageFlip_browserExports.PageFlip(x.current,C)),S.current.getFlipController()?S.current.updateFromHtml(d.current):S.current.loadFromHTML(d.current),f())},[B]),React.createElement("div",{ref:x,className:C.className,style:C.style},B)}),HTMLFlipBook=React.memo(HTMLFlipBookForward);function commonjsRequire(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(l,x){module.exports=l.pdfjsLib=x()})(globalThis,()=>(()=>{var __webpack_modules__=[,((C,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.TextRenderingMode=l.RenderingIntentFlag=l.PromiseCapability=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.MAX_IMAGE_SIZE_TO_CACHE=l.LINE_FACTOR=l.LINE_DESCENT_FACTOR=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.BASELINE_FACTOR=l.AnnotationType=l.AnnotationReplyType=l.AnnotationPrefix=l.AnnotationMode=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationEditorType=l.AnnotationEditorPrefix=l.AnnotationEditorParamsType=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.assert=w,l.bytesToString=X,l.createValidAbsoluteUrl=y,l.getModificationDate=Ke,l.getUuid=qt,l.getVerbosityLevel=ye,l.info=ce,l.isArrayBuffer=Ne,l.isArrayEqual=ot,l.isNodeJS=void 0,l.normalizeUnicode=Bt,l.objectFromMap=ie,l.objectSize=_e,l.setVerbosityLevel=de,l.shadow=F,l.string32=ae,l.stringToBytes=J,l.stringToPDFString=Me,l.stringToUTF8String=Le,l.unreachable=T,l.utf8StringToString=Oe,l.warn=V;const x=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");l.isNodeJS=x;const d=[1,0,0,1,0,0];l.IDENTITY_MATRIX=d;const S=[.001,0,0,.001,0,0];l.FONT_IDENTITY_MATRIX=S;const B=1e7;l.MAX_IMAGE_SIZE_TO_CACHE=B;const O=1.35;l.LINE_FACTOR=O;const G=.35;l.LINE_DESCENT_FACTOR=G;const W=G/O;l.BASELINE_FACTOR=W;const f={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};l.RenderingIntentFlag=f;const s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};l.AnnotationMode=s;const u="pdfjs_internal_editor_";l.AnnotationEditorPrefix=u;const E={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};l.AnnotationEditorType=E;const A={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};l.AnnotationEditorParamsType=A;const h={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};l.PermissionFlag=h;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};l.TextRenderingMode=P;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};l.ImageKind=b;const v={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};l.AnnotationType=v;const I={GROUP:"Group",REPLY:"R"};l.AnnotationReplyType=I;const L={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};l.AnnotationFlag=L;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};l.AnnotationFieldFlag=a;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};l.AnnotationBorderStyleType=o;const m={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};l.AnnotationActionEventType=m;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};l.DocumentActionEventType=D;const j={O:"PageOpen",C:"PageClose"};l.PageActionEventType=j;const N={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=N;const Q={NONE:0,BINARY:1};l.CMapCompressionType=Q;const K={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};l.OPS=K;const fe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};l.PasswordResponses=fe;let se=N.WARNINGS;function de(me){Number.isInteger(me)&&(se=me)}function ye(){return se}function ce(me){se>=N.INFOS&&console.log(`Info: ${me}`)}function V(me){se>=N.WARNINGS&&console.log(`Warning: ${me}`)}function T(me){throw new Error(me)}function w(me,re){me||T(re)}function _(me){switch(me?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function y(me,re=null,te=null){if(!me)return null;try{if(te&&typeof me=="string"&&(te.addDefaultProtocol&&me.startsWith("www.")&&me.match(/\./g)?.length>=2&&(me=`http://${me}`),te.tryConvertEncoding))try{me=Le(me)}catch{}const xe=re?new URL(me,re):new URL(me);if(_(xe))return xe}catch{}return null}function F(me,re,te,xe=!1){return Object.defineProperty(me,re,{value:te,enumerable:!xe,configurable:!0,writable:!1}),te}const H=(function(){function re(te,xe){this.constructor===re&&T("Cannot initialize BaseException."),this.message=te,this.name=xe}return re.prototype=new Error,re.constructor=re,re})();l.BaseException=H;class q extends H{constructor(re,te){super(re,"PasswordException"),this.code=te}}l.PasswordException=q;class U extends H{constructor(re,te){super(re,"UnknownErrorException"),this.details=te}}l.UnknownErrorException=U;class g extends H{constructor(re){super(re,"InvalidPDFException")}}l.InvalidPDFException=g;class k extends H{constructor(re){super(re,"MissingPDFException")}}l.MissingPDFException=k;class R extends H{constructor(re,te){super(re,"UnexpectedResponseException"),this.status=te}}l.UnexpectedResponseException=R;class z extends H{constructor(re){super(re,"FormatError")}}l.FormatError=z;class $ extends H{constructor(re){super(re,"AbortException")}}l.AbortException=$;function X(me){(typeof me!="object"||me?.length===void 0)&&T("Invalid argument for bytesToString");const re=me.length,te=8192;if(re<te)return String.fromCharCode.apply(null,me);const xe=[];for(let Be=0;Be<re;Be+=te){const Qe=Math.min(Be+te,re),Je=me.subarray(Be,Qe);xe.push(String.fromCharCode.apply(null,Je))}return xe.join("")}function J(me){typeof me!="string"&&T("Invalid argument for stringToBytes");const re=me.length,te=new Uint8Array(re);for(let xe=0;xe<re;++xe)te[xe]=me.charCodeAt(xe)&255;return te}function ae(me){return String.fromCharCode(me>>24&255,me>>16&255,me>>8&255,me&255)}function _e(me){return Object.keys(me).length}function ie(me){const re=Object.create(null);for(const[te,xe]of me)re[te]=xe;return re}function le(){const me=new Uint8Array(4);return me[0]=1,new Uint32Array(me.buffer,0,1)[0]===1}function ue(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return F(this,"isLittleEndian",le())}static get isEvalSupported(){return F(this,"isEvalSupported",ue())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?F(this,"platform",{isWin:!1,isMac:!1}):F(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return F(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}l.FeatureTest=pe;const ge=[...Array(256).keys()].map(me=>me.toString(16).padStart(2,"0"));class Ee{static makeHexColor(re,te,xe){return`#${ge[re]}${ge[te]}${ge[xe]}`}static scaleMinMax(re,te){let xe;re[0]?(re[0]<0&&(xe=te[0],te[0]=te[1],te[1]=xe),te[0]*=re[0],te[1]*=re[0],re[3]<0&&(xe=te[2],te[2]=te[3],te[3]=xe),te[2]*=re[3],te[3]*=re[3]):(xe=te[0],te[0]=te[2],te[2]=xe,xe=te[1],te[1]=te[3],te[3]=xe,re[1]<0&&(xe=te[2],te[2]=te[3],te[3]=xe),te[2]*=re[1],te[3]*=re[1],re[2]<0&&(xe=te[0],te[0]=te[1],te[1]=xe),te[0]*=re[2],te[1]*=re[2]),te[0]+=re[4],te[1]+=re[4],te[2]+=re[5],te[3]+=re[5]}static transform(re,te){return[re[0]*te[0]+re[2]*te[1],re[1]*te[0]+re[3]*te[1],re[0]*te[2]+re[2]*te[3],re[1]*te[2]+re[3]*te[3],re[0]*te[4]+re[2]*te[5]+re[4],re[1]*te[4]+re[3]*te[5]+re[5]]}static applyTransform(re,te){const xe=re[0]*te[0]+re[1]*te[2]+te[4],Be=re[0]*te[1]+re[1]*te[3]+te[5];return[xe,Be]}static applyInverseTransform(re,te){const xe=te[0]*te[3]-te[1]*te[2],Be=(re[0]*te[3]-re[1]*te[2]+te[2]*te[5]-te[4]*te[3])/xe,Qe=(-re[0]*te[1]+re[1]*te[0]+te[4]*te[1]-te[5]*te[0])/xe;return[Be,Qe]}static getAxialAlignedBoundingBox(re,te){const xe=this.applyTransform(re,te),Be=this.applyTransform(re.slice(2,4),te),Qe=this.applyTransform([re[0],re[3]],te),Je=this.applyTransform([re[2],re[1]],te);return[Math.min(xe[0],Be[0],Qe[0],Je[0]),Math.min(xe[1],Be[1],Qe[1],Je[1]),Math.max(xe[0],Be[0],Qe[0],Je[0]),Math.max(xe[1],Be[1],Qe[1],Je[1])]}static inverseTransform(re){const te=re[0]*re[3]-re[1]*re[2];return[re[3]/te,-re[1]/te,-re[2]/te,re[0]/te,(re[2]*re[5]-re[4]*re[3])/te,(re[4]*re[1]-re[5]*re[0])/te]}static singularValueDecompose2dScale(re){const te=[re[0],re[2],re[1],re[3]],xe=re[0]*te[0]+re[1]*te[2],Be=re[0]*te[1]+re[1]*te[3],Qe=re[2]*te[0]+re[3]*te[2],Je=re[2]*te[1]+re[3]*te[3],bt=(xe+Je)/2,Tt=Math.sqrt((xe+Je)**2-4*(xe*Je-Qe*Be))/2,Xt=bt+Tt||1,ht=bt-Tt||1;return[Math.sqrt(Xt),Math.sqrt(ht)]}static normalizeRect(re){const te=re.slice(0);return re[0]>re[2]&&(te[0]=re[2],te[2]=re[0]),re[1]>re[3]&&(te[1]=re[3],te[3]=re[1]),te}static intersect(re,te){const xe=Math.max(Math.min(re[0],re[2]),Math.min(te[0],te[2])),Be=Math.min(Math.max(re[0],re[2]),Math.max(te[0],te[2]));if(xe>Be)return null;const Qe=Math.max(Math.min(re[1],re[3]),Math.min(te[1],te[3])),Je=Math.min(Math.max(re[1],re[3]),Math.max(te[1],te[3]));return Qe>Je?null:[xe,Qe,Be,Je]}static bezierBoundingBox(re,te,xe,Be,Qe,Je,bt,Tt){const Xt=[],ht=[[],[]];let nn,jt,Ln,Xe,In,Yt,On,rn;for(let pn=0;pn<2;++pn){if(pn===0?(jt=6*re-12*xe+6*Qe,nn=-3*re+9*xe-9*Qe+3*bt,Ln=3*xe-3*re):(jt=6*te-12*Be+6*Je,nn=-3*te+9*Be-9*Je+3*Tt,Ln=3*Be-3*te),Math.abs(nn)<1e-12){if(Math.abs(jt)<1e-12)continue;Xe=-Ln/jt,0<Xe&&Xe<1&&Xt.push(Xe);continue}On=jt*jt-4*Ln*nn,rn=Math.sqrt(On),!(On<0)&&(In=(-jt+rn)/(2*nn),0<In&&In<1&&Xt.push(In),Yt=(-jt-rn)/(2*nn),0<Yt&&Yt<1&&Xt.push(Yt))}let Nn=Xt.length,rt;const Kt=Nn;for(;Nn--;)Xe=Xt[Nn],rt=1-Xe,ht[0][Nn]=rt*rt*rt*re+3*rt*rt*Xe*xe+3*rt*Xe*Xe*Qe+Xe*Xe*Xe*bt,ht[1][Nn]=rt*rt*rt*te+3*rt*rt*Xe*Be+3*rt*Xe*Xe*Je+Xe*Xe*Xe*Tt;return ht[0][Kt]=re,ht[1][Kt]=te,ht[0][Kt+1]=bt,ht[1][Kt+1]=Tt,ht[0].length=ht[1].length=Kt+2,[Math.min(...ht[0]),Math.min(...ht[1]),Math.max(...ht[0]),Math.max(...ht[1])]}}l.Util=Ee;const be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Me(me){if(me[0]>=""){let te;if(me[0]===""&&me[1]===""?te="utf-16be":me[0]===""&&me[1]===""?te="utf-16le":me[0]===""&&me[1]===""&&me[2]===""&&(te="utf-8"),te)try{const xe=new TextDecoder(te,{fatal:!0}),Be=J(me);return xe.decode(Be)}catch(xe){V(`stringToPDFString: "${xe}".`)}}const re=[];for(let te=0,xe=me.length;te<xe;te++){const Be=be[me.charCodeAt(te)];re.push(Be?String.fromCharCode(Be):me.charAt(te))}return re.join("")}function Le(me){return decodeURIComponent(escape(me))}function Oe(me){return unescape(encodeURIComponent(me))}function Ne(me){return typeof me=="object"&&me?.byteLength!==void 0}function ot(me,re){if(me.length!==re.length)return!1;for(let te=0,xe=me.length;te<xe;te++)if(me[te]!==re[te])return!1;return!0}function Ke(me=new Date){return[me.getUTCFullYear().toString(),(me.getUTCMonth()+1).toString().padStart(2,"0"),me.getUTCDate().toString().padStart(2,"0"),me.getUTCHours().toString().padStart(2,"0"),me.getUTCMinutes().toString().padStart(2,"0"),me.getUTCSeconds().toString().padStart(2,"0")].join("")}class Pt{#e=!1;constructor(){this.promise=new Promise((re,te)=>{this.resolve=xe=>{this.#e=!0,re(xe)},this.reject=xe=>{this.#e=!0,te(xe)}})}get settled(){return this.#e}}l.PromiseCapability=Pt;let tt=null,ut=null;function Bt(me){return tt||(tt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ut=new Map([["","t"]])),me.replaceAll(tt,(re,te,xe)=>te?te.normalize("NFKC"):ut.get(xe))}function qt(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const me=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(me);else for(let re=0;re<32;re++)me[re]=Math.floor(Math.random()*255);return X(me)}const fn="pdfjs_internal_id_";l.AnnotationPrefix=fn}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(C){if(typeof C=="string"||C instanceof URL?C={url:C}:(0,_util.isArrayBuffer)(C)&&(C={data:C}),typeof C!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!C.url&&!C.data&&!C.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:x}=l,d=C.url?getUrlProp(C.url):null,S=C.data?getDataProp(C.data):null,B=C.httpHeaders||null,O=C.withCredentials===!0,G=C.password??null,W=C.range instanceof PDFDataRangeTransport?C.range:null,f=Number.isInteger(C.rangeChunkSize)&&C.rangeChunkSize>0?C.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let s=C.worker instanceof PDFWorker?C.worker:null;const u=C.verbosity,E=typeof C.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(C.docBaseUrl)?C.docBaseUrl:null,A=typeof C.cMapUrl=="string"?C.cMapUrl:null,h=C.cMapPacked!==!1,P=C.CMapReaderFactory||DefaultCMapReaderFactory,b=typeof C.standardFontDataUrl=="string"?C.standardFontDataUrl:null,v=C.StandardFontDataFactory||DefaultStandardFontDataFactory,I=C.stopAtErrors!==!0,L=Number.isInteger(C.maxImageSize)&&C.maxImageSize>-1?C.maxImageSize:-1,a=C.isEvalSupported!==!1,o=typeof C.isOffscreenCanvasSupported=="boolean"?C.isOffscreenCanvasSupported:!_util.isNodeJS,m=Number.isInteger(C.canvasMaxAreaInBytes)?C.canvasMaxAreaInBytes:-1,D=typeof C.disableFontFace=="boolean"?C.disableFontFace:_util.isNodeJS,j=C.fontExtraProperties===!0,N=C.enableXfa===!0,Q=C.ownerDocument||globalThis.document,K=C.disableRange===!0,fe=C.disableStream===!0,se=C.disableAutoFetch===!0,de=C.pdfBug===!0,ye=W?W.length:C.length??NaN,ce=typeof C.useSystemFonts=="boolean"?C.useSystemFonts:!_util.isNodeJS&&!D,V=typeof C.useWorkerFetch=="boolean"?C.useWorkerFetch:P===_display_utils.DOMCMapReaderFactory&&v===_display_utils.DOMStandardFontDataFactory&&A&&b&&(0,_display_utils.isValidFetchUrl)(A,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI),T=C.canvasFactory||new DefaultCanvasFactory({ownerDocument:Q}),w=C.filterFactory||new DefaultFilterFactory({docId:x,ownerDocument:Q}),_=null;(0,_util.setVerbosityLevel)(u);const y={canvasFactory:T,filterFactory:w};if(V||(y.cMapReaderFactory=new P({baseUrl:A,isCompressed:h}),y.standardFontDataFactory=new v({baseUrl:b})),!s){const q={verbosity:u,port:_worker_options.GlobalWorkerOptions.workerPort};s=q.port?PDFWorker.fromPort(q):new PDFWorker(q),l._worker=s}const F={docId:x,apiVersion:"3.11.174",data:S,password:G,disableAutoFetch:se,rangeChunkSize:f,length:ye,docBaseUrl:E,enableXfa:N,evaluatorOptions:{maxImageSize:L,disableFontFace:D,ignoreErrors:I,isEvalSupported:a,isOffscreenCanvasSupported:o,canvasMaxAreaInBytes:m,fontExtraProperties:j,useSystemFonts:ce,cMapUrl:V?A:null,standardFontDataUrl:V?b:null}},H={ignoreErrors:I,isEvalSupported:a,disableFontFace:D,fontExtraProperties:j,enableXfa:N,ownerDocument:Q,disableAutoFetch:se,pdfBug:de,styleElement:_};return s.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const q=_fetchDocument(s,F),U=new Promise(function(g){let k;W?k=new _transport_stream.PDFDataTransportStream({length:ye,initialData:W.initialData,progressiveDone:W.progressiveDone,contentDispositionFilename:W.contentDispositionFilename,disableRange:K,disableStream:fe},W):S||(k=(z=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(z):(0,_display_utils.isValidFetchUrl)(z.url)?new _displayFetch_stream.PDFFetchStream(z):new _displayNetwork.PDFNetworkStream(z))({url:d,length:ye,httpHeaders:B,withCredentials:O,rangeChunkSize:f,disableRange:K,disableStream:fe})),g(k)});return Promise.all([q,U]).then(function([g,k]){if(l.destroyed)throw new Error("Loading aborted");const R=new _message_handler.MessageHandler(x,g,s.port),z=new WorkerTransport(R,l,k,H,y);l._transport=z,R.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(C,l){if(C.destroyed)throw new Error("Worker was destroyed");const x=await C.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(C.destroyed)throw new Error("Worker was destroyed");return x}function getUrlProp(C){if(C instanceof URL)return C.href;try{return new URL(C,window.location).href}catch{if(_util.isNodeJS&&typeof C=="string")return C}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(C){if(_util.isNodeJS&&typeof Buffer<"u"&&C instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength)return C;if(typeof C=="string")return(0,_util.stringToBytes)(C);if(typeof C=="object"&&!isNaN(C?.length)||(0,_util.isArrayBuffer)(C))return new Uint8Array(C);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(l){throw this._worker?.port&&delete this._worker._pendingDestroy,l}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,x,d=!1,S=null){this.length=l,this.initialData=x,this.progressiveDone=d,this.contentDispositionFilename=S,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,x){for(const d of this._rangeListeners)d(l,x)}onDataProgress(l,x){this._readyCapability.promise.then(()=>{for(const d of this._progressListeners)d(l,x)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,x){this._pdfInfo=l,this._transport=x,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(d=>{if(!d)return d;const S=[];for(const B in d)S.push(...d[B]);return S}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(l,x,d,S=!1){this._pageIndex=l,this._pageInfo=x,this._transport=d,this._stats=S?new _display_utils.StatTimer:null,this._pdfBug=S,this.commonObjs=d.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:x=this.rotate,offsetX:d=0,offsetY:S=0,dontFlip:B=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:x,offsetX:d,offsetY:S,dontFlip:B})}getAnnotations({intent:l="display"}={}){const x=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,x.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:l,viewport:x,intent:d="display",annotationMode:S=_util.AnnotationMode.ENABLE,transform:B=null,background:O=null,optionalContentConfigPromise:G=null,annotationCanvasMap:W=null,pageColors:f=null,printAnnotationStorage:s=null}){this._stats?.time("Overall");const u=this._transport.getRenderingIntent(d,S,s);this.#t=!1,this.#r(),G||(G=this._transport.getOptionalContentConfig());let E=this._intentStates.get(u.cacheKey);E||(E=Object.create(null),this._intentStates.set(u.cacheKey,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const A=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);E.displayReadyCapability||(E.displayReadyCapability=new _util.PromiseCapability,E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const h=v=>{E.renderTasks.delete(P),(this._maybeCleanupAfterRender||A)&&(this.#t=!0),this.#n(!A),v?(P.capability.reject(v),this._abortOperatorList({intentState:E,reason:v instanceof Error?v:new Error(v)})):P.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},P=new InternalRenderTask({callback:h,params:{canvasContext:l,viewport:x,transform:B,background:O},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:W,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:f});(E.renderTasks||=new Set).add(P);const b=P.task;return Promise.all([E.displayReadyCapability.promise,G]).then(([v,I])=>{if(this.destroyed){h();return}this._stats?.time("Rendering"),P.initializeGraphics({transparency:v,optionalContentConfig:I}),P.operatorListChanged()}).catch(h),b}getOperatorList({intent:l="display",annotationMode:x=_util.AnnotationMode.ENABLE,printAnnotationStorage:d=null}={}){function S(){O.operatorList.lastChunk&&(O.opListReadCapability.resolve(O.operatorList),O.renderTasks.delete(G))}const B=this._transport.getRenderingIntent(l,x,d,!0);let O=this._intentStates.get(B.cacheKey);O||(O=Object.create(null),this._intentStates.set(B.cacheKey,O));let G;return O.opListReadCapability||(G=Object.create(null),G.operatorListChanged=S,O.opListReadCapability=new _util.PromiseCapability,(O.renderTasks||=new Set).add(G),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(B)),O.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:x=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:x===!0},{highWaterMark:100,size(S){return S.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(d=>_xfa_text.XfaText.textContent(d));const x=this.streamTextContent(l);return new Promise(function(d,S){function B(){O.read().then(function({value:W,done:f}){if(f){d(G);return}Object.assign(G.styles,W.styles),G.items.push(...W.items),B()},S)}const O=x.getReader(),G={items:[],styles:Object.create(null)};B()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const d of x.renderTasks)l.push(d.completed),d.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(l)}cleanup(l=!1){this.#t=!0;const x=this.#n(!1);return l&&x&&(this._stats&&=new _display_utils.StatTimer),x}#n(l=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(l)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:x,operatorList:d}of this._intentStates.values())if(x.size>0||!d.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(l,x){const d=this._intentStates.get(x);d&&(this._stats?.timeEnd("Page Request"),d.displayReadyCapability?.resolve(l))}_renderPageChunk(l,x){for(let d=0,S=l.length;d<S;d++)x.operatorList.fnArray.push(l.fnArray[d]),x.operatorList.argsArray.push(l.argsArray[d]);x.operatorList.lastChunk=l.lastChunk,x.operatorList.separateAnnots=l.separateAnnots;for(const d of x.renderTasks)d.operatorListChanged();l.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:l,cacheKey:x,annotationStorageSerializable:d}){const{map:S,transfers:B}=d,G=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:x,annotationStorage:S},B).getReader(),W=this._intentStates.get(x);W.streamReader=G;const f=()=>{G.read().then(({value:s,done:u})=>{if(u){W.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(s,W),f())},s=>{if(W.streamReader=null,!this._transport.destroyed){if(W.operatorList){W.operatorList.lastChunk=!0;for(const u of W.renderTasks)u.operatorListChanged();this.#n(!0)}if(W.displayReadyCapability)W.displayReadyCapability.reject(s);else if(W.opListReadCapability)W.opListReadCapability.reject(s);else throw s}})};f()}_abortOperatorList({intentState:l,reason:x,force:d=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!d){if(l.renderTasks.size>0)return;if(x instanceof _display_utils.RenderingCancelledException){let S=RENDERING_CANCELLED_TIMEOUT;x.extraDelay>0&&x.extraDelay<1e3&&(S+=x.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:x,force:!0})},S);return}}if(l.streamReader.cancel(new _util.AbortException(x.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[S,B]of this._intentStates)if(B===l){this._intentStates.delete(S);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(l,x){const d={data:structuredClone(l,x?{transfer:x}:null)};this.#t.then(()=>{for(const S of this.#e)S.call(this,d)})}addEventListener(l,x){this.#e.add(x)}removeEventListener(l,x){this.#e.delete(x)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const C=document?.currentScript?.src;C&&(PDFWorkerUtil.fallbackWorkerSrc=C.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(C,l){let x;try{if(x=new URL(C),!x.origin||x.origin==="null")return!1}catch{return!1}const d=new URL(l,x);return x.origin===d.origin},PDFWorkerUtil.createCDNWrapper=function(C){const l=`importScripts("${C}");`;return URL.createObjectURL(new Blob([l]))}}class PDFWorker{static#workerPorts;constructor({name:C=null,port:l=null,verbosity:x=(0,_util.getVerbosityLevel)()}={}){if(this.name=C,this.destroyed=!1,this.verbosity=x,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if(PDFWorker.#workerPorts?.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(C){this._port=C,this._messageHandler=new _message_handler.MessageHandler("main","worker",C),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:C}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,C)||(C=PDFWorkerUtil.createCDNWrapper(new URL(C,window.location).href));const l=new Worker(C),x=new _message_handler.MessageHandler("main","worker",l),d=()=>{l.removeEventListener("error",S),x.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},S=()=>{this._webWorker||d()};l.addEventListener("error",S),x.on("test",O=>{if(l.removeEventListener("error",S),this.destroyed){d();return}O?(this._messageHandler=x,this._port=l,this._webWorker=l,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),l.terminate())}),x.on("ready",O=>{if(l.removeEventListener("error",S),this.destroyed){d();return}try{B()}catch{this._setupFakeWorker()}});const B=()=>{const O=new Uint8Array;x.send("test",O,[O.buffer])};B();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(C=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const x=`fake${PDFWorkerUtil.fakeWorkerId++}`,d=new _message_handler.MessageHandler(x+"_worker",x,l);C.setup(d,l);const S=new _message_handler.MessageHandler(x,x+"_worker",l);this._messageHandler=S,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})}).catch(C=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${C.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(C){if(!C?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const l=this.#workerPorts?.get(C.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new PDFWorker(C)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(l,x,d,S,B){this.messageHandler=l,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:S.ownerDocument,styleElement:S.styleElement}),this._params=S,this.canvasFactory=B.canvasFactory,this.filterFactory=B.filterFactory,this.cMapReaderFactory=B.cMapReaderFactory,this.standardFontDataFactory=B.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=d,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(l,x=null){const d=this.#e.get(l);if(d)return d;const S=this.messageHandler.sendWithPromise(l,x);return this.#e.set(l,S),S}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,x=_util.AnnotationMode.ENABLE,d=null,S=!1){let B=_util.RenderingIntentFlag.DISPLAY,O=_annotation_storage.SerializableEmpty;switch(l){case"any":B=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":B=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(x){case _util.AnnotationMode.DISABLE:B+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:B+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:B+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,O=(B&_util.RenderingIntentFlag.PRINT&&d instanceof _annotation_storage.PrintAnnotationStorage?d:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return S&&(B+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:B,cacheKey:`${B}_${O.hash}`,annotationStorageSerializable:O}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const d of this.#t.values())l.push(d._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return l.push(x),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:x}=this;l.on("GetReader",(d,S)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=B=>{this._lastProgress={loaded:B.loaded,total:B.total}},S.onPull=()=>{this._fullReader.read().then(function({value:B,done:O}){if(O){S.close();return}(0,_util.assert)(B instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(B),1,[B])}).catch(B=>{S.error(B)})},S.onCancel=B=>{this._fullReader.cancel(B),S.ready.catch(O=>{if(!this.destroyed)throw O})}}),l.on("ReaderHeadersReady",d=>{const S=new _util.PromiseCapability,B=this._fullReader;return B.headersReady.then(()=>{(!B.isStreamingSupported||!B.isRangeSupported)&&(this._lastProgress&&x.onProgress?.(this._lastProgress),B.onProgress=O=>{x.onProgress?.({loaded:O.loaded,total:O.total})}),S.resolve({isStreamingSupported:B.isStreamingSupported,isRangeSupported:B.isRangeSupported,contentLength:B.contentLength})},S.reject),S.promise}),l.on("GetRangeReader",(d,S)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const B=this._networkStream.getRangeReader(d.begin,d.end);if(!B){S.close();return}S.onPull=()=>{B.read().then(function({value:O,done:G}){if(G){S.close();return}(0,_util.assert)(O instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),S.enqueue(new Uint8Array(O),1,[O])}).catch(O=>{S.error(O)})},S.onCancel=O=>{B.cancel(O),S.ready.catch(G=>{if(!this.destroyed)throw G})}}),l.on("GetDoc",({pdfInfo:d})=>{this._numPages=d.numPages,this._htmlForXfa=d.htmlForXfa,delete d.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(d,this))}),l.on("DocException",function(d){let S;switch(d.name){case"PasswordException":S=new _util.PasswordException(d.message,d.code);break;case"InvalidPDFException":S=new _util.InvalidPDFException(d.message);break;case"MissingPDFException":S=new _util.MissingPDFException(d.message);break;case"UnexpectedResponseException":S=new _util.UnexpectedResponseException(d.message,d.status);break;case"UnknownErrorException":S=new _util.UnknownErrorException(d.message,d.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(S)}),l.on("PasswordRequest",d=>{if(this.#r=new _util.PromiseCapability,x.onPassword){const S=B=>{B instanceof Error?this.#r.reject(B):this.#r.resolve({password:B})};try{x.onPassword(S,d.code)}catch(B){this.#r.reject(B)}}else this.#r.reject(new _util.PasswordException(d.message,d.code));return this.#r.promise}),l.on("DataLoaded",d=>{x.onProgress?.({loaded:d.length,total:d.length}),this.downloadInfoCapability.resolve(d)}),l.on("StartRenderPage",d=>{if(this.destroyed)return;this.#t.get(d.pageIndex)._startRenderPage(d.transparency,d.cacheKey)}),l.on("commonobj",([d,S,B])=>{if(!this.destroyed&&!this.commonObjs.has(d))switch(S){case"Font":const O=this._params;if("error"in B){const f=B.error;(0,_util.warn)(`Error during font loading: ${f}`),this.commonObjs.resolve(d,f);break}const G=O.pdfBug&&globalThis.FontInspector?.enabled?(f,s)=>globalThis.FontInspector.fontAdded(f,s):null,W=new _font_loader.FontFaceObject(B,{isEvalSupported:O.isEvalSupported,disableFontFace:O.disableFontFace,ignoreErrors:O.ignoreErrors,inspectFont:G});this.fontLoader.bind(W).catch(f=>l.sendWithPromise("FontFallback",{id:d})).finally(()=>{!O.fontExtraProperties&&W.data&&(W.data=null),this.commonObjs.resolve(d,W)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(d,B);break;default:throw new Error(`Got unknown common object type ${S}`)}}),l.on("obj",([d,S,B,O])=>{if(this.destroyed)return;const G=this.#t.get(S);if(!G.objs.has(d))switch(B){case"Image":if(G.objs.resolve(d,O),O){let W;if(O.bitmap){const{width:f,height:s}=O;W=f*s*4}else W=O.data?.length||0;W>_util.MAX_IMAGE_SIZE_TO_CACHE&&(G._maybeCleanupAfterRender=!0)}break;case"Pattern":G.objs.resolve(d,O);break;default:throw new Error(`Got unknown object type ${B}`)}}),l.on("DocProgress",d=>{this.destroyed||x.onProgress?.({loaded:d.loaded,total:d.total})}),l.on("FetchBuiltInCMap",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(d):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",d=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(d):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:x}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:this._fullReader?.filename??null},x).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=l-1,d=this.#n.get(x);if(d)return d;const S=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(B=>{if(this.destroyed)throw new Error("Transport destroyed");const O=new PDFPageProxy(x,B,this,this._params.pdfBug);return this.#t.set(x,O),O});return this.#n.set(x,S),S}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:x})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",x=this.#e.get(l);if(x)return x;const d=this.messageHandler.sendWithPromise(l,null).then(S=>({info:S[0],metadata:S[1]?new _metadata.Metadata(S[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(l,d),d}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const x of this.#t.values())if(!x.cleanup())throw new Error(`startCleanup: Page ${x.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:x}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:x})}}class PDFObjects{#e=Object.create(null);#t(l){return this.#e[l]||={capability:new _util.PromiseCapability,data:null}}get(l,x=null){if(x){const S=this.#t(l);return S.capability.promise.then(()=>x(S.data)),null}const d=this.#e[l];if(!d?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${l}.`);return d.data}has(l){return this.#e[l]?.capability.settled||!1}resolve(l,x=null){const d=this.#t(l);d.data=x,d.capability.resolve()}clear(){for(const l in this.#e){const{data:x}=this.#e[l];x?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(l){this.#e=l,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(l=0){this.#e.cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=this.#e.operatorList;if(!l)return!1;const{annotationCanvasMap:x}=this.#e;return l.form||l.canvas&&x?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:l,params:x,objs:d,commonObjs:S,annotationCanvasMap:B,operatorList:O,pageIndex:G,canvasFactory:W,filterFactory:f,useRequestAnimationFrame:s=!1,pdfBug:u=!1,pageColors:E=null}){this.callback=l,this.params=x,this.objs=d,this.commonObjs=S,this.annotationCanvasMap=B,this.operatorListIdx=null,this.operatorList=O,this._pageIndex=G,this.canvasFactory=W,this.filterFactory=f,this._pdfBug=u,this.pageColors=E,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=s===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=x.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:x}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:d,viewport:S,transform:B,background:O}=this.params;this.gfx=new _canvas.CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:x},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:B,viewport:S,transparency:l,background:O}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(l=null,x=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,x))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SerializableEmpty=l.PrintAnnotationStorage=l.AnnotationStorage=void 0;var d=x(1),S=x(4),B=x(8);const O=Object.freeze({map:null,hash:"",transfers:void 0});l.SerializableEmpty=O;class G{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(s,u){const E=this.#t.get(s);return E===void 0?u:Object.assign(u,E)}getRawValue(s){return this.#t.get(s)}remove(s){if(this.#t.delete(s),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of this.#t.values())if(u instanceof S.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(s,u){const E=this.#t.get(s);let A=!1;if(E!==void 0)for(const[h,P]of Object.entries(u))E[h]!==P&&(A=!0,E[h]=P);else A=!0,this.#t.set(s,u);A&&this.#n(),u instanceof S.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(s){return this.#t.has(s)}getAll(){return this.#t.size>0?(0,d.objectFromMap)(this.#t):null}setAll(s){for(const[u,E]of Object.entries(s))this.setValue(u,E)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W(this)}get serializable(){if(this.#t.size===0)return O;const s=new Map,u=new B.MurmurHash3_64,E=[],A=Object.create(null);let h=!1;for(const[P,b]of this.#t){const v=b instanceof S.AnnotationEditor?b.serialize(!1,A):b;v&&(s.set(P,v),u.update(`${P}:${JSON.stringify(v)}`),h||=!!v.bitmap)}if(h)for(const P of s.values())P.bitmap&&E.push(P.bitmap);return s.size>0?{map:s,hash:u.hexdigest(),transfers:E}:O}}l.AnnotationStorage=G;class W extends G{#e;constructor(s){super();const{map:u,hash:E,transfers:A}=s.serializable,h=structuredClone(u,A?{transfer:A}:null);this.#e={map:h,hash:E,transfers:A}}get print(){(0,d.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}l.PrintAnnotationStorage=W}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditor=void 0;var d=x(5),S=x(1),B=x(6);class O{#e="";#t=!1;#n=null;#r=null;#a=null;#o=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#h=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#d=!1;#p=O._zIndex++;static _borderLineWidth=-1;static _colorManager=new d.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(f){this.constructor===O&&(0,S.unreachable)("Cannot initialize AnnotationEditor."),this.parent=f.parent,this.id=f.id,this.width=this.height=null,this.pageIndex=f.parent.pageIndex,this.name=f.name,this.div=null,this._uiManager=f.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=f.isCentered,this._structTreeParentId=null;const{rotation:s,rawDims:{pageWidth:u,pageHeight:E,pageX:A,pageY:h}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,E],this.pageTranslation=[A,h];const[P,b]=this.parentDimensions;this.x=f.x/P,this.y=f.y/b,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,S.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(f){const s=new G({id:f.parent.getNextId(),parent:f.parent,uiManager:f._uiManager});s.annotationElementId=f.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(f,s=null){if(O._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(E=>[E,f.get(E)])),s?.strings)for(const E of s.strings)O._l10nPromise.set(E,f.get(E));if(O._borderLineWidth!==-1)return;const u=getComputedStyle(document.documentElement);O._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}static updateDefaultParams(f,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(f){return!1}static paste(f,s){(0,S.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#d}set _isDraggable(f){this.#d=f,this.div?.classList.toggle("draggable",f)}center(){const[f,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(f*2),this.y+=this.width*f/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(f*2),this.y-=this.width*f/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(f){this._uiManager.addCommands(f)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(f){f!==null&&(this.pageIndex=f.pageIndex,this.pageDimensions=f.pageDimensions),this.parent=f}focusin(f){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(f){!this._focusEventsAllowed||!this.isAttachedToDOM||f.relatedTarget?.closest(`#${this.id}`)||(f.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(f,s,u,E){const[A,h]=this.parentDimensions;[u,E]=this.screenToPageTranslation(u,E),this.x=(f+u)/A,this.y=(s+E)/h,this.fixAndSetPosition()}#y([f,s],u,E){[u,E]=this.screenToPageTranslation(u,E),this.x+=u/f,this.y+=E/s,this.fixAndSetPosition()}translate(f,s){this.#y(this.parentDimensions,f,s)}translateInPage(f,s){this.#y(this.pageDimensions,f,s),this.div.scrollIntoView({block:"nearest"})}drag(f,s){const[u,E]=this.parentDimensions;if(this.x+=f/u,this.y+=s/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:I}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,I)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:A,y:h}=this;const[P,b]=this.#m();A+=P,h+=b,this.div.style.left=`${(100*A).toFixed(2)}%`,this.div.style.top=`${(100*h).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[f,s]=this.parentDimensions,{_borderLineWidth:u}=O,E=u/f,A=u/s;switch(this.rotation){case 90:return[-E,A];case 180:return[E,A];case 270:return[E,-A];default:return[-E,-A]}}fixAndSetPosition(){const[f,s]=this.pageDimensions;let{x:u,y:E,width:A,height:h}=this;switch(A*=f,h*=s,u*=f,E*=s,this.rotation){case 0:u=Math.max(0,Math.min(f-A,u)),E=Math.max(0,Math.min(s-h,E));break;case 90:u=Math.max(0,Math.min(f-h,u)),E=Math.min(s,Math.max(A,E));break;case 180:u=Math.min(f,Math.max(A,u)),E=Math.min(s,Math.max(h,E));break;case 270:u=Math.min(f,Math.max(h,u)),E=Math.max(0,Math.min(s-A,E));break}this.x=u/=f,this.y=E/=s;const[P,b]=this.#m();u+=P,E+=b;const{style:v}=this.div;v.left=`${(100*u).toFixed(2)}%`,v.top=`${(100*E).toFixed(2)}%`,this.moveInDOM()}static#g(f,s,u){switch(u){case 90:return[s,-f];case 180:return[-f,-s];case 270:return[-s,f];default:return[f,s]}}screenToPageTranslation(f,s){return O.#g(f,s,this.parentRotation)}pageTranslationToScreen(f,s){return O.#g(f,s,360-this.parentRotation)}#u(f){switch(f){case 90:{const[s,u]=this.pageDimensions;return[0,-s/u,u/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,u]=this.pageDimensions;return[0,s/u,-u/s,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:f,pageDimensions:[s,u]}=this,E=s*f,A=u*f;return S.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(A)]:[E,A]}setDims(f,s){const[u,E]=this.parentDimensions;this.div.style.width=`${(100*f/u).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*s/E).toFixed(2)}%`),this.#n?.classList.toggle("small",f<O.SMALL_EDITOR_SIZE||s<O.SMALL_EDITOR_SIZE)}fixDims(){const{style:f}=this.div,{height:s,width:u}=f,E=u.endsWith("%"),A=!this.#o&&s.endsWith("%");if(E&&A)return;const[h,P]=this.parentDimensions;E||(f.width=`${(100*parseFloat(u)/h).toFixed(2)}%`),!this.#o&&!A&&(f.height=`${(100*parseFloat(s)/P).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const f=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||f.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const s of f){const u=document.createElement("div");this.#s.append(u),u.classList.add("resizer",s),u.addEventListener("pointerdown",this.#E.bind(this,s)),u.addEventListener("contextmenu",B.noContextMenu)}this.div.prepend(this.#s)}#E(f,s){s.preventDefault();const{isMac:u}=S.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&u)return;const E=this.#A.bind(this,f),A=this._isDraggable;this._isDraggable=!1;const h={passive:!0,capture:!0};window.addEventListener("pointermove",E,h);const P=this.x,b=this.y,v=this.width,I=this.height,L=this.parent.div.style.cursor,a=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const o=()=>{this._isDraggable=A,window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),window.removeEventListener("pointermove",E,h),this.parent.div.style.cursor=L,this.div.style.cursor=a;const m=this.x,D=this.y,j=this.width,N=this.height;m===P&&D===b&&j===v&&N===I||this.addCommands({cmd:()=>{this.width=j,this.height=N,this.x=m,this.y=D;const[Q,K]=this.parentDimensions;this.setDims(Q*j,K*N),this.fixAndSetPosition()},undo:()=>{this.width=v,this.height=I,this.x=P,this.y=b;const[Q,K]=this.parentDimensions;this.setDims(Q*v,K*I),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",o),window.addEventListener("blur",o)}#A(f,s){const[u,E]=this.parentDimensions,A=this.x,h=this.y,P=this.width,b=this.height,v=O.MIN_SIZE/u,I=O.MIN_SIZE/E,L=U=>Math.round(U*1e4)/1e4,a=this.#u(this.rotation),o=(U,g)=>[a[0]*U+a[2]*g,a[1]*U+a[3]*g],m=this.#u(360-this.rotation),D=(U,g)=>[m[0]*U+m[2]*g,m[1]*U+m[3]*g];let j,N,Q=!1,K=!1;switch(f){case"topLeft":Q=!0,j=(U,g)=>[0,0],N=(U,g)=>[U,g];break;case"topMiddle":j=(U,g)=>[U/2,0],N=(U,g)=>[U/2,g];break;case"topRight":Q=!0,j=(U,g)=>[U,0],N=(U,g)=>[0,g];break;case"middleRight":K=!0,j=(U,g)=>[U,g/2],N=(U,g)=>[0,g/2];break;case"bottomRight":Q=!0,j=(U,g)=>[U,g],N=(U,g)=>[0,0];break;case"bottomMiddle":j=(U,g)=>[U/2,g],N=(U,g)=>[U/2,0];break;case"bottomLeft":Q=!0,j=(U,g)=>[0,g],N=(U,g)=>[U,0];break;case"middleLeft":K=!0,j=(U,g)=>[0,g/2],N=(U,g)=>[U,g/2];break}const fe=j(P,b),se=N(P,b);let de=o(...se);const ye=L(A+de[0]),ce=L(h+de[1]);let V=1,T=1,[w,_]=this.screenToPageTranslation(s.movementX,s.movementY);if([w,_]=D(w/u,_/E),Q){const U=Math.hypot(P,b);V=T=Math.max(Math.min(Math.hypot(se[0]-fe[0]-w,se[1]-fe[1]-_)/U,1/P,1/b),v/P,I/b)}else K?V=Math.max(v,Math.min(1,Math.abs(se[0]-fe[0]-w)))/P:T=Math.max(I,Math.min(1,Math.abs(se[1]-fe[1]-_)))/b;const y=L(P*V),F=L(b*T);de=o(...N(y,F));const H=ye-de[0],q=ce-de[1];this.width=y,this.height=F,this.x=H,this.y=q,this.setDims(u*y,E*F),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const f=this.#n=document.createElement("button");f.className="altText";const s=await O._l10nPromise.get("editor_alt_text_button_label");f.textContent=s,f.setAttribute("aria-label",s),f.tabIndex="0",f.addEventListener("contextmenu",B.noContextMenu),f.addEventListener("pointerdown",u=>u.stopPropagation()),f.addEventListener("click",u=>{u.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),f.addEventListener("keydown",u=>{u.target===f&&u.key==="Enter"&&(u.preventDefault(),this._uiManager.editAltText(this))}),this.#b(),this.div.append(f),O.SMALL_EDITOR_SIZE||(O.SMALL_EDITOR_SIZE=Math.min(128,Math.round(f.getBoundingClientRect().width*1.4)))}async#b(){const f=this.#n;if(!f)return;if(!this.#e&&!this.#t){f.classList.remove("done"),this.#r?.remove();return}O._l10nPromise.get("editor_alt_text_edit_button_label").then(u=>{f.setAttribute("aria-label",u)});let s=this.#r;if(!s){this.#r=s=document.createElement("span"),s.className="tooltip",s.setAttribute("role","tooltip");const u=s.id=`alt-text-tooltip-${this.id}`;f.setAttribute("aria-describedby",u);const E=100;f.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},E)}),f.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#r?.classList.remove("show")})}f.classList.add("done"),s.innerText=this.#t?await O._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,s.parentNode||f.append(s)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:f,decorative:s}){this.#e===f&&this.#t===s||(this.#e=f,this.#t=s,this.#b())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[f,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/f).toFixed(2)}%`,this.div.style.maxHeight=`${(100*f/s).toFixed(2)}%`);const[u,E]=this.getInitialTranslation();return this.translate(u,E),(0,d.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(f){const{isMac:s}=S.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&s){f.preventDefault();return}this.#i=!0,this.#C(f)}#C(f){if(!this._isDraggable)return;const s=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let u,E;s&&(u={passive:!0,capture:!0},E=h=>{const[P,b]=this.screenToPageTranslation(h.movementX,h.movementY);this._uiManager.dragSelectedEditors(P,b)},window.addEventListener("pointermove",E,u));const A=()=>{if(window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),s&&window.removeEventListener("pointermove",E,u),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:h}=S.FeatureTest.platform;f.ctrlKey&&!h||f.shiftKey||f.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",A),window.addEventListener("blur",A)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(f,s,u){f.changeParent(this),this.x=s,this.y=u,this.fixAndSetPosition()}getRect(f,s){const u=this.parentScale,[E,A]=this.pageDimensions,[h,P]=this.pageTranslation,b=f/u,v=s/u,I=this.x*E,L=this.y*A,a=this.width*E,o=this.height*A;switch(this.rotation){case 0:return[I+b+h,A-L-v-o+P,I+b+a+h,A-L-v+P];case 90:return[I+v+h,A-L+b+P,I+v+o+h,A-L+b+a+P];case 180:return[I-b-a+h,A-L+v+P,I-b+h,A-L+v+o+P];case 270:return[I-v-o+h,A-L-b-a+P,I-v+h,A-L-b+P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(f,s){const[u,E,A,h]=f,P=A-u,b=h-E;switch(this.rotation){case 0:return[u,s-h,P,b];case 90:return[u,s-E,b,P];case 180:return[A,s-E,P,b];case 270:return[A,s-h,b,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(f=!1,s=null){(0,S.unreachable)("An editor must be serializable")}static deserialize(f,s,u){const E=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:u});E.rotation=f.rotation;const[A,h]=E.pageDimensions,[P,b,v,I]=E.getRectInCurrentCoords(f.rect,h);return E.x=P/A,E.y=b/h,E.width=v/A,E.height=I/h,E}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(f,s){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(f){this.#f=f,this.parent&&(f?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(f,s){this.#o=!0;const u=f/s,{style:E}=this.div;E.aspectRatio=u,E.height="auto"}static get MIN_SIZE(){return 16}}l.AnnotationEditor=O;class G extends O{constructor(f){super(f),this.annotationElementId=f.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.KeyboardManager=l.CommandManager=l.ColorManager=l.AnnotationEditorUIManager=void 0,l.bindEvents=B,l.opacityToHex=O;var d=x(1),S=x(6);function B(A,h,P){for(const b of P)h.addEventListener(b,A[b].bind(A))}function O(A){return Math.round(Math.min(255,Math.max(1,255*A))).toString(16).padStart(2,"0")}class G{#e=0;getId(){return`${d.AnnotationEditorPrefix}${this.#e++}`}}class W{#e=(0,d.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const h='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',b=new OffscreenCanvas(1,3).getContext("2d"),v=new Image;v.src=h;const I=v.decode().then(()=>(b.drawImage(v,0,0,1,1,0,0,1,3),new Uint32Array(b.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,d.shadow)(this,"_isSVGFittingCanvas",I)}async#r(h,P){this.#n||=new Map;let b=this.#n.get(h);if(b===null)return null;if(b?.bitmap)return b.refCounter+=1,b;try{b||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let v;if(typeof P=="string"){b.url=P;const I=await fetch(P);if(!I.ok)throw new Error(I.statusText);v=await I.blob()}else v=b.file=P;if(v.type==="image/svg+xml"){const I=W._isSVGFittingCanvas,L=new FileReader,a=new Image,o=new Promise((m,D)=>{a.onload=()=>{b.bitmap=a,b.isSvg=!0,m()},L.onload=async()=>{const j=b.svgUrl=L.result;a.src=await I?`${j}#svgView(preserveAspectRatio(none))`:j},a.onerror=L.onerror=D});L.readAsDataURL(v),await o}else b.bitmap=await createImageBitmap(v);b.refCounter=1}catch(v){console.error(v),b=null}return this.#n.set(h,b),b&&this.#n.set(b.id,b),b}async getFromFile(h){const{lastModified:P,name:b,size:v,type:I}=h;return this.#r(`${P}_${b}_${v}_${I}`,h)}async getFromUrl(h){return this.#r(h,h)}async getFromId(h){this.#n||=new Map;const P=this.#n.get(h);return P?P.bitmap?(P.refCounter+=1,P):P.file?this.getFromFile(P.file):this.getFromUrl(P.url):null}getSvgUrl(h){const P=this.#n.get(h);return P?.isSvg?P.svgUrl:null}deleteId(h){this.#n||=new Map;const P=this.#n.get(h);P&&(P.refCounter-=1,P.refCounter===0&&(P.bitmap=null))}isValidId(h){return h.startsWith(`image_${this.#e}_`)}}class f{#e=[];#t=!1;#n;#r=-1;constructor(h=128){this.#n=h}add({cmd:h,undo:P,mustExec:b,type:v=NaN,overwriteIfSameType:I=!1,keepUndo:L=!1}){if(b&&h(),this.#t)return;const a={cmd:h,undo:P,type:v};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(a);return}if(I&&this.#e[this.#r].type===v){L&&(a.undo=this.#e[this.#r].undo),this.#e[this.#r]=a;return}const o=this.#r+1;o===this.#n?this.#e.splice(0,1):(this.#r=o,o<this.#e.length&&this.#e.splice(o)),this.#e.push(a)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}l.CommandManager=f;class s{constructor(h){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:P}=d.FeatureTest.platform;for(const[b,v,I={}]of h)for(const L of b){const a=L.startsWith("mac+");P&&a?(this.callbacks.set(L.slice(4),{callback:v,options:I}),this.allKeys.add(L.split("+").at(-1))):!P&&!a&&(this.callbacks.set(L,{callback:v,options:I}),this.allKeys.add(L.split("+").at(-1)))}}#e(h){h.altKey&&this.buffer.push("alt"),h.ctrlKey&&this.buffer.push("ctrl"),h.metaKey&&this.buffer.push("meta"),h.shiftKey&&this.buffer.push("shift"),this.buffer.push(h.key);const P=this.buffer.join("+");return this.buffer.length=0,P}exec(h,P){if(!this.allKeys.has(P.key))return;const b=this.callbacks.get(this.#e(P));if(!b)return;const{callback:v,options:{bubbles:I=!1,args:L=[],checker:a=null}}=b;a&&!a(h,P)||(v.bind(h,...L)(),I||(P.stopPropagation(),P.preventDefault()))}}l.KeyboardManager=s;class u{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const h=new Map([["CanvasText",null],["Canvas",null]]);return(0,S.getColorValues)(h),(0,d.shadow)(this,"_colors",h)}convert(h){const P=(0,S.getRGB)(h);if(!window.matchMedia("(forced-colors: active)").matches)return P;for(const[b,v]of this._colors)if(v.every((I,L)=>I===P[L]))return u._colorsMapping.get(b);return P}getHexCode(h){const P=this._colors.get(h);return P?d.Util.makeHexColor(...P):h}}l.ColorManager=u;class E{#e=null;#t=new Map;#n=new Map;#r=null;#a=null;#o=new f;#s=0;#l=new Set;#c=null;#i=null;#f=new Set;#h=null;#d=new G;#p=!1;#y=!1;#m=null;#g=d.AnnotationEditorType.NONE;#u=new Set;#v=null;#E=this.blur.bind(this);#A=this.focus.bind(this);#b=this.copy.bind(this);#C=this.cut.bind(this);#L=this.paste.bind(this);#I=this.keydown.bind(this);#O=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#D=this.onScaleChanging.bind(this);#k=this.onRotationChanging.bind(this);#R={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#S=[0,0];#T=null;#x=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const h=E.prototype,P=I=>{const{activeElement:L}=document;return L&&I.#x.contains(L)&&I.hasSomethingToControl()},b=this.TRANSLATE_SMALL,v=this.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new s([[["ctrl+a","mac+meta+a"],h.selectAll],[["ctrl+z","mac+meta+z"],h.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],h.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],h.delete],[["Escape","mac+Escape"],h.unselectAll],[["ArrowLeft","mac+ArrowLeft"],h.translateSelectedEditors,{args:[-b,0],checker:P}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h.translateSelectedEditors,{args:[-v,0],checker:P}],[["ArrowRight","mac+ArrowRight"],h.translateSelectedEditors,{args:[b,0],checker:P}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h.translateSelectedEditors,{args:[v,0],checker:P}],[["ArrowUp","mac+ArrowUp"],h.translateSelectedEditors,{args:[0,-b],checker:P}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h.translateSelectedEditors,{args:[0,-v],checker:P}],[["ArrowDown","mac+ArrowDown"],h.translateSelectedEditors,{args:[0,b],checker:P}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h.translateSelectedEditors,{args:[0,v],checker:P}]]))}constructor(h,P,b,v,I,L){this.#x=h,this.#N=P,this.#r=b,this._eventBus=v,this._eventBus._on("editingaction",this.#O),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#D),this._eventBus._on("rotationchanging",this.#k),this.#a=I.annotationStorage,this.#h=I.filterFactory,this.#v=L,this.viewParameters={realScale:S.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#j(),this._eventBus._off("editingaction",this.#O),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#D),this._eventBus._off("rotationchanging",this.#k);for(const h of this.#n.values())h.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,d.shadow)(this,"hcmFilter",this.#v?this.#h.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,d.shadow)(this,"direction",getComputedStyle(this.#x).direction)}editAltText(h){this.#r?.editAltText(this,h)}onPageChanging({pageNumber:h}){this.#s=h-1}focusMainContainer(){this.#x.focus()}findParent(h,P){for(const b of this.#n.values()){const{x:v,y:I,width:L,height:a}=b.div.getBoundingClientRect();if(h>=v&&h<=v+L&&P>=I&&P<=I+a)return b}return null}disableUserSelect(h=!1){this.#N.classList.toggle("noUserSelect",h)}addShouldRescale(h){this.#f.add(h)}removeShouldRescale(h){this.#f.delete(h)}onScaleChanging({scale:h}){this.commitOrRemove(),this.viewParameters.realScale=h*S.PixelsPerInch.PDF_TO_CSS_UNITS;for(const P of this.#f)P.onScaleChanging()}onRotationChanging({pagesRotation:h}){this.commitOrRemove(),this.viewParameters.rotation=h}addToAnnotationStorage(h){!h.isEmpty()&&this.#a&&!this.#a.has(h.id)&&this.#a.setValue(h.id,h)}#B(){window.addEventListener("focus",this.#A),window.addEventListener("blur",this.#E)}#j(){window.removeEventListener("focus",this.#A),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:h}=document;for(const P of this.#u)if(P.div.contains(h)){this.#m=[P,h],P._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[h,P]=this.#m;this.#m=null,P.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),P.focus()}#U(){window.addEventListener("keydown",this.#I,{capture:!0})}#M(){window.removeEventListener("keydown",this.#I,{capture:!0})}#F(){document.addEventListener("copy",this.#b),document.addEventListener("cut",this.#C),document.addEventListener("paste",this.#L)}#P(){document.removeEventListener("copy",this.#b),document.removeEventListener("cut",this.#C),document.removeEventListener("paste",this.#L)}addEditListeners(){this.#U(),this.#F()}removeEditListeners(){this.#M(),this.#P()}copy(h){if(h.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const P=[];for(const b of this.#u){const v=b.serialize(!0);v&&P.push(v)}P.length!==0&&h.clipboardData.setData("application/pdfjs",JSON.stringify(P))}cut(h){this.copy(h),this.delete()}paste(h){h.preventDefault();const{clipboardData:P}=h;for(const I of P.items)for(const L of this.#i)if(L.isHandlingMimeForPasting(I.type)){L.paste(I,this.currentLayer);return}let b=P.getData("application/pdfjs");if(!b)return;try{b=JSON.parse(b)}catch(I){(0,d.warn)(`paste: "${I.message}".`);return}if(!Array.isArray(b))return;this.unselectAll();const v=this.currentLayer;try{const I=[];for(const o of b){const m=v.deserialize(o);if(!m)return;I.push(m)}const L=()=>{for(const o of I)this.#H(o);this.#$(I)},a=()=>{for(const o of I)o.remove()};this.addCommands({cmd:L,undo:a,mustExec:!0})}catch(I){(0,d.warn)(`paste: "${I.message}".`)}}keydown(h){this.getActive()?.shouldGetKeyboardEvents()||E._keyboardManager.exec(this,h)}onEditingAction(h){["undo","redo","delete","selectAll"].includes(h.name)&&this[h.name]()}#w(h){Object.entries(h).some(([b,v])=>this.#R[b]!==v)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#R,h)})}#z(h){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:h})}setEditingState(h){h?(this.#B(),this.#U(),this.#F(),this.#w({isEditing:this.#g!==d.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#j(),this.#M(),this.#P(),this.#w({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(h){if(!this.#i){this.#i=h;for(const P of this.#i)this.#z(P.defaultPropertiesToUpdate)}}getId(){return this.#d.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(h){return this.#n.get(h)}get currentPageIndex(){return this.#s}addLayer(h){this.#n.set(h.pageIndex,h),this.#p?h.enable():h.disable()}removeLayer(h){this.#n.delete(h.pageIndex)}updateMode(h,P=null){if(this.#g!==h){if(this.#g=h,h===d.AnnotationEditorType.NONE){this.setEditingState(!1),this.#V();return}this.setEditingState(!0),this.#G(),this.unselectAll();for(const b of this.#n.values())b.updateMode(h);if(P){for(const b of this.#t.values())if(b.annotationElementId===P){this.setSelected(b),b.enterInEditMode();break}}}}updateToolbar(h){h!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:h})}updateParams(h,P){if(this.#i){if(h===d.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(h);return}for(const b of this.#u)b.updateParams(h,P);for(const b of this.#i)b.updateDefaultParams(h,P)}}enableWaiting(h=!1){if(this.#y!==h){this.#y=h;for(const P of this.#n.values())h?P.disableClick():P.enableClick(),P.div.classList.toggle("waiting",h)}}#G(){if(!this.#p){this.#p=!0;for(const h of this.#n.values())h.enable()}}#V(){if(this.unselectAll(),this.#p){this.#p=!1;for(const h of this.#n.values())h.disable()}}getEditors(h){const P=[];for(const b of this.#t.values())b.pageIndex===h&&P.push(b);return P}getEditor(h){return this.#t.get(h)}addEditor(h){this.#t.set(h.id,h)}removeEditor(h){this.#t.delete(h.id),this.unselect(h),(!h.annotationElementId||!this.#l.has(h.annotationElementId))&&this.#a?.remove(h.id)}addDeletedAnnotationElement(h){this.#l.add(h.annotationElementId),h.deleted=!0}isDeletedAnnotationElement(h){return this.#l.has(h)}removeDeletedAnnotationElement(h){this.#l.delete(h.annotationElementId),h.deleted=!1}#H(h){const P=this.#n.get(h.pageIndex);P?P.addOrRebuild(h):this.addEditor(h)}setActiveEditor(h){this.#e!==h&&(this.#e=h,h&&this.#z(h.propertiesToUpdate))}toggleSelected(h){if(this.#u.has(h)){this.#u.delete(h),h.unselect(),this.#w({hasSelectedEditor:this.hasSelection});return}this.#u.add(h),h.select(),this.#z(h.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}setSelected(h){for(const P of this.#u)P!==h&&P.unselect();this.#u.clear(),this.#u.add(h),h.select(),this.#z(h.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}isSelected(h){return this.#u.has(h)}unselect(h){h.unselect(),this.#u.delete(h),this.#w({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#w({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#o.redo(),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(h){this.#o.add(h),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const h of this.#t.values())return h.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const h=[...this.#u],P=()=>{for(const v of h)v.remove()},b=()=>{for(const v of h)this.#H(v)};this.addCommands({cmd:P,undo:b,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#$(h){this.#u.clear();for(const P of h)P.isEmpty()||(this.#u.add(P),P.select());this.#w({hasSelectedEditor:!0})}selectAll(){for(const h of this.#u)h.commit();this.#$(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const h of this.#u)h.unselect();this.#u.clear(),this.#w({hasSelectedEditor:!1})}}translateSelectedEditors(h,P,b=!1){if(b||this.commitOrRemove(),!this.hasSelection)return;this.#S[0]+=h,this.#S[1]+=P;const[v,I]=this.#S,L=[...this.#u],a=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#S[0]=this.#S[1]=0,this.addCommands({cmd:()=>{for(const o of L)this.#t.has(o.id)&&o.translateInPage(v,I)},undo:()=>{for(const o of L)this.#t.has(o.id)&&o.translateInPage(-v,-I)},mustExec:!1})},a);for(const o of L)o.translateInPage(h,P)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const h of this.#u)this.#c.set(h,{savedX:h.x,savedY:h.y,savedPageIndex:h.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const h=this.#c;this.#c=null;let P=!1;for(const[{x:v,y:I,pageIndex:L},a]of h)a.newX=v,a.newY=I,a.newPageIndex=L,P||=v!==a.savedX||I!==a.savedY||L!==a.savedPageIndex;if(!P)return!1;const b=(v,I,L,a)=>{if(this.#t.has(v.id)){const o=this.#n.get(a);o?v._setParentAndPosition(o,I,L):(v.pageIndex=a,v.x=I,v.y=L)}};return this.addCommands({cmd:()=>{for(const[v,{newX:I,newY:L,newPageIndex:a}]of h)b(v,I,L,a)},undo:()=>{for(const[v,{savedX:I,savedY:L,savedPageIndex:a}]of h)b(v,I,L,a)},mustExec:!0}),!0}dragSelectedEditors(h,P){if(this.#c)for(const b of this.#c.keys())b.drag(h,P)}rebuild(h){if(h.parent===null){const P=this.getLayer(h.pageIndex);P?(P.changeParent(h),P.addOrRebuild(h)):(this.addEditor(h),this.addToAnnotationStorage(h),h.rebuild())}else h.parent.addOrRebuild(h)}isActive(h){return this.#e===h}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,d.shadow)(this,"imageManager",new W)}}l.AnnotationEditorUIManager=E}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMFilterFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=D,l.getColorValues=fe,l.getCurrentTransform=se,l.getCurrentTransformInverse=de,l.getFilenameFromUrl=v,l.getPdfFilenameFromUrl=I,l.getRGB=K,l.getXfaPageViewport=Q,l.isDataScheme=P,l.isPdfFile=b,l.isValidFetchUrl=a,l.loadScript=m,l.noContextMenu=o,l.setLayerDimensions=ye;var d=x(7),S=x(1);const B="http://www.w3.org/2000/svg";class O{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}l.PixelsPerInch=O;class G extends d.BaseFilterFactory{#e;#t;#n;#r;#a;#o;#s;#l;#c;#i;#f=0;constructor({docId:V,ownerDocument:T=globalThis.document}={}){super(),this.#n=V,this.#r=T}get#h(){return this.#e||=new Map}get#d(){if(!this.#t){const V=this.#r.createElement("div"),{style:T}=V;T.visibility="hidden",T.contain="strict",T.width=T.height=0,T.position="absolute",T.top=T.left=0,T.zIndex=-1;const w=this.#r.createElementNS(B,"svg");w.setAttribute("width",0),w.setAttribute("height",0),this.#t=this.#r.createElementNS(B,"defs"),V.append(w),w.append(this.#t),this.#r.body.append(V)}return this.#t}addFilter(V){if(!V)return"none";let T=this.#h.get(V);if(T)return T;let w,_,y,F;if(V.length===1){const g=V[0],k=new Array(256);for(let R=0;R<256;R++)k[R]=g[R]/255;F=w=_=y=k.join(",")}else{const[g,k,R]=V,z=new Array(256),$=new Array(256),X=new Array(256);for(let J=0;J<256;J++)z[J]=g[J]/255,$[J]=k[J]/255,X[J]=R[J]/255;w=z.join(","),_=$.join(","),y=X.join(","),F=`${w}${_}${y}`}if(T=this.#h.get(F),T)return this.#h.set(V,T),T;const H=`g_${this.#n}_transfer_map_${this.#f++}`,q=`url(#${H})`;this.#h.set(V,q),this.#h.set(F,q);const U=this.#y(H);return this.#g(w,_,y,U),q}addHCMFilter(V,T){const w=`${V}-${T}`;if(this.#o===w)return this.#s;if(this.#o=w,this.#s="none",this.#a?.remove(),!V||!T)return this.#s;const _=this.#u(V);V=S.Util.makeHexColor(..._);const y=this.#u(T);if(T=S.Util.makeHexColor(...y),this.#d.style.color="",V==="#000000"&&T==="#ffffff"||V===T)return this.#s;const F=new Array(256);for(let k=0;k<=255;k++){const R=k/255;F[k]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const H=F.join(","),q=`g_${this.#n}_hcm_filter`,U=this.#l=this.#y(q);this.#g(H,H,H,U),this.#p(U);const g=(k,R)=>{const z=_[k]/255,$=y[k]/255,X=new Array(R+1);for(let J=0;J<=R;J++)X[J]=z+J/R*($-z);return X.join(",")};return this.#g(g(0,5),g(1,5),g(2,5),U),this.#s=`url(#${q})`,this.#s}addHighlightHCMFilter(V,T,w,_){const y=`${V}-${T}-${w}-${_}`;if(this.#c===y)return this.#i;if(this.#c=y,this.#i="none",this.#l?.remove(),!V||!T)return this.#i;const[F,H]=[V,T].map(this.#u.bind(this));let q=Math.round(.2126*F[0]+.7152*F[1]+.0722*F[2]),U=Math.round(.2126*H[0]+.7152*H[1]+.0722*H[2]),[g,k]=[w,_].map(this.#u.bind(this));U<q&&([q,U,g,k]=[U,q,k,g]),this.#d.style.color="";const R=(X,J,ae)=>{const _e=new Array(256),ie=(U-q)/ae,le=X/255,ue=(J-X)/(255*ae);let pe=0;for(let ge=0;ge<=ae;ge++){const Ee=Math.round(q+ge*ie),be=le+ge*ue;for(let Me=pe;Me<=Ee;Me++)_e[Me]=be;pe=Ee+1}for(let ge=pe;ge<256;ge++)_e[ge]=_e[pe-1];return _e.join(",")},z=`g_${this.#n}_hcm_highlight_filter`,$=this.#l=this.#y(z);return this.#p($),this.#g(R(g[0],k[0],5),R(g[1],k[1],5),R(g[2],k[2],5),$),this.#i=`url(#${z})`,this.#i}destroy(V=!1){V&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(V){const T=this.#r.createElementNS(B,"feColorMatrix");T.setAttribute("type","matrix"),T.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),V.append(T)}#y(V){const T=this.#r.createElementNS(B,"filter");return T.setAttribute("color-interpolation-filters","sRGB"),T.setAttribute("id",V),this.#d.append(T),T}#m(V,T,w){const _=this.#r.createElementNS(B,T);_.setAttribute("type","discrete"),_.setAttribute("tableValues",w),V.append(_)}#g(V,T,w,_){const y=this.#r.createElementNS(B,"feComponentTransfer");_.append(y),this.#m(y,"feFuncR",V),this.#m(y,"feFuncG",T),this.#m(y,"feFuncB",w)}#u(V){return this.#d.style.color=V,K(getComputedStyle(this.#d).getPropertyValue("color"))}}l.DOMFilterFactory=G;class W extends d.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,T){const w=this._document.createElement("canvas");return w.width=V,w.height=T,w}}l.DOMCanvasFactory=W;async function f(ce,V=!1){if(a(ce,document.baseURI)){const T=await fetch(ce);if(!T.ok)throw new Error(T.statusText);return V?new Uint8Array(await T.arrayBuffer()):(0,S.stringToBytes)(await T.text())}return new Promise((T,w)=>{const _=new XMLHttpRequest;_.open("GET",ce,!0),V&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(_.status===200||_.status===0){let y;if(V&&_.response?y=new Uint8Array(_.response):!V&&_.responseText&&(y=(0,S.stringToBytes)(_.responseText)),y){T(y);return}}w(new Error(_.statusText))}},_.send(null)})}class s extends d.BaseCMapReaderFactory{_fetchData(V,T){return f(V,this.isCompressed).then(w=>({cMapData:w,compressionType:T}))}}l.DOMCMapReaderFactory=s;class u extends d.BaseStandardFontDataFactory{_fetchData(V){return f(V,!0)}}l.DOMStandardFontDataFactory=u;class E extends d.BaseSVGFactory{_createSVG(V){return document.createElementNS(B,V)}}l.DOMSVGFactory=E;class A{constructor({viewBox:V,scale:T,rotation:w,offsetX:_=0,offsetY:y=0,dontFlip:F=!1}){this.viewBox=V,this.scale=T,this.rotation=w,this.offsetX=_,this.offsetY=y;const H=(V[2]+V[0])/2,q=(V[3]+V[1])/2;let U,g,k,R;switch(w%=360,w<0&&(w+=360),w){case 180:U=-1,g=0,k=0,R=1;break;case 90:U=0,g=1,k=1,R=0;break;case 270:U=0,g=-1,k=-1,R=0;break;case 0:U=1,g=0,k=0,R=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(k=-k,R=-R);let z,$,X,J;U===0?(z=Math.abs(q-V[1])*T+_,$=Math.abs(H-V[0])*T+y,X=(V[3]-V[1])*T,J=(V[2]-V[0])*T):(z=Math.abs(H-V[0])*T+_,$=Math.abs(q-V[1])*T+y,X=(V[2]-V[0])*T,J=(V[3]-V[1])*T),this.transform=[U*T,g*T,k*T,R*T,z-U*T*H-k*T*q,$-g*T*H-R*T*q],this.width=X,this.height=J}get rawDims(){const{viewBox:V}=this;return(0,S.shadow)(this,"rawDims",{pageWidth:V[2]-V[0],pageHeight:V[3]-V[1],pageX:V[0],pageY:V[1]})}clone({scale:V=this.scale,rotation:T=this.rotation,offsetX:w=this.offsetX,offsetY:_=this.offsetY,dontFlip:y=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:V,rotation:T,offsetX:w,offsetY:_,dontFlip:y})}convertToViewportPoint(V,T){return S.Util.applyTransform([V,T],this.transform)}convertToViewportRectangle(V){const T=S.Util.applyTransform([V[0],V[1]],this.transform),w=S.Util.applyTransform([V[2],V[3]],this.transform);return[T[0],T[1],w[0],w[1]]}convertToPdfPoint(V,T){return S.Util.applyInverseTransform([V,T],this.transform)}}l.PageViewport=A;class h extends S.BaseException{constructor(V,T=0){super(V,"RenderingCancelledException"),this.extraDelay=T}}l.RenderingCancelledException=h;function P(ce){const V=ce.length;let T=0;for(;T<V&&ce[T].trim()==="";)T++;return ce.substring(T,T+5).toLowerCase()==="data:"}function b(ce){return typeof ce=="string"&&/\.pdf$/i.test(ce)}function v(ce,V=!1){return V||([ce]=ce.split(/[#?]/,1)),ce.substring(ce.lastIndexOf("/")+1)}function I(ce,V="document.pdf"){if(typeof ce!="string")return V;if(P(ce))return(0,S.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const T=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,w=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=T.exec(ce);let y=w.exec(_[1])||w.exec(_[2])||w.exec(_[3]);if(y&&(y=y[0],y.includes("%")))try{y=w.exec(decodeURIComponent(y))[0]}catch{}return y||V}class L{started=Object.create(null);times=[];time(V){V in this.started&&(0,S.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,S.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let T=0;for(const{name:w}of this.times)T=Math.max(w.length,T);for(const{name:w,start:_,end:y}of this.times)V.push(`${w.padEnd(T)} ${y-_}ms
`);return V.join("")}}l.StatTimer=L;function a(ce,V){try{const{protocol:T}=V?new URL(ce,V):new URL(ce);return T==="http:"||T==="https:"}catch{return!1}}function o(ce){ce.preventDefault()}function m(ce,V=!1){return new Promise((T,w)=>{const _=document.createElement("script");_.src=ce,_.onload=function(y){V&&_.remove(),T(y)},_.onerror=function(){w(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})}function D(ce){console.log("Deprecated API usage: "+ce)}let j;class N{static toDateObject(V){if(!V||typeof V!="string")return null;j||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const T=j.exec(V);if(!T)return null;const w=parseInt(T[1],10);let _=parseInt(T[2],10);_=_>=1&&_<=12?_-1:0;let y=parseInt(T[3],10);y=y>=1&&y<=31?y:1;let F=parseInt(T[4],10);F=F>=0&&F<=23?F:0;let H=parseInt(T[5],10);H=H>=0&&H<=59?H:0;let q=parseInt(T[6],10);q=q>=0&&q<=59?q:0;const U=T[7]||"Z";let g=parseInt(T[8],10);g=g>=0&&g<=23?g:0;let k=parseInt(T[9],10)||0;return k=k>=0&&k<=59?k:0,U==="-"?(F+=g,H+=k):U==="+"&&(F-=g,H-=k),new Date(Date.UTC(w,_,y,F,H,q))}}l.PDFDateString=N;function Q(ce,{scale:V=1,rotation:T=0}){const{width:w,height:_}=ce.attributes.style,y=[0,0,parseInt(w),parseInt(_)];return new A({viewBox:y,scale:V,rotation:T})}function K(ce){if(ce.startsWith("#")){const V=parseInt(ce.slice(1),16);return[(V&16711680)>>16,(V&65280)>>8,V&255]}return ce.startsWith("rgb(")?ce.slice(4,-1).split(",").map(V=>parseInt(V)):ce.startsWith("rgba(")?ce.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,S.warn)(`Not a valid color format: "${ce}"`),[0,0,0])}function fe(ce){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const T of ce.keys()){V.style.color=T;const w=window.getComputedStyle(V).color;ce.set(T,K(w))}V.remove()}function se(ce){const{a:V,b:T,c:w,d:_,e:y,f:F}=ce.getTransform();return[V,T,w,_,y,F]}function de(ce){const{a:V,b:T,c:w,d:_,e:y,f:F}=ce.getTransform().invertSelf();return[V,T,w,_,y,F]}function ye(ce,V,T=!1,w=!0){if(V instanceof A){const{pageWidth:_,pageHeight:y}=V.rawDims,{style:F}=ce,H=S.FeatureTest.isCSSRoundSupported,q=`var(--scale-factor) * ${_}px`,U=`var(--scale-factor) * ${y}px`,g=H?`round(${q}, 1px)`:`calc(${q})`,k=H?`round(${U}, 1px)`:`calc(${U})`;!T||V.rotation%180===0?(F.width=g,F.height=k):(F.width=k,F.height=g)}w&&ce.setAttribute("data-main-rotation",V.rotation)}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseFilterFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var d=x(1);class S{constructor(){this.constructor===S&&(0,d.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(s){return"none"}addHCMFilter(s,u){return"none"}addHighlightHCMFilter(s,u,E,A){return"none"}destroy(s=!1){}}l.BaseFilterFactory=S;class B{constructor(){this.constructor===B&&(0,d.unreachable)("Cannot initialize BaseCanvasFactory.")}create(s,u){if(s<=0||u<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(s,u);return{canvas:E,context:E.getContext("2d")}}reset(s,u,E){if(!s.canvas)throw new Error("Canvas is not specified");if(u<=0||E<=0)throw new Error("Invalid canvas size");s.canvas.width=u,s.canvas.height=E}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}_createCanvas(s,u){(0,d.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=B;class O{constructor({baseUrl:s=null,isCompressed:u=!0}){this.constructor===O&&(0,d.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=s,this.isCompressed=u}async fetch({name:s}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const u=this.baseUrl+s+(this.isCompressed?".bcmap":""),E=this.isCompressed?d.CMapCompressionType.BINARY:d.CMapCompressionType.NONE;return this._fetchData(u,E).catch(A=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${u}`)})}_fetchData(s,u){(0,d.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=O;class G{constructor({baseUrl:s=null}){this.constructor===G&&(0,d.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=s}async fetch({filename:s}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!s)throw new Error("Font filename must be specified.");const u=`${this.baseUrl}${s}`;return this._fetchData(u).catch(E=>{throw new Error(`Unable to load font data at: ${u}`)})}_fetchData(s){(0,d.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=G;class W{constructor(){this.constructor===W&&(0,d.unreachable)("Cannot initialize BaseSVGFactory.")}create(s,u,E=!1){if(s<=0||u<=0)throw new Error("Invalid SVG dimensions");const A=this._createSVG("svg:svg");return A.setAttribute("version","1.1"),E||(A.setAttribute("width",`${s}px`),A.setAttribute("height",`${u}px`)),A.setAttribute("preserveAspectRatio","none"),A.setAttribute("viewBox",`0 0 ${s} ${u}`),A}createElement(s){if(typeof s!="string")throw new Error("Invalid SVG element type");return this._createSVG(s)}_createSVG(s){(0,d.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=W}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var d=x(1);const S=3285377520,B=4294901760,O=65535;class G{constructor(f){this.h1=f?f&4294967295:S,this.h2=f?f&4294967295:S}update(f){let s,u;if(typeof f=="string"){s=new Uint8Array(f.length*2),u=0;for(let D=0,j=f.length;D<j;D++){const N=f.charCodeAt(D);N<=255?s[u++]=N:(s[u++]=N>>>8,s[u++]=N&255)}}else if((0,d.isArrayBuffer)(f))s=f.slice(),u=s.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const E=u>>2,A=u-E*4,h=new Uint32Array(s.buffer,0,E);let P=0,b=0,v=this.h1,I=this.h2;const L=3432918353,a=461845907,o=L&O,m=a&O;for(let D=0;D<E;D++)D&1?(P=h[D],P=P*L&B|P*o&O,P=P<<15|P>>>17,P=P*a&B|P*m&O,v^=P,v=v<<13|v>>>19,v=v*5+3864292196):(b=h[D],b=b*L&B|b*o&O,b=b<<15|b>>>17,b=b*a&B|b*m&O,I^=b,I=I<<13|I>>>19,I=I*5+3864292196);switch(P=0,A){case 3:P^=s[E*4+2]<<16;case 2:P^=s[E*4+1]<<8;case 1:P^=s[E*4],P=P*L&B|P*o&O,P=P<<15|P>>>17,P=P*a&B|P*m&O,E&1?v^=P:I^=P}this.h1=v,this.h2=I}hexdigest(){let f=this.h1,s=this.h2;return f^=s>>>1,f=f*3981806797&B|f*36045&O,s=s*4283543511&B|((s<<16|f>>>16)*2950163797&B)>>>16,f^=s>>>1,f=f*444984403&B|f*60499&O,s=s*3301882366&B|((s<<16|f>>>16)*3120437893&B)>>>16,f^=s>>>1,(f>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}l.MurmurHash3_64=G}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var d=x(1);class S{#e=new Set;constructor({ownerDocument:G=globalThis.document,styleElement:W=null}){this._document=G,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(G){this.nativeFontFaces.add(G),this._document.fonts.add(G)}removeNativeFontFace(G){this.nativeFontFaces.delete(G),this._document.fonts.delete(G)}insertRule(G){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const W=this.styleElement.sheet;W.insertRule(G,W.cssRules.length)}clear(){for(const G of this.nativeFontFaces)this._document.fonts.delete(G);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(G){if(!(!G||this.#e.has(G.loadedName))){if((0,d.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:W,src:f,style:s}=G,u=new FontFace(W,f,s);this.addNativeFontFace(u);try{await u.load(),this.#e.add(W)}catch{(0,d.warn)(`Cannot load system font: ${G.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}(0,d.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(G){if(G.attached||G.missingFile&&!G.systemFontInfo)return;if(G.attached=!0,G.systemFontInfo){await this.loadSystemFont(G.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=G.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(s){throw(0,d.warn)(`Failed to load font '${f.family}': '${s}'.`),G.disableFontFace=!0,s}}return}const W=G.createFontFaceRule();if(W){if(this.insertRule(W),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const s=this._queueLoadingCallback(f);this._prepareFontLoadEvent(G,s)})}}get isFontLoadingAPISupported(){const G=!!this._document?.fonts;return(0,d.shadow)(this,"isFontLoadingAPISupported",G)}get isSyncFontLoadingSupported(){let G=!1;return(d.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(G=!0),(0,d.shadow)(this,"isSyncFontLoadingSupported",G)}_queueLoadingCallback(G){function W(){for((0,d.assert)(!s.done,"completeRequest() cannot be called twice."),s.done=!0;f.length>0&&f[0].done;){const u=f.shift();setTimeout(u.callback,0)}}const{loadingRequests:f}=this,s={done:!1,complete:W,callback:G};return f.push(s),s}get _loadTestFont(){const G=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,d.shadow)(this,"_loadTestFont",G)}_prepareFontLoadEvent(G,W){function f(Q,K){return Q.charCodeAt(K)<<24|Q.charCodeAt(K+1)<<16|Q.charCodeAt(K+2)<<8|Q.charCodeAt(K+3)&255}function s(Q,K,fe,se){const de=Q.substring(0,K),ye=Q.substring(K+fe);return de+se+ye}let u,E;const A=this._document.createElement("canvas");A.width=1,A.height=1;const h=A.getContext("2d");let P=0;function b(Q,K){if(++P>30){(0,d.warn)("Load test font never loaded."),K();return}if(h.font="30px "+Q,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){K();return}setTimeout(b.bind(null,Q,K))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=s(I,976,v.length,v);const a=16,o=1482184792;let m=f(I,a);for(u=0,E=v.length-3;u<E;u+=4)m=m-o+f(v,u)|0;u<v.length&&(m=m-o+f(v+"XXX",u)|0),I=s(I,a,4,(0,d.string32)(m));const D=`url(data:font/opentype;base64,${btoa(I)});`,j=`@font-face {font-family:"${v}";src:${D}}`;this.insertRule(j);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const Q of[G.loadedName,v]){const K=this._document.createElement("span");K.textContent="Hi",K.style.fontFamily=Q,N.append(K)}this._document.body.append(N),b(v,()=>{N.remove(),W.complete()})}}l.FontLoader=S;class B{constructor(G,{isEvalSupported:W=!0,disableFontFace:f=!1,ignoreErrors:s=!1,inspectFont:u=null}){this.compiledGlyphs=Object.create(null);for(const E in G)this[E]=G[E];this.isEvalSupported=W!==!1,this.disableFontFace=f===!0,this.ignoreErrors=s===!0,this._inspectFont=u}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let G;if(!this.cssFontInfo)G=new FontFace(this.loadedName,this.data,{});else{const W={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(W.style=`oblique ${this.cssFontInfo.italicAngle}deg`),G=new FontFace(this.cssFontInfo.fontFamily,this.data,W)}return this._inspectFont?.(this),G}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const G=(0,d.bytesToString)(this.data),W=`url(data:${this.mimetype};base64,${btoa(G)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${W}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${W}}`}return this._inspectFont?.(this,W),f}getPathGenerator(G,W){if(this.compiledGlyphs[W]!==void 0)return this.compiledGlyphs[W];let f;try{f=G.get(this.loadedName+"_path_"+W)}catch(s){if(!this.ignoreErrors)throw s;return(0,d.warn)(`getPathGenerator - ignoring character: "${s}".`),this.compiledGlyphs[W]=function(u,E){}}if(this.isEvalSupported&&d.FeatureTest.isEvalSupported){const s=[];for(const u of f){const E=u.args!==void 0?u.args.join(","):"";s.push("c.",u.cmd,"(",E,`);
`)}return this.compiledGlyphs[W]=new Function("c","size",s.join(""))}return this.compiledGlyphs[W]=function(s,u){for(const E of f)E.cmd==="scale"&&(E.args=[u,-u]),s[E.cmd].apply(s,E.args)}}}l.FontFaceObject=B}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeFilterFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var d=x(7);x(1);const S=function(f){return new Promise((s,u)=>{require$$5.readFile(f,(A,h)=>{if(A||!h){u(new Error(A));return}s(new Uint8Array(h))})})};class B extends d.BaseFilterFactory{}l.NodeFilterFactory=B;class O extends d.BaseCanvasFactory{_createCanvas(s,u){return require$$5.createCanvas(s,u)}}l.NodeCanvasFactory=O;class G extends d.BaseCMapReaderFactory{_fetchData(s,u){return S(s).then(E=>({cMapData:E,compressionType:u}))}}l.NodeCMapReaderFactory=G;class W extends d.BaseStandardFontDataFactory{_fetchData(s){return S(s)}}l.NodeStandardFontDataFactory=W}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var d=x(1),S=x(6),B=x(12),O=x(13);const G=16,W=100,f=4096,s=15,u=10,E=1e3,A=16;function h(T,w){if(T._removeMirroring)throw new Error("Context is already forwarding operations.");T.__originalSave=T.save,T.__originalRestore=T.restore,T.__originalRotate=T.rotate,T.__originalScale=T.scale,T.__originalTranslate=T.translate,T.__originalTransform=T.transform,T.__originalSetTransform=T.setTransform,T.__originalResetTransform=T.resetTransform,T.__originalClip=T.clip,T.__originalMoveTo=T.moveTo,T.__originalLineTo=T.lineTo,T.__originalBezierCurveTo=T.bezierCurveTo,T.__originalRect=T.rect,T.__originalClosePath=T.closePath,T.__originalBeginPath=T.beginPath,T._removeMirroring=()=>{T.save=T.__originalSave,T.restore=T.__originalRestore,T.rotate=T.__originalRotate,T.scale=T.__originalScale,T.translate=T.__originalTranslate,T.transform=T.__originalTransform,T.setTransform=T.__originalSetTransform,T.resetTransform=T.__originalResetTransform,T.clip=T.__originalClip,T.moveTo=T.__originalMoveTo,T.lineTo=T.__originalLineTo,T.bezierCurveTo=T.__originalBezierCurveTo,T.rect=T.__originalRect,T.closePath=T.__originalClosePath,T.beginPath=T.__originalBeginPath,delete T._removeMirroring},T.save=function(){w.save(),this.__originalSave()},T.restore=function(){w.restore(),this.__originalRestore()},T.translate=function(y,F){w.translate(y,F),this.__originalTranslate(y,F)},T.scale=function(y,F){w.scale(y,F),this.__originalScale(y,F)},T.transform=function(y,F,H,q,U,g){w.transform(y,F,H,q,U,g),this.__originalTransform(y,F,H,q,U,g)},T.setTransform=function(y,F,H,q,U,g){w.setTransform(y,F,H,q,U,g),this.__originalSetTransform(y,F,H,q,U,g)},T.resetTransform=function(){w.resetTransform(),this.__originalResetTransform()},T.rotate=function(y){w.rotate(y),this.__originalRotate(y)},T.clip=function(y){w.clip(y),this.__originalClip(y)},T.moveTo=function(_,y){w.moveTo(_,y),this.__originalMoveTo(_,y)},T.lineTo=function(_,y){w.lineTo(_,y),this.__originalLineTo(_,y)},T.bezierCurveTo=function(_,y,F,H,q,U){w.bezierCurveTo(_,y,F,H,q,U),this.__originalBezierCurveTo(_,y,F,H,q,U)},T.rect=function(_,y,F,H){w.rect(_,y,F,H),this.__originalRect(_,y,F,H)},T.closePath=function(){w.closePath(),this.__originalClosePath()},T.beginPath=function(){w.beginPath(),this.__originalBeginPath()}}class P{constructor(w){this.canvasFactory=w,this.cache=Object.create(null)}getCanvas(w,_,y){let F;return this.cache[w]!==void 0?(F=this.cache[w],this.canvasFactory.reset(F,_,y)):(F=this.canvasFactory.create(_,y),this.cache[w]=F),F}delete(w){delete this.cache[w]}clear(){for(const w in this.cache){const _=this.cache[w];this.canvasFactory.destroy(_),delete this.cache[w]}}}function b(T,w,_,y,F,H,q,U,g,k){const[R,z,$,X,J,ae]=(0,S.getCurrentTransform)(T);if(z===0&&$===0){const le=q*R+J,ue=Math.round(le),pe=U*X+ae,ge=Math.round(pe),Ee=(q+g)*R+J,be=Math.abs(Math.round(Ee)-ue)||1,Me=(U+k)*X+ae,Le=Math.abs(Math.round(Me)-ge)||1;return T.setTransform(Math.sign(R),0,0,Math.sign(X),ue,ge),T.drawImage(w,_,y,F,H,0,0,be,Le),T.setTransform(R,z,$,X,J,ae),[be,Le]}if(R===0&&X===0){const le=U*$+J,ue=Math.round(le),pe=q*z+ae,ge=Math.round(pe),Ee=(U+k)*$+J,be=Math.abs(Math.round(Ee)-ue)||1,Me=(q+g)*z+ae,Le=Math.abs(Math.round(Me)-ge)||1;return T.setTransform(0,Math.sign(z),Math.sign($),0,ue,ge),T.drawImage(w,_,y,F,H,0,0,Le,be),T.setTransform(R,z,$,X,J,ae),[Le,be]}T.drawImage(w,_,y,F,H,q,U,g,k);const _e=Math.hypot(R,z),ie=Math.hypot($,X);return[_e*g,ie*k]}function v(T){const{width:w,height:_}=T;if(w>E||_>E)return null;const y=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),H=w+1;let q=new Uint8Array(H*(_+1)),U,g,k;const R=w+7&-8;let z=new Uint8Array(R*_),$=0;for(const ie of T.data){let le=128;for(;le>0;)z[$++]=ie&le?0:255,le>>=1}let X=0;for($=0,z[$]!==0&&(q[0]=1,++X),g=1;g<w;g++)z[$]!==z[$+1]&&(q[g]=z[$]?2:1,++X),$++;for(z[$]!==0&&(q[g]=2,++X),U=1;U<_;U++){$=U*R,k=U*H,z[$-R]!==z[$]&&(q[k]=z[$]?1:8,++X);let ie=(z[$]?4:0)+(z[$-R]?8:0);for(g=1;g<w;g++)ie=(ie>>2)+(z[$+1]?4:0)+(z[$-R+1]?8:0),F[ie]&&(q[k+g]=F[ie],++X),$++;if(z[$-R]!==z[$]&&(q[k+g]=z[$]?2:4,++X),X>y)return null}for($=R*(_-1),k=U*H,z[$]!==0&&(q[k]=8,++X),g=1;g<w;g++)z[$]!==z[$+1]&&(q[k+g]=z[$]?4:8,++X),$++;if(z[$]!==0&&(q[k+g]=4,++X),X>y)return null;const J=new Int32Array([0,H,-1,0,-H,0,0,0,1]),ae=new Path2D;for(U=0;X&&U<=_;U++){let ie=U*H;const le=ie+w;for(;ie<le&&!q[ie];)ie++;if(ie===le)continue;ae.moveTo(ie%H,U);const ue=ie;let pe=q[ie];do{const ge=J[pe];do ie+=ge;while(!q[ie]);const Ee=q[ie];Ee!==5&&Ee!==10?(pe=Ee,q[ie]=0):(pe=Ee&51*pe>>4,q[ie]&=pe>>2|pe<<2),ae.lineTo(ie%H,ie/H|0),q[ie]||--X}while(ue!==ie);--U}return z=null,q=null,function(ie){ie.save(),ie.scale(1/w,-1/_),ie.translate(0,-_),ie.fill(ae),ie.beginPath(),ie.restore()}}class I{constructor(w,_){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=d.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,w,_])}clone(){const w=Object.create(this);return w.clipBox=this.clipBox.slice(),w}setCurrentPoint(w,_){this.x=w,this.y=_}updatePathMinMax(w,_,y){[_,y]=d.Util.applyTransform([_,y],w),this.minX=Math.min(this.minX,_),this.minY=Math.min(this.minY,y),this.maxX=Math.max(this.maxX,_),this.maxY=Math.max(this.maxY,y)}updateRectMinMax(w,_){const y=d.Util.applyTransform(_,w),F=d.Util.applyTransform(_.slice(2),w);this.minX=Math.min(this.minX,y[0],F[0]),this.minY=Math.min(this.minY,y[1],F[1]),this.maxX=Math.max(this.maxX,y[0],F[0]),this.maxY=Math.max(this.maxY,y[1],F[1])}updateScalingPathMinMax(w,_){d.Util.scaleMinMax(w,_),this.minX=Math.min(this.minX,_[0]),this.maxX=Math.max(this.maxX,_[1]),this.minY=Math.min(this.minY,_[2]),this.maxY=Math.max(this.maxY,_[3])}updateCurvePathMinMax(w,_,y,F,H,q,U,g,k,R){const z=d.Util.bezierBoundingBox(_,y,F,H,q,U,g,k);if(R){R[0]=Math.min(R[0],z[0],z[2]),R[1]=Math.max(R[1],z[0],z[2]),R[2]=Math.min(R[2],z[1],z[3]),R[3]=Math.max(R[3],z[1],z[3]);return}this.updateRectMinMax(w,z)}getPathBoundingBox(w=B.PathType.FILL,_=null){const y=[this.minX,this.minY,this.maxX,this.maxY];if(w===B.PathType.STROKE){_||(0,d.unreachable)("Stroke bounding box must include transform.");const F=d.Util.singularValueDecompose2dScale(_),H=F[0]*this.lineWidth/2,q=F[1]*this.lineWidth/2;y[0]-=H,y[1]-=q,y[2]+=H,y[3]+=q}return y}updateClipFromPath(){const w=d.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(w||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(w){this.clipBox=w,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(w=B.PathType.FILL,_=null){return d.Util.intersect(this.clipBox,this.getPathBoundingBox(w,_))}}function L(T,w){if(typeof ImageData<"u"&&w instanceof ImageData){T.putImageData(w,0,0);return}const _=w.height,y=w.width,F=_%A,H=(_-F)/A,q=F===0?H:H+1,U=T.createImageData(y,A);let g=0,k;const R=w.data,z=U.data;let $,X,J,ae;if(w.kind===d.ImageKind.GRAYSCALE_1BPP){const _e=R.byteLength,ie=new Uint32Array(z.buffer,0,z.byteLength>>2),le=ie.length,ue=y+7>>3,pe=4294967295,ge=d.FeatureTest.isLittleEndian?4278190080:255;for($=0;$<q;$++){for(J=$<H?A:F,k=0,X=0;X<J;X++){const Ee=_e-g;let be=0;const Me=Ee>ue?y:Ee*8-7,Le=Me&-8;let Oe=0,Ne=0;for(;be<Le;be+=8)Ne=R[g++],ie[k++]=Ne&128?pe:ge,ie[k++]=Ne&64?pe:ge,ie[k++]=Ne&32?pe:ge,ie[k++]=Ne&16?pe:ge,ie[k++]=Ne&8?pe:ge,ie[k++]=Ne&4?pe:ge,ie[k++]=Ne&2?pe:ge,ie[k++]=Ne&1?pe:ge;for(;be<Me;be++)Oe===0&&(Ne=R[g++],Oe=128),ie[k++]=Ne&Oe?pe:ge,Oe>>=1}for(;k<le;)ie[k++]=0;T.putImageData(U,0,$*A)}}else if(w.kind===d.ImageKind.RGBA_32BPP){for(X=0,ae=y*A*4,$=0;$<H;$++)z.set(R.subarray(g,g+ae)),g+=ae,T.putImageData(U,0,X),X+=A;$<q&&(ae=y*F*4,z.set(R.subarray(g,g+ae)),T.putImageData(U,0,X))}else if(w.kind===d.ImageKind.RGB_24BPP)for(J=A,ae=y*J,$=0;$<q;$++){for($>=H&&(J=F,ae=y*J),k=0,X=ae;X--;)z[k++]=R[g++],z[k++]=R[g++],z[k++]=R[g++],z[k++]=255;T.putImageData(U,0,$*A)}else throw new Error(`bad image kind: ${w.kind}`)}function a(T,w){if(w.bitmap){T.drawImage(w.bitmap,0,0);return}const _=w.height,y=w.width,F=_%A,H=(_-F)/A,q=F===0?H:H+1,U=T.createImageData(y,A);let g=0;const k=w.data,R=U.data;for(let z=0;z<q;z++){const $=z<H?A:F;({srcPos:g}=(0,O.convertBlackAndWhiteToRGBA)({src:k,srcPos:g,dest:R,width:y,height:$,nonBlackColor:0})),T.putImageData(U,0,z*A)}}function o(T,w){const _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const y of _)T[y]!==void 0&&(w[y]=T[y]);T.setLineDash!==void 0&&(w.setLineDash(T.getLineDash()),w.lineDashOffset=T.lineDashOffset)}function m(T){if(T.strokeStyle=T.fillStyle="#000000",T.fillRule="nonzero",T.globalAlpha=1,T.lineWidth=1,T.lineCap="butt",T.lineJoin="miter",T.miterLimit=10,T.globalCompositeOperation="source-over",T.font="10px sans-serif",T.setLineDash!==void 0&&(T.setLineDash([]),T.lineDashOffset=0),!d.isNodeJS){const{filter:w}=T;w!=="none"&&w!==""&&(T.filter="none")}}function D(T,w,_,y){const F=T.length;for(let H=3;H<F;H+=4){const q=T[H];if(q===0)T[H-3]=w,T[H-2]=_,T[H-1]=y;else if(q<255){const U=255-q;T[H-3]=T[H-3]*q+w*U>>8,T[H-2]=T[H-2]*q+_*U>>8,T[H-1]=T[H-1]*q+y*U>>8}}}function j(T,w,_){const y=T.length,F=1/255;for(let H=3;H<y;H+=4){const q=_?_[T[H]]:T[H];w[H]=w[H]*q*F|0}}function N(T,w,_){const y=T.length;for(let F=3;F<y;F+=4){const H=T[F-3]*77+T[F-2]*152+T[F-1]*28;w[F]=_?w[F]*_[H>>8]>>8:w[F]*H>>16}}function Q(T,w,_,y,F,H,q,U,g,k,R){const z=!!H,$=z?H[0]:0,X=z?H[1]:0,J=z?H[2]:0,ae=F==="Luminosity"?N:j,ie=Math.min(y,Math.ceil(1048576/_));for(let le=0;le<y;le+=ie){const ue=Math.min(ie,y-le),pe=T.getImageData(U-k,le+(g-R),_,ue),ge=w.getImageData(U,le+g,_,ue);z&&D(pe.data,$,X,J),ae(pe.data,ge.data,q),w.putImageData(ge,U,le+g)}}function K(T,w,_,y){const F=y[0],H=y[1],q=y[2]-F,U=y[3]-H;q===0||U===0||(Q(w.context,_,q,U,w.subtype,w.backdrop,w.transferMap,F,H,w.offsetX,w.offsetY),T.save(),T.globalAlpha=1,T.globalCompositeOperation="source-over",T.setTransform(1,0,0,1,0,0),T.drawImage(_.canvas,0,0),T.restore())}function fe(T,w){const _=d.Util.singularValueDecompose2dScale(T);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);const y=Math.fround((globalThis.devicePixelRatio||1)*S.PixelsPerInch.PDF_TO_CSS_UNITS);return w!==void 0?w:_[0]<=y||_[1]<=y}const se=["butt","round","square"],de=["miter","round","bevel"],ye={},ce={};class V{constructor(w,_,y,F,H,{optionalContentConfig:q,markedContentStack:U=null},g,k){this.ctx=w,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=y,this.canvasFactory=F,this.filterFactory=H,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=U||[],this.optionalContentConfig=q,this.cachedCanvases=new P(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=k,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(w,_=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):_}beginDrawing({transform:w,viewport:_,transparency:y=!1,background:F=null}){const H=this.ctx.canvas.width,q=this.ctx.canvas.height,U=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,H,q),this.ctx.fillStyle=U,y){const g=this.cachedCanvases.getCanvas("transparent",H,q);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...(0,S.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx),w&&(this.ctx.transform(...w),this.outputScaleX=w[0],this.outputScaleY=w[0]),this.ctx.transform(..._.transform),this.viewportScale=_.scale,this.baseTransform=(0,S.getCurrentTransform)(this.ctx)}executeOperatorList(w,_,y,F){const H=w.argsArray,q=w.fnArray;let U=_||0;const g=H.length;if(g===U)return U;const k=g-U>u&&typeof y=="function",R=k?Date.now()+s:0;let z=0;const $=this.commonObjs,X=this.objs;let J;for(;;){if(F!==void 0&&U===F.nextBreakPoint)return F.breakIt(U,y),U;if(J=q[U],J!==d.OPS.dependency)this[J].apply(this,H[U]);else for(const ae of H[U]){const _e=ae.startsWith("g_")?$:X;if(!_e.has(ae))return _e.get(ae,y),U}if(U++,U===g)return U;if(k&&++z>u){if(Date.now()>R)return y(),U;z=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const w of this._cachedBitmapsMap.values()){for(const _ of w.values())typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&(_.width=_.height=0);w.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const w=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(w!=="none"){const _=this.ctx.filter;this.ctx.filter=w,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=_}}}_scaleImage(w,_){const y=w.width,F=w.height;let H=Math.max(Math.hypot(_[0],_[1]),1),q=Math.max(Math.hypot(_[2],_[3]),1),U=y,g=F,k="prescale1",R,z;for(;H>2&&U>1||q>2&&g>1;){let $=U,X=g;H>2&&U>1&&($=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U/2),H/=U/$),q>2&&g>1&&(X=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,q/=g/X),R=this.cachedCanvases.getCanvas(k,$,X),z=R.context,z.clearRect(0,0,$,X),z.drawImage(w,0,0,U,g,0,0,$,X),w=R.canvas,U=$,g=X,k=k==="prescale1"?"prescale2":"prescale1"}return{img:w,paintWidth:U,paintHeight:g}}_createMaskCanvas(w){const _=this.ctx,{width:y,height:F}=w,H=this.current.fillColor,q=this.current.patternFill,U=(0,S.getCurrentTransform)(_);let g,k,R,z;if((w.bitmap||w.data)&&w.count>1){const be=w.bitmap||w.data.buffer;k=JSON.stringify(q?U:[U.slice(0,4),H]),g=this._cachedBitmapsMap.get(be),g||(g=new Map,this._cachedBitmapsMap.set(be,g));const Me=g.get(k);if(Me&&!q){const Le=Math.round(Math.min(U[0],U[2])+U[4]),Oe=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:Me,offsetX:Le,offsetY:Oe}}R=Me}R||(z=this.cachedCanvases.getCanvas("maskCanvas",y,F),a(z.context,w));let $=d.Util.transform(U,[1/y,0,0,-1/F,0,0]);$=d.Util.transform($,[1,0,0,1,0,-F]);const X=d.Util.applyTransform([0,0],$),J=d.Util.applyTransform([y,F],$),ae=d.Util.normalizeRect([X[0],X[1],J[0],J[1]]),_e=Math.round(ae[2]-ae[0])||1,ie=Math.round(ae[3]-ae[1])||1,le=this.cachedCanvases.getCanvas("fillCanvas",_e,ie),ue=le.context,pe=Math.min(X[0],J[0]),ge=Math.min(X[1],J[1]);ue.translate(-pe,-ge),ue.transform(...$),R||(R=this._scaleImage(z.canvas,(0,S.getCurrentTransformInverse)(ue)),R=R.img,g&&q&&g.set(k,R)),ue.imageSmoothingEnabled=fe((0,S.getCurrentTransform)(ue),w.interpolate),b(ue,R,0,0,R.width,R.height,0,0,y,F),ue.globalCompositeOperation="source-in";const Ee=d.Util.transform((0,S.getCurrentTransformInverse)(ue),[1,0,0,1,-pe,-ge]);return ue.fillStyle=q?H.getPattern(_,this,Ee,B.PathType.FILL):H,ue.fillRect(0,0,y,F),g&&!q&&(this.cachedCanvases.delete("fillCanvas"),g.set(k,le.canvas)),{canvas:le.canvas,offsetX:Math.round(pe),offsetY:Math.round(ge)}}setLineWidth(w){w!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=w,this.ctx.lineWidth=w}setLineCap(w){this.ctx.lineCap=se[w]}setLineJoin(w){this.ctx.lineJoin=de[w]}setMiterLimit(w){this.ctx.miterLimit=w}setDash(w,_){const y=this.ctx;y.setLineDash!==void 0&&(y.setLineDash(w),y.lineDashOffset=_)}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[_,y]of w)switch(_){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y[0],y[1]);break;case"CA":this.current.strokeAlpha=y;break;case"ca":this.current.fillAlpha=y,this.ctx.globalAlpha=y;break;case"BM":this.ctx.globalCompositeOperation=y;break;case"SMask":this.current.activeSMask=y?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(y);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const w=this.inSMaskMode;this.current.activeSMask&&!w?this.beginSMaskMode():!this.current.activeSMask&&w&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const w=this.ctx.canvas.width,_=this.ctx.canvas.height,y="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(y,w,_);this.suspendedCtx=this.ctx,this.ctx=F.context;const H=this.ctx;H.setTransform(...(0,S.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,H),h(H,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(w){if(!this.current.activeSMask)return;w?(w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.ceil(w[2]),w[3]=Math.ceil(w[3])):w=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const _=this.current.activeSMask,y=this.suspendedCtx;K(y,_,this.ctx,w),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const w=this.current;this.stateStack.push(w),this.current=w.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(w,_,y,F,H,q){this.ctx.transform(w,_,y,F,H,q),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(w,_,y){const F=this.ctx,H=this.current;let q=H.x,U=H.y,g,k;const R=(0,S.getCurrentTransform)(F),z=R[0]===0&&R[3]===0||R[1]===0&&R[2]===0,$=z?y.slice(0):null;for(let X=0,J=0,ae=w.length;X<ae;X++)switch(w[X]|0){case d.OPS.rectangle:q=_[J++],U=_[J++];const _e=_[J++],ie=_[J++],le=q+_e,ue=U+ie;F.moveTo(q,U),_e===0||ie===0?F.lineTo(le,ue):(F.lineTo(le,U),F.lineTo(le,ue),F.lineTo(q,ue)),z||H.updateRectMinMax(R,[q,U,le,ue]),F.closePath();break;case d.OPS.moveTo:q=_[J++],U=_[J++],F.moveTo(q,U),z||H.updatePathMinMax(R,q,U);break;case d.OPS.lineTo:q=_[J++],U=_[J++],F.lineTo(q,U),z||H.updatePathMinMax(R,q,U);break;case d.OPS.curveTo:g=q,k=U,q=_[J+4],U=_[J+5],F.bezierCurveTo(_[J],_[J+1],_[J+2],_[J+3],q,U),H.updateCurvePathMinMax(R,g,k,_[J],_[J+1],_[J+2],_[J+3],q,U,$),J+=6;break;case d.OPS.curveTo2:g=q,k=U,F.bezierCurveTo(q,U,_[J],_[J+1],_[J+2],_[J+3]),H.updateCurvePathMinMax(R,g,k,q,U,_[J],_[J+1],_[J+2],_[J+3],$),q=_[J+2],U=_[J+3],J+=4;break;case d.OPS.curveTo3:g=q,k=U,q=_[J+2],U=_[J+3],F.bezierCurveTo(_[J],_[J+1],q,U,q,U),H.updateCurvePathMinMax(R,g,k,_[J],_[J+1],q,U,q,U,$),J+=4;break;case d.OPS.closePath:F.closePath();break}z&&H.updateScalingPathMinMax(R,$),H.setCurrentPoint(q,U)}closePath(){this.ctx.closePath()}stroke(w=!0){const _=this.ctx,y=this.current.strokeColor;_.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof y=="object"&&y?.getPattern?(_.save(),_.strokeStyle=y.getPattern(_,this,(0,S.getCurrentTransformInverse)(_),B.PathType.STROKE),this.rescaleAndStroke(!1),_.restore()):this.rescaleAndStroke(!0)),w&&this.consumePath(this.current.getClippedPathBoundingBox()),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(w=!0){const _=this.ctx,y=this.current.fillColor,F=this.current.patternFill;let H=!1;F&&(_.save(),_.fillStyle=y.getPattern(_,this,(0,S.getCurrentTransformInverse)(_),B.PathType.FILL),H=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),H&&_.restore(),w&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ye}eoClip(){this.pendingClip=ce}beginText(){this.current.textMatrix=d.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const w=this.pendingTextPaths,_=this.ctx;if(w===void 0){_.beginPath();return}_.save(),_.beginPath();for(const y of w)_.setTransform(...y.transform),_.translate(y.x,y.y),y.addToPath(_,y.fontSize);_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}setCharSpacing(w){this.current.charSpacing=w}setWordSpacing(w){this.current.wordSpacing=w}setHScale(w){this.current.textHScale=w/100}setLeading(w){this.current.leading=-w}setFont(w,_){const y=this.commonObjs.get(w),F=this.current;if(!y)throw new Error(`Can't find font for ${w}`);if(F.fontMatrix=y.fontMatrix||d.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,d.warn)("Invalid font matrix for font "+w),_<0?(_=-_,F.fontDirection=-1):F.fontDirection=1,this.current.font=y,this.current.fontSize=_,y.isType3Font)return;const H=y.loadedName||"sans-serif",q=y.systemFontInfo?.css||`"${H}", ${y.fallbackName}`;let U="normal";y.black?U="900":y.bold&&(U="bold");const g=y.italic?"italic":"normal";let k=_;_<G?k=G:_>W&&(k=W),this.current.fontSizeScale=_/k,this.ctx.font=`${g} ${U} ${k}px ${q}`}setTextRenderingMode(w){this.current.textRenderingMode=w}setTextRise(w){this.current.textRise=w}moveText(w,_){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=_}setLeadingMoveText(w,_){this.setLeading(-_),this.moveText(w,_)}setTextMatrix(w,_,y,F,H,q){this.current.textMatrix=[w,_,y,F,H,q],this.current.textMatrixScale=Math.hypot(w,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(w,_,y,F){const H=this.ctx,q=this.current,U=q.font,g=q.textRenderingMode,k=q.fontSize/q.fontSizeScale,R=g&d.TextRenderingMode.FILL_STROKE_MASK,z=!!(g&d.TextRenderingMode.ADD_TO_PATH_FLAG),$=q.patternFill&&!U.missingFile;let X;(U.disableFontFace||z||$)&&(X=U.getPathGenerator(this.commonObjs,w)),U.disableFontFace||$?(H.save(),H.translate(_,y),H.beginPath(),X(H,k),F&&H.setTransform(...F),(R===d.TextRenderingMode.FILL||R===d.TextRenderingMode.FILL_STROKE)&&H.fill(),(R===d.TextRenderingMode.STROKE||R===d.TextRenderingMode.FILL_STROKE)&&H.stroke(),H.restore()):((R===d.TextRenderingMode.FILL||R===d.TextRenderingMode.FILL_STROKE)&&H.fillText(w,_,y),(R===d.TextRenderingMode.STROKE||R===d.TextRenderingMode.FILL_STROKE)&&H.strokeText(w,_,y)),z&&(this.pendingTextPaths||=[]).push({transform:(0,S.getCurrentTransform)(H),x:_,y,fontSize:k,addToPath:X})}get isFontSubpixelAAEnabled(){const{context:w}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);w.scale(1.5,1),w.fillText("I",0,10);const _=w.getImageData(0,0,10,10).data;let y=!1;for(let F=3;F<_.length;F+=4)if(_[F]>0&&_[F]<255){y=!0;break}return(0,d.shadow)(this,"isFontSubpixelAAEnabled",y)}showText(w){const _=this.current,y=_.font;if(y.isType3Font)return this.showType3Text(w);const F=_.fontSize;if(F===0)return;const H=this.ctx,q=_.fontSizeScale,U=_.charSpacing,g=_.wordSpacing,k=_.fontDirection,R=_.textHScale*k,z=w.length,$=y.vertical,X=$?1:-1,J=y.defaultVMetrics,ae=F*_.fontMatrix[0],_e=_.textRenderingMode===d.TextRenderingMode.FILL&&!y.disableFontFace&&!_.patternFill;H.save(),H.transform(..._.textMatrix),H.translate(_.x,_.y+_.textRise),k>0?H.scale(R,-1):H.scale(R,1);let ie;if(_.patternFill){H.save();const Ee=_.fillColor.getPattern(H,this,(0,S.getCurrentTransformInverse)(H),B.PathType.FILL);ie=(0,S.getCurrentTransform)(H),H.restore(),H.fillStyle=Ee}let le=_.lineWidth;const ue=_.textMatrixScale;if(ue===0||le===0){const Ee=_.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;(Ee===d.TextRenderingMode.STROKE||Ee===d.TextRenderingMode.FILL_STROKE)&&(le=this.getSinglePixelWidth())}else le/=ue;if(q!==1&&(H.scale(q,q),le/=q),H.lineWidth=le,y.isInvalidPDFjsFont){const Ee=[];let be=0;for(const Me of w)Ee.push(Me.unicode),be+=Me.width;H.fillText(Ee.join(""),0,0),_.x+=be*ae*R,H.restore(),this.compose();return}let pe=0,ge;for(ge=0;ge<z;++ge){const Ee=w[ge];if(typeof Ee=="number"){pe+=X*Ee*F/1e3;continue}let be=!1;const Me=(Ee.isSpace?g:0)+U,Le=Ee.fontChar,Oe=Ee.accent;let Ne,ot,Ke=Ee.width;if($){const tt=Ee.vmetric||J,ut=-(Ee.vmetric?tt[1]:Ke*.5)*ae,Bt=tt[2]*ae;Ke=tt?-tt[0]:Ke,Ne=ut/q,ot=(pe+Bt)/q}else Ne=pe/q,ot=0;if(y.remeasure&&Ke>0){const tt=H.measureText(Le).width*1e3/F*q;if(Ke<tt&&this.isFontSubpixelAAEnabled){const ut=Ke/tt;be=!0,H.save(),H.scale(ut,1),Ne/=ut}else Ke!==tt&&(Ne+=(Ke-tt)/2e3*F/q)}if(this.contentVisible&&(Ee.isInFont||y.missingFile)){if(_e&&!Oe)H.fillText(Le,Ne,ot);else if(this.paintChar(Le,Ne,ot,ie),Oe){const tt=Ne+F*Oe.offset.x/q,ut=ot-F*Oe.offset.y/q;this.paintChar(Oe.fontChar,tt,ut,ie)}}const Pt=$?Ke*ae-Me*k:Ke*ae+Me*k;pe+=Pt,be&&H.restore()}$?_.y-=pe:_.x+=pe*R,H.restore(),this.compose()}showType3Text(w){const _=this.ctx,y=this.current,F=y.font,H=y.fontSize,q=y.fontDirection,U=F.vertical?1:-1,g=y.charSpacing,k=y.wordSpacing,R=y.textHScale*q,z=y.fontMatrix||d.FONT_IDENTITY_MATRIX,$=w.length,X=y.textRenderingMode===d.TextRenderingMode.INVISIBLE;let J,ae,_e,ie;if(!(X||H===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,_.save(),_.transform(...y.textMatrix),_.translate(y.x,y.y),_.scale(R,q),J=0;J<$;++J){if(ae=w[J],typeof ae=="number"){ie=U*ae*H/1e3,this.ctx.translate(ie,0),y.x+=ie*R;continue}const le=(ae.isSpace?k:0)+g,ue=F.charProcOperatorList[ae.operatorListId];if(!ue){(0,d.warn)(`Type3 character "${ae.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ae,this.save(),_.scale(H,H),_.transform(...z),this.executeOperatorList(ue),this.restore()),_e=d.Util.applyTransform([ae.width,0],z)[0]*H+le,_.translate(_e,0),y.x+=_e*R}_.restore(),this.processingType3=null}}setCharWidth(w,_){}setCharWidthAndBounds(w,_,y,F,H,q){this.ctx.rect(y,F,H-y,q-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(w){let _;if(w[0]==="TilingPattern"){const y=w[1],F=this.baseTransform||(0,S.getCurrentTransform)(this.ctx),H={createCanvasGraphics:q=>new V(q,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};_=new B.TilingPattern(w,y,this.ctx,H,F)}else _=this._getPattern(w[1],w[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(w,_,y){const F=d.Util.makeHexColor(w,_,y);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(w,_,y){const F=d.Util.makeHexColor(w,_,y);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(w,_=null){let y;return this.cachedPatterns.has(w)?y=this.cachedPatterns.get(w):(y=(0,B.getShadingPattern)(this.getObject(w)),this.cachedPatterns.set(w,y)),_&&(y.matrix=_),y}shadingFill(w){if(!this.contentVisible)return;const _=this.ctx;this.save();const y=this._getPattern(w);_.fillStyle=y.getPattern(_,this,(0,S.getCurrentTransformInverse)(_),B.PathType.SHADING);const F=(0,S.getCurrentTransformInverse)(_);if(F){const{width:H,height:q}=_.canvas,[U,g,k,R]=d.Util.getAxialAlignedBoundingBox([0,0,H,q],F);this.ctx.fillRect(U,g,k-U,R-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,d.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,d.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(w,_){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform(...w),this.baseTransform=(0,S.getCurrentTransform)(this.ctx),_)){const y=_[2]-_[0],F=_[3]-_[1];this.ctx.rect(_[0],_[1],y,F),this.current.updateRectMinMax((0,S.getCurrentTransform)(this.ctx),_),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(w){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const _=this.ctx;w.isolated||(0,d.info)("TODO: Support non-isolated groups."),w.knockout&&(0,d.warn)("Knockout groups not supported.");const y=(0,S.getCurrentTransform)(_);if(w.matrix&&_.transform(...w.matrix),!w.bbox)throw new Error("Bounding box is required.");let F=d.Util.getAxialAlignedBoundingBox(w.bbox,(0,S.getCurrentTransform)(_));const H=[0,0,_.canvas.width,_.canvas.height];F=d.Util.intersect(F,H)||[0,0,0,0];const q=Math.floor(F[0]),U=Math.floor(F[1]);let g=Math.max(Math.ceil(F[2])-q,1),k=Math.max(Math.ceil(F[3])-U,1),R=1,z=1;g>f&&(R=g/f,g=f),k>f&&(z=k/f,k=f),this.current.startNewPathAndClipBox([0,0,g,k]);let $="groupAt"+this.groupLevel;w.smask&&($+="_smask_"+this.smaskCounter++%2);const X=this.cachedCanvases.getCanvas($,g,k),J=X.context;J.scale(1/R,1/z),J.translate(-q,-U),J.transform(...y),w.smask?this.smaskStack.push({canvas:X.canvas,context:J,offsetX:q,offsetY:U,scaleX:R,scaleY:z,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(q,U),_.scale(R,z),_.save()),o(_,J),this.ctx=J,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++}endGroup(w){if(!this.contentVisible)return;this.groupLevel--;const _=this.ctx,y=this.groupStack.pop();if(this.ctx=y,this.ctx.imageSmoothingEnabled=!1,w.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,S.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const H=d.Util.getAxialAlignedBoundingBox([0,0,_.canvas.width,_.canvas.height],F);this.ctx.drawImage(_.canvas,0,0),this.ctx.restore(),this.compose(H)}}beginAnnotation(w,_,y,F,H){if(this.#e(),m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(_)&&_.length===4){const q=_[2]-_[0],U=_[3]-_[1];if(H&&this.annotationCanvasMap){y=y.slice(),y[4]-=_[0],y[5]-=_[1],_=_.slice(),_[0]=_[1]=0,_[2]=q,_[3]=U;const[g,k]=d.Util.singularValueDecompose2dScale((0,S.getCurrentTransform)(this.ctx)),{viewportScale:R}=this,z=Math.ceil(q*this.outputScaleX*R),$=Math.ceil(U*this.outputScaleY*R);this.annotationCanvas=this.canvasFactory.create(z,$);const{canvas:X,context:J}=this.annotationCanvas;this.annotationCanvasMap.set(w,X),this.annotationCanvas.savedCtx=this.ctx,this.ctx=J,this.ctx.save(),this.ctx.setTransform(g,0,0,-k,0,U*k),m(this.ctx)}else m(this.ctx),this.ctx.rect(_[0],_[1],q,U),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...y),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(w){if(!this.contentVisible)return;const _=w.count;w=this.getObject(w.data,w),w.count=_;const y=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=v(w)),F.compiled)){F.compiled(y);return}const H=this._createMaskCanvas(w),q=H.canvas;y.save(),y.setTransform(1,0,0,1,0,0),y.drawImage(q,H.offsetX,H.offsetY),y.restore(),this.compose()}paintImageMaskXObjectRepeat(w,_,y=0,F=0,H,q){if(!this.contentVisible)return;w=this.getObject(w.data,w);const U=this.ctx;U.save();const g=(0,S.getCurrentTransform)(U);U.transform(_,y,F,H,0,0);const k=this._createMaskCanvas(w);U.setTransform(1,0,0,1,k.offsetX-g[4],k.offsetY-g[5]);for(let R=0,z=q.length;R<z;R+=2){const $=d.Util.transform(g,[_,y,F,H,q[R],q[R+1]]),[X,J]=d.Util.applyTransform([0,0],$);U.drawImage(k.canvas,X,J)}U.restore(),this.compose()}paintImageMaskXObjectGroup(w){if(!this.contentVisible)return;const _=this.ctx,y=this.current.fillColor,F=this.current.patternFill;for(const H of w){const{data:q,width:U,height:g,transform:k}=H,R=this.cachedCanvases.getCanvas("maskCanvas",U,g),z=R.context;z.save();const $=this.getObject(q,H);a(z,$),z.globalCompositeOperation="source-in",z.fillStyle=F?y.getPattern(z,this,(0,S.getCurrentTransformInverse)(_),B.PathType.FILL):y,z.fillRect(0,0,U,g),z.restore(),_.save(),_.transform(...k),_.scale(1,-1),b(_,R.canvas,0,0,U,g,0,-1,1,1),_.restore()}this.compose()}paintImageXObject(w){if(!this.contentVisible)return;const _=this.getObject(w);if(!_){(0,d.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(_)}paintImageXObjectRepeat(w,_,y,F){if(!this.contentVisible)return;const H=this.getObject(w);if(!H){(0,d.warn)("Dependent image isn't ready yet");return}const q=H.width,U=H.height,g=[];for(let k=0,R=F.length;k<R;k+=2)g.push({transform:[_,0,0,y,F[k],F[k+1]],x:0,y:0,w:q,h:U});this.paintInlineImageXObjectGroup(H,g)}applyTransferMapsToCanvas(w){return this.current.transferMaps!=="none"&&(w.filter=this.current.transferMaps,w.drawImage(w.canvas,0,0),w.filter="none"),w.canvas}applyTransferMapsToBitmap(w){if(this.current.transferMaps==="none")return w.bitmap;const{bitmap:_,width:y,height:F}=w,H=this.cachedCanvases.getCanvas("inlineImage",y,F),q=H.context;return q.filter=this.current.transferMaps,q.drawImage(_,0,0),q.filter="none",H.canvas}paintInlineImageXObject(w){if(!this.contentVisible)return;const _=w.width,y=w.height,F=this.ctx;if(this.save(),!d.isNodeJS){const{filter:U}=F;U!=="none"&&U!==""&&(F.filter="none")}F.scale(1/_,-1/y);let H;if(w.bitmap)H=this.applyTransferMapsToBitmap(w);else if(typeof HTMLElement=="function"&&w instanceof HTMLElement||!w.data)H=w;else{const g=this.cachedCanvases.getCanvas("inlineImage",_,y).context;L(g,w),H=this.applyTransferMapsToCanvas(g)}const q=this._scaleImage(H,(0,S.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=fe((0,S.getCurrentTransform)(F),w.interpolate),b(F,q.img,0,0,q.paintWidth,q.paintHeight,0,-y,_,y),this.compose(),this.restore()}paintInlineImageXObjectGroup(w,_){if(!this.contentVisible)return;const y=this.ctx;let F;if(w.bitmap)F=w.bitmap;else{const H=w.width,q=w.height,g=this.cachedCanvases.getCanvas("inlineImage",H,q).context;L(g,w),F=this.applyTransferMapsToCanvas(g)}for(const H of _)y.save(),y.transform(...H.transform),y.scale(1,-1),b(y,F,H.x,H.y,H.w,H.h,0,-1,1,1),y.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(w){}markPointProps(w,_){}beginMarkedContent(w){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(w,_){w==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(_)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(w){const _=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(w);const y=this.ctx;this.pendingClip&&(_||(this.pendingClip===ce?y.clip("evenodd"):y.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),y.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const w=(0,S.getCurrentTransform)(this.ctx);if(w[1]===0&&w[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(w[0]),Math.abs(w[3]));else{const _=Math.abs(w[0]*w[3]-w[2]*w[1]),y=Math.hypot(w[0],w[2]),F=Math.hypot(w[1],w[3]);this._cachedGetSinglePixelWidth=Math.max(y,F)/_}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:w}=this.current,{a:_,b:y,c:F,d:H}=this.ctx.getTransform();let q,U;if(y===0&&F===0){const g=Math.abs(_),k=Math.abs(H);if(g===k)if(w===0)q=U=1/g;else{const R=g*w;q=U=R<1?1/R:1}else if(w===0)q=1/g,U=1/k;else{const R=g*w,z=k*w;q=R<1?1/R:1,U=z<1?1/z:1}}else{const g=Math.abs(_*H-y*F),k=Math.hypot(_,y),R=Math.hypot(F,H);if(w===0)q=R/g,U=k/g;else{const z=w*g;q=R>z?R/z:1,U=k>z?k/z:1}}this._cachedScaleForStroking[0]=q,this._cachedScaleForStroking[1]=U}return this._cachedScaleForStroking}rescaleAndStroke(w){const{ctx:_}=this,{lineWidth:y}=this.current,[F,H]=this.getScaleForStroking();if(_.lineWidth=y||1,F===1&&H===1){_.stroke();return}const q=_.getLineDash();if(w&&_.save(),_.scale(F,H),q.length>0){const U=Math.max(F,H);_.setLineDash(q.map(g=>g/U)),_.lineDashOffset/=U}_.stroke(),w&&_.restore()}isContentVisible(){for(let w=this.markedContentStack.length-1;w>=0;w--)if(!this.markedContentStack[w].visible)return!1;return!0}}l.CanvasGraphics=V;for(const T in d.OPS)V.prototype[T]!==void 0&&(V.prototype[d.OPS[T]]=V.prototype[T])}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=A;var d=x(1),S=x(6);const B={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};l.PathType=B;function O(b,v){if(!v)return;const I=v[2]-v[0],L=v[3]-v[1],a=new Path2D;a.rect(v[0],v[1],I,L),b.clip(a)}class G{constructor(){this.constructor===G&&(0,d.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,d.unreachable)("Abstract method `getPattern` called.")}}class W extends G{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let I;this._type==="axial"?I=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(I=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const L of this._colorStops)I.addColorStop(L[0],L[1]);return I}getPattern(v,I,L,a){let o;if(a===B.STROKE||a===B.FILL){const m=I.current.getClippedPathBoundingBox(a,(0,S.getCurrentTransform)(v))||[0,0,0,0],D=Math.ceil(m[2]-m[0])||1,j=Math.ceil(m[3]-m[1])||1,N=I.cachedCanvases.getCanvas("pattern",D,j,!0),Q=N.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-m[0],-m[1]),L=d.Util.transform(L,[1,0,0,1,m[0],m[1]]),Q.transform(...I.baseTransform),this.matrix&&Q.transform(...this.matrix),O(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),o=v.createPattern(N.canvas,"no-repeat");const K=new DOMMatrix(L);o.setTransform(K)}else O(v,this._bbox),o=this._createGradient(v);return o}}function f(b,v,I,L,a,o,m,D){const j=v.coords,N=v.colors,Q=b.data,K=b.width*4;let fe;j[I+1]>j[L+1]&&(fe=I,I=L,L=fe,fe=o,o=m,m=fe),j[L+1]>j[a+1]&&(fe=L,L=a,a=fe,fe=m,m=D,D=fe),j[I+1]>j[L+1]&&(fe=I,I=L,L=fe,fe=o,o=m,m=fe);const se=(j[I]+v.offsetX)*v.scaleX,de=(j[I+1]+v.offsetY)*v.scaleY,ye=(j[L]+v.offsetX)*v.scaleX,ce=(j[L+1]+v.offsetY)*v.scaleY,V=(j[a]+v.offsetX)*v.scaleX,T=(j[a+1]+v.offsetY)*v.scaleY;if(de>=T)return;const w=N[o],_=N[o+1],y=N[o+2],F=N[m],H=N[m+1],q=N[m+2],U=N[D],g=N[D+1],k=N[D+2],R=Math.round(de),z=Math.round(T);let $,X,J,ae,_e,ie,le,ue;for(let pe=R;pe<=z;pe++){if(pe<ce){const Le=pe<de?0:(de-pe)/(de-ce);$=se-(se-ye)*Le,X=w-(w-F)*Le,J=_-(_-H)*Le,ae=y-(y-q)*Le}else{let Le;pe>T?Le=1:ce===T?Le=0:Le=(ce-pe)/(ce-T),$=ye-(ye-V)*Le,X=F-(F-U)*Le,J=H-(H-g)*Le,ae=q-(q-k)*Le}let ge;pe<de?ge=0:pe>T?ge=1:ge=(de-pe)/(de-T),_e=se-(se-V)*ge,ie=w-(w-U)*ge,le=_-(_-g)*ge,ue=y-(y-k)*ge;const Ee=Math.round(Math.min($,_e)),be=Math.round(Math.max($,_e));let Me=K*pe+Ee*4;for(let Le=Ee;Le<=be;Le++)ge=($-Le)/($-_e),ge<0?ge=0:ge>1&&(ge=1),Q[Me++]=X-(X-ie)*ge|0,Q[Me++]=J-(J-le)*ge|0,Q[Me++]=ae-(ae-ue)*ge|0,Q[Me++]=255}}function s(b,v,I){const L=v.coords,a=v.colors;let o,m;switch(v.type){case"lattice":const D=v.verticesPerRow,j=Math.floor(L.length/D)-1,N=D-1;for(o=0;o<j;o++){let Q=o*D;for(let K=0;K<N;K++,Q++)f(b,I,L[Q],L[Q+1],L[Q+D],a[Q],a[Q+1],a[Q+D]),f(b,I,L[Q+D+1],L[Q+1],L[Q+D],a[Q+D+1],a[Q+1],a[Q+D])}break;case"triangles":for(o=0,m=L.length;o<m;o+=3)f(b,I,L[o],L[o+1],L[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class u extends G{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,I,L){const D=Math.floor(this._bounds[0]),j=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-D,Q=Math.ceil(this._bounds[3])-j,K=Math.min(Math.ceil(Math.abs(N*v[0]*1.1)),3e3),fe=Math.min(Math.ceil(Math.abs(Q*v[1]*1.1)),3e3),se=N/K,de=Q/fe,ye={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-j,scaleX:1/se,scaleY:1/de},ce=K+4,V=fe+4,T=L.getCanvas("mesh",ce,V,!1),w=T.context,_=w.createImageData(K,fe);if(I){const F=_.data;for(let H=0,q=F.length;H<q;H+=4)F[H]=I[0],F[H+1]=I[1],F[H+2]=I[2],F[H+3]=255}for(const F of this._figures)s(_,F,ye);return w.putImageData(_,2,2),{canvas:T.canvas,offsetX:D-2*se,offsetY:j-2*de,scaleX:se,scaleY:de}}getPattern(v,I,L,a){O(v,this._bbox);let o;if(a===B.SHADING)o=d.Util.singularValueDecompose2dScale((0,S.getCurrentTransform)(v));else if(o=d.Util.singularValueDecompose2dScale(I.baseTransform),this.matrix){const D=d.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*D[0],o[1]*D[1]]}const m=this._createMeshCanvas(o,a===B.SHADING?null:this._background,I.cachedCanvases);return a!==B.SHADING&&(v.setTransform(...I.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(m.offsetX,m.offsetY),v.scale(m.scaleX,m.scaleY),v.createPattern(m.canvas,"no-repeat")}}class E extends G{getPattern(){return"hotpink"}}function A(b){switch(b[0]){case"RadialAxial":return new W(b);case"Mesh":return new u(b);case"Dummy":return new E}throw new Error(`Unknown IR type: ${b[0]}`)}const h={COLORED:1,UNCOLORED:2};class P{static MAX_PATTERN_SIZE=3e3;constructor(v,I,L,a,o){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=I,this.ctx=L,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(v){const I=this.operatorList,L=this.bbox,a=this.xstep,o=this.ystep,m=this.paintType,D=this.tilingType,j=this.color,N=this.canvasGraphicsFactory;(0,d.info)("TilingType: "+D);const Q=L[0],K=L[1],fe=L[2],se=L[3],de=d.Util.singularValueDecompose2dScale(this.matrix),ye=d.Util.singularValueDecompose2dScale(this.baseTransform),ce=[de[0]*ye[0],de[1]*ye[1]],V=this.getSizeAndScale(a,this.ctx.canvas.width,ce[0]),T=this.getSizeAndScale(o,this.ctx.canvas.height,ce[1]),w=v.cachedCanvases.getCanvas("pattern",V.size,T.size,!0),_=w.context,y=N.createCanvasGraphics(_);y.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(y,m,j);let F=Q,H=K,q=fe,U=se;return Q<0&&(F=0,q+=Math.abs(Q)),K<0&&(H=0,U+=Math.abs(K)),_.translate(-(V.scale*F),-(T.scale*H)),y.transform(V.scale,0,0,T.scale,0,0),_.save(),this.clipBbox(y,F,H,q,U),y.baseTransform=(0,S.getCurrentTransform)(y.ctx),y.executeOperatorList(I),y.endDrawing(),{canvas:w.canvas,scaleX:V.scale,scaleY:T.scale,offsetX:F,offsetY:H}}getSizeAndScale(v,I,L){v=Math.abs(v);const a=Math.max(P.MAX_PATTERN_SIZE,I);let o=Math.ceil(v*L);return o>=a?o=a:L=o/v,{scale:L,size:o}}clipBbox(v,I,L,a,o){const m=a-I,D=o-L;v.ctx.rect(I,L,m,D),v.current.updateRectMinMax((0,S.getCurrentTransform)(v.ctx),[I,L,a,o]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,I,L){const a=v.ctx,o=v.current;switch(I){case h.COLORED:const m=this.ctx;a.fillStyle=m.fillStyle,a.strokeStyle=m.strokeStyle,o.fillColor=m.fillStyle,o.strokeColor=m.strokeStyle;break;case h.UNCOLORED:const D=d.Util.makeHexColor(L[0],L[1],L[2]);a.fillStyle=D,a.strokeStyle=D,o.fillColor=D,o.strokeColor=D;break;default:throw new d.FormatError(`Unsupported paint type: ${I}`)}}getPattern(v,I,L,a){let o=L;a!==B.SHADING&&(o=d.Util.transform(o,I.baseTransform),this.matrix&&(o=d.Util.transform(o,this.matrix)));const m=this.createPatternCanvas(I);let D=new DOMMatrix(o);D=D.translate(m.offsetX,m.offsetY),D=D.scale(1/m.scaleX,1/m.scaleY);const j=v.createPattern(m.canvas,"repeat");return j.setTransform(D),j}}l.TilingPattern=P}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.convertBlackAndWhiteToRGBA=B,l.convertToRGBA=S,l.grayToRGBA=G;var d=x(1);function S(W){switch(W.kind){case d.ImageKind.GRAYSCALE_1BPP:return B(W);case d.ImageKind.RGB_24BPP:return O(W)}return null}function B({src:W,srcPos:f=0,dest:s,width:u,height:E,nonBlackColor:A=4294967295,inverseDecode:h=!1}){const P=d.FeatureTest.isLittleEndian?4278190080:255,[b,v]=h?[A,P]:[P,A],I=u>>3,L=u&7,a=W.length;s=new Uint32Array(s.buffer);let o=0;for(let m=0;m<E;m++){for(const j=f+I;f<j;f++){const N=f<a?W[f]:255;s[o++]=N&128?v:b,s[o++]=N&64?v:b,s[o++]=N&32?v:b,s[o++]=N&16?v:b,s[o++]=N&8?v:b,s[o++]=N&4?v:b,s[o++]=N&2?v:b,s[o++]=N&1?v:b}if(L===0)continue;const D=f<a?W[f++]:255;for(let j=0;j<L;j++)s[o++]=D&1<<7-j?v:b}return{srcPos:f,destPos:o}}function O({src:W,srcPos:f=0,dest:s,destPos:u=0,width:E,height:A}){let h=0;const P=W.length>>2,b=new Uint32Array(W.buffer,f,P);if(d.FeatureTest.isLittleEndian){for(;h<P-2;h+=3,u+=4){const v=b[h],I=b[h+1],L=b[h+2];s[u]=v|4278190080,s[u+1]=v>>>24|I<<8|4278190080,s[u+2]=I>>>16|L<<16|4278190080,s[u+3]=L>>>8|4278190080}for(let v=h*4,I=W.length;v<I;v+=3)s[u++]=W[v]|W[v+1]<<8|W[v+2]<<16|4278190080}else{for(;h<P-2;h+=3,u+=4){const v=b[h],I=b[h+1],L=b[h+2];s[u]=v|255,s[u+1]=v<<24|I>>>8|255,s[u+2]=I<<16|L>>>16|255,s[u+3]=L<<8|255}for(let v=h*4,I=W.length;v<I;v+=3)s[u++]=W[v]<<24|W[v+1]<<16|W[v+2]<<8|255}return{srcPos:f,destPos:u}}function G(W,f){if(d.FeatureTest.isLittleEndian)for(let s=0,u=W.length;s<u;s++)f[s]=W[s]*65793|4278190080;else for(let s=0,u=W.length;s<u;s++)f[s]=W[s]*16843008|255}}),((C,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const x=Object.create(null);l.GlobalWorkerOptions=x,x.workerPort=null,x.workerSrc=""}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var d=x(1);const S={DATA:1,ERROR:2},B={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function O(W){switch(W instanceof Error||typeof W=="object"&&W!==null||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),W.name){case"AbortException":return new d.AbortException(W.message);case"MissingPDFException":return new d.MissingPDFException(W.message);case"PasswordException":return new d.PasswordException(W.message,W.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(W.message,W.status);case"UnknownErrorException":return new d.UnknownErrorException(W.message,W.details);default:return new d.UnknownErrorException(W.message,W.toString())}}class G{constructor(f,s,u){this.sourceName=f,this.targetName=s,this.comObj=u,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const A=E.data;if(A.targetName!==this.sourceName)return;if(A.stream){this.#t(A);return}if(A.callback){const P=A.callbackId,b=this.callbackCapabilities[P];if(!b)throw new Error(`Cannot resolve callback ${P}`);if(delete this.callbackCapabilities[P],A.callback===S.DATA)b.resolve(A.data);else if(A.callback===S.ERROR)b.reject(O(A.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[A.action];if(!h)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){const P=this.sourceName,b=A.sourceName;new Promise(function(v){v(h(A.data))}).then(function(v){u.postMessage({sourceName:P,targetName:b,callback:S.DATA,callbackId:A.callbackId,data:v})},function(v){u.postMessage({sourceName:P,targetName:b,callback:S.ERROR,callbackId:A.callbackId,reason:O(v)})});return}if(A.streamId){this.#e(A);return}h(A.data)},u.addEventListener("message",this._onComObjOnMessage)}on(f,s){const u=this.actionHandler;if(u[f])throw new Error(`There is already an actionName called "${f}"`);u[f]=s}send(f,s,u){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:s},u)}sendWithPromise(f,s,u){const E=this.callbackId++,A=new d.PromiseCapability;this.callbackCapabilities[E]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:E,data:s},u)}catch(h){A.reject(h)}return A.promise}sendWithStream(f,s,u,E){const A=this.streamId++,h=this.sourceName,P=this.targetName,b=this.comObj;return new ReadableStream({start:v=>{const I=new d.PromiseCapability;return this.streamControllers[A]={controller:v,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:h,targetName:P,action:f,streamId:A,data:s,desiredSize:v.desiredSize},E),I.promise},pull:v=>{const I=new d.PromiseCapability;return this.streamControllers[A].pullCall=I,b.postMessage({sourceName:h,targetName:P,stream:B.PULL,streamId:A,desiredSize:v.desiredSize}),I.promise},cancel:v=>{(0,d.assert)(v instanceof Error,"cancel must have a valid reason");const I=new d.PromiseCapability;return this.streamControllers[A].cancelCall=I,this.streamControllers[A].isClosed=!0,b.postMessage({sourceName:h,targetName:P,stream:B.CANCEL,streamId:A,reason:O(v)}),I.promise}},u)}#e(f){const s=f.streamId,u=this.sourceName,E=f.sourceName,A=this.comObj,h=this,P=this.actionHandler[f.action],b={enqueue(v,I=1,L){if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=I,a>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),A.postMessage({sourceName:u,targetName:E,stream:B.ENQUEUE,streamId:s,chunk:v},L)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:u,targetName:E,stream:B.CLOSE,streamId:s}),delete h.streamSinks[s])},error(v){(0,d.assert)(v instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:u,targetName:E,stream:B.ERROR,streamId:s,reason:O(v)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[s]=b,new Promise(function(v){v(P(f.data,b))}).then(function(){A.postMessage({sourceName:u,targetName:E,stream:B.START_COMPLETE,streamId:s,success:!0})},function(v){A.postMessage({sourceName:u,targetName:E,stream:B.START_COMPLETE,streamId:s,reason:O(v)})})}#t(f){const s=f.streamId,u=this.sourceName,E=f.sourceName,A=this.comObj,h=this.streamControllers[s],P=this.streamSinks[s];switch(f.stream){case B.START_COMPLETE:f.success?h.startCall.resolve():h.startCall.reject(O(f.reason));break;case B.PULL_COMPLETE:f.success?h.pullCall.resolve():h.pullCall.reject(O(f.reason));break;case B.PULL:if(!P){A.postMessage({sourceName:u,targetName:E,stream:B.PULL_COMPLETE,streamId:s,success:!0});break}P.desiredSize<=0&&f.desiredSize>0&&P.sinkCapability.resolve(),P.desiredSize=f.desiredSize,new Promise(function(b){b(P.onPull?.())}).then(function(){A.postMessage({sourceName:u,targetName:E,stream:B.PULL_COMPLETE,streamId:s,success:!0})},function(b){A.postMessage({sourceName:u,targetName:E,stream:B.PULL_COMPLETE,streamId:s,reason:O(b)})});break;case B.ENQUEUE:if((0,d.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(f.chunk);break;case B.CLOSE:if((0,d.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this.#n(h,s);break;case B.ERROR:(0,d.assert)(h,"error should have stream controller"),h.controller.error(O(f.reason)),this.#n(h,s);break;case B.CANCEL_COMPLETE:f.success?h.cancelCall.resolve():h.cancelCall.reject(O(f.reason)),this.#n(h,s);break;case B.CANCEL:if(!P)break;new Promise(function(b){b(P.onCancel?.(O(f.reason)))}).then(function(){A.postMessage({sourceName:u,targetName:E,stream:B.CANCEL_COMPLETE,streamId:s,success:!0})},function(b){A.postMessage({sourceName:u,targetName:E,stream:B.CANCEL_COMPLETE,streamId:s,reason:O(b)})}),P.sinkCapability.reject(O(f.reason)),P.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}}async#n(f,s){await Promise.allSettled([f.startCall?.promise,f.pullCall?.promise,f.cancelCall?.promise]),delete this.streamControllers[s]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}l.MessageHandler=G}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var d=x(1);class S{#e;#t;constructor({parsedData:O,rawData:G}){this.#e=O,this.#t=G}getRaw(){return this.#t}get(O){return this.#e.get(O)??null}getAll(){return(0,d.objectFromMap)(this.#e)}has(O){return this.#e.has(O)}}l.Metadata=S}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var d=x(1),S=x(8);const B=Symbol("INTERNAL");class O{#e=!0;constructor(f,s){this.name=f,this.intent=s}get visible(){return this.#e}_setVisible(f,s){f!==B&&(0,d.unreachable)("Internal method `_setVisible` called."),this.#e=s}}class G{#e=null;#t=new Map;#n=null;#r=null;constructor(f){if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,this.#r=f.order;for(const s of f.groups)this.#t.set(s.id,new O(s.name,s.intent));if(f.baseState==="OFF")for(const s of this.#t.values())s._setVisible(B,!1);for(const s of f.on)this.#t.get(s)._setVisible(B,!0);for(const s of f.off)this.#t.get(s)._setVisible(B,!1);this.#n=this.getHash()}}#a(f){const s=f.length;if(s<2)return!0;const u=f[0];for(let E=1;E<s;E++){const A=f[E];let h;if(Array.isArray(A))h=this.#a(A);else if(this.#t.has(A))h=this.#t.get(A).visible;else return(0,d.warn)(`Optional content group not found: ${A}`),!0;switch(u){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return u==="And"}isVisible(f){if(this.#t.size===0)return!0;if(!f)return(0,d.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return this.#t.has(f.id)?this.#t.get(f.id).visible:((0,d.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return this.#a(f.expression);if(!f.policy||f.policy==="AnyOn"){for(const s of f.ids){if(!this.#t.has(s))return(0,d.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const s of f.ids){if(!this.#t.has(s))return(0,d.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const s of f.ids){if(!this.#t.has(s))return(0,d.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const s of f.ids){if(!this.#t.has(s))return(0,d.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!1}return!0}return(0,d.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,d.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,s=!0){if(!this.#t.has(f)){(0,d.warn)(`Optional content group not found: ${f}`);return}this.#t.get(f)._setVisible(B,!!s),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,d.objectFromMap)(this.#t):null}getGroup(f){return this.#t.get(f)||null}getHash(){if(this.#e!==null)return this.#e;const f=new S.MurmurHash3_64;for(const[s,u]of this.#t)f.update(`${s}:${u.visible}`);return this.#e=f.hexdigest()}}l.OptionalContentConfig=G}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var d=x(1),S=x(6);class B{constructor({length:f,initialData:s,progressiveDone:u=!1,contentDispositionFilename:E=null,disableRange:A=!1,disableStream:h=!1},P){if((0,d.assert)(P,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=E,s?.length>0){const b=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=P,this._isStreamingSupported=!h,this._isRangeSupported=!A,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,v)=>{this._onReceiveData({begin:b,chunk:v})}),this._pdfDataRangeTransport.addProgressListener((b,v)=>{this._onProgress({loaded:b,total:v})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:f,chunk:s}){const u=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(u):this._queuedChunks.push(u);else{const E=this._rangeReaders.some(function(A){return A._begin!==f?!1:(A._enqueue(u),!0)});(0,d.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(f){f.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:f.loaded}):this._fullRequestReader?.onProgress?.({loaded:f.loaded,total:f.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const s=this._rangeReaders.indexOf(f);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){(0,d.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new O(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,s){if(s<=this._progressiveDataLength)return null;const u=new G(this,f,s);return this._pdfDataRangeTransport.requestDataRange(f,s),this._rangeReaders.push(u),u}cancelAllRequests(f){this._fullRequestReader?.cancel(f);for(const s of this._rangeReaders.slice(0))s.cancel(f);this._pdfDataRangeTransport.abort()}}l.PDFDataTransportStream=B;class O{constructor(f,s,u=!1,E=null){this._stream=f,this._done=u||!1,this._filename=(0,S.isPdfFile)(E)?E:null,this._queuedChunks=s||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=new d.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G{constructor(f,s,u){this._stream=f,this._begin=s,this._end=u,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const f=new d.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var d=x(1),S=x(20);function B(u,E,A){return{method:"GET",headers:u,signal:A.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function O(u){const E=new Headers;for(const A in u){const h=u[A];h!==void 0&&E.append(A,h)}return E}function G(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:((0,d.warn)(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class W{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}getRangeReader(E,A){if(A<=this._progressiveDataLength)return null;const h=new s(this,E,A);return this._rangeRequestReaders.push(h),h}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const A of this._rangeRequestReaders.slice(0))A.cancel(E)}}l.PDFFetchStream=W;class f{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const A=E.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=new d.PromiseCapability,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=O(this._stream.httpHeaders);const h=A.url;fetch(h,B(this._headers,this._withCredentials,this._abortController)).then(P=>{if(!(0,S.validateResponseStatus)(P.status))throw(0,S.createResponseStatusError)(P.status,h);this._reader=P.body.getReader(),this._headersCapability.resolve();const b=L=>P.headers.get(L),{allowRangeRequests:v,suggestedLength:I}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=I||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new d.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:G(E),done:!1})}cancel(E){this._reader?.cancel(E),this._abortController.abort()}}class s{constructor(E,A,h){this._stream=E,this._reader=null,this._loaded=0;const P=E.source;this._withCredentials=P.withCredentials||!1,this._readCapability=new d.PromiseCapability,this._isStreamingSupported=!P.disableStream,this._abortController=new AbortController,this._headers=O(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${h-1}`);const b=P.url;fetch(b,B(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,S.validateResponseStatus)(v.status))throw(0,S.createResponseStatusError)(v.status,b);this._readCapability.resolve(),this._reader=v.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,this.onProgress?.({loaded:this._loaded}),{value:G(E),done:!1})}cancel(E){this._reader?.cancel(E),this._abortController.abort()}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=W,l.extractFilenameFromHeader=G,l.validateRangeRequestCapabilities=O,l.validateResponseStatus=f;var d=x(1),S=x(21),B=x(6);function O({getResponseHeader:s,isHttp:u,rangeChunkSize:E,disableRange:A}){const h={allowRangeRequests:!1,suggestedLength:void 0},P=parseInt(s("Content-Length"),10);return!Number.isInteger(P)||(h.suggestedLength=P,P<=2*E)||A||!u||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function G(s){const u=s("Content-Disposition");if(u){let E=(0,S.getFilenameFromContentDispositionHeader)(u);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,B.isPdfFile)(E))return E}return null}function W(s,u){return s===404||s===0&&u.startsWith("file:")?new d.MissingPDFException('Missing PDF "'+u+'".'):new d.UnexpectedResponseException(`Unexpected server response (${s}) while retrieving PDF "${u}".`,s)}function f(s){return s===200||s===206}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=S;var d=x(1);function S(B){let O=!0,G=W("filename\\*","i").exec(B);if(G){G=G[1];let P=E(G);return P=unescape(P),P=A(P),P=h(P),s(P)}if(G=u(B),G){const P=h(G);return s(P)}if(G=W("filename","i").exec(B),G){G=G[1];let P=E(G);return P=h(P),s(P)}function W(P,b){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function f(P,b){if(P){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(P,{fatal:!0}),I=(0,d.stringToBytes)(b);b=v.decode(I),O=!1}catch{}}return b}function s(P){return O&&/[\x80-\xff]/.test(P)&&(P=f("utf-8",P),O&&(P=f("iso-8859-1",P))),P}function u(P){const b=[];let v;const I=W("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=I.exec(P))!==null;){let[,a,o,m]=v;if(a=parseInt(a,10),a in b){if(a===0)break;continue}b[a]=[o,m]}const L=[];for(let a=0;a<b.length&&a in b;++a){let[o,m]=b[a];m=E(m),o&&(m=unescape(m),a===0&&(m=A(m))),L.push(m)}return L.join("")}function E(P){if(P.startsWith('"')){const b=P.slice(1).split('\\"');for(let v=0;v<b.length;++v){const I=b[v].indexOf('"');I!==-1&&(b[v]=b[v].slice(0,I),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}P=b.join('"')}return P}function A(P){const b=P.indexOf("'");if(b===-1)return P;const v=P.slice(0,b),L=P.slice(b+1).replace(/^[^']*'/,"");return f(v,L)}function h(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,I,L){if(I==="q"||I==="Q")return L=L.replaceAll("_"," "),L=L.replaceAll(/=([0-9a-fA-F]{2})/g,function(a,o){return String.fromCharCode(parseInt(o,16))}),f(v,L);try{L=atob(L)}catch{}return f(v,L)})}return""}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var d=x(1),S=x(20);const B=200,O=206;function G(E){const A=E.response;return typeof A!="string"?A:(0,d.stringToBytes)(A).buffer}class W{constructor(A,h={}){this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,h,P){const b={begin:A,end:h};for(const v in P)b[v]=P[v];return this.request(b)}requestFull(A){return this.request(A)}request(A){const h=new XMLHttpRequest,P=this.currXhrId++,b=this.pendingRequests[P]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const v in this.httpHeaders){const I=this.httpHeaders[v];I!==void 0&&h.setRequestHeader(v,I)}return this.isHttp&&"begin"in A&&"end"in A?(h.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),b.expectedStatus=O):b.expectedStatus=B,h.responseType="arraybuffer",A.onError&&(h.onerror=function(v){A.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,P),h.onprogress=this.onProgress.bind(this,P),b.onHeadersReceived=A.onHeadersReceived,b.onDone=A.onDone,b.onError=A.onError,b.onProgress=A.onProgress,h.send(null),P}onProgress(A,h){const P=this.pendingRequests[A];P&&P.onProgress?.(h)}onStateChange(A,h){const P=this.pendingRequests[A];if(!P)return;const b=P.xhr;if(b.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),b.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],b.status===0&&this.isHttp){P.onError?.(b.status);return}const v=b.status||B;if(!(v===B&&P.expectedStatus===O)&&v!==P.expectedStatus){P.onError?.(b.status);return}const L=G(b);if(v===O){const a=b.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);P.onDone({begin:parseInt(o[1],10),chunk:L})}else L?P.onDone({begin:0,chunk:L}):P.onError?.(b.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const h=this.pendingRequests[A].xhr;delete this.pendingRequests[A],h.abort()}}class f{constructor(A){this._source=A,this._manager=new W(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const h=this._rangeRequestReaders.indexOf(A);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(A,h){const P=new u(this._manager,A,h);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(A){this._fullRequestReader?.cancel(A);for(const h of this._rangeRequestReaders.slice(0))h.cancel(A)}}l.PDFNetworkStream=f;class s{constructor(A,h){this._manager=A;const P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=A.requestFull(P),this._headersReceivedCapability=new d.PromiseCapability,this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,h=this._manager.getRequestXhr(A),P=I=>h.getResponseHeader(I),{allowRangeRequests:b,suggestedLength:v}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=v||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,S.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){this.onProgress?.({loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=new d.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class u{constructor(A,h,P){this._manager=A;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(h,P,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(A){const h=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,S.createResponseStatusError)(A,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){this.isStreamingSupported||this.onProgress?.({loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const A=new d.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var d=x(1),S=x(20);const B=/^file:\/\/\/[a-zA-Z]:\//;function O(P){const b=require$$5,v=b.parse(P);return v.protocol==="file:"||v.host?v:/^[a-z]:[/\\]/i.test(P)?b.parse(`file:///${P}`):(v.host||(v.protocol="file:"),v)}class G{constructor(b){this.source=b,this.url=O(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new u(this),this._fullRequestReader}getRangeReader(b,v){if(v<=this._progressiveDataLength)return null;const I=this.isFsUrl?new h(this,b,v):new E(this,b,v);return this._rangeRequestReaders.push(I),I}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const v of this._rangeRequestReaders.slice(0))v.cancel(b)}}l.PDFNodeStream=G;class W{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const v=b.source;this._contentLength=v.length,this._loaded=0,this._filename=null,this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._readableStream=null,this._readCapability=new d.PromiseCapability,this._headersCapability=new d.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",v=>{this._error(v)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new d.PromiseCapability;const v=b.source;this._isStreamingSupported=!v.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=b.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",v=>{this._error(v)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function s(P,b){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:b}}class u extends W{constructor(b){super(b);const v=I=>{if(I.statusCode===404){const m=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(I);const L=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:a,suggestedLength:o}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:L,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(L)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(s(this._url,b.httpHeaders),v)}else{const I=require$$5;this._request=I.request(s(this._url,b.httpHeaders),v)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class E extends f{constructor(b,v,I){super(b),this._httpHeaders={};for(const a in b.httpHeaders){const o=b.httpHeaders[a];o!==void 0&&(this._httpHeaders[a]=o)}this._httpHeaders.Range=`bytes=${v}-${I-1}`;const L=a=>{if(a.statusCode===404){const o=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};if(this._request=null,this._url.protocol==="http:"){const a=require$$5;this._request=a.request(s(this._url,this._httpHeaders),L)}else{const a=require$$5;this._request=a.request(s(this._url,this._httpHeaders),L)}this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class A extends W{constructor(b){super(b);let v=decodeURIComponent(this._url.path);B.test(this._url.href)&&(v=v.replace(/^\//,""));const I=require$$5;I.lstat(v,(L,a)=>{if(L){L.code==="ENOENT"&&(L=new d.MissingPDFException(`Missing PDF "${v}".`)),this._storedError=L,this._headersCapability.reject(L);return}this._contentLength=a.size,this._setReadableStream(I.createReadStream(v)),this._headersCapability.resolve()})}}class h extends f{constructor(b,v,I){super(b);let L=decodeURIComponent(this._url.path);B.test(this._url.href)&&(L=L.replace(/^\//,""));const a=require$$5;this._setReadableStream(a.createReadStream(L,{start:v,end:I-1}))}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var d=x(6),S=x(1);const B={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},O="http://www.w3.org/XML/1998/namespace",G="http://www.w3.org/1999/xlink",W=["butt","round","square"],f=["miter","round","bevel"],s=function(a,o="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([a],{type:o}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j=`data:${o};base64,`;for(let N=0,Q=a.length;N<Q;N+=3){const K=a[N]&255,fe=a[N+1]&255,se=a[N+2]&255,de=K>>2,ye=(K&3)<<4|fe>>4,ce=N+1<Q?(fe&15)<<2|se>>6:64,V=N+2<Q?se&63:64;j+=D[de]+D[ye]+D[ce]+D[V]}return j},u=(function(){const a=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,m=new Int32Array(256);for(let se=0;se<256;se++){let de=se;for(let ye=0;ye<8;ye++)de=de&1?3988292384^de>>1&2147483647:de>>1&2147483647;m[se]=de}function D(se,de,ye){let ce=-1;for(let V=de;V<ye;V++){const T=(ce^se[V])&255,w=m[T];ce=ce>>>8^w}return ce^-1}function j(se,de,ye,ce){let V=ce;const T=de.length;ye[V]=T>>24&255,ye[V+1]=T>>16&255,ye[V+2]=T>>8&255,ye[V+3]=T&255,V+=4,ye[V]=se.charCodeAt(0)&255,ye[V+1]=se.charCodeAt(1)&255,ye[V+2]=se.charCodeAt(2)&255,ye[V+3]=se.charCodeAt(3)&255,V+=4,ye.set(de,V),V+=de.length;const w=D(ye,ce+4,V);ye[V]=w>>24&255,ye[V+1]=w>>16&255,ye[V+2]=w>>8&255,ye[V+3]=w&255}function N(se,de,ye){let ce=1,V=0;for(let T=de;T<ye;++T)ce=(ce+(se[T]&255))%65521,V=(V+ce)%65521;return V<<16|ce}function Q(se){if(!S.isNodeJS)return K(se);try{const de=parseInt(process.versions.node)>=8?se:Buffer.from(se),ye=require$$5.deflateSync(de,{level:9});return ye instanceof Uint8Array?ye:new Uint8Array(ye)}catch(de){(0,S.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+de)}return K(se)}function K(se){let de=se.length;const ye=65535,ce=Math.ceil(de/ye),V=new Uint8Array(2+de+ce*5+4);let T=0;V[T++]=120,V[T++]=156;let w=0;for(;de>ye;)V[T++]=0,V[T++]=255,V[T++]=255,V[T++]=0,V[T++]=0,V.set(se.subarray(w,w+ye),T),T+=ye,w+=ye,de-=ye;V[T++]=1,V[T++]=de&255,V[T++]=de>>8&255,V[T++]=~de&65535&255,V[T++]=(~de&65535)>>8&255,V.set(se.subarray(w),T),T+=se.length-w;const _=N(se,0,se.length);return V[T++]=_>>24&255,V[T++]=_>>16&255,V[T++]=_>>8&255,V[T++]=_&255,V}function fe(se,de,ye,ce){const V=se.width,T=se.height;let w,_,y;const F=se.data;switch(de){case S.ImageKind.GRAYSCALE_1BPP:_=0,w=1,y=V+7>>3;break;case S.ImageKind.RGB_24BPP:_=2,w=8,y=V*3;break;case S.ImageKind.RGBA_32BPP:_=6,w=8,y=V*4;break;default:throw new Error("invalid format")}const H=new Uint8Array((1+y)*T);let q=0,U=0;for(let X=0;X<T;++X)H[q++]=0,H.set(F.subarray(U,U+y),q),U+=y,q+=y;if(de===S.ImageKind.GRAYSCALE_1BPP&&ce){q=0;for(let X=0;X<T;X++){q++;for(let J=0;J<y;J++)H[q++]^=255}}const g=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,V&255,T>>24&255,T>>16&255,T>>8&255,T&255,w,_,0,0,0]),k=Q(H),R=a.length+o*3+g.length+k.length,z=new Uint8Array(R);let $=0;return z.set(a,$),$+=a.length,j("IHDR",g,z,$),$+=o+g.length,j("IDATA",k,z,$),$+=o+k.length,j("IEND",new Uint8Array(0),z,$),s(z,"image/png",ye)}return function(de,ye,ce){const V=de.kind===void 0?S.ImageKind.GRAYSCALE_1BPP:de.kind;return fe(de,V,ye,ce)}})();class E{constructor(){this.fontSizeScale=1,this.fontWeight=B.fontWeight,this.fontSize=0,this.textMatrix=S.IDENTITY_MATRIX,this.fontMatrix=S.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=S.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=B.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,m){this.x=o,this.y=m}}function A(a){let o=[];const m=[];for(const D of a){if(D.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),m.push(o),o=o.at(-1).items;continue}D.fn==="restore"?o=m.pop():o.push(D)}return o}function h(a){if(Number.isInteger(a))return a.toString();const o=a.toFixed(10);let m=o.length-1;if(o[m]!=="0")return o;do m--;while(o[m]==="0");return o.substring(0,o[m]==="."?m:m+1)}function P(a){if(a[4]===0&&a[5]===0){if(a[1]===0&&a[2]===0)return a[0]===1&&a[3]===1?"":`scale(${h(a[0])} ${h(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){const o=Math.acos(a[0])*180/Math.PI;return`rotate(${h(o)})`}}else if(a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1)return`translate(${h(a[4])} ${h(a[5])})`;return`matrix(${h(a[0])} ${h(a[1])} ${h(a[2])} ${h(a[3])} ${h(a[4])} ${h(a[5])})`}let b=0,v=0,I=0;class L{constructor(o,m,D=!1){(0,d.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new d.DOMSVGFactory,this.current=new E,this.transformMatrix=S.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=m,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const j in S.OPS)this._operatorIdMapping[S.OPS[j]]=j}getObject(o,m=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):m}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const m=o.fnArray,D=o.argsArray;for(let j=0,N=m.length;j<N;j++)if(m[j]===S.OPS.dependency)for(const Q of D[j]){const K=Q.startsWith("g_")?this.commonObjs:this.objs,fe=new Promise(se=>{K.get(Q,se)});this.current.dependencies.push(fe)}return Promise.all(this.current.dependencies)}transform(o,m,D,j,N,Q){const K=[o,m,D,j,N,Q];this.transformMatrix=S.Util.transform(this.transformMatrix,K),this.tgrp=null}getSVG(o,m){this.viewport=m;const D=this._initialize(m);return this.loadDependencies(o).then(()=>(this.transformMatrix=S.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),D))}convertOpList(o){const m=this._operatorIdMapping,D=o.argsArray,j=o.fnArray,N=[];for(let Q=0,K=j.length;Q<K;Q++){const fe=j[Q];N.push({fnId:fe,fn:m[fe],args:D[Q]})}return A(N)}executeOpTree(o){for(const m of o){const D=m.fn,j=m.fnId,N=m.args;switch(j|0){case S.OPS.beginText:this.beginText();break;case S.OPS.dependency:break;case S.OPS.setLeading:this.setLeading(N);break;case S.OPS.setLeadingMoveText:this.setLeadingMoveText(N[0],N[1]);break;case S.OPS.setFont:this.setFont(N);break;case S.OPS.showText:this.showText(N[0]);break;case S.OPS.showSpacedText:this.showText(N[0]);break;case S.OPS.endText:this.endText();break;case S.OPS.moveText:this.moveText(N[0],N[1]);break;case S.OPS.setCharSpacing:this.setCharSpacing(N[0]);break;case S.OPS.setWordSpacing:this.setWordSpacing(N[0]);break;case S.OPS.setHScale:this.setHScale(N[0]);break;case S.OPS.setTextMatrix:this.setTextMatrix(N[0],N[1],N[2],N[3],N[4],N[5]);break;case S.OPS.setTextRise:this.setTextRise(N[0]);break;case S.OPS.setTextRenderingMode:this.setTextRenderingMode(N[0]);break;case S.OPS.setLineWidth:this.setLineWidth(N[0]);break;case S.OPS.setLineJoin:this.setLineJoin(N[0]);break;case S.OPS.setLineCap:this.setLineCap(N[0]);break;case S.OPS.setMiterLimit:this.setMiterLimit(N[0]);break;case S.OPS.setFillRGBColor:this.setFillRGBColor(N[0],N[1],N[2]);break;case S.OPS.setStrokeRGBColor:this.setStrokeRGBColor(N[0],N[1],N[2]);break;case S.OPS.setStrokeColorN:this.setStrokeColorN(N);break;case S.OPS.setFillColorN:this.setFillColorN(N);break;case S.OPS.shadingFill:this.shadingFill(N[0]);break;case S.OPS.setDash:this.setDash(N[0],N[1]);break;case S.OPS.setRenderingIntent:this.setRenderingIntent(N[0]);break;case S.OPS.setFlatness:this.setFlatness(N[0]);break;case S.OPS.setGState:this.setGState(N[0]);break;case S.OPS.fill:this.fill();break;case S.OPS.eoFill:this.eoFill();break;case S.OPS.stroke:this.stroke();break;case S.OPS.fillStroke:this.fillStroke();break;case S.OPS.eoFillStroke:this.eoFillStroke();break;case S.OPS.clip:this.clip("nonzero");break;case S.OPS.eoClip:this.clip("evenodd");break;case S.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case S.OPS.paintImageXObject:this.paintImageXObject(N[0]);break;case S.OPS.paintInlineImageXObject:this.paintInlineImageXObject(N[0]);break;case S.OPS.paintImageMaskXObject:this.paintImageMaskXObject(N[0]);break;case S.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(N[0],N[1]);break;case S.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case S.OPS.closePath:this.closePath();break;case S.OPS.closeStroke:this.closeStroke();break;case S.OPS.closeFillStroke:this.closeFillStroke();break;case S.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case S.OPS.nextLine:this.nextLine();break;case S.OPS.transform:this.transform(N[0],N[1],N[2],N[3],N[4],N[5]);break;case S.OPS.constructPath:this.constructPath(N[0],N[1]);break;case S.OPS.endPath:this.endPath();break;case 92:this.group(m.items);break;default:(0,S.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,m,D,j,N,Q){const K=this.current;K.textMatrix=K.lineMatrix=[o,m,D,j,N,Q],K.textMatrixScale=Math.hypot(o,m),K.x=K.lineX=0,K.y=K.lineY=0,K.xcoords=[],K.ycoords=[],K.tspan=this.svgFactory.createElement("svg:tspan"),K.tspan.setAttributeNS(null,"font-family",K.fontFamily),K.tspan.setAttributeNS(null,"font-size",`${h(K.fontSize)}px`),K.tspan.setAttributeNS(null,"y",h(-K.y)),K.txtElement=this.svgFactory.createElement("svg:text"),K.txtElement.append(K.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=S.IDENTITY_MATRIX,o.lineMatrix=S.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,m){const D=this.current;D.x=D.lineX+=o,D.y=D.lineY+=m,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${h(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",h(-D.y))}showText(o){const m=this.current,D=m.font,j=m.fontSize;if(j===0)return;const N=m.fontSizeScale,Q=m.charSpacing,K=m.wordSpacing,fe=m.fontDirection,se=m.textHScale*fe,de=D.vertical,ye=de?1:-1,ce=D.defaultVMetrics,V=j*m.fontMatrix[0];let T=0;for(const y of o){if(y===null){T+=fe*K;continue}else if(typeof y=="number"){T+=ye*y*j/1e3;continue}const F=(y.isSpace?K:0)+Q,H=y.fontChar;let q,U,g=y.width;if(de){let R;const z=y.vmetric||ce;R=y.vmetric?z[1]:g*.5,R=-R*V;const $=z[2]*V;g=z?-z[0]:g,q=R/N,U=(T+$)/N}else q=T/N,U=0;(y.isInFont||D.missingFile)&&(m.xcoords.push(m.x+q),de&&m.ycoords.push(-m.y+U),m.tspan.textContent+=H);const k=de?g*V-F*fe:g*V+F*fe;T+=k}m.tspan.setAttributeNS(null,"x",m.xcoords.map(h).join(" ")),de?m.tspan.setAttributeNS(null,"y",m.ycoords.map(h).join(" ")):m.tspan.setAttributeNS(null,"y",h(-m.y)),de?m.y-=T:m.x+=T*se,m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${h(m.fontSize)}px`),m.fontStyle!==B.fontStyle&&m.tspan.setAttributeNS(null,"font-style",m.fontStyle),m.fontWeight!==B.fontWeight&&m.tspan.setAttributeNS(null,"font-weight",m.fontWeight);const w=m.textRenderingMode&S.TextRenderingMode.FILL_STROKE_MASK;if(w===S.TextRenderingMode.FILL||w===S.TextRenderingMode.FILL_STROKE?(m.fillColor!==B.fillColor&&m.tspan.setAttributeNS(null,"fill",m.fillColor),m.fillAlpha<1&&m.tspan.setAttributeNS(null,"fill-opacity",m.fillAlpha)):m.textRenderingMode===S.TextRenderingMode.ADD_TO_PATH?m.tspan.setAttributeNS(null,"fill","transparent"):m.tspan.setAttributeNS(null,"fill","none"),w===S.TextRenderingMode.STROKE||w===S.TextRenderingMode.FILL_STROKE){const y=1/(m.textMatrixScale||1);this._setStrokeAttributes(m.tspan,y)}let _=m.textMatrix;m.textRise!==0&&(_=_.slice(),_[5]+=m.textRise),m.txtElement.setAttributeNS(null,"transform",`${P(_)} scale(${h(se)}, -1)`),m.txtElement.setAttributeNS(O,"xml:space","preserve"),m.txtElement.append(m.tspan),m.txtgrp.append(m.txtElement),this._ensureTransformGroup().append(m.txtElement)}setLeadingMoveText(o,m){this.setLeading(-m),this.moveText(o,m)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const m=s(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${m}); }
`}setFont(o){const m=this.current,D=this.commonObjs.get(o[0]);let j=o[1];m.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),m.fontMatrix=D.fontMatrix||S.FONT_IDENTITY_MATRIX;let N="normal";D.black?N="900":D.bold&&(N="bold");const Q=D.italic?"italic":"normal";j<0?(j=-j,m.fontDirection=-1):m.fontDirection=1,m.fontSize=j,m.fontFamily=D.loadedName,m.fontWeight=N,m.fontStyle=Q,m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"y",h(-m.y)),m.xcoords=[],m.ycoords=[]}endText(){const o=this.current;o.textRenderingMode&S.TextRenderingMode.ADD_TO_PATH_FLAG&&o.txtElement?.hasChildNodes()&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=W[o]}setLineJoin(o){this.current.lineJoin=f[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,m,D){this.current.strokeColor=S.Util.makeHexColor(o,m,D)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,m,D){this.current.fillColor=S.Util.makeHexColor(o,m,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:m,height:D}=this.viewport,j=S.Util.inverseTransform(this.transformMatrix),[N,Q,K,fe]=S.Util.getAxialAlignedBoundingBox([0,0,m,D],j),se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x",N),se.setAttributeNS(null,"y",Q),se.setAttributeNS(null,"width",K-N),se.setAttributeNS(null,"height",fe-Q),se.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&se.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(se)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const m=o[1],D=o[2],j=o[3]||S.IDENTITY_MATRIX,[N,Q,K,fe]=o[4],se=o[5],de=o[6],ye=o[7],ce=`shading${I++}`,[V,T,w,_]=S.Util.normalizeRect([...S.Util.applyTransform([N,Q],j),...S.Util.applyTransform([K,fe],j)]),[y,F]=S.Util.singularValueDecompose2dScale(j),H=se*y,q=de*F,U=this.svgFactory.createElement("svg:pattern");U.setAttributeNS(null,"id",ce),U.setAttributeNS(null,"patternUnits","userSpaceOnUse"),U.setAttributeNS(null,"width",H),U.setAttributeNS(null,"height",q),U.setAttributeNS(null,"x",`${V}`),U.setAttributeNS(null,"y",`${T}`);const g=this.svg,k=this.transformMatrix,R=this.current.fillColor,z=this.current.strokeColor,$=this.svgFactory.create(w-V,_-T);if(this.svg=$,this.transformMatrix=j,ye===2){const X=S.Util.makeHexColor(...m);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(D)),this.svg=g,this.transformMatrix=k,this.current.fillColor=R,this.current.strokeColor=z,U.append($.childNodes[0]),this.defs.append(U),`url(#${ce})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const m=`shading${I++}`,D=o[3];let j;switch(o[1]){case"axial":const N=o[4],Q=o[5];j=this.svgFactory.createElement("svg:linearGradient"),j.setAttributeNS(null,"id",m),j.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),j.setAttributeNS(null,"x1",N[0]),j.setAttributeNS(null,"y1",N[1]),j.setAttributeNS(null,"x2",Q[0]),j.setAttributeNS(null,"y2",Q[1]);break;case"radial":const K=o[4],fe=o[5],se=o[6],de=o[7];j=this.svgFactory.createElement("svg:radialGradient"),j.setAttributeNS(null,"id",m),j.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),j.setAttributeNS(null,"cx",fe[0]),j.setAttributeNS(null,"cy",fe[1]),j.setAttributeNS(null,"r",de),j.setAttributeNS(null,"fx",K[0]),j.setAttributeNS(null,"fy",K[1]),j.setAttributeNS(null,"fr",se);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const N of D){const Q=this.svgFactory.createElement("svg:stop");Q.setAttributeNS(null,"offset",N[0]),Q.setAttributeNS(null,"stop-color",N[1]),j.append(Q)}return this.defs.append(j),`url(#${m})`;case"Mesh":return(0,S.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,m){this.current.dashArray=o,this.current.dashPhase=m}constructPath(o,m){const D=this.current;let j=D.x,N=D.y,Q=[],K=0;for(const fe of o)switch(fe|0){case S.OPS.rectangle:j=m[K++],N=m[K++];const se=m[K++],de=m[K++],ye=j+se,ce=N+de;Q.push("M",h(j),h(N),"L",h(ye),h(N),"L",h(ye),h(ce),"L",h(j),h(ce),"Z");break;case S.OPS.moveTo:j=m[K++],N=m[K++],Q.push("M",h(j),h(N));break;case S.OPS.lineTo:j=m[K++],N=m[K++],Q.push("L",h(j),h(N));break;case S.OPS.curveTo:j=m[K+4],N=m[K+5],Q.push("C",h(m[K]),h(m[K+1]),h(m[K+2]),h(m[K+3]),h(j),h(N)),K+=6;break;case S.OPS.curveTo2:Q.push("C",h(j),h(N),h(m[K]),h(m[K+1]),h(m[K+2]),h(m[K+3])),j=m[K+2],N=m[K+3],K+=4;break;case S.OPS.curveTo3:j=m[K+2],N=m[K+3],Q.push("C",h(m[K]),h(m[K+1]),h(j),h(N),h(j),h(N)),K+=4;break;case S.OPS.closePath:Q.push("Z");break}Q=Q.join(" "),D.path&&o.length>0&&o[0]!==S.OPS.rectangle&&o[0]!==S.OPS.moveTo?Q=D.path.getAttributeNS(null,"d")+Q:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",Q),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(j,N)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const m=`clippath${b++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",m),D.setAttributeNS(null,"transform",P(this.transformMatrix));const j=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?j.setAttributeNS(null,"clip-rule","evenodd"):j.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(j),this.defs.append(D),o.activeClipUrl){o.clipGroup=null;for(const N of this.extraStack)N.clipGroup=null;D.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${m})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const m=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",m)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[m,D]of o)switch(m){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,S.warn)(`Unimplemented graphic state operator ${m}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,m=1){const D=this.current;let j=D.dashArray;m!==1&&j.length>0&&(j=j.map(function(N){return m*N})),o.setAttributeNS(null,"stroke",D.strokeColor),o.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",h(D.miterLimit)),o.setAttributeNS(null,"stroke-linecap",D.lineCap),o.setAttributeNS(null,"stroke-linejoin",D.lineJoin),o.setAttributeNS(null,"stroke-width",h(m*D.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",j.map(h).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",h(m*D.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const m=this.getObject(o);if(!m){(0,S.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(m)}paintInlineImageXObject(o,m){const D=o.width,j=o.height,N=u(o,this.forceDataSchema,!!m),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",h(D)),Q.setAttributeNS(null,"height",h(j)),this.current.element=Q,this.clip("nonzero");const K=this.svgFactory.createElement("svg:image");K.setAttributeNS(G,"xlink:href",N),K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y",h(-j)),K.setAttributeNS(null,"width",h(D)+"px"),K.setAttributeNS(null,"height",h(j)+"px"),K.setAttributeNS(null,"transform",`scale(${h(1/D)} ${h(-1/j)})`),m?m.append(K):this._ensureTransformGroup().append(K)}paintImageMaskXObject(o){const m=this.getObject(o.data,o);if(m.bitmap){(0,S.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,j=m.width,N=m.height,Q=D.fillColor;D.maskId=`mask${v++}`;const K=this.svgFactory.createElement("svg:mask");K.setAttributeNS(null,"id",D.maskId);const fe=this.svgFactory.createElement("svg:rect");fe.setAttributeNS(null,"x","0"),fe.setAttributeNS(null,"y","0"),fe.setAttributeNS(null,"width",h(j)),fe.setAttributeNS(null,"height",h(N)),fe.setAttributeNS(null,"fill",Q),fe.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(K),this._ensureTransformGroup().append(fe),this.paintInlineImageXObject(m,K)}paintFormXObjectBegin(o,m){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),m){const D=m[2]-m[0],j=m[3]-m[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",m[0]),N.setAttributeNS(null,"y",m[1]),N.setAttributeNS(null,"width",h(D)),N.setAttributeNS(null,"height",h(j)),this.current.element=N,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const m=this.svgFactory.create(o.width,o.height),D=this.svgFactory.createElement("svg:defs");m.append(D),this.defs=D;const j=this.svgFactory.createElement("svg:g");return j.setAttributeNS(null,"transform",P(o.transform)),m.append(j),this.svg=j,m}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}l.SVGGraphics=L}),((C,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class x{static textContent(S){const B=[],O={items:B,styles:Object.create(null)};function G(W){if(!W)return;let f=null;const s=W.name;if(s==="#text")f=W.value;else if(x.shouldBuildText(s))W?.attributes?.textContent?f=W.attributes.textContent:W.value&&(f=W.value);else return;if(f!==null&&B.push({str:f}),!!W.children)for(const u of W.children)G(u)}return G(S),O}static shouldBuildText(S){return!(S==="textarea"||S==="input"||S==="option"||S==="select")}}l.XfaText=x}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TextLayerRenderTask=void 0,l.renderTextLayer=P,l.updateTextLayer=b;var d=x(1),S=x(6);const B=1e5,O=30,G=.8,W=new Map;function f(v,I){let L;if(I&&d.FeatureTest.isOffscreenCanvasSupported)L=new OffscreenCanvas(v,v).getContext("2d",{alpha:!1});else{const a=document.createElement("canvas");a.width=a.height=v,L=a.getContext("2d",{alpha:!1})}return L}function s(v,I){const L=W.get(v);if(L)return L;const a=f(O,I);a.font=`${O}px ${v}`;const o=a.measureText("");let m=o.fontBoundingBoxAscent,D=Math.abs(o.fontBoundingBoxDescent);if(m){const N=m/(m+D);return W.set(v,N),a.canvas.width=a.canvas.height=0,N}a.strokeStyle="red",a.clearRect(0,0,O,O),a.strokeText("g",0,0);let j=a.getImageData(0,0,O,O).data;D=0;for(let N=j.length-1-3;N>=0;N-=4)if(j[N]>0){D=Math.ceil(N/4/O);break}a.clearRect(0,0,O,O),a.strokeText("A",0,O),j=a.getImageData(0,0,O,O).data,m=0;for(let N=0,Q=j.length;N<Q;N+=4)if(j[N]>0){m=O-Math.floor(N/4/O);break}if(a.canvas.width=a.canvas.height=0,m){const N=m/(m+D);return W.set(v,N),N}return W.set(v,G),G}function u(v,I,L){const a=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};v._textDivs.push(a);const m=d.Util.transform(v._transform,I.transform);let D=Math.atan2(m[1],m[0]);const j=L[I.fontName];j.vertical&&(D+=Math.PI/2);const N=Math.hypot(m[2],m[3]),Q=N*s(j.fontFamily,v._isOffscreenCanvasSupported);let K,fe;D===0?(K=m[4],fe=m[5]-Q):(K=m[4]+Q*Math.sin(D),fe=m[5]-Q*Math.cos(D));const se="calc(var(--scale-factor)*",de=a.style;v._container===v._rootContainer?(de.left=`${(100*K/v._pageWidth).toFixed(2)}%`,de.top=`${(100*fe/v._pageHeight).toFixed(2)}%`):(de.left=`${se}${K.toFixed(2)}px)`,de.top=`${se}${fe.toFixed(2)}px)`),de.fontSize=`${se}${N.toFixed(2)}px)`,de.fontFamily=j.fontFamily,o.fontSize=N,a.setAttribute("role","presentation"),a.textContent=I.str,a.dir=I.dir,v._fontInspectorEnabled&&(a.dataset.fontName=I.fontName),D!==0&&(o.angle=D*(180/Math.PI));let ye=!1;if(I.str.length>1)ye=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const ce=Math.abs(I.transform[0]),V=Math.abs(I.transform[3]);ce!==V&&Math.max(ce,V)/Math.min(ce,V)>1.5&&(ye=!0)}ye&&(o.canvasWidth=j.vertical?I.height:I.width),v._textDivProperties.set(a,o),v._isReadableStream&&v._layoutText(a)}function E(v){const{div:I,scale:L,properties:a,ctx:o,prevFontSize:m,prevFontFamily:D}=v,{style:j}=I;let N="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:Q}=j,{canvasWidth:K,fontSize:fe}=a;(m!==fe||D!==Q)&&(o.font=`${fe*L}px ${Q}`,v.prevFontSize=fe,v.prevFontFamily=Q);const{width:se}=o.measureText(I.textContent);se>0&&(N=`scaleX(${K*L/se})`)}a.angle!==0&&(N=`rotate(${a.angle}deg) ${N}`),N.length>0&&(j.transform=N)}function A(v){if(v._canceled)return;const I=v._textDivs,L=v._capability;if(I.length>B){L.resolve();return}if(!v._isReadableStream)for(const o of I)v._layoutText(o);L.resolve()}class h{constructor({textContentSource:I,container:L,viewport:a,textDivs:o,textDivProperties:m,textContentItemsStr:D,isOffscreenCanvasSupported:j}){this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=L,this._textDivs=o||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=j,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=m||new WeakMap,this._canceled=!1,this._capability=new d.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:a.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,j)};const{pageWidth:N,pageHeight:Q,pageX:K,pageY:fe}=a.rawDims;this._transform=[1,0,0,-1,-K,fe+Q],this._pageWidth=N,this._pageHeight=Q,(0,S.setLayerDimensions)(L,a),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new d.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new d.AbortException("TextLayer task cancelled."))}_processItems(I,L){for(const a of I){if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),a.id!==null&&this._container.setAttribute("id",`${a.id}`),o.append(this._container)}else a.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(a.str),u(this,a,L)}}_layoutText(I){const L=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,E(this._layoutTextParams),L.hasText&&this._container.append(I),L.hasEOL){const a=document.createElement("br");a.setAttribute("role","presentation"),this._container.append(a)}}_render(){const I=new d.PromiseCapability;let L=Object.create(null);if(this._isReadableStream){const a=()=>{this._reader.read().then(({value:o,done:m})=>{if(m){I.resolve();return}Object.assign(L,o.styles),this._processItems(o.items,L),a()},I.reject)};this._reader=this._textContentSource.getReader(),a()}else if(this._textContentSource){const{items:a,styles:o}=this._textContentSource;this._processItems(a,o),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{L=null,A(this)},this._capability.reject)}}l.TextLayerRenderTask=h;function P(v){!v.textContentSource&&(v.textContent||v.textContentStream)&&((0,S.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),v.textContentSource=v.textContent||v.textContentStream);const{container:I,viewport:L}=v,a=getComputedStyle(I),o=a.getPropertyValue("visibility"),m=parseFloat(a.getPropertyValue("--scale-factor"));o==="visible"&&(!m||Math.abs(m-L.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new h(v);return D._render(),D}function b({container:v,viewport:I,textDivs:L,textDivProperties:a,isOffscreenCanvasSupported:o,mustRotate:m=!0,mustRescale:D=!0}){if(m&&(0,S.setLayerDimensions)(v,{rotation:I.rotation}),D){const j=f(0,o),Q={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:j};for(const K of L)Q.properties=a.get(K),Q.div=K,E(Q)}}}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationEditorLayer=void 0;var d=x(1),S=x(4),B=x(28),O=x(33),G=x(6),W=x(34);class f{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:u,pageIndex:E,div:A,accessibilityManager:h,annotationLayer:P,viewport:b,l10n:v}){const I=[B.FreeTextEditor,O.InkEditor,W.StampEditor];if(!f._initialized){f._initialized=!0;for(const L of I)L.initialize(v)}u.registerEditorTypes(I),this.#i=u,this.pageIndex=E,this.div=A,this.#e=h,this.#n=P,this.viewport=b,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(u){this.#i.updateToolbar(u)}updateMode(u=this.#i.getMode()){this.#p(),u===d.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),u!==d.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",u===d.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",u===d.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",u===d.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(u){if(!u&&this.#i.getMode()!==d.AnnotationEditorType.INK)return;if(!u){for(const A of this.#o.values())if(A.isEmpty()){A.setInBackground();return}}this.#h({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(u){this.#i.setEditingState(u)}addCommands(u){this.#i.addCommands(u)}enable(){this.div.style.pointerEvents="auto";const u=new Set;for(const A of this.#o.values())A.enableEditing(),A.annotationElementId&&u.add(A.annotationElementId);if(!this.#n)return;const E=this.#n.getEditableAnnotations();for(const A of E){if(A.hide(),this.#i.isDeletedAnnotationElement(A.data.id)||u.has(A.data.id))continue;const h=this.deserialize(A);h&&(this.addOrRebuild(h),h.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const u=new Set;for(const E of this.#o.values()){if(E.disableEditing(),!E.annotationElementId||E.serialize()!==null){u.add(E.annotationElementId);continue}this.getEditableAnnotation(E.annotationElementId)?.show(),E.remove()}if(this.#n){const E=this.#n.getEditableAnnotations();for(const A of E){const{id:h}=A.data;u.has(h)||this.#i.isDeletedAnnotationElement(h)||A.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(u){return this.#n?.getEditableAnnotation(u)||null}setActiveEditor(u){this.#i.getActive()!==u&&this.#i.setActiveEditor(u)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#r)}attach(u){this.#o.set(u.id,u);const{annotationElementId:E}=u;E&&this.#i.isDeletedAnnotationElement(E)&&this.#i.removeDeletedAnnotationElement(u)}detach(u){this.#o.delete(u.id),this.#e?.removePointerInTextLayer(u.contentDiv),!this.#c&&u.annotationElementId&&this.#i.addDeletedAnnotationElement(u)}remove(u){this.detach(u),this.#i.removeEditor(u),u.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),u.div.remove(),u.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(u){u.parent!==this&&(u.annotationElementId&&(this.#i.addDeletedAnnotationElement(u.annotationElementId),S.AnnotationEditor.deleteAnnotationElement(u),u.annotationElementId=null),this.attach(u),u.parent?.detach(u),u.setParent(this),u.div&&u.isAttachedToDOM&&(u.div.remove(),this.div.append(u.div)))}add(u){if(this.changeParent(u),this.#i.addEditor(u),this.attach(u),!u.isAttachedToDOM){const E=u.render();this.div.append(E),u.isAttachedToDOM=!0}u.fixAndSetPosition(),u.onceAdded(),this.#i.addToAnnotationStorage(u)}moveEditorInDOM(u){if(!u.isAttachedToDOM)return;const{activeElement:E}=document;u.div.contains(E)&&(u._focusEventsAllowed=!1,setTimeout(()=>{u.div.contains(document.activeElement)?u._focusEventsAllowed=!0:(u.div.addEventListener("focusin",()=>{u._focusEventsAllowed=!0},{once:!0}),E.focus())},0)),u._structTreeParentId=this.#e?.moveElementInDOM(this.div,u.div,u.contentDiv,!0)}addOrRebuild(u){u.needsToBeRebuilt()?u.rebuild():this.add(u)}addUndoableEditor(u){const E=()=>u._uiManager.rebuild(u),A=()=>{u.remove()};this.addCommands({cmd:E,undo:A,mustExec:!1})}getNextId(){return this.#i.getId()}#f(u){switch(this.#i.getMode()){case d.AnnotationEditorType.FREETEXT:return new B.FreeTextEditor(u);case d.AnnotationEditorType.INK:return new O.InkEditor(u);case d.AnnotationEditorType.STAMP:return new W.StampEditor(u)}return null}pasteEditor(u,E){this.#i.updateToolbar(u),this.#i.updateMode(u);const{offsetX:A,offsetY:h}=this.#d(),P=this.getNextId(),b=this.#f({parent:this,id:P,x:A,y:h,uiManager:this.#i,isCentered:!0,...E});b&&this.add(b)}deserialize(u){switch(u.annotationType??u.annotationEditorType){case d.AnnotationEditorType.FREETEXT:return B.FreeTextEditor.deserialize(u,this,this.#i);case d.AnnotationEditorType.INK:return O.InkEditor.deserialize(u,this,this.#i);case d.AnnotationEditorType.STAMP:return W.StampEditor.deserialize(u,this,this.#i)}return null}#h(u,E){const A=this.getNextId(),h=this.#f({parent:this,id:A,x:u.offsetX,y:u.offsetY,uiManager:this.#i,isCentered:E});return h&&this.add(h),h}#d(){const{x:u,y:E,width:A,height:h}=this.div.getBoundingClientRect(),P=Math.max(0,u),b=Math.max(0,E),v=Math.min(window.innerWidth,u+A),I=Math.min(window.innerHeight,E+h),L=(P+v)/2-u,a=(b+I)/2-E,[o,m]=this.viewport.rotation%180===0?[L,a]:[a,L];return{offsetX:o,offsetY:m}}addNewEditor(){this.#h(this.#d(),!0)}setSelected(u){this.#i.setSelected(u)}toggleSelected(u){this.#i.toggleSelected(u)}isSelected(u){return this.#i.isSelected(u)}unselect(u){this.#i.unselect(u)}pointerup(u){const{isMac:E}=d.FeatureTest.platform;if(!(u.button!==0||u.ctrlKey&&E)&&u.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===d.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#h(u,!1)}}pointerdown(u){if(this.#s){this.#s=!1;return}const{isMac:E}=d.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&E||u.target!==this.div)return;this.#s=!0;const A=this.#i.getActive();this.#t=!A||A.isEmpty()}findNewParent(u,E,A){const h=this.#i.findParent(E,A);return h===null||h===this?!1:(h.changeParent(u),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const u of this.#o.values())this.#e?.removePointerInTextLayer(u.contentDiv),u.setParent(null),u.isAttachedToDOM=!1,u.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const u of this.#o.values())u.isEmpty()&&u.remove();this.#l=!1}render({viewport:u}){this.viewport=u,(0,G.setLayerDimensions)(this.div,u);for(const E of this.#i.getEditors(this.pageIndex))this.add(E);this.updateMode()}update({viewport:u}){this.#i.commitOrRemove(),this.viewport=u,(0,G.setLayerDimensions)(this.div,{rotation:u.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:u,pageHeight:E}=this.viewport.rawDims;return[u,E]}}l.AnnotationEditorLayer=f}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FreeTextEditor=void 0;var d=x(1),S=x(5),B=x(4),O=x(29);class G extends B.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const f=G.prototype,s=A=>A.isEmpty(),u=S.AnnotationEditorUIManager.TRANSLATE_SMALL,E=S.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new S.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],f.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],f.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],f._translateEmpty,{args:[-u,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],f._translateEmpty,{args:[-E,0],checker:s}],[["ArrowRight","mac+ArrowRight"],f._translateEmpty,{args:[u,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],f._translateEmpty,{args:[E,0],checker:s}],[["ArrowUp","mac+ArrowUp"],f._translateEmpty,{args:[0,-u],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],f._translateEmpty,{args:[0,-E],checker:s}],[["ArrowDown","mac+ArrowDown"],f._translateEmpty,{args:[0,u],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],f._translateEmpty,{args:[0,E],checker:s}]]))}static _type="freetext";constructor(f){super({...f,name:"freeTextEditor"}),this.#a=f.color||G._defaultColor||B.AnnotationEditor._defaultLineColor,this.#l=f.fontSize||G._defaultFontSize}static initialize(f){B.AnnotationEditor.initialize(f,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(f,s){switch(f){case d.AnnotationEditorParamsType.FREETEXT_SIZE:G._defaultFontSize=s;break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:G._defaultColor=s;break}}updateParams(f,s){switch(f){case d.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(s);break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(s);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,G._defaultFontSize],[d.AnnotationEditorParamsType.FREETEXT_COLOR,G._defaultColor||B.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[d.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#i(f){const s=E=>{this.editorDiv.style.fontSize=`calc(${E}px * var(--scale-factor))`,this.translate(0,-(E-this.#l)*this.parentScale),this.#l=E,this.#d()},u=this.#l;this.addCommands({cmd:()=>{s(f)},undo:()=>{s(u)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(f){const s=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=f},undo:()=>{this.#a=this.editorDiv.style.color=s},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(f,s){this._uiManager.translateSelectedEditors(f,s,!0)}getInitialTranslation(){const f=this.parentScale;return[-G._internalPadding*f,-(G._internalPadding+this.#l)*f]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(d.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(f){this._focusEventsAllowed&&(super.focusin(f),f.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#h(){const f=this.editorDiv.getElementsByTagName("div");if(f.length===0)return this.editorDiv.innerText;const s=[];for(const u of f)s.push(u.innerText.replace(/\r\n?|\n/,""));return s.join(`
`)}#d(){const[f,s]=this.parentDimensions;let u;if(this.isAttachedToDOM)u=this.div.getBoundingClientRect();else{const{currentLayer:E,div:A}=this,h=A.style.display;A.style.display="hidden",E.div.append(this.div),u=A.getBoundingClientRect(),A.remove(),A.style.display=h}this.rotation%180===this.parentRotation%180?(this.width=u.width/f,this.height=u.height/s):(this.width=u.height/f,this.height=u.width/s),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const f=this.#o,s=this.#o=this.#h().trimEnd();if(f===s)return;const u=E=>{if(this.#o=E,!E){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{u(s)},undo:()=>{u(f)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(f){this.enterInEditMode()}keydown(f){f.target===this.div&&f.key==="Enter"&&(this.enterInEditMode(),f.preventDefault())}editorDivKeydown(f){G._keyboardManager.exec(this,f)}editorDivFocus(f){this.isEditing=!0}editorDivBlur(f){this.isEditing=!1}editorDivInput(f){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let f,s;this.width&&(f=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),B.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(E=>this.editorDiv?.setAttribute("aria-label",E)),B.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(E=>this.editorDiv?.setAttribute("default-content",E)),this.editorDiv.contentEditable=!0;const{style:u}=this.editorDiv;if(u.fontSize=`calc(${this.#l}px * var(--scale-factor))`,u.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,S.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[E,A]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this.#c;let[P,b]=this.getInitialTranslation();[P,b]=this.pageTranslationToScreen(P,b);const[v,I]=this.pageDimensions,[L,a]=this.pageTranslation;let o,m;switch(this.rotation){case 0:o=f+(h[0]-L)/v,m=s+this.height-(h[1]-a)/I;break;case 90:o=f+(h[0]-L)/v,m=s-(h[1]-a)/I,[P,b]=[b,-P];break;case 180:o=f-this.width+(h[0]-L)/v,m=s-(h[1]-a)/I,[P,b]=[-P,-b];break;case 270:o=f+(h[0]-L-this.height*I)/v,m=s+(h[1]-a-this.width*v)/I,[P,b]=[-b,P];break}this.setAt(o*E,m*A,P,b)}else this.setAt(f*E,s*A,this.width*E,this.height*A);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const f of this.#o.split(`
`)){const s=document.createElement("div");s.append(f?document.createTextNode(f):document.createElement("br")),this.editorDiv.append(s)}}get contentDiv(){return this.editorDiv}static deserialize(f,s,u){let E=null;if(f instanceof O.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:h,fontColor:P},rect:b,rotation:v,id:I},textContent:L,textPosition:a,parent:{page:{pageNumber:o}}}=f;if(!L||L.length===0)return null;E=f={annotationType:d.AnnotationEditorType.FREETEXT,color:Array.from(P),fontSize:h,value:L.join(`
`),position:a,pageIndex:o-1,rect:b,rotation:v,id:I,deleted:!1}}const A=super.deserialize(f,s,u);return A.#l=f.fontSize,A.#a=d.Util.makeHexColor(...f.color),A.#o=f.value,A.annotationElementId=f.id||null,A.#c=E,A}serialize(f=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const s=G._internalPadding*this.parentScale,u=this.getRect(s,s),E=B.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),A={annotationType:d.AnnotationEditorType.FREETEXT,color:E,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:u,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return f?A:this.annotationElementId&&!this.#y(A)?null:(A.id=this.annotationElementId,A)}#y(f){const{value:s,fontSize:u,color:E,rect:A,pageIndex:h}=this.#c;return f.value!==s||f.fontSize!==u||f.rect.some((P,b)=>Math.abs(P-A[b])>=1)||f.color.some((P,b)=>P!==E[b])||f.pageIndex!==h}#m(f=!1){if(!this.annotationElementId)return;if(this.#d(),!f&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const s=G._internalPadding*this.parentScale;this.#c.rect=this.getRect(s,s)}}l.FreeTextEditor=G}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StampAnnotationElement=l.InkAnnotationElement=l.FreeTextAnnotationElement=l.AnnotationLayer=void 0;var d=x(1),S=x(6),B=x(3),O=x(30),G=x(31),W=x(32);const f=1e3,s=9,u=new WeakSet;function E(U){return{width:U[2]-U[0],height:U[3]-U[1]}}class A{static create(g){switch(g.data.annotationType){case d.AnnotationType.LINK:return new P(g);case d.AnnotationType.TEXT:return new b(g);case d.AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new I(g);case"Btn":return g.data.radioButton?new o(g):g.data.checkBox?new a(g):new m(g);case"Ch":return new D(g);case"Sig":return new L(g)}return new v(g);case d.AnnotationType.POPUP:return new j(g);case d.AnnotationType.FREETEXT:return new Q(g);case d.AnnotationType.LINE:return new K(g);case d.AnnotationType.SQUARE:return new fe(g);case d.AnnotationType.CIRCLE:return new se(g);case d.AnnotationType.POLYLINE:return new de(g);case d.AnnotationType.CARET:return new ce(g);case d.AnnotationType.INK:return new V(g);case d.AnnotationType.POLYGON:return new ye(g);case d.AnnotationType.HIGHLIGHT:return new T(g);case d.AnnotationType.UNDERLINE:return new w(g);case d.AnnotationType.SQUIGGLY:return new _(g);case d.AnnotationType.STRIKEOUT:return new y(g);case d.AnnotationType.STAMP:return new F(g);case d.AnnotationType.FILEATTACHMENT:return new H(g);default:return new h(g)}}}class h{#e=!1;constructor(g,{isRenderable:k=!1,ignoreBorder:R=!1,createQuadrilaterals:z=!1}={}){this.isRenderable=k,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,k&&(this.container=this._createContainer(R)),z&&this._createQuadrilaterals()}static _hasPopupData({titleObj:g,contentsObj:k,richText:R}){return!!(g?.str||k?.str||R?.str)}get hasPopupData(){return h._hasPopupData(this.data)}_createContainer(g){const{data:k,parent:{page:R,viewport:z}}=this,$=document.createElement("section");$.setAttribute("data-annotation-id",k.id),this instanceof v||($.tabIndex=f),$.style.zIndex=this.parent.zIndex++,this.data.popupRef&&$.setAttribute("aria-haspopup","dialog"),k.noRotate&&$.classList.add("norotate");const{pageWidth:X,pageHeight:J,pageX:ae,pageY:_e}=z.rawDims;if(!k.rect||this instanceof j){const{rotation:ge}=k;return!k.hasOwnCanvas&&ge!==0&&this.setRotation(ge,$),$}const{width:ie,height:le}=E(k.rect),ue=d.Util.normalizeRect([k.rect[0],R.view[3]-k.rect[1]+R.view[1],k.rect[2],R.view[3]-k.rect[3]+R.view[1]]);if(!g&&k.borderStyle.width>0){$.style.borderWidth=`${k.borderStyle.width}px`;const ge=k.borderStyle.horizontalCornerRadius,Ee=k.borderStyle.verticalCornerRadius;if(ge>0||Ee>0){const Me=`calc(${ge}px * var(--scale-factor)) / calc(${Ee}px * var(--scale-factor))`;$.style.borderRadius=Me}else if(this instanceof o){const Me=`calc(${ie}px * var(--scale-factor)) / calc(${le}px * var(--scale-factor))`;$.style.borderRadius=Me}switch(k.borderStyle.style){case d.AnnotationBorderStyleType.SOLID:$.style.borderStyle="solid";break;case d.AnnotationBorderStyleType.DASHED:$.style.borderStyle="dashed";break;case d.AnnotationBorderStyleType.BEVELED:(0,d.warn)("Unimplemented border style: beveled");break;case d.AnnotationBorderStyleType.INSET:(0,d.warn)("Unimplemented border style: inset");break;case d.AnnotationBorderStyleType.UNDERLINE:$.style.borderBottomStyle="solid";break}const be=k.borderColor||null;be?(this.#e=!0,$.style.borderColor=d.Util.makeHexColor(be[0]|0,be[1]|0,be[2]|0)):$.style.borderWidth=0}$.style.left=`${100*(ue[0]-ae)/X}%`,$.style.top=`${100*(ue[1]-_e)/J}%`;const{rotation:pe}=k;return k.hasOwnCanvas||pe===0?($.style.width=`${100*ie/X}%`,$.style.height=`${100*le/J}%`):this.setRotation(pe,$),$}setRotation(g,k=this.container){if(!this.data.rect)return;const{pageWidth:R,pageHeight:z}=this.parent.viewport.rawDims,{width:$,height:X}=E(this.data.rect);let J,ae;g%180===0?(J=100*$/R,ae=100*X/z):(J=100*X/R,ae=100*$/z),k.style.width=`${J}%`,k.style.height=`${ae}%`,k.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(k,R,z)=>{const $=z.detail[k],X=$[0],J=$.slice(1);z.target.style[R]=O.ColorConverters[`${X}_HTML`](J),this.annotationStorage.setValue(this.data.id,{[R]:O.ColorConverters[`${X}_rgb`](J)})};return(0,d.shadow)(this,"_commonActions",{display:k=>{const{display:R}=k.detail,z=R%2===1;this.container.style.visibility=z?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:z,noPrint:R===1||R===2})},print:k=>{this.annotationStorage.setValue(this.data.id,{noPrint:!k.detail.print})},hidden:k=>{const{hidden:R}=k.detail;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:R,noView:R})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.target.disabled=k.detail.readonly},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{g("bgColor","backgroundColor",k)},fillColor:k=>{g("fillColor","backgroundColor",k)},fgColor:k=>{g("fgColor","color",k)},textColor:k=>{g("textColor","color",k)},borderColor:k=>{g("borderColor","borderColor",k)},strokeColor:k=>{g("strokeColor","borderColor",k)},rotation:k=>{const R=k.detail.rotation;this.setRotation(R),this.annotationStorage.setValue(this.data.id,{rotation:R})}})}_dispatchEventFromSandbox(g,k){const R=this._commonActions;for(const z of Object.keys(k.detail))(g[z]||R[z])?.(k)}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const R=this._commonActions;for(const[z,$]of Object.entries(k)){const X=R[z];if(X){const J={detail:{[z]:$},target:g};X(J),delete k[z]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[k,R,z,$]=this.data.rect;if(g.length===1){const[,{x:Ee,y:be},{x:Me,y:Le}]=g[0];if(z===Ee&&$===be&&k===Me&&R===Le)return}const{style:X}=this.container;let J;if(this.#e){const{borderColor:Ee,borderWidth:be}=X;X.borderWidth=0,J=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ee}" stroke-width="${be}">`],this.container.classList.add("hasBorder")}const ae=z-k,_e=$-R,{svgFactory:ie}=this,le=ie.createElement("svg");le.classList.add("quadrilateralsContainer"),le.setAttribute("width",0),le.setAttribute("height",0);const ue=ie.createElement("defs");le.append(ue);const pe=ie.createElement("clipPath"),ge=`clippath_${this.data.id}`;pe.setAttribute("id",ge),pe.setAttribute("clipPathUnits","objectBoundingBox"),ue.append(pe);for(const[,{x:Ee,y:be},{x:Me,y:Le}]of g){const Oe=ie.createElement("rect"),Ne=(Me-k)/ae,ot=($-be)/_e,Ke=(Ee-Me)/ae,Pt=(be-Le)/_e;Oe.setAttribute("x",Ne),Oe.setAttribute("y",ot),Oe.setAttribute("width",Ke),Oe.setAttribute("height",Pt),pe.append(Oe),J?.push(`<rect vector-effect="non-scaling-stroke" x="${Ne}" y="${ot}" width="${Ke}" height="${Pt}"/>`)}this.#e&&(J.push("</g></svg>')"),X.backgroundImage=J.join("")),this.container.append(le),this.container.style.clipPath=`url(#${ge})`}_createPopup(){const{container:g,data:k}=this;g.setAttribute("aria-haspopup","dialog");const R=new j({data:{color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,parentRect:k.rect,borderStyle:0,id:`popup_${k.id}`,rotation:k.rotation},parent:this.parent,elements:[this]});this.parent.div.append(R.render())}render(){(0,d.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,k=null){const R=[];if(this._fieldObjects){const z=this._fieldObjects[g];if(z)for(const{page:$,id:X,exportValues:J}of z){if($===-1||X===k)continue;const ae=typeof J=="string"?J:null,_e=document.querySelector(`[data-element-id="${X}"]`);if(_e&&!u.has(_e)){(0,d.warn)(`_getElementsByName - element not allowed: ${X}`);continue}R.push({id:X,exportValue:ae,domElement:_e})}return R}for(const z of document.getElementsByName(g)){const{exportValue:$}=z,X=z.getAttribute("data-element-id");X!==k&&u.has(z)&&R.push({id:X,exportValue:$,domElement:z})}return R}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const k of g)k.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:g,data:{id:k}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:g,editId:k})})}}class P extends h{constructor(g,k=null){super(g,{isRenderable:!0,ignoreBorder:!!k?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=g.data.isTooltipOnly}render(){const{data:g,linkService:k}=this,R=document.createElement("a");R.setAttribute("data-element-id",g.id);let z=!1;return g.url?(k.addLinkAttributes(R,g.url,g.newWindow),z=!0):g.action?(this._bindNamedAction(R,g.action),z=!0):g.attachment?(this._bindAttachment(R,g.attachment),z=!0):g.setOCGState?(this.#t(R,g.setOCGState),z=!0):g.dest?(this._bindLink(R,g.dest),z=!0):(g.actions&&(g.actions.Action||g.actions["Mouse Up"]||g.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,g),z=!0),g.resetForm?(this._bindResetFormAction(R,g.resetForm),z=!0):this.isTooltipOnly&&!z&&(this._bindLink(R,""),z=!0)),this.container.classList.add("linkAnnotation"),z&&this.container.append(R),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(g,k){g.href=this.linkService.getDestinationHash(k),g.onclick=()=>(k&&this.linkService.goToDestination(k),!1),(k||k==="")&&this.#e()}_bindNamedAction(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeNamedAction(k),!1),this.#e()}_bindAttachment(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,k.content,k.filename),!1),this.#e()}#t(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeSetOCGState(k),!1),this.#e()}_bindJSAction(g,k){g.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const z of Object.keys(k.actions)){const $=R.get(z);$&&(g[$]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k.id,name:z}}),!1))}g.onclick||(g.onclick=()=>!1),this.#e()}_bindResetFormAction(g,k){const R=g.onclick;if(R||(g.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,d.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(g.onclick=()=>!1);return}g.onclick=()=>{R?.();const{fields:z,refs:$,include:X}=k,J=[];if(z.length!==0||$.length!==0){const ie=new Set($);for(const le of z){const ue=this._fieldObjects[le]||[];for(const{id:pe}of ue)ie.add(pe)}for(const le of Object.values(this._fieldObjects))for(const ue of le)ie.has(ue.id)===X&&J.push(ue)}else for(const ie of Object.values(this._fieldObjects))J.push(...ie);const ae=this.annotationStorage,_e=[];for(const ie of J){const{id:le}=ie;switch(_e.push(le),ie.type){case"text":{const pe=ie.defaultValue||"";ae.setValue(le,{value:pe});break}case"checkbox":case"radiobutton":{const pe=ie.defaultValue===ie.exportValues;ae.setValue(le,{value:pe});break}case"combobox":case"listbox":{const pe=ie.defaultValue||"";ae.setValue(le,{value:pe});break}default:continue}const ue=document.querySelector(`[data-element-id="${le}"]`);if(ue){if(!u.has(ue)){(0,d.warn)(`_bindResetFormAction - element not allowed: ${le}`);continue}}else continue;ue.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:_e,name:"ResetForm"}}),!1}}}class b extends h{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.alt="[{{type}} Annotation]",g.dataset.l10nId="text_annotation_type",g.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class v extends h{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(g){this.data.hasOwnCanvas&&(g.previousSibling?.nodeName==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){const{isWin:k,isMac:R}=d.FeatureTest.platform;return k&&g.ctrlKey||R&&g.metaKey}_setEventListener(g,k,R,z,$){R.includes("mouse")?g.addEventListener(R,X=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:$(X),shift:X.shiftKey,modifier:this._getKeyModifier(X)}})}):g.addEventListener(R,X=>{if(R==="blur"){if(!k.focused||!X.relatedTarget)return;k.focused=!1}else if(R==="focus"){if(k.focused)return;k.focused=!0}$&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:z,value:$(X)}})})}_setEventListeners(g,k,R,z){for(const[$,X]of R)(X==="Action"||this.data.actions?.[X])&&((X==="Focus"||X==="Blur")&&(k||={focused:!1}),this._setEventListener(g,k,$,X,z),X==="Focus"&&!this.data.actions?.Blur?this._setEventListener(g,k,"blur","Blur",null):X==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(g,k,"focus","Focus",null))}_setBackgroundColor(g){const k=this.data.backgroundColor||null;g.style.backgroundColor=k===null?"transparent":d.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(g){const k=["left","center","right"],{fontColor:R}=this.data.defaultAppearanceData,z=this.data.defaultAppearanceData.fontSize||s,$=g.style;let X;const J=2,ae=_e=>Math.round(10*_e)/10;if(this.data.multiLine){const _e=Math.abs(this.data.rect[3]-this.data.rect[1]-J),ie=Math.round(_e/(d.LINE_FACTOR*z))||1,le=_e/ie;X=Math.min(z,ae(le/d.LINE_FACTOR))}else{const _e=Math.abs(this.data.rect[3]-this.data.rect[1]-J);X=Math.min(z,ae(_e/d.LINE_FACTOR))}$.fontSize=`calc(${X}px * var(--scale-factor))`,$.color=d.Util.makeHexColor(R[0],R[1],R[2]),this.data.textAlignment!==null&&($.textAlign=k[this.data.textAlignment])}_setRequired(g,k){k?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",k)}}class I extends v{constructor(g){const k=g.renderForms||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:k})}setPropertyOnSiblings(g,k,R,z){const $=this.annotationStorage;for(const X of this._getElementsByName(g.name,g.id))X.domElement&&(X.domElement[k]=R),$.setValue(X.id,{[z]:R})}render(){const g=this.annotationStorage,k=this.data.id;this.container.classList.add("textWidgetAnnotation");let R=null;if(this.renderForms){const z=g.getValue(k,{value:this.data.fieldValue});let $=z.value||"";const X=g.getValue(k,{charLimit:this.data.maxLen}).charLimit;X&&$.length>X&&($=$.slice(0,X));let J=z.formattedValue||this.data.textContent?.join(`
`)||null;J&&this.data.comb&&(J=J.replaceAll(/\s+/g,""));const ae={userValue:$,formattedValue:J,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(R=document.createElement("textarea"),R.textContent=J??$,this.data.doNotScroll&&(R.style.overflowY="hidden")):(R=document.createElement("input"),R.type="text",R.setAttribute("value",J??$),this.data.doNotScroll&&(R.style.overflowX="hidden")),this.data.hasOwnCanvas&&(R.hidden=!0),u.add(R),R.setAttribute("data-element-id",k),R.disabled=this.data.readOnly,R.name=this.data.fieldName,R.tabIndex=f,this._setRequired(R,this.data.required),X&&(R.maxLength=X),R.addEventListener("input",ie=>{g.setValue(k,{value:ie.target.value}),this.setPropertyOnSiblings(R,"value",ie.target.value,"value"),ae.formattedValue=null}),R.addEventListener("resetform",ie=>{const le=this.data.defaultFieldValue??"";R.value=ae.userValue=le,ae.formattedValue=null});let _e=ie=>{const{formattedValue:le}=ae;le!=null&&(ie.target.value=le),ie.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){R.addEventListener("focus",le=>{if(ae.focused)return;const{target:ue}=le;ae.userValue&&(ue.value=ae.userValue),ae.lastCommittedValue=ue.value,ae.commitKey=1,ae.focused=!0}),R.addEventListener("updatefromsandbox",le=>{this.showElementAndHideCanvas(le.target);const ue={value(pe){ae.userValue=pe.detail.value??"",g.setValue(k,{value:ae.userValue.toString()}),pe.target.value=ae.userValue},formattedValue(pe){const{formattedValue:ge}=pe.detail;ae.formattedValue=ge,ge!=null&&pe.target!==document.activeElement&&(pe.target.value=ge),g.setValue(k,{formattedValue:ge})},selRange(pe){pe.target.setSelectionRange(...pe.detail.selRange)},charLimit:pe=>{const{charLimit:ge}=pe.detail,{target:Ee}=pe;if(ge===0){Ee.removeAttribute("maxLength");return}Ee.setAttribute("maxLength",ge);let be=ae.userValue;!be||be.length<=ge||(be=be.slice(0,ge),Ee.value=ae.userValue=be,g.setValue(k,{value:be}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:be,willCommit:!0,commitKey:1,selStart:Ee.selectionStart,selEnd:Ee.selectionEnd}}))}};this._dispatchEventFromSandbox(ue,le)}),R.addEventListener("keydown",le=>{ae.commitKey=1;let ue=-1;if(le.key==="Escape"?ue=0:le.key==="Enter"&&!this.data.multiLine?ue=2:le.key==="Tab"&&(ae.commitKey=3),ue===-1)return;const{value:pe}=le.target;ae.lastCommittedValue!==pe&&(ae.lastCommittedValue=pe,ae.userValue=pe,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:pe,willCommit:!0,commitKey:ue,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}))});const ie=_e;_e=null,R.addEventListener("blur",le=>{if(!ae.focused||!le.relatedTarget)return;ae.focused=!1;const{value:ue}=le.target;ae.userValue=ue,ae.lastCommittedValue!==ue&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:ue,willCommit:!0,commitKey:ae.commitKey,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}),ie(le)}),this.data.actions?.Keystroke&&R.addEventListener("beforeinput",le=>{ae.lastCommittedValue=null;const{data:ue,target:pe}=le,{value:ge,selectionStart:Ee,selectionEnd:be}=pe;let Me=Ee,Le=be;switch(le.inputType){case"deleteWordBackward":{const Oe=ge.substring(0,Ee).match(/\w*[^\w]*$/);Oe&&(Me-=Oe[0].length);break}case"deleteWordForward":{const Oe=ge.substring(Ee).match(/^[^\w]*\w*/);Oe&&(Le+=Oe[0].length);break}case"deleteContentBackward":Ee===be&&(Me-=1);break;case"deleteContentForward":Ee===be&&(Le+=1);break}le.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:ge,change:ue||"",willCommit:!1,selStart:Me,selEnd:Le}})}),this._setEventListeners(R,ae,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.value)}if(_e&&R.addEventListener("blur",_e),this.data.comb){const le=(this.data.rect[2]-this.data.rect[0])/X;R.classList.add("comb"),R.style.letterSpacing=`calc(${le}px * var(--scale-factor) - 1ch)`}}else R=document.createElement("div"),R.textContent=this.data.fieldValue,R.style.verticalAlign="middle",R.style.display="table-cell";return this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class L extends v{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class a extends v{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,k=this.data,R=k.id;let z=g.getValue(R,{value:k.exportValue===k.fieldValue}).value;typeof z=="string"&&(z=z!=="Off",g.setValue(R,{value:z})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const $=document.createElement("input");return u.add($),$.setAttribute("data-element-id",R),$.disabled=k.readOnly,this._setRequired($,this.data.required),$.type="checkbox",$.name=k.fieldName,z&&$.setAttribute("checked",!0),$.setAttribute("exportValue",k.exportValue),$.tabIndex=f,$.addEventListener("change",X=>{const{name:J,checked:ae}=X.target;for(const _e of this._getElementsByName(J,R)){const ie=ae&&_e.exportValue===k.exportValue;_e.domElement&&(_e.domElement.checked=ie),g.setValue(_e.id,{value:ie})}g.setValue(R,{value:ae})}),$.addEventListener("resetform",X=>{const J=k.defaultFieldValue||"Off";X.target.checked=J===k.exportValue}),this.enableScripting&&this.hasJSActions&&($.addEventListener("updatefromsandbox",X=>{const J={value(ae){ae.target.checked=ae.detail.value!=="Off",g.setValue(R,{value:ae.target.checked})}};this._dispatchEventFromSandbox(J,X)}),this._setEventListeners($,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class o extends v{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,k=this.data,R=k.id;let z=g.getValue(R,{value:k.fieldValue===k.buttonValue}).value;typeof z=="string"&&(z=z!==k.buttonValue,g.setValue(R,{value:z}));const $=document.createElement("input");if(u.add($),$.setAttribute("data-element-id",R),$.disabled=k.readOnly,this._setRequired($,this.data.required),$.type="radio",$.name=k.fieldName,z&&$.setAttribute("checked",!0),$.tabIndex=f,$.addEventListener("change",X=>{const{name:J,checked:ae}=X.target;for(const _e of this._getElementsByName(J,R))g.setValue(_e.id,{value:!1});g.setValue(R,{value:ae})}),$.addEventListener("resetform",X=>{const J=k.defaultFieldValue;X.target.checked=J!=null&&J===k.buttonValue}),this.enableScripting&&this.hasJSActions){const X=k.buttonValue;$.addEventListener("updatefromsandbox",J=>{const ae={value:_e=>{const ie=X===_e.detail.value;for(const le of this._getElementsByName(_e.target.name)){const ue=ie&&le.id===R;le.domElement&&(le.domElement.checked=ue),g.setValue(le.id,{value:ue})}}};this._dispatchEventFromSandbox(ae,J)}),this._setEventListeners($,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)}return this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class m extends P{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(g.title=this.data.alternativeText);const k=g.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",R=>{this._dispatchEventFromSandbox({},R)})),g}}class D extends v{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,k=this.data.id,R=g.getValue(k,{value:this.data.fieldValue}),z=document.createElement("select");u.add(z),z.setAttribute("data-element-id",k),z.disabled=this.data.readOnly,this._setRequired(z,this.data.required),z.name=this.data.fieldName,z.tabIndex=f;let $=this.data.combo&&this.data.options.length>0;this.data.combo||(z.size=this.data.options.length,this.data.multiSelect&&(z.multiple=!0)),z.addEventListener("resetform",ie=>{const le=this.data.defaultFieldValue;for(const ue of z.options)ue.selected=ue.value===le});for(const ie of this.data.options){const le=document.createElement("option");le.textContent=ie.displayValue,le.value=ie.exportValue,R.value.includes(ie.exportValue)&&(le.setAttribute("selected",!0),$=!1),z.append(le)}let X=null;if($){const ie=document.createElement("option");ie.value=" ",ie.setAttribute("hidden",!0),ie.setAttribute("selected",!0),z.prepend(ie),X=()=>{ie.remove(),z.removeEventListener("input",X),X=null},z.addEventListener("input",X)}const J=ie=>{const le=ie?"value":"textContent",{options:ue,multiple:pe}=z;return pe?Array.prototype.filter.call(ue,ge=>ge.selected).map(ge=>ge[le]):ue.selectedIndex===-1?null:ue[ue.selectedIndex][le]};let ae=J(!1);const _e=ie=>{const le=ie.target.options;return Array.prototype.map.call(le,ue=>({displayValue:ue.textContent,exportValue:ue.value}))};return this.enableScripting&&this.hasJSActions?(z.addEventListener("updatefromsandbox",ie=>{const le={value(ue){X?.();const pe=ue.detail.value,ge=new Set(Array.isArray(pe)?pe:[pe]);for(const Ee of z.options)Ee.selected=ge.has(Ee.value);g.setValue(k,{value:J(!0)}),ae=J(!1)},multipleSelection(ue){z.multiple=!0},remove(ue){const pe=z.options,ge=ue.detail.remove;pe[ge].selected=!1,z.remove(ge),pe.length>0&&Array.prototype.findIndex.call(pe,be=>be.selected)===-1&&(pe[0].selected=!0),g.setValue(k,{value:J(!0),items:_e(ue)}),ae=J(!1)},clear(ue){for(;z.length!==0;)z.remove(0);g.setValue(k,{value:null,items:[]}),ae=J(!1)},insert(ue){const{index:pe,displayValue:ge,exportValue:Ee}=ue.detail.insert,be=z.children[pe],Me=document.createElement("option");Me.textContent=ge,Me.value=Ee,be?be.before(Me):z.append(Me),g.setValue(k,{value:J(!0),items:_e(ue)}),ae=J(!1)},items(ue){const{items:pe}=ue.detail;for(;z.length!==0;)z.remove(0);for(const ge of pe){const{displayValue:Ee,exportValue:be}=ge,Me=document.createElement("option");Me.textContent=Ee,Me.value=be,z.append(Me)}z.options.length>0&&(z.options[0].selected=!0),g.setValue(k,{value:J(!0),items:_e(ue)}),ae=J(!1)},indices(ue){const pe=new Set(ue.detail.indices);for(const ge of ue.target.options)ge.selected=pe.has(ge.index);g.setValue(k,{value:J(!0)}),ae=J(!1)},editable(ue){ue.target.disabled=!ue.detail.editable}};this._dispatchEventFromSandbox(le,ie)}),z.addEventListener("input",ie=>{const le=J(!0);g.setValue(k,{value:le}),ie.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:ae,changeEx:le,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(z,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ie=>ie.target.value)):z.addEventListener("input",function(ie){g.setValue(k,{value:J(!0)})}),this.data.combo&&this._setTextStyle(z),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class j extends h{constructor(g){const{data:k,elements:R}=g;super(g,{isRenderable:h._hasPopupData(k)}),this.elements=R}render(){this.container.classList.add("popupAnnotation");const g=new N({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),k=[];for(const R of this.elements)R.popup=g,k.push(R.data.id),R.addHighlightArea();return this.container.setAttribute("aria-controls",k.map(R=>`${d.AnnotationPrefix}${R}`).join(",")),this.container}}class N{#e=null;#t=this.#u.bind(this);#n=this.#A.bind(this);#r=this.#E.bind(this);#a=this.#v.bind(this);#o=null;#s=null;#l=null;#c=null;#i=null;#f=null;#h=!1;#d=null;#p=null;#y=null;#m=null;#g=!1;constructor({container:g,color:k,elements:R,titleObj:z,modificationDate:$,contentsObj:X,richText:J,parent:ae,rect:_e,parentRect:ie,open:le}){this.#s=g,this.#m=z,this.#l=X,this.#y=J,this.#i=ae,this.#o=k,this.#p=_e,this.#f=ie,this.#c=R;const ue=S.PDFDateString.toDateObject($);ue&&(this.#e=ae.l10n.get("annotation_date_string",{date:ue.toLocaleDateString(),time:ue.toLocaleTimeString()})),this.trigger=R.flatMap(pe=>pe.getElementsToTriggerPopup());for(const pe of this.trigger)pe.addEventListener("click",this.#a),pe.addEventListener("mouseenter",this.#r),pe.addEventListener("mouseleave",this.#n),pe.classList.add("popupTriggerArea");for(const pe of R)pe.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,le&&this.#v()}render(){if(this.#d)return;const{page:{view:g},viewport:{rawDims:{pageWidth:k,pageHeight:R,pageX:z,pageY:$}}}=this.#i,X=this.#d=document.createElement("div");if(X.className="popup",this.#o){const Oe=X.style.outlineColor=d.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?X.style.backgroundColor=`color-mix(in srgb, ${Oe} 30%, white)`:X.style.backgroundColor=d.Util.makeHexColor(...this.#o.map(ot=>Math.floor(.7*(255-ot)+ot)))}const J=document.createElement("span");J.className="header";const ae=document.createElement("h1");if(J.append(ae),{dir:ae.dir,str:ae.textContent}=this.#m,X.append(J),this.#e){const Oe=document.createElement("span");Oe.classList.add("popupDate"),this.#e.then(Ne=>{Oe.textContent=Ne}),J.append(Oe)}const _e=this.#l,ie=this.#y;if(ie?.str&&(!_e?.str||_e.str===ie.str))W.XfaLayer.render({xfaHtml:ie.html,intent:"richText",div:X}),X.lastChild.classList.add("richText","popupContent");else{const Oe=this._formatContents(_e);X.append(Oe)}let le=!!this.#f,ue=le?this.#f:this.#p;for(const Oe of this.#c)if(!ue||d.Util.intersect(Oe.data.rect,ue)!==null){ue=Oe.data.rect,le=!0;break}const pe=d.Util.normalizeRect([ue[0],g[3]-ue[1]+g[1],ue[2],g[3]-ue[3]+g[1]]),Ee=le?ue[2]-ue[0]+5:0,be=pe[0]+Ee,Me=pe[1],{style:Le}=this.#s;Le.left=`${100*(be-z)/k}%`,Le.top=`${100*(Me-$)/R}%`,this.#s.append(X)}_formatContents({str:g,dir:k}){const R=document.createElement("p");R.classList.add("popupContent"),R.dir=k;const z=g.split(/(?:\r\n?|\n)/);for(let $=0,X=z.length;$<X;++$){const J=z[$];R.append(document.createTextNode(J)),$<X-1&&R.append(document.createElement("br"))}return R}#u(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&this.#h)&&this.#v()}#v(){this.#h=!this.#h,this.#h?(this.#E(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#A(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#E(){this.#d||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#A(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Q extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=d.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const k of this.textContent){const R=document.createElement("span");R.textContent=k,g.append(R)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}l.FreeTextAnnotationElement=Q;class K extends h{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const g=this.data,{width:k,height:R}=E(g.rect),z=this.svgFactory.create(k,R,!0),$=this.#e=this.svgFactory.createElement("svg:line");return $.setAttribute("x1",g.rect[2]-g.lineCoordinates[0]),$.setAttribute("y1",g.rect[3]-g.lineCoordinates[1]),$.setAttribute("x2",g.rect[2]-g.lineCoordinates[2]),$.setAttribute("y2",g.rect[3]-g.lineCoordinates[3]),$.setAttribute("stroke-width",g.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),z.append($),this.container.append(z),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class fe extends h{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const g=this.data,{width:k,height:R}=E(g.rect),z=this.svgFactory.create(k,R,!0),$=g.borderStyle.width,X=this.#e=this.svgFactory.createElement("svg:rect");return X.setAttribute("x",$/2),X.setAttribute("y",$/2),X.setAttribute("width",k-$),X.setAttribute("height",R-$),X.setAttribute("stroke-width",$||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),z.append(X),this.container.append(z),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class se extends h{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const g=this.data,{width:k,height:R}=E(g.rect),z=this.svgFactory.create(k,R,!0),$=g.borderStyle.width,X=this.#e=this.svgFactory.createElement("svg:ellipse");return X.setAttribute("cx",k/2),X.setAttribute("cy",R/2),X.setAttribute("rx",k/2-$/2),X.setAttribute("ry",R/2-$/2),X.setAttribute("stroke-width",$||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),z.append(X),this.container.append(z),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class de extends h{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const g=this.data,{width:k,height:R}=E(g.rect),z=this.svgFactory.create(k,R,!0);let $=[];for(const J of g.vertices){const ae=J.x-g.rect[0],_e=g.rect[3]-J.y;$.push(ae+","+_e)}$=$.join(" ");const X=this.#e=this.svgFactory.createElement(this.svgElementName);return X.setAttribute("points",$),X.setAttribute("stroke-width",g.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),z.append(X),this.container.append(z),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ye extends de{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ce extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class V extends h{#e=[];constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=d.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const g=this.data,{width:k,height:R}=E(g.rect),z=this.svgFactory.create(k,R,!0);for(const $ of g.inkLists){let X=[];for(const ae of $){const _e=ae.x-g.rect[0],ie=g.rect[3]-ae.y;X.push(`${_e},${ie}`)}X=X.join(" ");const J=this.svgFactory.createElement(this.svgElementName);this.#e.push(J),J.setAttribute("points",X),J.setAttribute("stroke-width",g.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),!g.popupRef&&this.hasPopupData&&this._createPopup(),z.append(J)}return this.container.append(z),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}l.InkAnnotationElement=V;class T extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class w extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _ extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class y extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class F extends h{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}l.StampAnnotationElement=F;class H extends h{#e=null;constructor(g){super(g,{isRenderable:!0});const{filename:k,content:R}=this.data.file;this.filename=(0,S.getFilenameFromUrl)(k,!0),this.content=R,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:k,content:R})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:g,data:k}=this;let R;k.hasAppearance||k.fillAlpha===0?R=document.createElement("div"):(R=document.createElement("img"),R.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(k.name)?"paperclip":"pushpin"}.svg`,k.fillAlpha&&k.fillAlpha<1&&(R.style=`filter: opacity(${Math.round(k.fillAlpha*100)}%);`)),R.addEventListener("dblclick",this.#t.bind(this)),this.#e=R;const{isMac:z}=d.FeatureTest.platform;return g.addEventListener("keydown",$=>{$.key==="Enter"&&(z?$.metaKey:$.ctrlKey)&&this.#t()}),!k.popupRef&&this.hasPopupData?this._createPopup():R.classList.add("popupTriggerArea"),g.append(R),g}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class q{#e=null;#t=null;#n=new Map;constructor({div:g,accessibilityManager:k,annotationCanvasMap:R,l10n:z,page:$,viewport:X}){this.div=g,this.#e=k,this.#t=R,this.l10n=z,this.page=$,this.viewport=X,this.zIndex=0,this.l10n||=G.NullL10n}#r(g,k){const R=g.firstChild||g;R.id=`${d.AnnotationPrefix}${k}`,this.div.append(g),this.#e?.moveElementInDOM(this.div,g,R,!1)}async render(g){const{annotations:k}=g,R=this.div;(0,S.setLayerDimensions)(R,this.viewport);const z=new Map,$={data:null,layer:R,linkService:g.linkService,downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new S.DOMSVGFactory,annotationStorage:g.annotationStorage||new B.AnnotationStorage,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const X of k){if(X.noHTML)continue;const J=X.annotationType===d.AnnotationType.POPUP;if(J){const ie=z.get(X.id);if(!ie)continue;$.elements=ie}else{const{width:ie,height:le}=E(X.rect);if(ie<=0||le<=0)continue}$.data=X;const ae=A.create($);if(!ae.isRenderable)continue;if(!J&&X.popupRef){const ie=z.get(X.popupRef);ie?ie.push(ae):z.set(X.popupRef,[ae])}ae.annotationEditorType>0&&this.#n.set(ae.data.id,ae);const _e=ae.render();X.hidden&&(_e.style.visibility="hidden"),this.#r(_e,X.id)}this.#a(),await this.l10n.translate(R)}update({viewport:g}){const k=this.div;this.viewport=g,(0,S.setLayerDimensions)(k,{rotation:g.rotation}),this.#a(),k.hidden=!1}#a(){if(!this.#t)return;const g=this.div;for(const[k,R]of this.#t){const z=g.querySelector(`[data-annotation-id="${k}"]`);if(!z)continue;const{firstChild:$}=z;$?$.nodeName==="CANVAS"?$.replaceWith(R):$.before(R):z.append(R)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(g){return this.#n.get(g)}}l.AnnotationLayer=q}),((C,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0;function x(B){return Math.floor(Math.max(0,Math.min(1,B))*255).toString(16).padStart(2,"0")}function d(B){return Math.max(0,Math.min(255,255*B))}class S{static CMYK_G([O,G,W,f]){return["G",1-Math.min(1,.3*O+.59*W+.11*G+f)]}static G_CMYK([O]){return["CMYK",0,0,0,1-O]}static G_RGB([O]){return["RGB",O,O,O]}static G_rgb([O]){return O=d(O),[O,O,O]}static G_HTML([O]){const G=x(O);return`#${G}${G}${G}`}static RGB_G([O,G,W]){return["G",.3*O+.59*G+.11*W]}static RGB_rgb(O){return O.map(d)}static RGB_HTML(O){return`#${O.map(x).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([O,G,W,f]){return["RGB",1-Math.min(1,O+f),1-Math.min(1,W+f),1-Math.min(1,G+f)]}static CMYK_rgb([O,G,W,f]){return[d(1-Math.min(1,O+f)),d(1-Math.min(1,W+f)),d(1-Math.min(1,G+f))]}static CMYK_HTML(O){const G=this.CMYK_RGB(O).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([O,G,W]){const f=1-O,s=1-G,u=1-W,E=Math.min(f,s,u);return["CMYK",f,s,u,E]}}l.ColorConverters=S}),((C,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NullL10n=void 0,l.getL10nFallback=d;const x={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};x.print_progress_percent="{{progress}}%";function d(O,G){switch(O){case"find_match_count":O=`find_match_count[${G.total===1?"one":"other"}]`;break;case"find_match_count_limit":O=`find_match_count_limit[${G.limit===1?"one":"other"}]`;break}return x[O]||""}function S(O,G){return G?O.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(W,f)=>f in G?G[f]:"{{"+f+"}}"):O}const B={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(O,G=null,W=d(O,G)){return S(W,G)},async translate(O){}};l.NullL10n=B}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var d=x(25);class S{static setupStorage(O,G,W,f,s){const u=f.getValue(G,{value:null});switch(W.name){case"textarea":if(u.value!==null&&(O.textContent=u.value),s==="print")break;O.addEventListener("input",E=>{f.setValue(G,{value:E.target.value})});break;case"input":if(W.attributes.type==="radio"||W.attributes.type==="checkbox"){if(u.value===W.attributes.xfaOn?O.setAttribute("checked",!0):u.value===W.attributes.xfaOff&&O.removeAttribute("checked"),s==="print")break;O.addEventListener("change",E=>{f.setValue(G,{value:E.target.checked?E.target.getAttribute("xfaOn"):E.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&O.setAttribute("value",u.value),s==="print")break;O.addEventListener("input",E=>{f.setValue(G,{value:E.target.value})})}break;case"select":if(u.value!==null){O.setAttribute("value",u.value);for(const E of W.children)E.attributes.value===u.value?E.attributes.selected=!0:E.attributes.hasOwnProperty("selected")&&delete E.attributes.selected}O.addEventListener("input",E=>{const A=E.target.options,h=A.selectedIndex===-1?"":A[A.selectedIndex].value;f.setValue(G,{value:h})});break}}static setAttributes({html:O,element:G,storage:W=null,intent:f,linkService:s}){const{attributes:u}=G,E=O instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${f}`);for(const[A,h]of Object.entries(u))if(h!=null)switch(A){case"class":h.length&&O.setAttribute(A,h.join(" "));break;case"dataId":break;case"id":O.setAttribute("data-element-id",h);break;case"style":Object.assign(O.style,h);break;case"textContent":O.textContent=h;break;default:(!E||A!=="href"&&A!=="newWindow")&&O.setAttribute(A,h)}E&&s.addLinkAttributes(O,u.href,u.newWindow),W&&u.dataId&&this.setupStorage(O,u.dataId,G,W)}static render(O){const G=O.annotationStorage,W=O.linkService,f=O.xfaHtml,s=O.intent||"display",u=document.createElement(f.name);f.attributes&&this.setAttributes({html:u,element:f,intent:s,linkService:W});const E=[[f,-1,u]],A=O.div;if(A.append(u),O.viewport){const P=`matrix(${O.viewport.transform.join(",")})`;A.style.transform=P}s!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const h=[];for(;E.length>0;){const[P,b,v]=E.at(-1);if(b+1===P.children.length){E.pop();continue}const I=P.children[++E.at(-1)[1]];if(I===null)continue;const{name:L}=I;if(L==="#text"){const o=document.createTextNode(I.value);h.push(o),v.append(o);continue}const a=I?.attributes?.xmlns?document.createElementNS(I.attributes.xmlns,L):document.createElement(L);if(v.append(a),I.attributes&&this.setAttributes({html:a,element:I,storage:G,intent:s,linkService:W}),I.children&&I.children.length>0)E.push([I,-1,a]);else if(I.value){const o=document.createTextNode(I.value);d.XfaText.shouldBuildText(L)&&h.push(o),a.append(o)}}for(const P of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))P.setAttribute("readOnly",!0);return{textDivs:h}}static update(O){const G=`matrix(${O.viewport.transform.join(",")})`;O.div.style.transform=G,O.div.hidden=!1}}l.XfaLayer=S}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InkEditor=void 0;var d=x(1),S=x(4),B=x(29),O=x(6),G=x(5);class W extends S.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#h=0;#d=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(s){super({...s,name:"inkEditor"}),this.color=s.color||null,this.thickness=s.thickness||null,this.opacity=s.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(s){S.AnnotationEditor.initialize(s,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(s,u){switch(s){case d.AnnotationEditorParamsType.INK_THICKNESS:W._defaultThickness=u;break;case d.AnnotationEditorParamsType.INK_COLOR:W._defaultColor=u;break;case d.AnnotationEditorParamsType.INK_OPACITY:W._defaultOpacity=u/100;break}}updateParams(s,u){switch(s){case d.AnnotationEditorParamsType.INK_THICKNESS:this.#y(u);break;case d.AnnotationEditorParamsType.INK_COLOR:this.#m(u);break;case d.AnnotationEditorParamsType.INK_OPACITY:this.#g(u);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,W._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,W._defaultColor||S.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(W._defaultOpacity*100)]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||W._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,this.color||W._defaultColor||S.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??W._defaultOpacity))]]}#y(s){const u=this.thickness;this.addCommands({cmd:()=>{this.thickness=s,this.#P()},undo:()=>{this.thickness=u,this.#P()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(s){const u=this.color;this.addCommands({cmd:()=>{this.color=s,this.#_()},undo:()=>{this.color=u,this.#_()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(s){s/=100;const u=this.opacity;this.addCommands({cmd:()=>{this.opacity=s,this.#_()},undo:()=>{this.opacity=u,this.#_()},mustExec:!0,type:d.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#k(),this.#R()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#P()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(s){!this.parent&&s?this._uiManager.removeShouldRescale(this):this.parent&&s===null&&this._uiManager.addShouldRescale(this),super.setParent(s)}onScaleChanging(){const[s,u]=this.parentDimensions,E=this.width*s,A=this.height*u;this.setDimensions(E,A)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:s,parentDimensions:[u,E]}=this;switch(s){case 90:return[0,E,E,u];case 180:return[u,E,u,E];case 270:return[u,0,E,u];default:return[0,0,u,E]}}#v(){const{ctx:s,color:u,opacity:E,thickness:A,parentScale:h,scaleFactor:P}=this;s.lineWidth=A*h/P,s.lineCap="round",s.lineJoin="round",s.miterLimit=10,s.strokeStyle=`${u}${(0,G.opacityToHex)(E)}`}#E(s,u){this.canvas.addEventListener("contextmenu",O.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#S(),this.thickness||=W._defaultThickness,this.color||=W._defaultColor||S.AnnotationEditor._defaultLineColor,this.opacity??=W._defaultOpacity),this.currentPath.push([s,u]),this.#c=!1,this.#v(),this.#p=()=>{this.#L(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#A(s,u){const[E,A]=this.currentPath.at(-1);if(this.currentPath.length>1&&s===E&&u===A)return;const h=this.currentPath;let P=this.#s;if(h.push([s,u]),this.#c=!0,h.length<=2){P.moveTo(...h[0]),P.lineTo(s,u);return}h.length===3&&(this.#s=P=new Path2D,P.moveTo(...h[0])),this.#I(P,...h.at(-3),...h.at(-2),s,u)}#b(){if(this.currentPath.length===0)return;const s=this.currentPath.at(-1);this.#s.lineTo(...s)}#C(s,u){this.#p=null,s=Math.min(Math.max(s,0),this.canvas.width),u=Math.min(Math.max(u,0),this.canvas.height),this.#A(s,u),this.#b();let E;if(this.currentPath.length!==1)E=this.#O();else{const v=[s,u];E=[[v,v.slice(),v.slice(),v]]}const A=this.#s,h=this.currentPath;this.currentPath=[],this.#s=new Path2D;const P=()=>{this.allRawPaths.push(h),this.paths.push(E),this.bezierPath2D.push(A),this.rebuild()},b=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#k(),this.#R()),this.#P())};this.addCommands({cmd:P,undo:b,mustExec:!0})}#L(){if(!this.#c)return;this.#c=!1;const s=Math.ceil(this.thickness*this.parentScale),u=this.currentPath.slice(-3),E=u.map(P=>P[0]),A=u.map(P=>P[1]);Math.min(...E)-s,Math.max(...E)+s,Math.min(...A)-s,Math.max(...A)+s;const{ctx:h}=this;h.save(),h.clearRect(0,0,this.canvas.width,this.canvas.height);for(const P of this.bezierPath2D)h.stroke(P);h.stroke(this.#s),h.restore()}#I(s,u,E,A,h,P,b){const v=(u+A)/2,I=(E+h)/2,L=(A+P)/2,a=(h+b)/2;s.bezierCurveTo(v+2*(A-v)/3,I+2*(h-I)/3,L+2*(A-L)/3,a+2*(h-a)/3,L,a)}#O(){const s=this.currentPath;if(s.length<=2)return[[s[0],s[0],s.at(-1),s.at(-1)]];const u=[];let E,[A,h]=s[0];for(E=1;E<s.length-2;E++){const[o,m]=s[E],[D,j]=s[E+1],N=(o+D)/2,Q=(m+j)/2,K=[A+2*(o-A)/3,h+2*(m-h)/3],fe=[N+2*(o-N)/3,Q+2*(m-Q)/3];u.push([[A,h],K,fe,[N,Q]]),[A,h]=[N,Q]}const[P,b]=s[E],[v,I]=s[E+1],L=[A+2*(P-A)/3,h+2*(b-h)/3],a=[v+2*(P-v)/3,I+2*(b-I)/3];return u.push([[A,h],L,a,[v,I]]),u}#_(){if(this.isEmpty()){this.#x();return}this.#v();const{canvas:s,ctx:u}=this;u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,s.width,s.height),this.#x();for(const E of this.bezierPath2D)u.stroke(E)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#P(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),this.enableEditMode())}canvasPointerdown(s){s.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),s.preventDefault(),s.type!=="mouse"&&this.div.focus(),this.#E(s.offsetX,s.offsetY))}canvasPointermove(s){s.preventDefault(),this.#A(s.offsetX,s.offsetY)}canvasPointerup(s){s.preventDefault(),this.#D(s)}canvasPointerleave(s){this.#D(s)}#D(s){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",O.noContextMenu)},10),this.#C(s.offsetX,s.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#k(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",S.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(s=>this.canvas?.setAttribute("aria-label",s)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#R(){this.#f=new ResizeObserver(s=>{const u=s[0].contentRect;u.width&&u.height&&this.setDimensions(u.width,u.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let s,u;this.width&&(s=this.x,u=this.y),super.render(),S.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(b=>this.div?.setAttribute("aria-label",b));const[E,A,h,P]=this.#u();if(this.setAt(E,A,0,0),this.setDims(h,P),this.#k(),this.width){const[b,v]=this.parentDimensions;this.setAspectRatio(this.width*b,this.height*v),this.setAt(s*b,u*v,this.width*b,this.height*v),this.#i=!0,this.#S(),this.setDims(this.width*b,this.height*v),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#R(),this.div}#S(){if(!this.#i)return;const[s,u]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*s),this.canvas.height=Math.ceil(this.height*u),this.#x()}setDimensions(s,u){const E=Math.round(s),A=Math.round(u);if(this.#h===E&&this.#d===A)return;this.#h=E,this.#d=A,this.canvas.style.visibility="hidden";const[h,P]=this.parentDimensions;this.width=s/h,this.height=u/P,this.fixAndSetPosition(),this.#l&&this.#T(s,u),this.#S(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#T(s,u){const E=this.#F(),A=(s-E)/this.#t,h=(u-E)/this.#e;this.scaleFactor=Math.min(A,h)}#x(){const s=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+s,this.translationY*this.scaleFactor+s)}static#N(s){const u=new Path2D;for(let E=0,A=s.length;E<A;E++){const[h,P,b,v]=s[E];E===0&&u.moveTo(...h),u.bezierCurveTo(P[0],P[1],b[0],b[1],v[0],v[1])}return u}static#B(s,u,E){const[A,h,P,b]=u;switch(E){case 0:for(let v=0,I=s.length;v<I;v+=2)s[v]+=A,s[v+1]=b-s[v+1];break;case 90:for(let v=0,I=s.length;v<I;v+=2){const L=s[v];s[v]=s[v+1]+A,s[v+1]=L+h}break;case 180:for(let v=0,I=s.length;v<I;v+=2)s[v]=P-s[v],s[v+1]+=h;break;case 270:for(let v=0,I=s.length;v<I;v+=2){const L=s[v];s[v]=P-s[v+1],s[v+1]=b-L}break;default:throw new Error("Invalid rotation")}return s}static#j(s,u,E){const[A,h,P,b]=u;switch(E){case 0:for(let v=0,I=s.length;v<I;v+=2)s[v]-=A,s[v+1]=b-s[v+1];break;case 90:for(let v=0,I=s.length;v<I;v+=2){const L=s[v];s[v]=s[v+1]-h,s[v+1]=L-A}break;case 180:for(let v=0,I=s.length;v<I;v+=2)s[v]=P-s[v],s[v+1]-=h;break;case 270:for(let v=0,I=s.length;v<I;v+=2){const L=s[v];s[v]=b-s[v+1],s[v+1]=P-L}break;default:throw new Error("Invalid rotation")}return s}#U(s,u,E,A){const h=[],P=this.thickness/2,b=s*u+P,v=s*E+P;for(const I of this.paths){const L=[],a=[];for(let o=0,m=I.length;o<m;o++){const[D,j,N,Q]=I[o],K=s*D[0]+b,fe=s*D[1]+v,se=s*j[0]+b,de=s*j[1]+v,ye=s*N[0]+b,ce=s*N[1]+v,V=s*Q[0]+b,T=s*Q[1]+v;o===0&&(L.push(K,fe),a.push(K,fe)),L.push(se,de,ye,ce,V,T),a.push(se,de),o===m-1&&a.push(V,T)}h.push({bezier:W.#B(L,A,this.rotation),points:W.#B(a,A,this.rotation)})}return h}#M(){let s=1/0,u=-1/0,E=1/0,A=-1/0;for(const h of this.paths)for(const[P,b,v,I]of h){const L=d.Util.bezierBoundingBox(...P,...b,...v,...I);s=Math.min(s,L[0]),E=Math.min(E,L[1]),u=Math.max(u,L[2]),A=Math.max(A,L[3])}return[s,E,u,A]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#P(s=!1){if(this.isEmpty())return;if(!this.#l){this.#_();return}const u=this.#M(),E=this.#F();this.#t=Math.max(S.AnnotationEditor.MIN_SIZE,u[2]-u[0]),this.#e=Math.max(S.AnnotationEditor.MIN_SIZE,u[3]-u[1]);const A=Math.ceil(E+this.#t*this.scaleFactor),h=Math.ceil(E+this.#e*this.scaleFactor),[P,b]=this.parentDimensions;this.width=A/P,this.height=h/b,this.setAspectRatio(A,h);const v=this.translationX,I=this.translationY;this.translationX=-u[0],this.translationY=-u[1],this.#S(),this.#_(),this.#h=A,this.#d=h,this.setDims(A,h);const L=s?E/this.scaleFactor/2:0;this.translate(v-this.translationX-L,I-this.translationY-L)}static deserialize(s,u,E){if(s instanceof B.InkAnnotationElement)return null;const A=super.deserialize(s,u,E);A.thickness=s.thickness,A.color=d.Util.makeHexColor(...s.color),A.opacity=s.opacity;const[h,P]=A.pageDimensions,b=A.width*h,v=A.height*P,I=A.parentScale,L=s.thickness/2;A.#l=!0,A.#h=Math.round(b),A.#d=Math.round(v);const{paths:a,rect:o,rotation:m}=s;for(let{bezier:j}of a){j=W.#j(j,o,m);const N=[];A.paths.push(N);let Q=I*(j[0]-L),K=I*(j[1]-L);for(let se=2,de=j.length;se<de;se+=6){const ye=I*(j[se]-L),ce=I*(j[se+1]-L),V=I*(j[se+2]-L),T=I*(j[se+3]-L),w=I*(j[se+4]-L),_=I*(j[se+5]-L);N.push([[Q,K],[ye,ce],[V,T],[w,_]]),Q=w,K=_}const fe=this.#N(N);A.bezierPath2D.push(fe)}const D=A.#M();return A.#t=Math.max(S.AnnotationEditor.MIN_SIZE,D[2]-D[0]),A.#e=Math.max(S.AnnotationEditor.MIN_SIZE,D[3]-D[1]),A.#T(b,v),A}serialize(){if(this.isEmpty())return null;const s=this.getRect(0,0),u=S.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:d.AnnotationEditorType.INK,color:u,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,s),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}l.InkEditor=W}),((C,l,x)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.StampEditor=void 0;var d=x(1),S=x(4),B=x(6),O=x(29);class G extends S.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#a=null;#o=null;#s=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(f){super({...f,name:"stampEditor"}),this.#r=f.bitmapUrl,this.#a=f.bitmapFile}static initialize(f){S.AnnotationEditor.initialize(f)}static get supportedTypes(){const f=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,d.shadow)(this,"supportedTypes",f.map(s=>`image/${s}`))}static get supportedTypesStr(){return(0,d.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(f){return this.supportedTypes.includes(f)}static paste(f,s){s.pasteEditor(d.AnnotationEditorType.STAMP,{bitmapFile:f.getAsFile()})}#f(f,s=!1){if(!f){this.remove();return}this.#e=f.bitmap,s||(this.#t=f.id,this.#c=f.isSvg),this.#p()}#h(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#d(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#f(s,!0)).finally(()=>this.#h());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(u=>this.#f(u)).finally(()=>this.#h());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(u=>this.#f(u)).finally(()=>this.#h());return}const f=document.createElement("input");f.type="file",f.accept=G.supportedTypesStr,this.#n=new Promise(s=>{f.addEventListener("change",async()=>{if(!f.files||f.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const u=await this._uiManager.imageManager.getFromFile(f.files[0]);this.#f(u)}s()}),f.addEventListener("cancel",()=>{this.remove(),s()})}).finally(()=>this.#h()),f.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#d();return}super.rebuild(),this.div!==null&&(this.#t&&this.#d(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let f,s;if(this.width&&(f=this.x,s=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#d(),this.width){const[u,E]=this.parentDimensions;this.setAt(f*u,s*E,this.width*u,this.height*E)}return this.div}#p(){const{div:f}=this;let{width:s,height:u}=this.#e;const[E,A]=this.pageDimensions,h=.75;if(this.width)s=this.width*E,u=this.height*A;else if(s>h*E||u>h*A){const I=Math.min(h*E/s,h*A/u);s*=I,u*=I}const[P,b]=this.parentDimensions;this.setDims(s*P/E,u*b/A),this._uiManager.enableWaiting(!1);const v=this.#o=document.createElement("canvas");f.append(v),f.hidden=!1,this.#g(s,u),this.#v(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(f,s){const[u,E]=this.parentDimensions;this.width=f/u,this.height=s/E,this.setDims(f,s),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const A=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(f,s)},A)}#m(f,s){const{width:u,height:E}=this.#e;let A=u,h=E,P=this.#e;for(;A>2*f||h>2*s;){const b=A,v=h;A>2*f&&(A=A>=16384?Math.floor(A/2)-1:Math.ceil(A/2)),h>2*s&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const I=new OffscreenCanvas(A,h);I.getContext("2d").drawImage(P,0,0,b,v,0,0,A,h),P=I.transferToImageBitmap()}return P}#g(f,s){f=Math.ceil(f),s=Math.ceil(s);const u=this.#o;if(!u||u.width===f&&u.height===s)return;u.width=f,u.height=s;const E=this.#c?this.#e:this.#m(f,s),A=u.getContext("2d");A.filter=this._uiManager.hcmFilter,A.drawImage(E,0,0,E.width,E.height,0,0,f,s)}#u(f){if(f){if(this.#c){const E=this._uiManager.imageManager.getSvgUrl(this.#t);if(E)return E}const s=document.createElement("canvas");return{width:s.width,height:s.height}=this.#e,s.getContext("2d").drawImage(this.#e,0,0),s.toDataURL()}if(this.#c){const[s,u]=this.pageDimensions,E=Math.round(this.width*s*B.PixelsPerInch.PDF_TO_CSS_UNITS),A=Math.round(this.height*u*B.PixelsPerInch.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(E,A);return h.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,E,A),h.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#s=new ResizeObserver(f=>{const s=f[0].contentRect;s.width&&s.height&&this.#y(s.width,s.height)}),this.#s.observe(this.div)}static deserialize(f,s,u){if(f instanceof O.StampAnnotationElement)return null;const E=super.deserialize(f,s,u),{rect:A,bitmapUrl:h,bitmapId:P,isSvg:b,accessibilityData:v}=f;P&&u.imageManager.isValidId(P)?E.#t=P:E.#r=h,E.#c=b;const[I,L]=E.pageDimensions;return E.width=(A[2]-A[0])/I,E.height=(A[3]-A[1])/L,v&&(E.altTextData=v),E}serialize(f=!1,s=null){if(this.isEmpty())return null;const u={annotationType:d.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(f)return u.bitmapUrl=this.#u(!0),u.accessibilityData=this.altTextData,u;const{decorative:E,altText:A}=this.altTextData;if(!E&&A&&(u.accessibilityData={type:"Figure",alt:A}),s===null)return u;s.stamps||=new Map;const h=this.#c?(u.rect[2]-u.rect[0])*(u.rect[3]-u.rect[1]):null;if(!s.stamps.has(this.#t))s.stamps.set(this.#t,{area:h,serialized:u}),u.bitmap=this.#u(!1);else if(this.#c){const P=s.stamps.get(this.#t);h>P.area&&(P.area=h,P.serialized.bitmap.close(),P.serialized.bitmap=this.#u(!1))}return u}}l.StampEditor=G})],__webpack_module_cache__={};function __w_pdfjs_require__(C){var l=__webpack_module_cache__[C];if(l!==void 0)return l.exports;var x=__webpack_module_cache__[C]={exports:{}};return __webpack_modules__[C](x,x.exports,__w_pdfjs_require__),x.exports}var __webpack_exports__={};return(()=>{var C=__webpack_exports__;Object.defineProperty(C,"__esModule",{value:!0}),Object.defineProperty(C,"AbortException",{enumerable:!0,get:function(){return l.AbortException}}),Object.defineProperty(C,"AnnotationEditorLayer",{enumerable:!0,get:function(){return B.AnnotationEditorLayer}}),Object.defineProperty(C,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return l.AnnotationEditorParamsType}}),Object.defineProperty(C,"AnnotationEditorType",{enumerable:!0,get:function(){return l.AnnotationEditorType}}),Object.defineProperty(C,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return O.AnnotationEditorUIManager}}),Object.defineProperty(C,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(C,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(C,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(C,"DOMSVGFactory",{enumerable:!0,get:function(){return d.DOMSVGFactory}}),Object.defineProperty(C,"FeatureTest",{enumerable:!0,get:function(){return l.FeatureTest}}),Object.defineProperty(C,"GlobalWorkerOptions",{enumerable:!0,get:function(){return W.GlobalWorkerOptions}}),Object.defineProperty(C,"ImageKind",{enumerable:!0,get:function(){return l.ImageKind}}),Object.defineProperty(C,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(C,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(C,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(C,"PDFDataRangeTransport",{enumerable:!0,get:function(){return x.PDFDataRangeTransport}}),Object.defineProperty(C,"PDFDateString",{enumerable:!0,get:function(){return d.PDFDateString}}),Object.defineProperty(C,"PDFWorker",{enumerable:!0,get:function(){return x.PDFWorker}}),Object.defineProperty(C,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(C,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(C,"PixelsPerInch",{enumerable:!0,get:function(){return d.PixelsPerInch}}),Object.defineProperty(C,"PromiseCapability",{enumerable:!0,get:function(){return l.PromiseCapability}}),Object.defineProperty(C,"RenderingCancelledException",{enumerable:!0,get:function(){return d.RenderingCancelledException}}),Object.defineProperty(C,"SVGGraphics",{enumerable:!0,get:function(){return x.SVGGraphics}}),Object.defineProperty(C,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(C,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(C,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(C,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(C,"build",{enumerable:!0,get:function(){return x.build}}),Object.defineProperty(C,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(C,"getDocument",{enumerable:!0,get:function(){return x.getDocument}}),Object.defineProperty(C,"getFilenameFromUrl",{enumerable:!0,get:function(){return d.getFilenameFromUrl}}),Object.defineProperty(C,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return d.getPdfFilenameFromUrl}}),Object.defineProperty(C,"getXfaPageViewport",{enumerable:!0,get:function(){return d.getXfaPageViewport}}),Object.defineProperty(C,"isDataScheme",{enumerable:!0,get:function(){return d.isDataScheme}}),Object.defineProperty(C,"isPdfFile",{enumerable:!0,get:function(){return d.isPdfFile}}),Object.defineProperty(C,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(C,"noContextMenu",{enumerable:!0,get:function(){return d.noContextMenu}}),Object.defineProperty(C,"normalizeUnicode",{enumerable:!0,get:function(){return l.normalizeUnicode}}),Object.defineProperty(C,"renderTextLayer",{enumerable:!0,get:function(){return S.renderTextLayer}}),Object.defineProperty(C,"setLayerDimensions",{enumerable:!0,get:function(){return d.setLayerDimensions}}),Object.defineProperty(C,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(C,"updateTextLayer",{enumerable:!0,get:function(){return S.updateTextLayer}}),Object.defineProperty(C,"version",{enumerable:!0,get:function(){return x.version}});var l=__w_pdfjs_require__(1),x=__w_pdfjs_require__(2),d=__w_pdfjs_require__(6),S=__w_pdfjs_require__(26),B=__w_pdfjs_require__(27),O=__w_pdfjs_require__(5),G=__w_pdfjs_require__(29),W=__w_pdfjs_require__(14),f=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1)),pdf$1.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=pdf;var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var C="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=C,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var C=requireReactPropTypesSecret();function l(){}function x(){}return x.resetWarningCache=l,factoryWithThrowingShims=function(){function d(O,G,W,f,s,u){if(u!==C){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}d.isRequired=d;function S(){return d}var B={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:S,element:d,elementType:d,instanceOf:S,node:d,objectOf:S,oneOf:S,oneOfType:S,shape:S,exact:S,checkPropTypes:x,resetWarningCache:l};return B.PropTypes=B,B},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(C,l,x){if(x||arguments.length===2)for(var d=0,S=l.length,B;d<S;d++)(B||!(d in l))&&(B||(B=Array.prototype.slice.call(l,0,d)),B[d]=l[d]);return C.concat(B||Array.prototype.slice.call(l))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(C,l){var x={};return allEvents.forEach(function(d){var S=C[d];S&&(l?x[d]=(function(B){return S(B,l(d))}):x[d]=S)}),x}function makeCancellablePromise(C){var l=!1,x=new Promise(function(d,S){C.then(function(B){return!l&&d(B)}).catch(function(B){return!l&&S(B)})});return{promise:x,cancel:function(){l=!0}}}function r(C){var l,x,d="";if(typeof C=="string"||typeof C=="number")d+=C;else if(typeof C=="object")if(Array.isArray(C)){var S=C.length;for(l=0;l<S;l++)C[l]&&(x=r(C[l]))&&(d&&(d+=" "),d+=x)}else for(x in C)C[x]&&(d&&(d+=" "),d+=x);return d}function clsx(){for(var C,l,x=0,d="",S=arguments.length;x<S;x++)(C=arguments[x])&&(l=r(C))&&(d&&(d+=" "),d+=l);return d}var prefix="Invariant failed";function invariant(C,l){if(!C)throw new Error(prefix)}var warning_1,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning_1;hasRequiredWarning=1;var C=function(){};return warning_1=C,warning_1}var warningExports=requireWarning();const warning=getDefaultExportFromCjs(warningExports);var has=Object.prototype.hasOwnProperty;function find(C,l,x){for(x of C.keys())if(dequal(x,l))return x}function dequal(C,l){var x,d,S;if(C===l)return!0;if(C&&l&&(x=C.constructor)===l.constructor){if(x===Date)return C.getTime()===l.getTime();if(x===RegExp)return C.toString()===l.toString();if(x===Array){if((d=C.length)===l.length)for(;d--&&dequal(C[d],l[d]););return d===-1}if(x===Set){if(C.size!==l.size)return!1;for(d of C)if(S=d,S&&typeof S=="object"&&(S=find(l,S),!S)||!l.has(S))return!1;return!0}if(x===Map){if(C.size!==l.size)return!1;for(d of C)if(S=d[0],S&&typeof S=="object"&&(S=find(l,S),!S)||!dequal(d[1],l.get(S)))return!1;return!0}if(x===ArrayBuffer)C=new Uint8Array(C),l=new Uint8Array(l);else if(x===DataView){if((d=C.byteLength)===l.byteLength)for(;d--&&C.getInt8(d)===l.getInt8(d););return d===-1}if(ArrayBuffer.isView(C)){if((d=C.byteLength)===l.byteLength)for(;d--&&C[d]===l[d];);return d===-1}if(!x||typeof C=="object"){d=0;for(x in C)if(has.call(C,x)&&++d&&!has.call(l,x)||!(x in l)||!dequal(C[x],l[x]))return!1;return Object.keys(l).length===d}}return C!==C&&l!==l}const DocumentContext=reactExports.createContext(null);function Message({children:C,type:l}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${l}`},C)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(l){this.pdfDocument=l}setViewer(l){this.pdfViewer=l}setExternalLinkRel(l){this.externalLinkRel=l}setExternalLinkTarget(l){this.externalLinkTarget=l}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(l){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=l}get rotation(){return 0}set rotation(l){}goToDestination(l){return new Promise(x=>{invariant(this.pdfDocument),invariant(l),typeof l=="string"?this.pdfDocument.getDestination(l).then(x):Array.isArray(l)?x(l):l.then(x)}).then(x=>{invariant(Array.isArray(x));const d=x[0];new Promise(S=>{invariant(this.pdfDocument),d instanceof Object?this.pdfDocument.getPageIndex(d).then(B=>{S(B)}).catch(()=>{invariant(!1)}):typeof d=="number"?S(d):invariant(!1)}).then(S=>{const B=S+1;invariant(this.pdfViewer),invariant(B>=1&&B<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:x,pageIndex:S,pageNumber:B})})})}navigateTo(l){this.goToDestination(l)}goToPage(l){const x=l-1;invariant(this.pdfViewer),invariant(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:x,pageNumber:l})}addLinkAttributes(l,x,d){l.href=x,l.rel=this.externalLinkRel||DEFAULT_LINK_REL,l.target=d?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(C){return typeof C<"u"}function isProvided(C){return isDefined(C)&&C!==null}function isString(C){return typeof C=="string"}function isArrayBuffer(C){return C instanceof ArrayBuffer}function isBlob(C){return invariant(isBrowser),C instanceof Blob}function isDataURI(C){return isString(C)&&/^data:/.test(C)}function dataURItoByteString(C){invariant(isDataURI(C));const[l="",x=""]=C.split(",");return l.split(";").indexOf("base64")!==-1?atob(x):unescape(x)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(C){C&&C.cancel&&C.cancel()}function makePageCallback(C,l){return Object.defineProperty(C,"width",{get(){return this.view[2]*l},configurable:!0}),Object.defineProperty(C,"height",{get(){return this.view[3]*l},configurable:!0}),Object.defineProperty(C,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(C,"originalHeight",{get(){return this.view[3]},configurable:!0}),C}function isCancelException(C){return C.name==="RenderingCancelledException"}function loadFromFile(C){return new Promise((l,x)=>{const d=new FileReader;d.onload=()=>{if(!d.result)return x(new Error("Error while reading a file."));l(d.result)},d.onerror=S=>{if(!S.target)return x(new Error("Error while reading a file."));const{error:B}=S.target;if(!B)return x(new Error("Error while reading a file."));switch(B.code){case B.NOT_FOUND_ERR:return x(new Error("Error while reading a file: File not found."));case B.SECURITY_ERR:return x(new Error("Error while reading a file: Security error."));case B.ABORT_ERR:return x(new Error("Error while reading a file: Aborted."));default:return x(new Error("Error while reading a file."))}},d.readAsArrayBuffer(C)})}function reducer(C,l){switch(l.type){case"RESOLVE":return{value:l.value,error:void 0};case"REJECT":return{value:!1,error:l.error};case"RESET":return{value:void 0,error:void 0};default:return C}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const C={};return allEvents.forEach(l=>{C[l]=PropTypes.func}),C})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function C(l,x,d){const{[x]:S,pageNumber:B,pdf:O}=l;if(!isDefined(O))return null;if(isDefined(S)){if(typeof S!="number")return new Error(`\`${x}\` of type \`${typeof S}\` supplied to \`${d}\`, expected \`number\`.`);if(S<0)return new Error(`Expected \`${x}\` to be greater or equal to 0.`);const{numPages:G}=O;if(S+1>G)return new Error(`Expected \`${x}\` to be less or equal to ${G-1}.`)}else if(!isDefined(B))return new Error(`\`${x}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},isPageNumber=function C(l,x,d){const{[x]:S,pageIndex:B,pdf:O}=l;if(!isDefined(O))return null;if(isDefined(S)){if(typeof S!="number")return new Error(`\`${x}\` of type \`${typeof S}\` supplied to \`${d}\`, expected \`number\`.`);if(S<1)return new Error(`Expected \`${x}\` to be greater or equal to 1.`);const{numPages:G}=O;if(S>G)return new Error(`Expected \`${x}\` to be less or equal to ${G}.`)}else if(!isDefined(B))return new Error(`\`${x}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${d}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(C,l,x,d){function S(B){return B instanceof x?B:new x(function(O){O(B)})}return new(x||(x=Promise))(function(B,O){function G(s){try{f(d.next(s))}catch(u){O(u)}}function W(s){try{f(d.throw(s))}catch(u){O(u)}}function f(s){s.done?B(s.value):S(s.value).then(G,W)}f((d=d.apply(C,l||[])).next())})},__rest$1=function(C,l){var x={};for(var d in C)Object.prototype.hasOwnProperty.call(C,d)&&l.indexOf(d)<0&&(x[d]=C[d]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,d=Object.getOwnPropertySymbols(C);S<d.length;S++)l.indexOf(d[S])<0&&Object.prototype.propertyIsEnumerable.call(C,d[S])&&(x[d[S]]=C[d[S]]);return x};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(C,l)=>{switch(l){case PasswordResponses.NEED_PASSWORD:{const x=prompt("Enter the password to open this PDF file.");C(x);break}case PasswordResponses.INCORRECT_PASSWORD:{const x=prompt("Invalid password. Please try again.");C(x);break}}};function isParameterObject(C){return typeof C=="object"&&C!==null&&("data"in C||"range"in C||"url"in C)}const Document=reactExports.forwardRef(function C(l,x){var{children:d,className:S,error:B="Failed to load PDF file.",externalLinkRel:O,externalLinkTarget:G,file:W,inputRef:f,imageResourcesPath:s,loading:u="Loading PDF",noData:E="No PDF file specified.",onItemClick:A,onLoadError:h,onLoadProgress:P,onLoadSuccess:b,onPassword:v=defaultOnPassword,onSourceError:I,onSourceSuccess:L,options:a,renderMode:o,rotate:m}=l,D=__rest$1(l,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[j,N]=useResolver(),{value:Q,error:K}=j,[fe,se]=useResolver(),{value:de,error:ye}=fe,ce=reactExports.useRef(new LinkService),V=reactExports.useRef([]),T=reactExports.useRef(),w=reactExports.useRef();reactExports.useEffect(()=>{W&&W!==T.current&&isParameterObject(W)&&(warning(!dequal(W,T.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),T.current=W)},[W]),reactExports.useEffect(()=>{a&&a!==w.current&&(warning(!dequal(a,w.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),w.current=a)},[a]);const _=reactExports.useRef({scrollPageIntoView:le=>{const{dest:ue,pageNumber:pe,pageIndex:ge=pe-1}=le;if(A){A({dest:ue,pageIndex:ge,pageNumber:pe});return}const Ee=V.current[ge];if(Ee){Ee.scrollIntoView();return}warning(!1,`An internal link leading to page ${pe} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(x,()=>({linkService:ce,pages:V,viewer:_}),[]);function y(){L&&L()}function F(){K&&(warning(!1,K.toString()),I&&I(K))}function H(){N({type:"RESET"})}reactExports.useEffect(H,[W,N]);const q=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!W)return null;if(typeof W=="string")return isDataURI(W)?{data:dataURItoByteString(W)}:(displayCORSWarning(),{url:W});if(W instanceof PDFDataRangeTransport)return{range:W};if(isArrayBuffer(W))return{data:W};if(isBrowser&&isBlob(W))return{data:yield loadFromFile(W)};if(invariant(typeof W=="object"),invariant(isParameterObject(W)),"url"in W&&typeof W.url=="string"){if(isDataURI(W.url)){const{url:le}=W,ue=__rest$1(W,["url"]),pe=dataURItoByteString(le);return Object.assign({data:pe},ue)}displayCORSWarning()}return W}),[W]);reactExports.useEffect(()=>{const le=makeCancellablePromise(q());return le.promise.then(ue=>{N({type:"RESOLVE",value:ue})}).catch(ue=>{N({type:"REJECT",error:ue})}),()=>{cancelRunningTask(le)}},[q,N]),reactExports.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){F();return}y()}},[Q]);function U(){de&&(b&&b(de),V.current=new Array(de.numPages),ce.current.setDocument(de))}function g(){ye&&(warning(!1,ye.toString()),h&&h(ye))}function k(){se({type:"RESET"})}reactExports.useEffect(k,[se,Q]);function R(){if(!Q)return;const le=Object.assign(Object.assign({},a),{isEvalSupported:!1}),ue=Object.assign(Object.assign({},Q),le),pe=pdfjs.getDocument(ue);P&&(pe.onProgress=P),v&&(pe.onPassword=v);const ge=pe;return ge.promise.then(Ee=>{se({type:"RESOLVE",value:Ee})}).catch(Ee=>{ge.destroyed||se({type:"REJECT",error:Ee})}),()=>{ge.destroy()}}reactExports.useEffect(R,[a,se,Q]),reactExports.useEffect(()=>{if(!(typeof de>"u")){if(de===!1){g();return}U()}},[de]);function z(){ce.current.setViewer(_.current),ce.current.setExternalLinkRel(O),ce.current.setExternalLinkTarget(G)}reactExports.useEffect(z,[O,G]);function $(le,ue){V.current[le]=ue}function X(le){delete V.current[le]}const J=reactExports.useMemo(()=>({imageResourcesPath:s,linkService:ce.current,onItemClick:A,pdf:de,registerPage:$,renderMode:o,rotate:m,unregisterPage:X}),[s,A,de,o,m]),ae=reactExports.useMemo(()=>makeEventProps(D,()=>de),[D,de]);function _e(){return React.createElement(DocumentContext.Provider,{value:J},d)}function ie(){return W?de==null?React.createElement(Message,{type:"loading"},typeof u=="function"?u():u):de===!1?React.createElement(Message,{type:"error"},typeof B=="function"?B():B):_e():React.createElement(Message,{type:"no-data"},typeof E=="function"?E():E)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",S),ref:f,style:{"--scale-factor":"1"}},ae),ie())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var C=[],l=0;l<arguments.length;l++)C[l]=arguments[l];var x=C.filter(Boolean);if(x.length<=1){var d=x[0];return d||null}return function(B){x.forEach(function(O){typeof O=="function"?O(B):O&&(O.current=B)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(C){return C in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(C){return"children"in C}function isStructTreeNodeWithOnlyContentChild(C){return isStructTreeNode(C)?C.children.length===1&&0 in C.children&&"id"in C.children[0]:!1}function getRoleAttributes(C){const l={};if(isStructTreeNode(C)){const{role:x}=C,d=x.match(HEADING_PATTERN);if(d)l.role="heading",l["aria-level"]=Number(d[1]);else if(isPdfRole(x)){const S=PDF_ROLE_TO_HTML_ROLE[x];S&&(l.role=S)}}return l}function getBaseAttributes(C){const l={};if(isStructTreeNode(C)){if(C.alt!==void 0&&(l["aria-label"]=C.alt),C.lang!==void 0&&(l.lang=C.lang),isStructTreeNodeWithOnlyContentChild(C)){const[x]=C.children;if(x){const d=getBaseAttributes(x);return Object.assign(Object.assign({},l),d)}}}else"id"in C&&(l["aria-owns"]=C.id);return l}function getAttributes(C){return C?Object.assign(Object.assign({},getRoleAttributes(C)),getBaseAttributes(C)):null}function StructTreeItem({className:C,node:l}){const x=reactExports.useMemo(()=>getAttributes(l),[l]),d=reactExports.useMemo(()=>!isStructTreeNode(l)||isStructTreeNodeWithOnlyContentChild(l)?null:l.children.map((S,B)=>React.createElement(StructTreeItem,{key:B,node:S})),[l]);return React.createElement("span",Object.assign({className:C},x),d)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const C=usePageContext();invariant(C);const{onGetStructTreeError:l,onGetStructTreeSuccess:x}=C,[d,S]=useResolver(),{value:B,error:O}=d,{customTextRenderer:G,page:W}=C;function f(){B&&x&&x(B)}function s(){O&&(warning(!1,O.toString()),l&&l(O))}function u(){S({type:"RESET"})}reactExports.useEffect(u,[S,W]);function E(){if(G||!W)return;const A=makeCancellablePromise(W.getStructTree()),h=A;return A.promise.then(P=>{S({type:"RESOLVE",value:P})}).catch(P=>{S({type:"REJECT",error:P})}),()=>cancelRunningTask(h)}return reactExports.useEffect(E,[G,W,S]),reactExports.useEffect(()=>{if(B!==void 0){if(B===!1){s();return}f()}},[B]),B?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:B}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(C){const l=usePageContext();invariant(l);const x=Object.assign(Object.assign({},l),C),{_className:d,canvasBackground:S,devicePixelRatio:B=getDevicePixelRatio(),onRenderError:O,onRenderSuccess:G,page:W,renderForms:f,renderTextLayer:s,rotate:u,scale:E}=x,{canvasRef:A}=C;invariant(W);const h=reactExports.useRef(null);function P(){W&&G&&G(makePageCallback(W,E))}function b(o){isCancelException(o)||(warning(!1,o.toString()),O&&O(o))}const v=reactExports.useMemo(()=>W.getViewport({scale:E*B,rotation:u}),[B,W,u,E]),I=reactExports.useMemo(()=>W.getViewport({scale:E,rotation:u}),[W,u,E]);function L(){if(!W)return;W.cleanup();const{current:o}=h;if(!o)return;o.width=v.width,o.height=v.height,o.style.width=`${Math.floor(I.width)}px`,o.style.height=`${Math.floor(I.height)}px`,o.style.visibility="hidden";const m={annotationMode:f?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:v};S&&(m.background=S);const D=W.render(m),j=D;return D.promise.then(()=>{o.style.visibility="",P()}).catch(b),()=>cancelRunningTask(j)}reactExports.useEffect(L,[S,h,B,W,f,v,I]);const a=reactExports.useCallback(()=>{const{current:o}=h;o&&(o.width=0,o.height=0)},[h]);return reactExports.useEffect(()=>a,[a]),React.createElement("canvas",{className:`${d}__canvas`,dir:"ltr",ref:mergeRefs(A,h),style:{display:"block",userSelect:"none"}},s?React.createElement(StructTree,null):null)}function PageSVG(){const C=usePageContext();invariant(C);const{_className:l,onRenderSuccess:x,onRenderError:d,page:S,rotate:B,scale:O}=C;invariant(S);const[G,W]=useResolver(),{value:f,error:s}=G;function u(){S&&x&&x(makePageCallback(S,O))}function E(){s&&(isCancelException(s)||(warning(!1,s.toString()),d&&d(s)))}const A=reactExports.useMemo(()=>S.getViewport({scale:O,rotation:B}),[S,B,O]);function h(){W({type:"RESET"})}reactExports.useEffect(h,[S,W,A]);function P(){if(!S)return;const L=makeCancellablePromise(S.getOperatorList());return L.promise.then(a=>{new pdfjs.SVGGraphics(S.commonObjs,S.objs).getSVG(a,A).then(m=>{if(!(m instanceof SVGElement))throw new Error("getSVG returned unexpected result.");W({type:"RESOLVE",value:m})}).catch(m=>{W({type:"REJECT",error:m})})}).catch(a=>{W({type:"REJECT",error:a})}),()=>cancelRunningTask(L)}reactExports.useEffect(P,[S,W,A]),reactExports.useEffect(()=>{if(f!==void 0){if(f===!1){E();return}u()}},[f]);function b(L){if(!L||!f)return;L.firstElementChild||L.appendChild(f);const{width:a,height:o}=A;f.setAttribute("width",`${a}`),f.setAttribute("height",`${o}`)}const{width:v,height:I}=A;return React.createElement("div",{className:`${l}__svg`,ref:L=>b(L),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:v,height:I,userSelect:"none"}})}function isTextItem(C){return"str"in C}function TextLayer(){const C=usePageContext();invariant(C);const{customTextRenderer:l,onGetTextError:x,onGetTextSuccess:d,onRenderTextLayerError:S,onRenderTextLayerSuccess:B,page:O,pageIndex:G,pageNumber:W,rotate:f,scale:s}=C;invariant(O);const[u,E]=useResolver(),{value:A,error:h}=u,P=reactExports.useRef(null),b=reactExports.useRef();warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){A&&d&&d(A)}function I(){h&&(warning(!1,h.toString()),x&&x(h))}function L(){E({type:"RESET"})}reactExports.useEffect(L,[O,E]);function a(){if(!O)return;const K=makeCancellablePromise(O.getTextContent()),fe=K;return K.promise.then(se=>{E({type:"RESOLVE",value:se})}).catch(se=>{E({type:"REJECT",error:se})}),()=>cancelRunningTask(fe)}reactExports.useEffect(a,[O,E]),reactExports.useEffect(()=>{if(A!==void 0){if(A===!1){I();return}v()}},[A]);const o=reactExports.useCallback(()=>{B&&B()},[B]),m=reactExports.useCallback(K=>{warning(!1,K.toString()),S&&S(K)},[S]);function D(){const K=b.current;K&&K.classList.add("active")}function j(){const K=b.current;K&&K.classList.remove("active")}const N=reactExports.useMemo(()=>O.getViewport({scale:s,rotation:f}),[O,f,s]);function Q(){if(!O||!A)return;const{current:K}=P;if(!K)return;K.innerHTML="";const fe=O.streamTextContent({includeMarkedContent:!0}),se={container:K,textContentSource:fe,viewport:N},de=pdfjs.renderTextLayer(se),ye=de;return de.promise.then(()=>{const ce=document.createElement("div");ce.className="endOfContent",K.append(ce),b.current=ce;const V=K.querySelectorAll('[role="presentation"]');if(l){let T=0;A.items.forEach((w,_)=>{if(!isTextItem(w))return;const y=V[T];if(!y)return;const F=l(Object.assign({pageIndex:G,pageNumber:W,itemIndex:_},w));y.innerHTML=F,T+=w.str&&w.hasEOL?2:1})}o()}).catch(m),()=>cancelRunningTask(ye)}return reactExports.useLayoutEffect(Q,[l,m,o,O,G,W,A,N]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:D,ref:P})}function AnnotationLayer(){const C=useDocumentContext(),l=usePageContext();invariant(l);const x=Object.assign(Object.assign({},C),l),{imageResourcesPath:d,linkService:S,onGetAnnotationsError:B,onGetAnnotationsSuccess:O,onRenderAnnotationLayerError:G,onRenderAnnotationLayerSuccess:W,page:f,pdf:s,renderForms:u,rotate:E,scale:A=1}=x;invariant(s),invariant(f),invariant(S);const[h,P]=useResolver(),{value:b,error:v}=h,I=reactExports.useRef(null);warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){b&&O&&O(b)}function a(){v&&(warning(!1,v.toString()),B&&B(v))}function o(){P({type:"RESET"})}reactExports.useEffect(o,[P,f]);function m(){if(!f)return;const K=makeCancellablePromise(f.getAnnotations()),fe=K;return K.promise.then(se=>{P({type:"RESOLVE",value:se})}).catch(se=>{P({type:"REJECT",error:se})}),()=>{cancelRunningTask(fe)}}reactExports.useEffect(m,[P,f,u]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){a();return}L()}},[b]);function D(){W&&W()}function j(K){warning(!1,`${K}`),G&&G(K)}const N=reactExports.useMemo(()=>f.getViewport({scale:A,rotation:E}),[f,E,A]);function Q(){if(!s||!f||!S||!b)return;const{current:K}=I;if(!K)return;const fe=N.clone({dontFlip:!0}),se={accessibilityManager:null,annotationCanvasMap:null,div:K,l10n:null,page:f,viewport:fe},de={annotations:b,annotationStorage:s.annotationStorage,div:K,downloadManager:null,imageResourcesPath:d,linkService:S,page:f,renderForms:u,viewport:fe};K.innerHTML="";try{new pdfjs.AnnotationLayer(se).render(de),D()}catch(ye){j(ye)}return()=>{}}return reactExports.useEffect(Q,[b,d,S,f,u,N]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:I})}var __rest=function(C,l){var x={};for(var d in C)Object.prototype.hasOwnProperty.call(C,d)&&l.indexOf(d)<0&&(x[d]=C[d]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,d=Object.getOwnPropertySymbols(C);S<d.length;S++)l.indexOf(d[S])<0&&Object.prototype.propertyIsEnumerable.call(C,d[S])&&(x[d[S]]=C[d[S]]);return x};const defaultScale=1,Page=function C(l){const x=useDocumentContext(),d=Object.assign(Object.assign({},x),l),{_className:S="react-pdf__Page",_enableRegisterUnregisterPage:B=!0,canvasBackground:O,canvasRef:G,children:W,className:f,customRenderer:s,customTextRenderer:u,devicePixelRatio:E,error:A="Failed to load the page.",height:h,inputRef:P,loading:b="Loading page",noData:v="No page specified.",onGetAnnotationsError:I,onGetAnnotationsSuccess:L,onGetStructTreeError:a,onGetStructTreeSuccess:o,onGetTextError:m,onGetTextSuccess:D,onLoadError:j,onLoadSuccess:N,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:K,onRenderError:fe,onRenderSuccess:se,onRenderTextLayerError:de,onRenderTextLayerSuccess:ye,pageIndex:ce,pageNumber:V,pdf:T,registerPage:w,renderAnnotationLayer:_=!0,renderForms:y=!1,renderMode:F="canvas",renderTextLayer:H=!0,rotate:q,scale:U=defaultScale,unregisterPage:g,width:k}=d,R=__rest(d,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[z,$]=useResolver(),{value:X,error:J}=z,ae=reactExports.useRef(null);invariant(T);const _e=isProvided(V)?V-1:ce??null,ie=V??(isProvided(ce)?ce+1:null),le=q??(X?X.rotate:null),ue=reactExports.useMemo(()=>{if(!X)return null;let qt=1;const fn=U??defaultScale;if(k||h){const me=X.getViewport({scale:1,rotation:le});k?qt=k/me.width:h&&(qt=h/me.height)}return fn*qt},[h,X,le,U,k]);function pe(){return()=>{isProvided(_e)&&B&&g&&g(_e)}}reactExports.useEffect(pe,[B,T,_e,g]);function ge(){if(N){if(!X||!ue)return;N(makePageCallback(X,ue))}if(B&&w){if(!isProvided(_e)||!ae.current)return;w(_e,ae.current)}}function Ee(){J&&(warning(!1,J.toString()),j&&j(J))}function be(){$({type:"RESET"})}reactExports.useEffect(be,[$,T,_e]);function Me(){if(!T||!ie)return;const qt=makeCancellablePromise(T.getPage(ie)),fn=qt;return qt.promise.then(me=>{$({type:"RESOLVE",value:me})}).catch(me=>{$({type:"REJECT",error:me})}),()=>cancelRunningTask(fn)}reactExports.useEffect(Me,[$,T,_e,ie,w]),reactExports.useEffect(()=>{if(X!==void 0){if(X===!1){Ee();return}ge()}},[X,ue]);const Le=reactExports.useMemo(()=>X&&isProvided(_e)&&ie&&isProvided(le)&&isProvided(ue)?{_className:S,canvasBackground:O,customTextRenderer:u,devicePixelRatio:E,onGetAnnotationsError:I,onGetAnnotationsSuccess:L,onGetStructTreeError:a,onGetStructTreeSuccess:o,onGetTextError:m,onGetTextSuccess:D,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:K,onRenderError:fe,onRenderSuccess:se,onRenderTextLayerError:de,onRenderTextLayerSuccess:ye,page:X,pageIndex:_e,pageNumber:ie,renderForms:y,renderTextLayer:H,rotate:le,scale:ue}:null,[S,O,u,E,I,L,a,o,m,D,Q,K,fe,se,de,ye,X,_e,ie,y,H,le,ue]),Oe=reactExports.useMemo(()=>makeEventProps(R,()=>X&&(ue?makePageCallback(X,ue):void 0)),[R,X,ue]),Ne=`${_e}@${ue}/${le}`,ot=`${_e}/${le}`;function Ke(){switch(F){case"custom":return invariant(s),React.createElement(s,{key:`${Ne}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${ot}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Ne}_canvas`,canvasRef:G})}}function Pt(){return H?React.createElement(TextLayer,{key:`${Ne}_text`}):null}function tt(){return _?React.createElement(AnnotationLayer,{key:`${Ne}_annotations`}):null}function ut(){return React.createElement(PageContext.Provider,{value:Le},Ke(),Pt(),tt(),W)}function Bt(){return ie?T===null||X===void 0||X===null?React.createElement(Message,{type:"loading"},typeof b=="function"?b():b):T===!1||X===!1?React.createElement(Message,{type:"error"},typeof A=="function"?A():A):ut():React.createElement(Message,{type:"no-data"},typeof v=="function"?v():v)}return React.createElement("div",Object.assign({className:clsx(S,f),"data-page-number":ie,ref:mergeRefs(P,ae),style:{"--scale-factor":`${ue}`,backgroundColor:O||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Oe),Bt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;function Flipbook(){const[C,l]=reactExports.useState(null),[x,d]=reactExports.useState(null),B=window.innerHeight*.91,O=B/1.414;function G({numPages:s}){console.log(`Successfully loaded ${s} page(s)`),l(s)}function W(s){console.error("Error while loading PDF:",s),d("Failed to load PDF. Please try again.")}function f(){if(!C)return null;const s=Math.min(1e3,window.innerWidth-40),u=[];for(let E=1;E<=C;E++)u.push(jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"10px 0",backgroundColor:"white",marginBottom:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:jsxRuntimeExports.jsx(Page,{width:s,pageNumber:E,loading:jsxRuntimeExports.jsxs("div",{children:["Loading page ",E,"..."]}),renderTextLayer:!1,renderAnnotationLayer:!1})},`page-${E}`));return u}return x?jsxRuntimeExports.jsx("div",{className:"error-message",children:x}):jsxRuntimeExports.jsx("div",{className:"flipbook-container",children:jsxRuntimeExports.jsx(Document,{file:window.location.origin+"/template.pdf",onLoadSuccess:G,onLoadError:W,loading:jsxRuntimeExports.jsx("div",{children:"Loading PDF..."}),className:"modal-90w",children:jsxRuntimeExports.jsx(HTMLFlipBook,{width:O,height:B,minWidth:O,maxWidth:O,minHeight:B,maxHeight:B,size:"fixed",autoSize:!1,drawShadow:!0,flippingTime:1e3,usePortrait:!1,showCover:!0,startPage:0,useMouseEvents:!0,swipeDistance:30,showPageCorners:!0,disableFlipByClick:!1,children:f()})})})}function Header(){return jsxRuntimeExports.jsx("header",{className:"app-header",children:jsxRuntimeExports.jsx("h1",{children:"PDF Flipbook Viewer"})})}function App(){return jsxRuntimeExports.jsxs("div",{className:"app",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("main",{className:"app-content",children:jsxRuntimeExports.jsx(Flipbook,{})})]})}const container=document.getElementById("root"),root=clientExports.createRoot(container);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
